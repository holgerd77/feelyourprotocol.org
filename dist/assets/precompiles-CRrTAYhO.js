import{d as an,m as ks,l as Ps,n as Ys,j as De,o as Oe,g as Ce,t as mt,p as Yr,h as As,v as Lo,q as Ro,s as Uo,e as Cr,x as yc,F as Sr,k as Do,c as _c,y as Ec,z as Ai,A as wc,i as Ac}from"./index-C7w1sOAK.js";import{_ as Ho}from"./TooltipC.vue_vue_type_script_setup_true_lang-BfdoAx6I.js";import{r as Ic}from"./ArrowTopRightOnSquareIcon-BW3Gp79Q.js";const Or={name:"mainnet",chainId:1,defaultHardfork:"prague",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},depositContractAddress:"0x00000000219ab540356cBB839Cbe05303d7705Fa",hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{name:"paris",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeNetsplitBlock",block:null,forkHash:null},{name:"shanghai",block:null,timestamp:"1681338455",forkHash:"0xdce96c2d"},{name:"cancun",block:null,timestamp:"1710338135",forkHash:"0x9f3d2254"},{name:"prague",block:null,timestamp:"1746612311",forkHash:"0xc376cf8b"},{name:"osaka",block:null,timestamp:"1764798551",forkHash:"0x5167e2a6"},{name:"bpo1",block:null,timestamp:"1765290071",forkHash:"0xcba2a1c0"},{name:"bpo2",block:null,timestamp:"1767747671",forkHash:"0x07c9462e"}],bootstrapNodes:[{ip:"18.138.108.67",port:30303,id:"d860a01f9722d78051619d1e2351aba3f43f943f6f00718d1b9baa4101932a1f5011f16bb2b1bb35db20d6fe28fa0bf09636d26a87d31de9ec6203eeedb1f666",location:"ap-southeast-1-001",comment:"bootnode-aws-ap-southeast-1-001"},{ip:"3.209.45.79",port:30303,id:"22a8232c3abc76a16ae9d6c3b164f98775fe226f0917b0ca871128a74a8e9630b458460865bab457221f1d448dd9791d24c4e5d88786180ac185df813a68d4de",location:"us-east-1-001",comment:"bootnode-aws-us-east-1-001"},{ip:"65.108.70.101",port:30303,id:"2b252ab6a1d0f971d9722cb839a42cb81db019ba44c08754628ab4a823487071b5695317c8ccd085219c3a03af063495b2f1da8d18218da2d6a82981b45e6ffc",location:"eu-west-1-001",comment:"bootnode-hetzner-hel"},{ip:"157.90.35.166",port:30303,id:"4aeb4ab6c14b23e2c4cfdce879c04b0748a20d8e9b59e25ded2a08143e265c6c25936e74cbc8e641e3312ca288673d91f2f93f8e277de3cfa444ecdaaf982052",location:"eu-central-1-001",comment:"bootnode-hetzner-fsn"}],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]},ln=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Wn(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function _n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Me(e,...t){if(!Wn(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Mo(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");_n(e.outputLen),_n(e.blockLen)}function En(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Fo(e,t){Me(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Bc(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function gt(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Xs(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function dt(e,t){return e<<32-t|e>>>t}function Xn(e,t){return e<<t|e>>>32-t>>>0}const vc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Nc(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function Cc(e){for(let t=0;t<e.length;t++)e[t]=Nc(e[t]);return e}const Ii=vc?e=>e:Cc,$o=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Sc=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function St(e){if(Me(e),$o)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=Sc[e[n]];return t}const xt={_0:48,_9:57,A:65,F:70,a:97,f:102};function Bi(e){if(e>=xt._0&&e<=xt._9)return e-xt._0;if(e>=xt.A&&e<=xt.F)return e-(xt.A-10);if(e>=xt.a&&e<=xt.f)return e-(xt.a-10)}function Un(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if($o)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const s=new Uint8Array(n);for(let r=0,i=0;r<n;r++,i+=2){const o=Bi(e.charCodeAt(i)),a=Bi(e.charCodeAt(i+1));if(o===void 0||a===void 0){const c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}s[r]=o*16+a}return s}function jn(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Ls(e){return typeof e=="string"&&(e=jn(e)),Me(e),e}function he(...e){let t=0;for(let s=0;s<e.length;s++){const r=e[s];Me(r),t+=r.length}const n=new Uint8Array(t);for(let s=0,r=0;s<e.length;s++){const i=e[s];n.set(i,r),r+=i.length}return n}class Xr{}function Zn(e){const t=s=>e().update(Ls(s)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Rs(e=32){if(ln&&typeof ln.getRandomValues=="function")return ln.getRandomValues(new Uint8Array(e));if(ln&&typeof ln.randomBytes=="function")return Uint8Array.from(ln.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function Oc(e,t,n,s){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(n>>r&i),a=Number(n&i),c=s?4:0,f=s?0:4;e.setUint32(t+c,o,s),e.setUint32(t+f,a,s)}function Tc(e,t,n){return e&t^~e&n}function Gc(e,t,n){return e&t^e&n^t&n}class Jr extends Xr{constructor(t,n,s,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=s,this.isLE=r,this.buffer=new Uint8Array(t),this.view=Xs(this.buffer)}update(t){En(this),t=Ls(t),Me(t);const{view:n,buffer:s,blockLen:r}=this,i=t.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const c=Xs(t);for(;r<=i-o;o+=r)this.process(c,o);continue}s.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){En(this),Fo(t,this),this.finished=!0;const{buffer:n,view:s,blockLen:r,isLE:i}=this;let{pos:o}=this;n[o++]=128,gt(this.buffer.subarray(o)),this.padOffset>r-o&&(this.process(s,0),o=0);for(let u=o;u<r;u++)n[u]=0;Oc(s,r-8,BigInt(this.length*8),i),this.process(s,0);const a=Xs(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=c/4,l=this.get();if(f>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<f;u++)a.setUint32(4*u,l[u],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:s,length:r,finished:i,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=i,t.length=r,t.pos=a,r%n&&t.buffer.set(s),t}clone(){return this._cloneInto()}}const Lt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Te=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Ge=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Jn=BigInt(2**32-1),vi=BigInt(32);function kc(e,t=!1){return t?{h:Number(e&Jn),l:Number(e>>vi&Jn)}:{h:Number(e>>vi&Jn)|0,l:Number(e&Jn)|0}}function Vo(e,t=!1){const n=e.length;let s=new Uint32Array(n),r=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=kc(e[i],t);[s[i],r[i]]=[o,a]}return[s,r]}const Ni=(e,t,n)=>e>>>n,Ci=(e,t,n)=>e<<32-n|t>>>n,hn=(e,t,n)=>e>>>n|t<<32-n,mn=(e,t,n)=>e<<32-n|t>>>n,Qn=(e,t,n)=>e<<64-n|t>>>n-32,es=(e,t,n)=>e>>>n-32|t<<64-n,Pc=(e,t,n)=>e<<n|t>>>32-n,Lc=(e,t,n)=>t<<n|e>>>32-n,Rc=(e,t,n)=>t<<n-32|e>>>64-n,Uc=(e,t,n)=>e<<n-32|t>>>64-n;function yt(e,t,n,s){const r=(t>>>0)+(s>>>0);return{h:e+n+(r/2**32|0)|0,l:r|0}}const Dc=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Hc=(e,t,n,s)=>t+n+s+(e/2**32|0)|0,Mc=(e,t,n,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),Fc=(e,t,n,s,r)=>t+n+s+r+(e/2**32|0)|0,$c=(e,t,n,s,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0)+(r>>>0),Vc=(e,t,n,s,r,i)=>t+n+s+r+i+(e/2**32|0)|0,qc=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Rt=new Uint32Array(64);class zc extends Jr{constructor(t=32){super(64,t,8,!1),this.A=Lt[0]|0,this.B=Lt[1]|0,this.C=Lt[2]|0,this.D=Lt[3]|0,this.E=Lt[4]|0,this.F=Lt[5]|0,this.G=Lt[6]|0,this.H=Lt[7]|0}get(){const{A:t,B:n,C:s,D:r,E:i,F:o,G:a,H:c}=this;return[t,n,s,r,i,o,a,c]}set(t,n,s,r,i,o,a,c){this.A=t|0,this.B=n|0,this.C=s|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let u=0;u<16;u++,n+=4)Rt[u]=t.getUint32(n,!1);for(let u=16;u<64;u++){const d=Rt[u-15],h=Rt[u-2],p=dt(d,7)^dt(d,18)^d>>>3,g=dt(h,17)^dt(h,19)^h>>>10;Rt[u]=g+Rt[u-7]+p+Rt[u-16]|0}let{A:s,B:r,C:i,D:o,E:a,F:c,G:f,H:l}=this;for(let u=0;u<64;u++){const d=dt(a,6)^dt(a,11)^dt(a,25),h=l+d+Tc(a,c,f)+qc[u]+Rt[u]|0,g=(dt(s,2)^dt(s,13)^dt(s,22))+Gc(s,r,i)|0;l=f,f=c,c=a,a=o+h|0,o=i,i=r,r=s,s=h+g|0}s=s+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,l=l+this.H|0,this.set(s,r,i,o,a,c,f,l)}roundClean(){gt(Rt)}destroy(){this.set(0,0,0,0,0,0,0,0),gt(this.buffer)}}const qo=Vo(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Wc=qo[0],jc=qo[1],Ut=new Uint32Array(80),Dt=new Uint32Array(80);class zo extends Jr{constructor(t=64){super(128,t,16,!1),this.Ah=Ge[0]|0,this.Al=Ge[1]|0,this.Bh=Ge[2]|0,this.Bl=Ge[3]|0,this.Ch=Ge[4]|0,this.Cl=Ge[5]|0,this.Dh=Ge[6]|0,this.Dl=Ge[7]|0,this.Eh=Ge[8]|0,this.El=Ge[9]|0,this.Fh=Ge[10]|0,this.Fl=Ge[11]|0,this.Gh=Ge[12]|0,this.Gl=Ge[13]|0,this.Hh=Ge[14]|0,this.Hl=Ge[15]|0}get(){const{Ah:t,Al:n,Bh:s,Bl:r,Ch:i,Cl:o,Dh:a,Dl:c,Eh:f,El:l,Fh:u,Fl:d,Gh:h,Gl:p,Hh:g,Hl:m}=this;return[t,n,s,r,i,o,a,c,f,l,u,d,h,p,g,m]}set(t,n,s,r,i,o,a,c,f,l,u,d,h,p,g,m){this.Ah=t|0,this.Al=n|0,this.Bh=s|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=f|0,this.El=l|0,this.Fh=u|0,this.Fl=d|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(t,n){for(let E=0;E<16;E++,n+=4)Ut[E]=t.getUint32(n),Dt[E]=t.getUint32(n+=4);for(let E=16;E<80;E++){const A=Ut[E-15]|0,G=Dt[E-15]|0,U=hn(A,G,1)^hn(A,G,8)^Ni(A,G,7),P=mn(A,G,1)^mn(A,G,8)^Ci(A,G,7),H=Ut[E-2]|0,k=Dt[E-2]|0,W=hn(H,k,19)^Qn(H,k,61)^Ni(H,k,6),$=mn(H,k,19)^es(H,k,61)^Ci(H,k,6),M=Mc(P,$,Dt[E-7],Dt[E-16]),v=Fc(M,U,W,Ut[E-7],Ut[E-16]);Ut[E]=v|0,Dt[E]=M|0}let{Ah:s,Al:r,Bh:i,Bl:o,Ch:a,Cl:c,Dh:f,Dl:l,Eh:u,El:d,Fh:h,Fl:p,Gh:g,Gl:m,Hh:w,Hl:T}=this;for(let E=0;E<80;E++){const A=hn(u,d,14)^hn(u,d,18)^Qn(u,d,41),G=mn(u,d,14)^mn(u,d,18)^es(u,d,41),U=u&h^~u&g,P=d&p^~d&m,H=$c(T,G,P,jc[E],Dt[E]),k=Vc(H,w,A,U,Wc[E],Ut[E]),W=H|0,$=hn(s,r,28)^Qn(s,r,34)^Qn(s,r,39),M=mn(s,r,28)^es(s,r,34)^es(s,r,39),v=s&i^s&a^i&a,b=r&o^r&c^o&c;w=g|0,T=m|0,g=h|0,m=p|0,h=u|0,p=d|0,{h:u,l:d}=yt(f|0,l|0,k|0,W|0),f=a|0,l=c|0,a=i|0,c=o|0,i=s|0,o=r|0;const _=Dc(W,M,b);s=Hc(_,k,$,v),r=_|0}({h:s,l:r}=yt(this.Ah|0,this.Al|0,s|0,r|0)),{h:i,l:o}=yt(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=yt(this.Ch|0,this.Cl|0,a|0,c|0),{h:f,l}=yt(this.Dh|0,this.Dl|0,f|0,l|0),{h:u,l:d}=yt(this.Eh|0,this.El|0,u|0,d|0),{h,l:p}=yt(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:m}=yt(this.Gh|0,this.Gl|0,g|0,m|0),{h:w,l:T}=yt(this.Hh|0,this.Hl|0,w|0,T|0),this.set(s,r,i,o,a,c,f,l,u,d,h,p,g,m,w,T)}roundClean(){gt(Ut,Dt)}destroy(){gt(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Zc extends zo{constructor(){super(48),this.Ah=Te[0]|0,this.Al=Te[1]|0,this.Bh=Te[2]|0,this.Bl=Te[3]|0,this.Ch=Te[4]|0,this.Cl=Te[5]|0,this.Dh=Te[6]|0,this.Dl=Te[7]|0,this.Eh=Te[8]|0,this.El=Te[9]|0,this.Fh=Te[10]|0,this.Fl=Te[11]|0,this.Gh=Te[12]|0,this.Gl=Te[13]|0,this.Hh=Te[14]|0,this.Hl=Te[15]|0}}const Bn=Zn(()=>new zc),Kc=Zn(()=>new zo),Yc=Zn(()=>new Zc);class Wo extends Xr{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Mo(t);const s=Ls(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(s.length>r?t.create().update(s).digest():s);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),gt(i)}update(t){return En(this),this.iHash.update(t),this}digestInto(t){En(this),Me(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=r,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=s._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Qr=(e,t,n)=>new Wo(e,t).update(n).digest();Qr.create=(e,t)=>new Wo(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ei=BigInt(0),Tr=BigInt(1);function wn(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ti(e){if(!wn(e))throw new Error("Uint8Array expected")}function Dn(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function ts(e){const t=e.toString(16);return t.length&1?"0"+t:t}function jo(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?ei:BigInt("0x"+e)}const Zo=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Xc=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Hn(e){if(ti(e),Zo)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=Xc[e[n]];return t}const _t={_0:48,_9:57,A:65,F:70,a:97,f:102};function Si(e){if(e>=_t._0&&e<=_t._9)return e-_t._0;if(e>=_t.A&&e<=_t.F)return e-(_t.A-10);if(e>=_t.a&&e<=_t.f)return e-(_t.a-10)}function Is(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Zo)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const s=new Uint8Array(n);for(let r=0,i=0;r<n;r++,i+=2){const o=Si(e.charCodeAt(i)),a=Si(e.charCodeAt(i+1));if(o===void 0||a===void 0){const c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}s[r]=o*16+a}return s}function rn(e){return jo(Hn(e))}function Ko(e){return ti(e),jo(Hn(Uint8Array.from(e).reverse()))}function Mn(e,t){return Is(e.toString(16).padStart(t*2,"0"))}function Yo(e,t){return Mn(e,t).reverse()}function nt(e,t,n){let s;if(typeof t=="string")try{s=Is(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(wn(t))s=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const r=s.length;if(typeof n=="number"&&r!==n)throw new Error(e+" of length "+n+" expected, got "+r);return s}function Bs(...e){let t=0;for(let s=0;s<e.length;s++){const r=e[s];ti(r),t+=r.length}const n=new Uint8Array(t);for(let s=0,r=0;s<e.length;s++){const i=e[s];n.set(i,r),r+=i.length}return n}const Js=e=>typeof e=="bigint"&&ei<=e;function ni(e,t,n){return Js(e)&&Js(t)&&Js(n)&&t<=e&&e<n}function yn(e,t,n,s){if(!ni(t,n,s))throw new Error("expected valid "+e+": "+n+" <= n < "+s+", got "+t)}function Jc(e){let t;for(t=0;e>ei;e>>=Tr,t+=1);return t}const Us=e=>(Tr<<BigInt(e))-Tr,Qs=e=>new Uint8Array(e),Oi=e=>Uint8Array.from(e);function Qc(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let s=Qs(e),r=Qs(e),i=0;const o=()=>{s.fill(1),r.fill(0),i=0},a=(...u)=>n(r,s,...u),c=(u=Qs(0))=>{r=a(Oi([0]),u),s=a(),u.length!==0&&(r=a(Oi([1]),u),s=a())},f=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<t;){s=a();const h=s.slice();d.push(h),u+=s.length}return Bs(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(f()));)c();return o(),h}}const ef={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||wn(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Ds(e,t,n={}){const s=(r,i,o)=>{const a=ef[i];if(typeof a!="function")throw new Error("invalid validator function");const c=e[r];if(!(o&&c===void 0)&&!a(c,e))throw new Error("param "+String(r)+" is invalid. Expected "+i+", got "+c)};for(const[r,i]of Object.entries(t))s(r,i,!1);for(const[r,i]of Object.entries(n))s(r,i,!0);return e}function Ti(e){const t=new WeakMap;return(n,...s)=>{const r=t.get(n);if(r!==void 0)return r;const i=e(n,...s);return t.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ze=BigInt(0),He=BigInt(1),Jt=BigInt(2),tf=BigInt(3),Gr=BigInt(4),Gi=BigInt(5),ki=BigInt(8);function je(e,t){const n=e%t;return n>=Ze?n:t+n}function Xe(e,t,n){let s=e;for(;t-- >Ze;)s*=s,s%=n;return s}function kr(e,t){if(e===Ze)throw new Error("invert: expected non-zero number");if(t<=Ze)throw new Error("invert: expected positive modulus, got "+t);let n=je(e,t),s=t,r=Ze,i=He;for(;n!==Ze;){const a=s/n,c=s%n,f=r-i*a;s=n,n=c,r=i,i=f}if(s!==He)throw new Error("invert: does not exist");return je(r,t)}function nf(e){let t=e-He,n=0;for(;t%Jt===Ze;)t/=Jt,n++;let s=Jt;const r=si(e);for(;s<e&&Pi(r,s);)if(s++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1){const o=(e+He)/Gr;return function(c,f){const l=c.pow(f,o);if(!c.eql(c.sqr(l),f))throw new Error("Cannot find square root");return l}}const i=(t+He)/Jt;return function(a,c){if(!Pi(a,c))throw new Error("Cannot find square root");let f=n,l=a.pow(a.mul(a.ONE,s),t),u=a.pow(c,i),d=a.pow(c,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let h=1;for(let g=a.sqr(d);h<f&&!a.eql(g,a.ONE);h++)g=a.sqr(g);const p=a.pow(l,He<<BigInt(f-h-1));l=a.sqr(p),u=a.mul(u,p),d=a.mul(d,l),f=h}return u}}function sf(e){return e%Gr===tf?function(n,s){const r=(e+He)/Gr,i=n.pow(s,r);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}:e%ki===Gi?function(n,s){const r=n.mul(s,Jt),i=(e-Gi)/ki,o=n.pow(r,i),a=n.mul(s,o),c=n.mul(n.mul(a,Jt),o),f=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(f),s))throw new Error("Cannot find square root");return f}:nf(e)}const rf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function of(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=rf.reduce((s,r)=>(s[r]="function",s),t);return Ds(e,n)}function af(e,t,n){if(n<Ze)throw new Error("invalid exponent, negatives unsupported");if(n===Ze)return e.ONE;if(n===He)return t;let s=e.ONE,r=t;for(;n>Ze;)n&He&&(s=e.mul(s,r)),r=e.sqr(r),n>>=He;return s}function Xo(e,t,n=!1){const s=new Array(t.length).fill(n?e.ZERO:void 0),r=t.reduce((o,a,c)=>e.is0(a)?o:(s[c]=o,e.mul(o,a)),e.ONE),i=e.inv(r);return t.reduceRight((o,a,c)=>e.is0(a)?o:(s[c]=e.mul(o,s[c]),e.mul(o,a)),i),s}function cf(e,t){const n=(e.ORDER-He)/Jt,s=e.pow(t,n),r=e.eql(s,e.ONE),i=e.eql(s,e.ZERO),o=e.eql(s,e.neg(e.ONE));if(!r&&!i&&!o)throw new Error("Cannot find square root: probably non-prime P");return r?1:i?0:-1}function Pi(e,t){const n=cf(e,t);return n===0||n===1}function Jo(e,t){t!==void 0&&_n(t);const n=t!==void 0?t:e.toString(2).length,s=Math.ceil(n/8);return{nBitLength:n,nByteLength:s}}function si(e,t,n=!1,s={}){if(e<=Ze)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:r,nByteLength:i}=Jo(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:n,BITS:r,BYTES:i,MASK:Us(r),ZERO:Ze,ONE:He,create:c=>je(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Ze<=c&&c<e},is0:c=>c===Ze,isOdd:c=>(c&He)===He,neg:c=>je(-c,e),eql:(c,f)=>c===f,sqr:c=>je(c*c,e),add:(c,f)=>je(c+f,e),sub:(c,f)=>je(c-f,e),mul:(c,f)=>je(c*f,e),pow:(c,f)=>af(a,c,f),div:(c,f)=>je(c*kr(f,e),e),sqrN:c=>c*c,addN:(c,f)=>c+f,subN:(c,f)=>c-f,mulN:(c,f)=>c*f,inv:c=>kr(c,e),sqrt:s.sqrt||(c=>(o||(o=sf(e)),o(a,c))),toBytes:c=>n?Yo(c,i):Mn(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Ko(c):rn(c)},invertBatch:c=>Xo(a,c),cmov:(c,f,l)=>l?f:c});return Object.freeze(a)}function Qo(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function ea(e){const t=Qo(e);return t+Math.ceil(t/2)}function ff(e,t,n=!1){const s=e.length,r=Qo(t),i=ea(t);if(s<16||s<i||s>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+s);const o=n?Ko(e):rn(e),a=je(o,t-He)+He;return n?Yo(a,r):Mn(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Li=BigInt(0),Pr=BigInt(1);function er(e,t){const n=t.negate();return e?n:t}function ta(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function tr(e,t){ta(e,t);const n=Math.ceil(t/e)+1,s=2**(e-1),r=2**e,i=Us(e),o=BigInt(e);return{windows:n,windowSize:s,mask:i,maxNumber:r,shiftBy:o}}function Ri(e,t,n){const{windowSize:s,mask:r,maxNumber:i,shiftBy:o}=n;let a=Number(e&r),c=e>>o;a>s&&(a-=i,c+=Pr);const f=t*s,l=f+Math.abs(a)-1,u=a===0,d=a<0,h=t%2!==0;return{nextN:c,offset:l,isZero:u,isNeg:d,isNegF:h,offsetF:f}}function df(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,s)=>{if(!(n instanceof t))throw new Error("invalid point at index "+s)})}function uf(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,s)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+s)})}const nr=new WeakMap,na=new WeakMap;function sr(e){return na.get(e)||1}function lf(e,t){return{constTimeNegate:er,hasPrecomputes(n){return sr(n)!==1},unsafeLadder(n,s,r=e.ZERO){let i=n;for(;s>Li;)s&Pr&&(r=r.add(i)),i=i.double(),s>>=Pr;return r},precomputeWindow(n,s){const{windows:r,windowSize:i}=tr(s,t),o=[];let a=n,c=a;for(let f=0;f<r;f++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,s,r){let i=e.ZERO,o=e.BASE;const a=tr(n,t);for(let c=0;c<a.windows;c++){const{nextN:f,offset:l,isZero:u,isNeg:d,isNegF:h,offsetF:p}=Ri(r,c,a);r=f,u?o=o.add(er(h,s[p])):i=i.add(er(d,s[l]))}return{p:i,f:o}},wNAFUnsafe(n,s,r,i=e.ZERO){const o=tr(n,t);for(let a=0;a<o.windows&&r!==Li;a++){const{nextN:c,offset:f,isZero:l,isNeg:u}=Ri(r,a,o);if(r=c,!l){const d=s[f];i=i.add(u?d.negate():d)}}return i},getPrecomputes(n,s,r){let i=nr.get(s);return i||(i=this.precomputeWindow(s,n),n!==1&&nr.set(s,r(i))),i},wNAFCached(n,s,r){const i=sr(n);return this.wNAF(i,this.getPrecomputes(i,n,r),s)},wNAFCachedUnsafe(n,s,r,i){const o=sr(n);return o===1?this.unsafeLadder(n,s,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,r),s,i)},setWindowSize(n,s){ta(s,t),na.set(n,s),nr.delete(n)}}}function hf(e,t,n,s){if(df(n,e),uf(s,t),n.length!==s.length)throw new Error("arrays of points and scalars must have equal length");const r=e.ZERO,i=Jc(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=Us(o),c=new Array(Number(a)+1).fill(r),f=Math.floor((t.BITS-1)/o)*o;let l=r;for(let u=f;u>=0;u-=o){c.fill(r);for(let h=0;h<s.length;h++){const p=s[h],g=Number(p>>BigInt(u)&a);c[g]=c[g].add(n[h])}let d=r;for(let h=c.length-1,p=r;h>0;h--)p=p.add(c[h]),d=d.add(p);if(l=l.add(d),u!==0)for(let h=0;h<o;h++)l=l.double()}return l}function sa(e){return of(e.Fp),Ds(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Jo(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ui(e){e.lowS!==void 0&&Dn("lowS",e.lowS),e.prehash!==void 0&&Dn("prehash",e.prehash)}function mf(e){const t=sa(e);Ds(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:s,a:r}=t;if(n){if(!s.eql(r,s.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}let pf=class extends Error{constructor(t=""){super(t)}};const It={Err:pf,_tlv:{encode:(e,t)=>{const{Err:n}=It;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const s=t.length/2,r=ts(s);if(r.length/2&128)throw new n("tlv.encode: long form length too big");const i=s>127?ts(r.length/2|128):"";return ts(e)+i+r+t},decode(e,t){const{Err:n}=It;let s=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[s++]!==e)throw new n("tlv.decode: wrong tlv");const r=t[s++],i=!!(r&128);let o=0;if(!i)o=r;else{const c=r&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const f=t.subarray(s,s+c);if(f.length!==c)throw new n("tlv.decode: length bytes not complete");if(f[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of f)o=o<<8|l;if(s+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(s,s+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(s+o)}}},_int:{encode(e){const{Err:t}=It;if(e<vt)throw new t("integer: negative integers are not allowed");let n=ts(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=It;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return rn(e)}},toSig(e){const{Err:t,_int:n,_tlv:s}=It,r=nt("signature",e),{v:i,l:o}=s.decode(48,r);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=s.decode(2,i),{v:f,l}=s.decode(2,c);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(f)}},hexFromSig(e){const{_tlv:t,_int:n}=It,s=t.encode(2,n.encode(e.r)),r=t.encode(2,n.encode(e.s)),i=s+r;return t.encode(48,i)}},vt=BigInt(0),Ae=BigInt(1);BigInt(2);const Di=BigInt(3);BigInt(4);function gf(e){const t=mf(e),{Fp:n}=t,s=si(t.n,t.nBitLength),r=t.toBytes||((g,m,w)=>{const T=m.toAffine();return Bs(Uint8Array.from([4]),n.toBytes(T.x),n.toBytes(T.y))}),i=t.fromBytes||(g=>{const m=g.subarray(1),w=n.fromBytes(m.subarray(0,n.BYTES)),T=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:w,y:T}});function o(g){const{a:m,b:w}=t,T=n.sqr(g),E=n.mul(T,g);return n.add(n.add(E,n.mul(g,m)),w)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return ni(g,Ae,t.n)}function c(g){const{allowedPrivateKeyLengths:m,nByteLength:w,wrapPrivateKey:T,n:E}=t;if(m&&typeof g!="bigint"){if(wn(g)&&(g=Hn(g)),typeof g!="string"||!m.includes(g.length))throw new Error("invalid private key");g=g.padStart(w*2,"0")}let A;try{A=typeof g=="bigint"?g:rn(nt("private key",g,w))}catch{throw new Error("invalid private key, expected hex or "+w+" bytes, got "+typeof g)}return T&&(A=je(A,E)),yn("private key",A,Ae,E),A}function f(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}const l=Ti((g,m)=>{const{px:w,py:T,pz:E}=g;if(n.eql(E,n.ONE))return{x:w,y:T};const A=g.is0();m==null&&(m=A?n.ONE:n.inv(E));const G=n.mul(w,m),U=n.mul(T,m),P=n.mul(E,m);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(P,n.ONE))throw new Error("invZ was invalid");return{x:G,y:U}}),u=Ti(g=>{if(g.is0()){if(t.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:m,y:w}=g.toAffine();if(!n.isValid(m)||!n.isValid(w))throw new Error("bad point: x or y not FE");const T=n.sqr(w),E=o(m);if(!n.eql(T,E))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(m,w,T){if(m==null||!n.isValid(m))throw new Error("x required");if(w==null||!n.isValid(w)||n.is0(w))throw new Error("y required");if(T==null||!n.isValid(T))throw new Error("z required");this.px=m,this.py=w,this.pz=T,Object.freeze(this)}static fromAffine(m){const{x:w,y:T}=m||{};if(!m||!n.isValid(w)||!n.isValid(T))throw new Error("invalid affine point");if(m instanceof d)throw new Error("projective point not allowed");const E=A=>n.eql(A,n.ZERO);return E(w)&&E(T)?d.ZERO:new d(w,T,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const w=Xo(n,m.map(T=>T.pz));return m.map((T,E)=>T.toAffine(w[E])).map(d.fromAffine)}static fromHex(m){const w=d.fromAffine(i(nt("pointHex",m)));return w.assertValidity(),w}static fromPrivateKey(m){return d.BASE.multiply(c(m))}static msm(m,w){return hf(d,s,m,w)}_setWindowSize(m){p.setWindowSize(this,m)}assertValidity(){u(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){f(m);const{px:w,py:T,pz:E}=this,{px:A,py:G,pz:U}=m,P=n.eql(n.mul(w,U),n.mul(A,E)),H=n.eql(n.mul(T,U),n.mul(G,E));return P&&H}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:w}=t,T=n.mul(w,Di),{px:E,py:A,pz:G}=this;let U=n.ZERO,P=n.ZERO,H=n.ZERO,k=n.mul(E,E),W=n.mul(A,A),$=n.mul(G,G),M=n.mul(E,A);return M=n.add(M,M),H=n.mul(E,G),H=n.add(H,H),U=n.mul(m,H),P=n.mul(T,$),P=n.add(U,P),U=n.sub(W,P),P=n.add(W,P),P=n.mul(U,P),U=n.mul(M,U),H=n.mul(T,H),$=n.mul(m,$),M=n.sub(k,$),M=n.mul(m,M),M=n.add(M,H),H=n.add(k,k),k=n.add(H,k),k=n.add(k,$),k=n.mul(k,M),P=n.add(P,k),$=n.mul(A,G),$=n.add($,$),k=n.mul($,M),U=n.sub(U,k),H=n.mul($,W),H=n.add(H,H),H=n.add(H,H),new d(U,P,H)}add(m){f(m);const{px:w,py:T,pz:E}=this,{px:A,py:G,pz:U}=m;let P=n.ZERO,H=n.ZERO,k=n.ZERO;const W=t.a,$=n.mul(t.b,Di);let M=n.mul(w,A),v=n.mul(T,G),b=n.mul(E,U),_=n.add(w,T),I=n.add(A,G);_=n.mul(_,I),I=n.add(M,v),_=n.sub(_,I),I=n.add(w,E);let R=n.add(A,U);return I=n.mul(I,R),R=n.add(M,b),I=n.sub(I,R),R=n.add(T,E),P=n.add(G,U),R=n.mul(R,P),P=n.add(v,b),R=n.sub(R,P),k=n.mul(W,I),P=n.mul($,b),k=n.add(P,k),P=n.sub(v,k),k=n.add(v,k),H=n.mul(P,k),v=n.add(M,M),v=n.add(v,M),b=n.mul(W,b),I=n.mul($,I),v=n.add(v,b),b=n.sub(M,b),b=n.mul(W,b),I=n.add(I,b),M=n.mul(v,I),H=n.add(H,M),M=n.mul(R,I),P=n.mul(_,P),P=n.sub(P,M),M=n.mul(_,v),k=n.mul(R,k),k=n.add(k,M),new d(P,H,k)}subtract(m){return this.add(m.negate())}is0(){return this.equals(d.ZERO)}wNAF(m){return p.wNAFCached(this,m,d.normalizeZ)}multiplyUnsafe(m){const{endo:w,n:T}=t;yn("scalar",m,vt,T);const E=d.ZERO;if(m===vt)return E;if(this.is0()||m===Ae)return this;if(!w||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,m,d.normalizeZ);let{k1neg:A,k1:G,k2neg:U,k2:P}=w.splitScalar(m),H=E,k=E,W=this;for(;G>vt||P>vt;)G&Ae&&(H=H.add(W)),P&Ae&&(k=k.add(W)),W=W.double(),G>>=Ae,P>>=Ae;return A&&(H=H.negate()),U&&(k=k.negate()),k=new d(n.mul(k.px,w.beta),k.py,k.pz),H.add(k)}multiply(m){const{endo:w,n:T}=t;yn("scalar",m,Ae,T);let E,A;if(w){const{k1neg:G,k1:U,k2neg:P,k2:H}=w.splitScalar(m);let{p:k,f:W}=this.wNAF(U),{p:$,f:M}=this.wNAF(H);k=p.constTimeNegate(G,k),$=p.constTimeNegate(P,$),$=new d(n.mul($.px,w.beta),$.py,$.pz),E=k.add($),A=W.add(M)}else{const{p:G,f:U}=this.wNAF(m);E=G,A=U}return d.normalizeZ([E,A])[0]}multiplyAndAddUnsafe(m,w,T){const E=d.BASE,A=(U,P)=>P===vt||P===Ae||!U.equals(E)?U.multiplyUnsafe(P):U.multiply(P),G=A(this,w).add(A(m,T));return G.is0()?void 0:G}toAffine(m){return l(this,m)}isTorsionFree(){const{h:m,isTorsionFree:w}=t;if(m===Ae)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:w}=t;return m===Ae?this:w?w(d,this):this.multiplyUnsafe(t.h)}toRawBytes(m=!0){return Dn("isCompressed",m),this.assertValidity(),r(d,this,m)}toHex(m=!0){return Dn("isCompressed",m),Hn(this.toRawBytes(m))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=t.nBitLength,p=lf(d,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function bf(e){const t=sa(e);return Ds(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function xf(e){const t=bf(e),{Fp:n,n:s}=t,r=n.BYTES+1,i=2*n.BYTES+1;function o(b){return je(b,s)}function a(b){return kr(b,s)}const{ProjectivePoint:c,normPrivateKeyToScalar:f,weierstrassEquation:l,isWithinCurveOrder:u}=gf({...t,toBytes(b,_,I){const R=_.toAffine(),S=n.toBytes(R.x),D=Bs;return Dn("isCompressed",I),I?D(Uint8Array.from([_.hasEvenY()?2:3]),S):D(Uint8Array.from([4]),S,n.toBytes(R.y))},fromBytes(b){const _=b.length,I=b[0],R=b.subarray(1);if(_===r&&(I===2||I===3)){const S=rn(R);if(!ni(S,Ae,n.ORDER))throw new Error("Point is not on curve");const D=l(S);let B;try{B=n.sqrt(D)}catch(X){const K=X instanceof Error?": "+X.message:"";throw new Error("Point is not on curve"+K)}const F=(B&Ae)===Ae;return(I&1)===1!==F&&(B=n.neg(B)),{x:S,y:B}}else if(_===i&&I===4){const S=n.fromBytes(R.subarray(0,n.BYTES)),D=n.fromBytes(R.subarray(n.BYTES,2*n.BYTES));return{x:S,y:D}}else{const S=r,D=i;throw new Error("invalid Point, expected length of "+S+", or uncompressed "+D+", got "+_)}}}),d=b=>Hn(Mn(b,t.nByteLength));function h(b){const _=s>>Ae;return b>_}function p(b){return h(b)?o(-b):b}const g=(b,_,I)=>rn(b.slice(_,I));class m{constructor(_,I,R){yn("r",_,Ae,s),yn("s",I,Ae,s),this.r=_,this.s=I,R!=null&&(this.recovery=R),Object.freeze(this)}static fromCompact(_){const I=t.nByteLength;return _=nt("compactSignature",_,I*2),new m(g(_,0,I),g(_,I,2*I))}static fromDER(_){const{r:I,s:R}=It.toSig(nt("DER",_));return new m(I,R)}assertValidity(){}addRecoveryBit(_){return new m(this.r,this.s,_)}recoverPublicKey(_){const{r:I,s:R,recovery:S}=this,D=U(nt("msgHash",_));if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");const B=S===2||S===3?I+t.n:I;if(B>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const F=(S&1)===0?"02":"03",V=c.fromHex(F+d(B)),X=a(B),K=o(-D*X),J=o(R*X),re=c.BASE.multiplyAndAddUnsafe(V,K,J);if(!re)throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Is(this.toDERHex())}toDERHex(){return It.hexFromSig(this)}toCompactRawBytes(){return Is(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const w={isValidPrivateKey(b){try{return f(b),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const b=ea(t.n);return ff(t.randomBytes(b),t.n)},precompute(b=8,_=c.BASE){return _._setWindowSize(b),_.multiply(BigInt(3)),_}};function T(b,_=!0){return c.fromPrivateKey(b).toRawBytes(_)}function E(b){const _=wn(b),I=typeof b=="string",R=(_||I)&&b.length;return _?R===r||R===i:I?R===2*r||R===2*i:b instanceof c}function A(b,_,I=!0){if(E(b))throw new Error("first arg must be private key");if(!E(_))throw new Error("second arg must be public key");return c.fromHex(_).multiply(f(b)).toRawBytes(I)}const G=t.bits2int||function(b){if(b.length>8192)throw new Error("input is too large");const _=rn(b),I=b.length*8-t.nBitLength;return I>0?_>>BigInt(I):_},U=t.bits2int_modN||function(b){return o(G(b))},P=Us(t.nBitLength);function H(b){return yn("num < 2^"+t.nBitLength,b,vt,P),Mn(b,t.nByteLength)}function k(b,_,I=W){if(["recovered","canonical"].some(pe=>pe in I))throw new Error("sign() legacy options not supported");const{hash:R,randomBytes:S}=t;let{lowS:D,prehash:B,extraEntropy:F}=I;D==null&&(D=!0),b=nt("msgHash",b),Ui(I),B&&(b=nt("prehashed msgHash",R(b)));const V=U(b),X=f(_),K=[H(X),H(V)];if(F!=null&&F!==!1){const pe=F===!0?S(n.BYTES):F;K.push(nt("extraEntropy",pe))}const J=Bs(...K),re=V;function me(pe){const fe=G(pe);if(!u(fe))return;const be=a(fe),ct=c.BASE.multiply(fe).toAffine(),ft=o(ct.x);if(ft===vt)return;const Pt=o(be*o(re+ft*X));if(Pt===vt)return;let un=(ct.x===ft?0:2)|Number(ct.y&Ae),wi=Pt;return D&&h(Pt)&&(wi=p(Pt),un^=1),new m(ft,wi,un)}return{seed:J,k2sig:me}}const W={lowS:t.lowS,prehash:!1},$={lowS:t.lowS,prehash:!1};function M(b,_,I=W){const{seed:R,k2sig:S}=k(b,_,I),D=t;return Qc(D.hash.outputLen,D.nByteLength,D.hmac)(R,S)}c.BASE._setWindowSize(8);function v(b,_,I,R=$){const S=b;_=nt("msgHash",_),I=nt("publicKey",I);const{lowS:D,prehash:B,format:F}=R;if(Ui(R),"strict"in R)throw new Error("options.strict was renamed to lowS");if(F!==void 0&&F!=="compact"&&F!=="der")throw new Error("format must be compact or der");const V=typeof S=="string"||wn(S),X=!V&&!F&&typeof S=="object"&&S!==null&&typeof S.r=="bigint"&&typeof S.s=="bigint";if(!V&&!X)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let K,J;try{if(X&&(K=new m(S.r,S.s)),V){try{F!=="compact"&&(K=m.fromDER(S))}catch(un){if(!(un instanceof It.Err))throw un}!K&&F!=="der"&&(K=m.fromCompact(S))}J=c.fromHex(I)}catch{return!1}if(!K||D&&K.hasHighS())return!1;B&&(_=t.hash(_));const{r:re,s:me}=K,pe=U(_),fe=a(me),be=o(pe*fe),ct=o(re*fe),ft=c.BASE.multiplyAndAddUnsafe(J,be,ct)?.toAffine();return ft?o(ft.x)===re:!1}return{CURVE:t,getPublicKey:T,getSharedSecret:A,sign:M,verify:v,ProjectivePoint:c,Signature:m,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yf(e){return{hash:e,hmac:(t,...n)=>Qr(e,t,he(...n)),randomBytes:Rs}}function _f(e,t){const n=s=>xf({...e,...yf(s)});return{...n(t),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ra=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Hi=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ef=BigInt(1),Lr=BigInt(2),Mi=(e,t)=>(e+t/Lr)/t;function wf(e){const t=ra,n=BigInt(3),s=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),f=e*e*e%t,l=f*f*e%t,u=Xe(l,n,t)*l%t,d=Xe(u,n,t)*l%t,h=Xe(d,Lr,t)*f%t,p=Xe(h,r,t)*h%t,g=Xe(p,i,t)*p%t,m=Xe(g,a,t)*g%t,w=Xe(m,c,t)*m%t,T=Xe(w,a,t)*g%t,E=Xe(T,n,t)*l%t,A=Xe(E,o,t)*p%t,G=Xe(A,s,t)*f%t,U=Xe(G,Lr,t);if(!Rr.eql(Rr.sqr(U),e))throw new Error("Cannot find square root");return U}const Rr=si(ra,void 0,void 0,{sqrt:wf}),Hs=_f({a:BigInt(0),b:BigInt(7),Fp:Rr,n:Hi,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Hi,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-Ef*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Mi(i*e,t),c=Mi(-s*e,t);let f=je(e-a*n-c*r,t),l=je(-a*s-c*i,t);const u=f>o,d=l>o;if(u&&(f=t-f),d&&(l=t-l),f>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:f,k2neg:d,k2:l}}}},Bn);BigInt(0);const Af=Me;function ia(e){const t=e.startsWith("0x")?e.substring(2):e;return Un(t)}function ge(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ri(e){return t=>(Af(t),e(t))}const ii=ri(Bn),If="ETHEREUMJS_DEFAULT_ERROR_CODE";class Bf extends Error{constructor(t,n,s){super(n??t.code),this.type=t,s!==void 0&&(this.stack=s)}getMetadata(){return this.type}toObject(){return{type:this.getMetadata(),message:this.message??"",stack:this.stack??"",className:this.constructor.name}}}function L(e,t){return new Bf({code:If},e,t)}function Fi(e){if(e[0]===0)throw L("invalid RLP: extra zeros");return Cf(Nf(e))}function $i(e,t){if(e<56)return Uint8Array.from([e+t]);const n=Hr(e),s=n.length/2,r=Hr(t+55+s);return Uint8Array.from(Dr(r+n))}function pn(e,t,n){if(n>e.length)throw L("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,n)}function Ur(e){let t,n,s,r,i;const o=[],a=e[0];if(a<=127)return{data:e.slice(0,1),remainder:e.subarray(1)};if(a<=183){if(t=a-127,a===128?s=Uint8Array.from([]):s=pn(e,1,t),t===2&&s[0]<128)throw L("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:s,remainder:e.subarray(t)}}else if(a<=191){if(n=a-182,e.length-1<n)throw L("invalid RLP: not enough bytes for string length");if(t=Fi(pn(e,1,n)),t<=55)throw L("invalid RLP: expected string length to be greater than 55");return s=pn(e,n,t+n),{data:s,remainder:e.subarray(t+n)}}else if(a<=247){for(t=a-191,r=pn(e,1,t);r.length;)i=Ur(r),o.push(i.data),r=i.remainder;return{data:o,remainder:e.subarray(t)}}else{if(n=a-246,t=Fi(pn(e,1,n)),t<56)throw L("invalid RLP: encoded list too short");const c=n+t;if(c>e.length)throw L("invalid RLP: total length is larger than the data");for(r=pn(e,n,c);r.length;)i=Ur(r),o.push(i.data),r=i.remainder;return{data:o,remainder:e.subarray(c)}}}const vf=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Nf(e){let t="";for(let n=0;n<e.length;n++)t+=vf[e[n]];return t}function Cf(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw L("Invalid byte sequence");return t}const Et={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Vi(e){if(e>=Et._0&&e<=Et._9)return e-Et._0;if(e>=Et._A&&e<=Et._F)return e-(Et._A-10);if(e>=Et._a&&e<=Et._f)return e-(Et._a-10)}function Dr(e){if(e.slice(0,2)==="0x"&&(e=e.slice(0,2)),typeof e!="string")throw L("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw L("padded hex string expected, got unpadded hex of length "+t);const s=new Uint8Array(n);for(let r=0,i=0;r<n;r++,i+=2){const o=Vi(e.charCodeAt(i)),a=Vi(e.charCodeAt(i+1));if(o===void 0||a===void 0){const c=e[i]+e[i+1];throw L('hex string expected, got non-hex character "'+c+'" at index '+i)}s[r]=o*16+a}return s}function qi(...e){if(e.length===1)return e[0];const t=e.reduce((s,r)=>s+r.length,0),n=new Uint8Array(t);for(let s=0,r=0;s<e.length;s++){const i=e[s];n.set(i,r),r+=i.length}return n}function Sf(e){return new TextEncoder().encode(e)}function Hr(e){if(e<0)throw L("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function Of(e){return e.length%2?`0${e}`:e}function oa(e){return e.length>=2&&e[0]==="0"&&e[1]==="x"}function Tf(e){return typeof e!="string"?e:oa(e)?e.slice(2):e}function aa(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return oa(e)?Dr(Of(Tf(e))):Sf(e);if(typeof e=="number"||typeof e=="bigint")return e?Dr(Hr(e)):Uint8Array.from([]);if(e==null)return Uint8Array.from([]);throw L("toBytes: received unsupported type "+typeof e)}function ca(e){if(Array.isArray(e)){const n=[];let s=0;for(let r=0;r<e.length;r++){const i=ca(e[r]);n.push(i),s+=i.length}return qi($i(s,192),...n)}const t=aa(e);return t.length===1&&t[0]<128?t:qi($i(t.length,128),t)}function Gf(e,t=!1){if(typeof e>"u"||e===null||e.length===0)return Uint8Array.from([]);const n=aa(e),s=Ur(n);if(t)return{data:s.data,remainder:s.remainder.slice()};if(s.remainder.length!==0)throw L("invalid RLP: remainder must be zero");return s.data}const vs={encode:ca,decode:Gf};function Kn(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/))}const ys=e=>{if(typeof e!="string")throw L(`[stripHexPrefix] input must be type 'string', received ${typeof e}`);return Kn(e)?e.slice(2):e};function oi(e){let t=e;if(typeof t!="string")throw L(`[padToEven] value must be type 'string', received ${typeof t}`);return t.length%2&&(t=`0${t}`),t}const Ot=function(e){if(!(e instanceof Uint8Array)){const t=`This method only supports Uint8Array but input was: ${e}`;throw L(t)}},fa=BigInt(0),Pe=St,ye=e=>{if(!e.startsWith("0x"))throw L("input string must be 0x prefixed");return ia(oi(ys(e)))},da=e=>{if(e.startsWith("0x"))throw L("input string cannot be 0x prefixed");return ia(oi(e))},Y=e=>`0x${Pe(e)}`,Mr=[];for(let e=0;e<=256*256-1;e++)Mr[e]=BigInt(e);const Z=(e,t=!1)=>{t&&e.reverse();const n=Y(e);return n==="0x"?fa:n.length===4?Mr[e[0]]:n.length===6?Mr[e[0]*256+e[1]]:BigInt(n)},zi=e=>{const t=Number(Z(e));if(!Number.isSafeInteger(t))throw L("Number exceeds 53 bits");return t},kf=e=>{if(!Number.isSafeInteger(e)||e<0)throw L(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`},ai=e=>{const t=kf(e);return ye(t)},oe=(e,t=!1)=>{const n=ye(`0x${oi(e.toString(16))}`);return t?n.reverse():n},ua=(e,t,n)=>n?e.length<t?new Uint8Array([...e,...new Uint8Array(t-e.length)]):e.subarray(0,t):e.length<t?new Uint8Array([...new Uint8Array(t-e.length),...e]):e.subarray(-t),se=(e,t)=>(Ot(e),ua(e,t,!1)),ot=(e,t)=>(Ot(e),ua(e,t,!0)),Pf=e=>{let t=e[0];for(;e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e},la=e=>(Ot(e),Pf(e)),Lf=e=>{if(e==null)return new Uint8Array;if(Array.isArray(e)||e instanceof Uint8Array)return Uint8Array.from(e);if(typeof e=="string"){if(!Kn(e))throw L(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${e}`);return ye(e)}if(typeof e=="number")return ai(e);if(typeof e=="bigint"){if(e<fa)throw L(`Cannot convert negative bigint to Uint8Array. Given: ${e}`);let t=e.toString(16);return t.length%2&&(t="0"+t),da(t)}if(e.toBytes!==void 0)return e.toBytes();throw L("invalid type")},ci=(e,t=50)=>{const n=e instanceof Uint8Array?Y(e):e,s=n.slice(0,2)==="0x"?t+2:t;return n.length<=s?n:n.slice(0,s)+"â€¦"},_s=e=>`0x${e.toString(16)}`,ns=e=>la(oe(e)),Rf=(e,t=!0)=>{const n=oe(e);if(t&&n.length>20)throw Error(`Invalid address bytes length=${n.length} strict=${t}`);return se(n,20)},ss=e=>la(ai(e)),Ke=(...e)=>{if(e.length===1)return e[0];const t=e.reduce((s,r)=>s+r.length,0),n=new Uint8Array(t);for(let s=0,r=0;s<e.length;s++){const i=e[s];n.set(i,r),r+=i.length}return n};function ha(e){return Z(ye(Kn(e)?e:`0x${e}`))}const Uf=BigInt("0xffffffffffffffff"),Df=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),rr=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");Hs.CURVE.n;Hs.CURVE.n/BigInt(2);const rs=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),Hf="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",Gn=ye(Hf),Mf="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";ye(Mf);const Ff="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",ma=ye(Ff);ii(new Uint8Array);Uint8Array.from([128]);const $f="0000000000000000000000000000000000000003";BigInt(-1);const y=BigInt(0),Q=BigInt(1),Tt=BigInt(2),Vf=BigInt(3),pa=BigInt(7),Wt=BigInt(8),ga=BigInt(27),qf=BigInt(28),Pn=BigInt(31),_e=BigInt(32),Ln=BigInt(64);BigInt(128);const ir=BigInt(255),is=BigInt(256),fi=BigInt(96);BigInt(100);const ba=BigInt(160),zf=BigInt(224),Wf=BigInt(7922816251426434e13),jf=BigInt(1461501637330903e33),Zf=BigInt(2695994666715064e52),Kf=BigInt(0),vn=BigInt(1),Yf=BigInt(2),Xf=BigInt(7),Jf=BigInt(256),Qf=BigInt(113),xa=[],ya=[],_a=[];for(let e=0,t=vn,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],xa.push(2*(5*s+n)),ya.push((e+1)*(e+2)/2%64);let r=Kf;for(let i=0;i<7;i++)t=(t<<vn^(t>>Xf)*Qf)%Jf,t&Yf&&(r^=vn<<(vn<<BigInt(i))-vn);_a.push(r)}const Ea=Vo(_a,!0),ed=Ea[0],td=Ea[1],Wi=(e,t,n)=>n>32?Rc(e,t,n):Pc(e,t,n),ji=(e,t,n)=>n>32?Uc(e,t,n):Lc(e,t,n);function nd(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,f=n[c],l=n[c+1],u=Wi(f,l,1)^n[a],d=ji(f,l,1)^n[a+1];for(let h=0;h<50;h+=10)e[o+h]^=u,e[o+h+1]^=d}let r=e[2],i=e[3];for(let o=0;o<24;o++){const a=ya[o],c=Wi(r,i,a),f=ji(r,i,a),l=xa[o];r=e[l],i=e[l+1],e[l]=c,e[l+1]=f}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=ed[s],e[1]^=td[s]}gt(n)}class di extends Xr{constructor(t,n,s,r=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=s,this.enableXOF=r,this.rounds=i,_n(s),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Bc(this.state)}clone(){return this._cloneInto()}keccak(){Ii(this.state32),nd(this.state32,this.rounds),Ii(this.state32),this.posOut=0,this.pos=0}update(t){En(this),t=Ls(t),Me(t);const{blockLen:n,state:s}=this,r=t.length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);for(let a=0;a<o;a++)s[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:s,blockLen:r}=this;t[s]^=n,(n&128)!==0&&s===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){En(this,!1),Me(t),this.finish();const n=this.state,{blockLen:s}=this;for(let r=0,i=t.length;r<i;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,i-r);t.set(n.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return _n(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Fo(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,gt(this.state)}_cloneInto(t){const{blockLen:n,suffix:s,outputLen:r,rounds:i,enableXOF:o}=this;return t||(t=new di(n,s,r,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=s,t.outputLen=r,t.enableXOF=o,t.destroyed=this.destroyed,t}}const sd=(e,t,n)=>Zn(()=>new di(t,e,n)),Zi=sd(1,136,256/8),Gt=(()=>{const e=ri(Zi);return e.create=Zi.create,e})();class We{get version(){if(this._version!==null)return this._version;throw Error(`version=${this._version} not loaded`)}set version(t){this._version=t}get nonce(){if(this._nonce!==null)return this._nonce;throw Error(`nonce=${this._nonce} not loaded`)}set nonce(t){this._nonce=t}get balance(){if(this._balance!==null)return this._balance;throw Error(`balance=${this._balance} not loaded`)}set balance(t){this._balance=t}get storageRoot(){if(this._storageRoot!==null)return this._storageRoot;throw Error(`storageRoot=${this._storageRoot} not loaded`)}set storageRoot(t){this._storageRoot=t}get codeHash(){if(this._codeHash!==null)return this._codeHash;throw Error(`codeHash=${this._codeHash} not loaded`)}set codeHash(t){this._codeHash=t}get codeSize(){if(this._codeSize!==null)return this._codeSize;throw Error(`codeSize=${this._codeSize} not loaded`)}set codeSize(t){this._codeSize=t}constructor(t=y,n=y,s=ma,r=Gn,i=0,o=0){this._nonce=null,this._balance=null,this._storageRoot=null,this._codeHash=null,this._codeSize=null,this._version=null,this._nonce=t,this._balance=n,this._storageRoot=s,this._codeHash=r,i===null&&r!==null&&!this.isContract()&&(i=0),this._codeSize=i,this._version=o,this._validate()}_validate(){if(this._nonce!==null&&this._nonce<y)throw L("nonce must be greater than zero");if(this._balance!==null&&this._balance<y)throw L("balance must be greater than zero");if(this._storageRoot!==null&&this._storageRoot.length!==32)throw L("storageRoot must have a length of 32");if(this._codeHash!==null&&this._codeHash.length!==32)throw L("codeHash must have a length of 32");if(this._codeSize!==null&&this._codeSize<y)throw L("codeSize must be greater than zero")}raw(){return[ns(this.nonce),ns(this.balance),this.storageRoot,this.codeHash]}serialize(){return vs.encode(this.raw())}serializeWithPartialInfo(){const t=[],n=ss(0),s=ss(1);return this._nonce!==null?t.push([s,ns(this._nonce)]):t.push([n]),this._balance!==null?t.push([s,ns(this._balance)]):t.push([n]),this._storageRoot!==null?t.push([s,this._storageRoot]):t.push([n]),this._codeHash!==null?t.push([s,this._codeHash]):t.push([n]),this._codeSize!==null?t.push([s,ss(this._codeSize)]):t.push([n]),this._version!==null?t.push([s,ss(this._version)]):t.push([n]),vs.encode(t)}isContract(){if(this._codeHash===null&&this._codeSize===null)throw Error("Insufficient data as codeHash=null and codeSize=null");return this._codeHash!==null&&!ge(this._codeHash,Gn)||this._codeSize!==null&&this._codeSize!==0}isEmpty(){return this._balance!==null&&this.balance!==y||this._nonce===null&&this.nonce!==y||this._codeHash!==null&&!ge(this.codeHash,Gn)?!1:this.balance===y&&this.nonce===y&&ge(this.codeHash,Gn)}}const rd=function(e,t){return Ot(e),Ot(t),Z(t)===y?Gt(vs.encode([e,Uint8Array.from([])])).subarray(-20):Gt(vs.encode([e,t])).subarray(-20)},id=function(e,t,n){if(Ot(e),Ot(t),Ot(n),e.length!==20)throw L("Expected from to be of length 20");if(t.length!==32)throw L("Expected salt to be of length 32");return Gt(Ke(ye("0xff"),e,t,Gt(n))).subarray(-20)},od=function(e,t=!1){if(Ot(e),t&&e.length!==64&&(e=Hs.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1)),e.length!==64)throw L("Expected pubKey to be of length 64");return Gt(e).subarray(-20)},ad=od;class jt{constructor(t){if(t.length!==20)throw L("Invalid address length");this.bytes=t}equals(t){return ge(this.bytes,t.bytes)}isZero(){return this.equals(new jt(new Uint8Array(20)))}isPrecompileOrSystemAddress(){const t=Z(this.bytes),n=y,s=BigInt("0xffff");return t>=n&&t<=s}toString(){return Y(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}}function At(){return new jt(new Uint8Array(20))}function cd(e){const t=oe(e);if(t.length>20)throw L(`Invalid address, too long: ${t.length}`);return new jt(se(t,20))}const Qt={Number:0,BigInt:1,Uint8Array:2,PrefixedHexString:3};function or(e,t){if(e===null)return null;if(e===void 0)return;if(typeof e=="string"&&!Kn(e))throw L(`A string must be provided with a 0x-prefix, given: ${e}`);if(typeof e=="number"&&!Number.isSafeInteger(e))throw L("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const n=Lf(e);switch(t){case Qt.Uint8Array:return n;case Qt.BigInt:return Z(n);case Qt.Number:{const s=Z(n);if(s>BigInt(Number.MAX_SAFE_INTEGER))throw L("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(s)}case Qt.PrefixedHexString:return Y(n);default:throw L("unknown outputType")}}function fd(e,t){return e===y||e===Q?e:t===void 0?e-ga:e-(t*Tt+BigInt(35))}function dd(e){return e===y||e===Q}const ud=function(e,t,n,s,r){const i=Ke(se(n,32),se(s,32)),o=fd(t,r);if(!dd(o))throw L("Invalid signature v value");return Hs.Signature.fromCompact(i).addRecoveryBit(Number(o)).recoverPublicKey(e).toRawBytes(!1).slice(1)},ld=(e,t)=>{const n=new Uint8Array(32);return n.set([t],0),n.set(ii(ye(e)).subarray(1),1),Y(n)};function wa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ar={exports:{}},Ki;function hd(){return Ki||(Ki=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function r(c,f,l){this.fn=c,this.context=f,this.once=l||!1}function i(c,f,l,u,d){if(typeof l!="function")throw new TypeError("The listener must be a function");var h=new r(l,u||c,d),p=n?n+f:f;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],h]:c._events[p].push(h):(c._events[p]=h,c._eventsCount++),c}function o(c,f){--c._eventsCount===0?c._events=new s:delete c._events[f]}function a(){this._events=new s,this._eventsCount=0}a.prototype.eventNames=function(){var f=[],l,u;if(this._eventsCount===0)return f;for(u in l=this._events)t.call(l,u)&&f.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(l)):f},a.prototype.listeners=function(f){var l=n?n+f:f,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,h=u.length,p=new Array(h);d<h;d++)p[d]=u[d].fn;return p},a.prototype.listenerCount=function(f){var l=n?n+f:f,u=this._events[l];return u?u.fn?1:u.length:0},a.prototype.emit=function(f,l,u,d,h,p){var g=n?n+f:f;if(!this._events[g])return!1;var m=this._events[g],w=arguments.length,T,E;if(m.fn){switch(m.once&&this.removeListener(f,m.fn,void 0,!0),w){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,u),!0;case 4:return m.fn.call(m.context,l,u,d),!0;case 5:return m.fn.call(m.context,l,u,d,h),!0;case 6:return m.fn.call(m.context,l,u,d,h,p),!0}for(E=1,T=new Array(w-1);E<w;E++)T[E-1]=arguments[E];m.fn.apply(m.context,T)}else{var A=m.length,G;for(E=0;E<A;E++)switch(m[E].once&&this.removeListener(f,m[E].fn,void 0,!0),w){case 1:m[E].fn.call(m[E].context);break;case 2:m[E].fn.call(m[E].context,l);break;case 3:m[E].fn.call(m[E].context,l,u);break;case 4:m[E].fn.call(m[E].context,l,u,d);break;default:if(!T)for(G=1,T=new Array(w-1);G<w;G++)T[G-1]=arguments[G];m[E].fn.apply(m[E].context,T)}}return!0},a.prototype.on=function(f,l,u){return i(this,f,l,u,!1)},a.prototype.once=function(f,l,u){return i(this,f,l,u,!0)},a.prototype.removeListener=function(f,l,u,d){var h=n?n+f:f;if(!this._events[h])return this;if(!l)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===l&&(!d||p.once)&&(!u||p.context===u)&&o(this,h);else{for(var g=0,m=[],w=p.length;g<w;g++)(p[g].fn!==l||d&&!p[g].once||u&&p[g].context!==u)&&m.push(p[g]);m.length?this._events[h]=m.length===1?m[0]:m:o(this,h)}return this},a.prototype.removeAllListeners=function(f){var l;return f?(l=n?n+f:f,this._events[l]&&o(this,l)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(ar)),ar.exports}var md=hd();const Fr=wa(md);let $r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&($r=new Int32Array($r));const pd=(e,t)=>{let n=t===0?0:-1;for(let s=0;s<e.length;s++)n=$r[(n^e[s])&255]^n>>>8;return n^-1},gd=(e,t)=>pd(e,t)>>>0,kn={Mainnet:1,Sepolia:11155111,Holesky:17e3,Hoodi:560048};Object.entries(kn).reduce((e,[t,n])=>(e[n]=t,e),{});kn.Mainnet+"",ye("0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544"),kn.Sepolia+"",ye("0x5eb6e371a698b8d68f665192350ffcecbbbf322916f4b51bd79bb6887da3f494"),kn.Holesky+"",ye("0x69d8c9d72f6fa4ad42d4702b433707212f90db395eb54dc20bc85de253788783"),kn.Hoodi+"",ye("0xda87d7f5f91c51508791bbcbd4aa5baf04917830b86985eeb9ad3d5bfb657576");const O={Chainstart:"chainstart",Homestead:"homestead",Dao:"dao",TangerineWhistle:"tangerineWhistle",SpuriousDragon:"spuriousDragon",Byzantium:"byzantium",Constantinople:"constantinople",Petersburg:"petersburg",Istanbul:"istanbul",MuirGlacier:"muirGlacier",Berlin:"berlin",London:"london",ArrowGlacier:"arrowGlacier",GrayGlacier:"grayGlacier",MergeNetsplitBlock:"mergeNetsplitBlock",Paris:"paris",Shanghai:"shanghai",Cancun:"cancun",Prague:"prague",Osaka:"osaka",Bpo1:"bpo1",Bpo2:"bpo2",Bpo3:"bpo3",Bpo4:"bpo4",Bpo5:"bpo5"},bd={Clique:"clique"},Nn={1:{minimumHardfork:O.Chainstart},606:{minimumHardfork:O.Chainstart},608:{minimumHardfork:O.Homestead},607:{minimumHardfork:O.TangerineWhistle},609:{minimumHardfork:O.SpuriousDragon},1013:{minimumHardfork:O.Constantinople},1716:{minimumHardfork:O.Constantinople},1679:{minimumHardfork:O.Constantinople},2384:{minimumHardfork:O.Istanbul},663:{minimumHardfork:O.Chainstart,requiredEIPs:[3540,5450]},1153:{minimumHardfork:O.Chainstart},1559:{minimumHardfork:O.Berlin,requiredEIPs:[2930]},2565:{minimumHardfork:O.Byzantium},2537:{minimumHardfork:O.Chainstart},2718:{minimumHardfork:O.Chainstart},2929:{minimumHardfork:O.Chainstart},2930:{minimumHardfork:O.Istanbul,requiredEIPs:[2718,2929]},2935:{minimumHardfork:O.Chainstart},3198:{minimumHardfork:O.London},3529:{minimumHardfork:O.Berlin,requiredEIPs:[2929]},3540:{minimumHardfork:O.London,requiredEIPs:[3541,3860]},3541:{minimumHardfork:O.Berlin},3554:{minimumHardfork:O.MuirGlacier},3607:{minimumHardfork:O.Chainstart},3651:{minimumHardfork:O.London,requiredEIPs:[2929]},3670:{minimumHardfork:O.London,requiredEIPs:[3540]},3675:{minimumHardfork:O.London},3855:{minimumHardfork:O.Chainstart},3860:{minimumHardfork:O.SpuriousDragon},4200:{minimumHardfork:O.London,requiredEIPs:[3540,3670]},4345:{minimumHardfork:O.London},4399:{minimumHardfork:O.London},4750:{minimumHardfork:O.London,requiredEIPs:[3540,3670,5450]},4788:{minimumHardfork:O.Cancun},4844:{minimumHardfork:O.Paris,requiredEIPs:[1559,2718,2930,4895]},4895:{minimumHardfork:O.Paris},5133:{minimumHardfork:O.GrayGlacier},5450:{minimumHardfork:O.London,requiredEIPs:[3540,3670,4200,4750]},5656:{minimumHardfork:O.Shanghai},6110:{minimumHardfork:O.Cancun,requiredEIPs:[7685]},6206:{minimumHardfork:O.London,requiredEIPs:[4750,5450]},6780:{minimumHardfork:O.London},7002:{minimumHardfork:O.Paris,requiredEIPs:[7685]},7069:{minimumHardfork:O.Berlin,requiredEIPs:[2929]},7251:{minimumHardfork:O.Paris,requiredEIPs:[7685]},7480:{minimumHardfork:O.London,requiredEIPs:[3540,3670]},7516:{minimumHardfork:O.Paris,requiredEIPs:[4844]},7594:{minimumHardfork:O.Paris,requiredEIPs:[4844]},7620:{minimumHardfork:O.London,requiredEIPs:[3540,3541,3670]},7623:{minimumHardfork:O.Chainstart,requiredEIPs:[]},7685:{minimumHardfork:O.Cancun,requiredEIPs:[3675]},7691:{minimumHardfork:O.Paris,requiredEIPs:[4844]},7918:{minimumHardfork:O.Paris,requiredEIPs:[4844]},7692:{minimumHardfork:O.Cancun,requiredEIPs:[663,3540,3670,4200,4750,5450,6206,7069,7480,7620,7698]},7698:{minimumHardfork:O.London,requiredEIPs:[3540,7620]},7702:{minimumHardfork:O.Cancun,requiredEIPs:[2718,2929,2930]},7823:{minimumHardfork:O.Byzantium},7709:{minimumHardfork:O.Chainstart,requiredEIPs:[2935]},7825:{minimumHardfork:O.Chainstart,requiredEIPs:[]},7864:{minimumHardfork:O.London},7883:{minimumHardfork:O.Chainstart},7939:{minimumHardfork:O.Chainstart,requiredEIPs:[]},7951:{minimumHardfork:O.Chainstart,requiredEIPs:[]},7934:{minimumHardfork:O.Chainstart,requiredEIPs:[]}},xd={chainstart:{eips:[1]},homestead:{eips:[606]},dao:{eips:[]},tangerineWhistle:{eips:[608]},spuriousDragon:{eips:[607]},byzantium:{eips:[609]},constantinople:{eips:[1013]},petersburg:{eips:[1716]},istanbul:{eips:[1679]},muirGlacier:{eips:[2384]},berlin:{eips:[2565,2929,2718,2930]},london:{eips:[1559,3198,3529,3541]},arrowGlacier:{eips:[4345]},grayGlacier:{eips:[5133]},paris:{consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]},mergeNetsplitBlock:{eips:[]},shanghai:{eips:[3651,3855,3860,4895]},cancun:{eips:[1153,4844,4788,5656,6780,7516]},prague:{eips:[2537,2935,6110,7002,7251,7623,7685,7691,7702]},osaka:{eips:[7594,7823,7825,7883,7939,7951,7918]},bpo1:{eips:[],params:{target:10,max:15,blobGasPriceUpdateFraction:8346193}},bpo2:{eips:[],params:{target:14,max:21,blobGasPriceUpdateFraction:11684671}}};class Vr{constructor(t){this._eips=[],this._paramsCache={},this._activatedEIPsCache=[],this.events=new Fr,this._chainParams=JSON.parse(JSON.stringify(t.chain)),this.DEFAULT_HARDFORK=this._chainParams.defaultHardfork??O.Prague,this.HARDFORK_CHANGES=this.hardforks().map(n=>[n.name,(this._chainParams.customHardforks&&this._chainParams.customHardforks[n.name])??xd[n.name]]),this._hardfork=this.DEFAULT_HARDFORK,this._params=t.params?JSON.parse(JSON.stringify(t.params)):{},t.hardfork!==void 0&&this.setHardfork(t.hardfork),t.eips&&this.setEIPs(t.eips),this.customCrypto=t.customCrypto??{},Object.keys(this._paramsCache).length===0&&(this._buildParamsCache(),this._buildActivatedEIPsCache())}updateParams(t){for(const[n,s]of Object.entries(t))n in this._params?this._params[n]=JSON.parse(JSON.stringify({...this._params[n],...t[n]})):this._params[n]=JSON.parse(JSON.stringify(s));this._buildParamsCache()}resetParams(t){this._params=JSON.parse(JSON.stringify(t)),this._buildParamsCache()}setHardfork(t){let n=!1;for(const s of this.HARDFORK_CHANGES)s[0]===t&&(this._hardfork!==t&&(this._hardfork=t,this._buildParamsCache(),this._buildActivatedEIPsCache(),this.events.emit("hardforkChanged",t)),n=!0);if(!n)throw L(`Hardfork with name ${t} not supported`)}getHardforkBy(t){const n=or(t.blockNumber,Qt.BigInt),s=or(t.timestamp,Qt.BigInt),r=this.hardforks().filter(c=>c.block!==null||c.timestamp!==void 0);let i=r.findIndex(c=>n!==void 0&&c.block!==null&&BigInt(c.block)>n||s!==void 0&&c.timestamp!==void 0&&BigInt(c.timestamp)>s);if(i===-1)i=r.length;else if(i===0)throw Error("Must have at least one hardfork at block 0");if(s===void 0){const c=r.slice(0,i).reverse().findIndex(f=>f.block!==null);i=i-c}i=i-1;const o=i;for(;i<r.length-1&&!(r[i].block!==r[i+1].block||r[i].timestamp!==r[i+1].timestamp);i++);if(s!==void 0){if(r.slice(0,o).reduce((l,u)=>Math.max(Number(u.timestamp??"0"),l),0)>s)throw Error("Maximum HF determined by timestamp is lower than the block number HF");if(r.slice(i+1).reduce((l,u)=>Math.min(Number(u.timestamp??s),l),Number(s))<s)throw Error("Maximum HF determined by block number is lower than timestamp HF")}return r[i].name}setHardforkBy(t){const n=this.getHardforkBy(t);return this.setHardfork(n),n}_getHardfork(t){const n=this.hardforks();for(const s of n)if(s.name===t)return s;return null}setEIPs(t=[]){for(const n of t){if(!(n in Nn))throw L(`${n} not supported`);const s=this.gteHardfork(Nn[n].minimumHardfork);if(!s)throw L(`${n} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${s}`)}this._eips=t,this._buildParamsCache(),this._buildActivatedEIPsCache();for(const n of t)if(Nn[n].requiredEIPs!==void 0){for(const s of Nn[n].requiredEIPs)if(!(t.includes(s)||this.isActivatedEIP(s)))throw L(`${n} requires EIP ${s}, but is not included in the EIP list`)}}_mergeWithParamsCache(t){for(const[n,s]of Object.entries(t))this._paramsCache[n]=s}_buildParamsCache(){this._paramsCache={};const t=this.hardfork();for(const n of this.HARDFORK_CHANGES){if("eips"in n[1]){const r=n[1].eips??[];for(const i of r)this._params[i]!==void 0&&this._params[i]!==null&&this._mergeWithParamsCache(this._params[i])}const s=this._params[n[0]];if(s!=null&&this._mergeWithParamsCache(s),n[1].params!==void 0&&n[1].params!==null&&this._mergeWithParamsCache(n[1].params),n[0]===t)break}for(const n of this._eips)this._params[n]!==void 0&&this._params[n]!==null&&this._mergeWithParamsCache(this._params[n])}_buildActivatedEIPsCache(){this._activatedEIPsCache=[];for(const[t,n]of this.HARDFORK_CHANGES)this.gteHardfork(t)&&"eips"in n&&(this._activatedEIPsCache=this._activatedEIPsCache.concat(n.eips??[]));this._activatedEIPsCache=this._activatedEIPsCache.concat(this._eips)}param(t){if(!(t in this._paramsCache))throw L(`Missing parameter value for ${t}`);const n=this._paramsCache[t];return BigInt(n??0)}paramByHardfork(t,n){let s;for(const r of this.HARDFORK_CHANGES){if("eips"in r[1]){const i=r[1].eips;for(const o of i){const c=this._params[o]?.[t];c!==void 0&&(s=c)}}else{const i=r[1].params?.[t];i!==void 0&&(s=i)}if(r[0]===n)break}if(s===void 0)throw L(`Missing parameter value for ${t}`);return BigInt(s??0)}paramByEIP(t,n){if(!(n in Nn))throw L(`${n} not supported`);const s=this._params[n];if(s?.[t]===void 0)throw L(`Missing parameter value for ${t}`);const r=s[t];return BigInt(r??0)}paramByBlock(t,n,s){const r=this.getHardforkBy({blockNumber:n,timestamp:s});return this.paramByHardfork(t,r)}getBlobGasSchedule(){return this.gteHardfork(O.Bpo1)?{targetBlobGasPerBlock:this.param("target")*this.param("blobGasPerBlob"),maxBlobGasPerBlock:this.param("max")*this.param("blobGasPerBlob"),blobGasPriceUpdateFraction:this.param("blobGasPriceUpdateFraction")}:{targetBlobGasPerBlock:this.param("targetBlobGasPerBlock"),maxBlobGasPerBlock:this.param("maxBlobGasPerBlock"),blobGasPriceUpdateFraction:this.param("blobGasPriceUpdateFraction")}}isActivatedEIP(t){return!!this._activatedEIPsCache.includes(t)}hardforkIsActiveOnBlock(t,n){n=or(n,Qt.BigInt),t=t??this._hardfork;const s=this.hardforkBlock(t);return typeof s=="bigint"&&s!==y&&n>=s}activeOnBlock(t){return this.hardforkIsActiveOnBlock(null,t)}hardforkGteHardfork(t,n){t=t??this._hardfork;const s=this.hardforks();let r=-1,i=-1,o=0;for(const a of s)a.name===t&&(r=o),a.name===n&&(i=o),o+=1;return r>=i&&i!==-1}gteHardfork(t){return this.hardforkGteHardfork(null,t)}hardforkBlock(t){t=t??this._hardfork;const n=this._getHardfork(t)?.block;return n==null?null:BigInt(n)}hardforkTimestamp(t){t=t??this._hardfork;const n=this._getHardfork(t)?.timestamp;return n==null?null:BigInt(n)}eipBlock(t){for(const n of this.HARDFORK_CHANGES){const s=n[1];if("eips"in s&&s.eips.includes(t))return this.hardforkBlock(n[0])}return null}eipTimestamp(t){for(const n of this.HARDFORK_CHANGES){const s=n[1];if("eips"in s&&s.eips.includes(t))return this.hardforkTimestamp(n[0])}return null}nextHardforkBlockOrTimestamp(t){const n=t??this._hardfork,s=this.hardforks();let r=s.findIndex(f=>f.name===n);if(n===O.Paris&&(r-=1),r<0)return null;const i=s[r],o=i.timestamp??i.block;if(o==null)return null;const a=s.slice(r+1).find(f=>{const l=f.timestamp??f.block;return l!=null&&l!==o});if(a===void 0)return null;const c=a.timestamp??a.block;return c==null?null:BigInt(c)}_calcForkHash(t,n){let s=new Uint8Array(0),r=0;for(const a of this.hardforks()){const{block:c,timestamp:f,name:l}=a;let u=f??c;if(u=u!==null?Number(u):null,typeof u=="number"&&u!==0&&u!==r&&l!==O.Paris){const d=ye(`0x${u.toString(16).padStart(16,"0")}`);s=Ke(s,d),r=u}if(a.name===t)break}const i=Ke(n,s);return Y(ai(gd(i)>>>0))}forkHash(t,n){t=t??this._hardfork;const s=this._getHardfork(t);if(s===null||s?.block===null&&s?.timestamp===void 0)throw L("No fork hash calculation possible for future hardfork");if(s?.forkHash!==null&&s?.forkHash!==void 0)return s.forkHash;if(!n)throw L("genesisHash required for forkHash calculation");return this._calcForkHash(t,n)}hardforkForForkHash(t){const n=this.hardforks().filter(s=>s.forkHash===t);return n.length>=1?n[n.length-1]:null}setForkHashes(t){for(const n of this.hardforks()){const s=n.timestamp??n.block;(n.forkHash===null||n.forkHash===void 0)&&s!==null&&s!==void 0&&(n.forkHash=this.forkHash(n.name,t))}}genesis(){return this._chainParams.genesis}hardforks(){const t=this._chainParams.hardforks;return this._chainParams.customHardforks!==void 0&&this._chainParams.customHardforks,t}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}eips(){return this._eips}consensusType(){const t=this.hardfork();let n;for(const s of this.HARDFORK_CHANGES)if("consensus"in s[1]&&(n=s[1].consensus.type),s[0]===t)break;return n??this._chainParams.consensus.type}consensusAlgorithm(){const t=this.hardfork();let n;for(const s of this.HARDFORK_CHANGES)if("consensus"in s[1]&&(n=s[1].consensus.algorithm),s[0]===t)break;return n??this._chainParams.consensus.algorithm}consensusConfig(){const t=this.hardfork();let n;for(const s of this.HARDFORK_CHANGES){if("consensus"in s[1]){const r=s[1],i=r.consensus.algorithm;n=r.consensus[i]}if(s[0]===t)break}return n??this._chainParams.consensus[this.consensusAlgorithm()]??{}}copy(){const t=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return t.events=new Fr,t}}const Ms=239,ui=0,Aa=1,yd=49152,_d=1,Ed=2,wd=3,Ad=4,Id=0,Bd=4,vd=4096,cr=4,Nd=1,Cd=1,Sd=1,Od=256,Td=1,Gd=127,kd=128,Pd=1023,C={OUT_OF_BOUNDS:"Trying to read out of bounds",VERIFY_UINT:"Uint does not match expected value ",VERIFY_BYTES:"Bytes do not match expected value",FORMAT:"err: invalid format",MAGIC:"err: invalid magic",VERSION:"err: invalid eof version",KIND_TYPE:"err: expected kind types",KIND_CODE:"err: expected kind code",KIND_DATA:"err: expected kind data",TERMINATOR:"err: expected terminator",TYPE_SIZE:"missing type size",INVALID_TYPE_SIZE:"err: type section size invalid",CODE_SIZE:"missing code size",CODE_SECTION_SIZE:"code section should be at least one byte",INVALID_CODE_SIZE:"code size does not match type size",DATA_SIZE:"missing data size",CONTAINER_SIZE:"missing container size",CONTAINER_SECTION_SIZE:"container section should at least contain one section and at most 255 sections",TYPE_SECTIONS:"err: mismatch of code sections count and type signatures",INPUTS:"expected inputs",OUTPUTS:"expected outputs",MAX_INPUTS:"inputs exceeds 127, the maximum, got: ",MAX_OUTPUTS:"outputs exceeds 127, the maximum, got: ",CODE0_INPUTS:"first code section should have 0 inputs",CODE0_OUTPUTS:"first code section should have 0x80 (terminating section) outputs",MAX_STACK_HEIGHT:"expected maxStackHeight",MAX_STACK_HEIGHT_LIMIT:"stack height limit of 1024 exceeded: ",MIN_CODE_SECTIONS:"should have at least 1 code section",CODE_SECTION:"expected a code section",DATA_SECTION:"Expected data section",CONTAINER_SECTION:"expected a container section",CONTAINER_SECTION_MIN:"container section should be at least 1 byte",INVALID_EOF_CREATE_TARGET:"EOFCREATE targets an undefined container",INVALID_RETURN_CONTRACT_TARGET:"RETURNCONTRACT targets an undefined container",CONTAINER_DOUBLE_TYPE:"Container is targeted by both EOFCREATE and RETURNCONTRACT",UNREACHABLE_CONTAINER_SECTIONS:"Unreachable containers (by both EOFCREATE and RETURNCONTRACT)",CONTAINER_TYPE_ERROR:"Container contains opcodes which this mode (deployment mode / init code / runtime mode) cannot have",DANGLING_BYTES:"got dangling bytes in body",INVALID_OPCODE:"invalid opcode",INVALID_TERMINATOR:"invalid terminating opcode",OPCODE_INTERMEDIATES_OOB:"invalid opcode: intermediates out-of-bounds",INVALID_RJUMP:"invalid rjump* target",INVALID_CALL_TARGET:"invalid callf/jumpf target",INVALID_CALLF_RETURNING:"invalid callf: calls to non-returning function",INVALID_STACK_HEIGHT:"invalid stack height",INVALID_JUMPF:"invalid jumpf target (output count)",INVALID_RETURNING_SECTION:"invalid returning code section: section is not returning",RETURNING_NO_RETURN:"invalid section: section should return but has no RETF/JUMP to return",RJUMPV_TABLE_SIZE0:"invalid RJUMPV: table size 0",UNREACHABLE_CODE_SECTIONS:"unreachable code sections",UNREACHABLE_CODE:"unreachable code (by forward jumps)",DATALOADN_OOB:"DATALOADN reading out of bounds",MAX_STACK_HEIGHT_VIOLATION:"Max stack height does not match the reported max stack height",STACK_UNDERFLOW:"Stack underflow",STACK_OVERFLOW:"Stack overflow",UNSTABLE_STACK:"Unstable stack (can reach stack under/overflow by jumps)",RETF_NO_RETURN:"Trying to return to undefined function",RETURN_STACK_OVERFLOW:"Return stack overflow",INVALID_EXTCALL_TARGET:"invalid extcall target: address > 20 bytes",INVALID_RETURN_CONTRACT_DATA_SIZE:"invalid RETURNCONTRACT: data size lower than expected"};function z(e,...t){switch(e){case C.OUT_OF_BOUNDS:{const n=t[0];throw L(n===0||n===2||n===3||n===6?t[1]:C.OUT_OF_BOUNDS+" ")}case C.VERIFY_BYTES:{const n=t[0];throw L(n===0||n===2||n===3||n===6?t[1]:C.VERIFY_BYTES+` at pos: ${t[0]}: ${t[1]}`)}case C.VERIFY_UINT:{const n=t[0];throw L(n===0||n===2||n===3||n===6||n===18?t[1]:C.VERIFY_UINT+`at pos: ${t[0]}: ${t[1]}`)}case C.TYPE_SIZE:throw L(C.TYPE_SIZE+t[0]);case C.TYPE_SECTIONS:throw L(`${C.TYPE_SECTIONS} (types ${t[0]} code ${t[1]})`);case C.INVALID_TYPE_SIZE:throw L(C.INVALID_TYPE_SIZE);case C.INVALID_CODE_SIZE:throw L(C.INVALID_CODE_SIZE+t[0]);case C.INPUTS:throw L(`${C.INPUTS} - typeSection ${t[0]}`);case C.OUTPUTS:throw L(`${C.OUTPUTS} - typeSection ${t[0]}`);case C.CODE0_INPUTS:throw L("first code section should have 0 inputs");case C.CODE0_OUTPUTS:throw L("first code section should have 0 outputs");case C.MAX_INPUTS:throw L(C.MAX_INPUTS+`${t[1]} - code section ${t[0]}`);case C.MAX_OUTPUTS:throw L(C.MAX_OUTPUTS+`${t[1]} - code section ${t[0]}`);case C.CODE_SECTION:throw L(`expected code: codeSection ${t[0]}: `);case C.DATA_SECTION:throw L(C.DATA_SECTION);case C.MAX_STACK_HEIGHT:throw L(`${C.MAX_STACK_HEIGHT} - typeSection ${t[0]}: `);case C.MAX_STACK_HEIGHT_LIMIT:throw L(`${C.MAX_STACK_HEIGHT_LIMIT}, got: ${t[1]} - typeSection ${t[0]}`);case C.DANGLING_BYTES:throw L(C.DANGLING_BYTES);default:throw L(e)}}const en={0:{inputs:0,outputs:0,name:"STOP",intermediates:0,terminating:!0},1:{inputs:2,outputs:1,name:"ADD",intermediates:0},2:{inputs:2,outputs:1,name:"MUL",intermediates:0},3:{inputs:2,outputs:1,name:"SUB",intermediates:0},4:{inputs:2,outputs:1,name:"DIV",intermediates:0},5:{inputs:2,outputs:1,name:"SDIV",intermediates:0},6:{inputs:2,outputs:1,name:"MOD",intermediates:0},7:{inputs:2,outputs:1,name:"SMOD",intermediates:0},8:{inputs:3,outputs:1,name:"ADDMOD",intermediates:0},9:{inputs:3,outputs:1,name:"MULMOD",intermediates:0},10:{inputs:2,outputs:1,name:"EXP",intermediates:0},11:{inputs:2,outputs:1,name:"SIGNEXTEND",intermediates:0},16:{inputs:2,outputs:1,name:"LT",intermediates:0},17:{inputs:2,outputs:1,name:"GT",intermediates:0},18:{inputs:2,outputs:1,name:"SLT",intermediates:0},19:{inputs:2,outputs:1,name:"SGT",intermediates:0},20:{inputs:2,outputs:1,name:"EQ",intermediates:0},21:{inputs:1,outputs:1,name:"ISZERO",intermediates:0},22:{inputs:2,outputs:1,name:"AND",intermediates:0},23:{inputs:2,outputs:1,name:"OR",intermediates:0},24:{inputs:2,outputs:1,name:"XOR",intermediates:0},25:{inputs:1,outputs:1,name:"NOT",intermediates:0},26:{inputs:2,outputs:1,name:"BYTE",intermediates:0},27:{inputs:2,outputs:1,name:"SHL",intermediates:0},28:{inputs:2,outputs:1,name:"SHR",intermediates:0},29:{inputs:2,outputs:1,name:"SAR",intermediates:0},32:{inputs:2,outputs:1,name:"SHA3",intermediates:0},48:{inputs:0,outputs:1,name:"ADDRESS",intermediates:0},49:{inputs:1,outputs:1,name:"BALANCE",intermediates:0},50:{inputs:0,outputs:1,name:"ORIGIN",intermediates:0},51:{inputs:0,outputs:1,name:"CALLER",intermediates:0},52:{inputs:0,outputs:1,name:"CALLVALUE",intermediates:0},53:{inputs:1,outputs:1,name:"CALLDATALOAD",intermediates:0},54:{inputs:0,outputs:1,name:"CALLDATASIZE",intermediates:0},55:{inputs:3,outputs:0,name:"CALLDATACOPY",intermediates:0},58:{inputs:0,outputs:1,name:"GASPRICE",intermediates:0},61:{inputs:0,outputs:1,name:"RETURNDATASIZE",intermediates:0},62:{inputs:3,outputs:0,name:"RETURNDATACOPY",intermediates:0},64:{inputs:1,outputs:1,name:"BLOCKHASH",intermediates:0},65:{inputs:0,outputs:1,name:"COINBASE",intermediates:0},66:{inputs:0,outputs:1,name:"TIMESTAMP",intermediates:0},67:{inputs:0,outputs:1,name:"NUMBER",intermediates:0},68:{inputs:0,outputs:1,name:"PREVRANDAO",intermediates:0},69:{inputs:0,outputs:1,name:"GASLIMIT",intermediates:0},70:{inputs:0,outputs:1,name:"CHAINID",intermediates:0},71:{inputs:0,outputs:1,name:"SELFBALANCE",intermediates:0},72:{inputs:0,outputs:1,name:"BASEFEE",intermediates:0},73:{inputs:1,outputs:1,name:"BLOBAHASH",intermediates:0},74:{inputs:0,outputs:1,name:"BLOBBASEFEE",intermediates:0},80:{inputs:1,outputs:0,name:"POP",intermediates:0},81:{inputs:1,outputs:1,name:"MLOAD",intermediates:0},82:{inputs:2,outputs:0,name:"MSTORE",intermediates:0},83:{inputs:2,outputs:0,name:"MSTORE8",intermediates:0},84:{inputs:1,outputs:1,name:"SLOAD",intermediates:0},85:{inputs:2,outputs:0,name:"SSTORE",intermediates:0},89:{inputs:0,outputs:1,name:"MSIZE",intermediates:0},91:{inputs:0,outputs:0,name:"NOOP",intermediates:0},92:{inputs:1,outputs:1,name:"TLOAD",intermediates:0},93:{inputs:2,outputs:0,name:"TSTORE",intermediates:0},94:{inputs:3,outputs:0,name:"MCOPY",intermediates:0},95:{inputs:0,outputs:1,name:"PUSH0",intermediates:0},96:{inputs:0,outputs:1,name:"PUSH1",intermediates:1},97:{inputs:0,outputs:1,name:"PUSH2",intermediates:2},98:{inputs:0,outputs:1,name:"PUSH3",intermediates:3},99:{inputs:0,outputs:1,name:"PUSH4",intermediates:4},100:{inputs:0,outputs:1,name:"PUSH5",intermediates:5},101:{inputs:0,outputs:1,name:"PUSH6",intermediates:6},102:{inputs:0,outputs:1,name:"PUSH7",intermediates:7},103:{inputs:0,outputs:1,name:"PUSH8",intermediates:8},104:{inputs:0,outputs:1,name:"PUSH9",intermediates:9},105:{inputs:0,outputs:1,name:"PUSH10",intermediates:10},106:{inputs:0,outputs:1,name:"PUSH11",intermediates:11},107:{inputs:0,outputs:1,name:"PUSH12",intermediates:12},108:{inputs:0,outputs:1,name:"PUSH13",intermediates:13},109:{inputs:0,outputs:1,name:"PUSH14",intermediates:14},110:{inputs:0,outputs:1,name:"PUSH15",intermediates:15},111:{inputs:0,outputs:1,name:"PUSH16",intermediates:16},112:{inputs:0,outputs:1,name:"PUSH17",intermediates:17},113:{inputs:0,outputs:1,name:"PUSH18",intermediates:18},114:{inputs:0,outputs:1,name:"PUSH19",intermediates:19},115:{inputs:0,outputs:1,name:"PUSH20",intermediates:20},116:{inputs:0,outputs:1,name:"PUSH21",intermediates:21},117:{inputs:0,outputs:1,name:"PUSH22",intermediates:22},118:{inputs:0,outputs:1,name:"PUSH23",intermediates:23},119:{inputs:0,outputs:1,name:"PUSH24",intermediates:24},120:{inputs:0,outputs:1,name:"PUSH25",intermediates:25},121:{inputs:0,outputs:1,name:"PUSH26",intermediates:26},122:{inputs:0,outputs:1,name:"PUSH27",intermediates:27},123:{inputs:0,outputs:1,name:"PUSH28",intermediates:28},124:{inputs:0,outputs:1,name:"PUSH29",intermediates:29},125:{inputs:0,outputs:1,name:"PUSH30",intermediates:30},126:{inputs:0,outputs:1,name:"PUSH31",intermediates:31},127:{inputs:0,outputs:1,name:"PUSH32",intermediates:32},128:{inputs:1,outputs:2,name:"DUP1",intermediates:0},129:{inputs:2,outputs:3,name:"DUP2",intermediates:0},130:{inputs:3,outputs:4,name:"DUP3",intermediates:0},131:{inputs:4,outputs:5,name:"DUP4",intermediates:0},132:{inputs:5,outputs:6,name:"DUP5",intermediates:0},133:{inputs:6,outputs:7,name:"DUP6",intermediates:0},134:{inputs:7,outputs:8,name:"DUP7",intermediates:0},135:{inputs:8,outputs:9,name:"DUP8",intermediates:0},136:{inputs:9,outputs:10,name:"DUP9",intermediates:0},137:{inputs:10,outputs:11,name:"DUP10",intermediates:0},138:{inputs:11,outputs:12,name:"DUP11",intermediates:0},139:{inputs:12,outputs:13,name:"DUP12",intermediates:0},140:{inputs:13,outputs:14,name:"DUP13",intermediates:0},141:{inputs:14,outputs:15,name:"DUP14",intermediates:0},142:{inputs:15,outputs:16,name:"DUP15",intermediates:0},143:{inputs:16,outputs:17,name:"DUP16",intermediates:0},144:{inputs:2,outputs:2,name:"SWAP1",intermediates:0},145:{inputs:3,outputs:3,name:"SWAP2",intermediates:0},146:{inputs:4,outputs:4,name:"SWAP3",intermediates:0},147:{inputs:5,outputs:5,name:"SWAP4",intermediates:0},148:{inputs:6,outputs:6,name:"SWAP5",intermediates:0},149:{inputs:7,outputs:7,name:"SWAP6",intermediates:0},150:{inputs:8,outputs:8,name:"SWAP7",intermediates:0},151:{inputs:9,outputs:9,name:"SWAP8",intermediates:0},152:{inputs:10,outputs:10,name:"SWAP9",intermediates:0},153:{inputs:11,outputs:11,name:"SWAP10",intermediates:0},154:{inputs:12,outputs:12,name:"SWAP11",intermediates:0},155:{inputs:13,outputs:13,name:"SWAP12",intermediates:0},156:{inputs:14,outputs:14,name:"SWAP13",intermediates:0},157:{inputs:15,outputs:15,name:"SWAP14",intermediates:0},158:{inputs:16,outputs:16,name:"SWAP15",intermediates:0},159:{inputs:17,outputs:17,name:"SWAP16",intermediates:0},160:{inputs:2,outputs:0,name:"LOG0",intermediates:0},161:{inputs:3,outputs:0,name:"LOG1",intermediates:0},162:{inputs:4,outputs:0,name:"LOG2",intermediates:0},163:{inputs:5,outputs:0,name:"LOG3",intermediates:0},164:{inputs:6,outputs:0,name:"LOG4",intermediates:0},208:{inputs:1,outputs:1,name:"DATALOAD",intermediates:0},209:{inputs:0,outputs:1,name:"DATALOADN",intermediates:2},210:{inputs:0,outputs:1,name:"DATASIZE",intermediates:0},211:{inputs:3,outputs:0,name:"DATACOPY",intermediates:0},224:{inputs:0,outputs:0,name:"RJUMP",intermediates:2},225:{inputs:1,outputs:0,name:"RJUMPI",intermediates:2},226:{inputs:1,outputs:0,name:"RJUMPV",intermediates:0},227:{inputs:0,outputs:0,name:"CALLF",intermediates:2},228:{inputs:0,outputs:0,name:"RETF",intermediates:0,terminating:!0},229:{inputs:0,outputs:0,name:"JUMPF",intermediates:2,terminating:!0},230:{inputs:0,outputs:1,name:"DUPN",intermediates:1},231:{inputs:0,outputs:0,name:"SWAPN",intermediates:1},232:{inputs:0,outputs:0,name:"EXCHANGE",intermediates:1},236:{inputs:4,outputs:1,name:"EOFCREATE",intermediates:1},238:{inputs:2,outputs:0,name:"RETURNCONTRACT",intermediates:1,terminating:!0},243:{inputs:2,outputs:0,name:"RETURN",intermediates:0,terminating:!0},247:{inputs:1,outputs:1,name:"RETURNDATALOAD",intermediates:0},248:{inputs:4,outputs:1,name:"EXTCALL",intermediates:0},249:{inputs:3,outputs:1,name:"EXTDELEGATECALL",intermediates:0},251:{inputs:3,outputs:1,name:"EXTSTATICCALL",intermediates:0},253:{inputs:2,outputs:0,name:"REVERT",intermediates:0,terminating:!0},254:{inputs:0,outputs:0,name:"INVALID",intermediates:0,terminating:!0}},rt={InitCode:"initCode",DeploymentCode:"deploymentCode",RuntimeCode:"runtimeCode"};function Ld(e,t,n=rt.RuntimeCode){return Rd(e,t,n)}function Yi(e,t){return new DataView(e.buffer).getInt16(t)}function Xi(e,t){return new DataView(e.buffer).getUint16(t)}function Rd(e,t,n=rt.RuntimeCode){const s=new Map,r=t.getActiveOpcodes(),i=new Set;for(const[d]of r)i.add(d);i.add(254),i.delete(56),i.delete(57),i.delete(90),i.delete(59),i.delete(60),i.delete(63),i.delete(242),i.delete(255),i.delete(86),i.delete(87),i.delete(88),i.delete(240),i.delete(245);const o=new Set;o.add(0),o.add(243),o.add(253),o.add(254),o.add(238),o.add(228),o.add(229),o.add(224);for(const d of o)i.has(d)||o.delete(d);const a=new Set,c={};let f=-1;for(const d of e.body.codeSections){let g=function(W){h.has(W)&&z(C.INVALID_RJUMP),p.add(W)},m=function(W){p.has(W)&&z(C.INVALID_RJUMP),h.add(W)};const h=new Set,p=new Set;f++,c[f]=new Set;const w=e.body.typeSections[f].outputs===128;let T=!1;const E=new Set;E.add(0);let A=0,G=0;const U=e.body.typeSections[f].inputs;let P=U;const H=[U],k=[U];for(;A<d.length;){const W=new Set;E.has(A)||z(C.UNREACHABLE_CODE),(H[A]===void 0||k[A]===void 0)&&z(C.UNREACHABLE_CODE),a.add(A);const $=d[A],M=H[A],v=k[A],b=en[$].inputs,_=en[$].outputs;M-b<0&&z(C.STACK_UNDERFLOW);const I=_-b;let R=M+I,S=v+I;if(S>1024&&z(C.STACK_OVERFLOW),w&&$===228&&z(C.INVALID_RETURNING_SECTION),G=$,i.has($)||z(C.INVALID_OPCODE),$===224||$===225){const B=Yi(d,A+1)+A+3;(B<0||B>=d.length)&&z(C.INVALID_RJUMP),W.add(B),g(B),E.add(B),$===224&&!E.has(A+3)&&A+3<d.length&&z(C.UNREACHABLE_CODE)}else if($===226){const B=d[A+1]+1;B===void 0?z(C.OPCODE_INTERMEDIATES_OOB):B===0&&z(C.RJUMPV_TABLE_SIZE0),A+B*2+2>=d.length&&z(C.OPCODE_INTERMEDIATES_OOB);const F=A+2+B*2;for(let V=0;V<B;V++){const X=A+2+V*2;m(X),m(X+1);const K=Yi(d,X)+F;(K<0||K>=d.length)&&z(C.OPCODE_INTERMEDIATES_OOB),W.add(K),g(K),E.add(K)}m(A+1),A+=2*B+1}else if($===227||$===229){const B=Xi(d,A+1);if(c[f].add(B),B>=e.header.codeSizes.length&&z(C.INVALID_CALL_TARGET),$===227){const F=e.body.typeSections[B].outputs,V=e.body.typeSections[B].inputs;F===128&&z(C.INVALID_CALLF_RETURNING),M<V&&z(C.STACK_UNDERFLOW),v+e.body.typeSections[B].maxStackHeight-V>1024&&z(C.STACK_OVERFLOW),R+=F-V,S+=F-V}else{const F=e.body.typeSections[f].outputs,V=e.body.typeSections[B].outputs,X=e.body.typeSections[B].inputs,K=V===128;if(V>F&&!K&&z(C.INVALID_JUMPF),w&&V<=127&&z(C.INVALID_RETURNING_SECTION),K)M<X&&z(C.STACK_UNDERFLOW);else{const J=F+X-V;M===v&&v===J||z(C.INVALID_STACK_HEIGHT),T=!0}v+e.body.typeSections[B].maxStackHeight-X>1024&&z(C.STACK_OVERFLOW)}}else if($===228){const B=e.body.typeSections[f].outputs;M===v&&v===B||z(C.INVALID_STACK_HEIGHT),T=!0}else if($===230)d[A+1]+1>M&&z(C.STACK_UNDERFLOW);else if($===231)d[A+1]+2>M&&z(C.STACK_UNDERFLOW);else if($===232){const B=d[A+1],F=(B>>4)+1,V=(B&15)+1;F+V+1>M&&z(C.STACK_UNDERFLOW)}else if($===236){const B=d[A+1];B>=e.header.containerSizes.length&&z(C.INVALID_EOF_CREATE_TARGET),s.has(B)&&s.get(B)!==rt.InitCode&&z(C.CONTAINER_DOUBLE_TYPE),s.set(B,rt.InitCode)}else if($===238){n!==rt.InitCode&&z(C.CONTAINER_TYPE_ERROR);const B=d[A+1];B>=e.header.containerSizes.length&&z(C.INVALID_RETURN_CONTRACT_TARGET),s.has(B)&&s.get(B)!==rt.DeploymentCode&&z(C.CONTAINER_DOUBLE_TYPE),s.set(B,rt.DeploymentCode)}else if($===209){const F=Xi(d,A+1)+32;e.header.dataSize<F&&z(C.DATALOADN_OOB)}else($===0||$===243)&&n===rt.InitCode&&z(C.CONTAINER_TYPE_ERROR);const D=en[$].intermediates;if(D>0){for(let B=1;B<=D;B++)m(A+B);A+=D}A>=d.length&&z(C.OPCODE_INTERMEDIATES_OOB),A++,en[$].terminating===void 0&&(E.add(A),$!==224&&W.add(A));for(const B of W)B<A&&(H[B]!==R||k[B]!==S)&&z(C.UNSTABLE_STACK),k[B]===void 0?(H[B]=R,k[B]=S):(H[B]=Math.min(H[B],R),k[B]=Math.max(k[B],S));P=Math.max(S,P)}o.has(G)||z(C.INVALID_TERMINATOR),e.body.typeSections[f].maxStackHeight!==P&&z(C.MAX_STACK_HEIGHT_VIOLATION),P>1024&&z(C.MAX_STACK_HEIGHT_LIMIT),!T&&!w&&z(C.RETURNING_NO_RETURN)}const l=new Set;l.add(0);const u=[0];for(;u.length>0;){const d=c[u.pop()];for(const h of d)l.has(h)||(l.add(h),u.push(h))}return l.size!==e.header.codeSizes.length&&z(C.UNREACHABLE_CODE_SECTIONS),s.size!==e.header.containerSizes.length&&z(C.UNREACHABLE_CONTAINER_SECTIONS),s}const pt={Default:"default",Initmode:"initMode",TxInitmode:"txInitMode"};class Ia{constructor(t){this.data=t,this.ptr=0}readBytes(t,n){const s=this.ptr+t;s>this.data.length&&z(C.OUT_OF_BOUNDS,this.ptr,n);const r=this.ptr;return this.ptr+=t,this.data.slice(r,s)}readUint(t){return this.ptr>=this.data.length&&z(C.OUT_OF_BOUNDS,this.ptr,t),this.data[this.ptr++]}verifyUint(t,n){this.readUint()!==t&&z(C.VERIFY_UINT,this.ptr-1,n)}readUint16(t){this.ptr+2>this.data.length&&z(C.OUT_OF_BOUNDS,this.ptr,t);const s=this.ptr;return this.ptr+=2,new DataView(this.data.buffer).getUint16(s)}getPtr(){return this.ptr}readRemainder(){return this.data.slice(this.ptr)}isAtEnd(){return this.ptr===this.data.length}}class Ud{constructor(t){if(t.length>yd)throw L("err: container size more than maximum valid size");const n=new Ia(t);if(n.verifyUint(Ms,C.FORMAT),n.verifyUint(ui,C.MAGIC),n.verifyUint(Aa,C.VERSION),t.length<15)throw L("err: container size less than minimum valid size");n.verifyUint(_d,C.KIND_TYPE);const s=n.readUint16(C.TYPE_SIZE);if(s<Bd&&z(C.INVALID_TYPE_SIZE,s),s%cr!==0&&z(C.INVALID_TYPE_SIZE,s),s>vd)throw L(`err: number of code sections must not exceed 1024 (got ${s})`);n.verifyUint(Ed,C.KIND_CODE);const r=n.readUint16(C.CODE_SIZE);r<Nd&&z(C.MIN_CODE_SECTIONS),r!==s/cr&&z(C.TYPE_SECTIONS,s/cr,r);const i=[];for(let l=0;l<r;l++){const u=n.readUint16(C.CODE_SECTION);u<Cd&&z(C.CODE_SECTION_SIZE),i.push(u)}let o=n.readUint();const a=[];if(o===wd){const l=n.readUint16(C.CONTAINER_SIZE);l<Sd&&z(C.CONTAINER_SECTION_SIZE),l>Od&&z(C.CONTAINER_SECTION_SIZE);for(let u=0;u<l;u++){const d=n.readUint16(C.CONTAINER_SECTION);d<Td&&z(C.CONTAINER_SECTION_MIN),a.push(d)}o=n.readUint()}o!==Ad&&z(C.KIND_DATA),this.dataSizePtr=n.getPtr();const c=n.readUint16(C.DATA_SIZE);n.verifyUint(Id,C.TERMINATOR),this.typeSize=s,this.codeSizes=i,this.containerSizes=a,this.dataSize=c,this.buffer=t.slice(0,n.getPtr());const f=this.buffer.length+this.typeSize;this.codeStartPos=[f]}sections(){return[this.typeSize,this.codeSizes,this.containerSizes,this.dataSize]}sectionSizes(){return[1,this.codeSizes.length,this.containerSizes.length,1]}getCodePosition(t){if(this.codeStartPos[t])return this.codeStartPos[t];const n=this.codeStartPos.length;let s=this.codeStartPos[n-1];for(let r=n;r<=t;r++)s+=this.codeSizes[r-1],this.codeStartPos[r]=s;return s}getSectionFromProgramCounter(t){const n=this.codeSizes.length-1,r=this.getCodePosition(n)+this.codeSizes[n];if(t<0||t>r)throw L("program counter out of bounds");this.codeStartPos.length<this.codeSizes.length&&this.getCodePosition(this.codeSizes.length-1);for(let i=0;i<this.codeSizes.length;i++)if(t<this.codeStartPos[i]+this.codeSizes[i])return i;throw L(`Invalid program counter value: ${t}`)}}class Dd{constructor(t,n,s=pt.Default,r=!1){const i=new Ia(t),o=[];for(let d=0;d<n.typeSize/4;d++){const h=i.readUint(C.INPUTS),p=i.readUint(C.OUTPUTS),g=i.readUint16(C.MAX_STACK_HEIGHT);d===0&&(h!==0&&z(C.CODE0_INPUTS),p!==128&&z(C.CODE0_OUTPUTS)),h>Gd&&z(C.MAX_INPUTS,d,h),p>kd&&z(C.MAX_OUTPUTS,d,p),g>Pd&&z(C.MAX_STACK_HEIGHT_LIMIT,d,g),o.push({inputs:h,outputs:p,maxStackHeight:g})}const a=i.getPtr(),c=[];for(const[d,h]of n.codeSizes.entries())try{const p=i.readBytes(h);c.push(p)}catch{z(C.CODE_SECTION,d)}const f=t.slice(a,i.getPtr()),l=[];for(const[d,h]of n.containerSizes.entries())try{const p=i.readBytes(h);l.push(p)}catch{z(C.CONTAINER_SECTION,d)}let u;s!==pt.Initmode&&!r?(u=i.readBytes(n.dataSize,C.DATA_SECTION),s===pt.Default?i.isAtEnd()||z(C.DANGLING_BYTES):this.txCallData=i.readRemainder()):(u=i.readRemainder(),u.length>n.dataSize&&z(C.DANGLING_BYTES)),this.typeSections=o,this.codeSections=c,this.containerSections=l,this.entireCode=f,this.dataSection=u,this.buffer=t}sections(){return[this.typeSections,this.codeSections,this.dataSection]}size(){return{typeSize:this.typeSections.length,codeSize:this.codeSections.length,dataSize:this.dataSection.length}}sectionSizes(){return[this.typeSections.map(()=>4),this.codeSections.map(t=>t.length),this.dataSection.length]}}class li{constructor(t,n=pt.Default,s=!1){this.eofMode=n,this.header=new Ud(t),this.body=new Dd(t.slice(this.header.buffer.length),this.header,n,s),this.buffer=t}}function Ba(e,t,n=rt.RuntimeCode,s=pt.Default){const r=new li(e,s,n===rt.DeploymentCode),i=Ld(r,t,n);for(let o=0;o<r.body.containerSections.length;o++){const a=r.body.containerSections[o],c=i.get(o);Ba(a,t,c)}return r}const va="EVMError",Hd={OUT_OF_GAS:"out of gas",CODESTORE_OUT_OF_GAS:"code store out of gas",CODESIZE_EXCEEDS_MAXIMUM:"code size to deposit exceeds maximum code size",STACK_UNDERFLOW:"stack underflow",STACK_OVERFLOW:"stack overflow",INVALID_JUMP:"invalid JUMP",INVALID_OPCODE:"invalid opcode",OUT_OF_RANGE:"value out of range",REVERT:"revert",STATIC_STATE_CHANGE:"static state change",INTERNAL_ERROR:"internal error",CREATE_COLLISION:"create collision",STOP:"stop",REFUND_EXHAUSTED:"refund exhausted",VALUE_OVERFLOW:"value overflow",INSUFFICIENT_BALANCE:"insufficient balance",INVALID_BYTECODE_RESULT:"invalid bytecode deployed",INITCODE_SIZE_VIOLATION:"initcode exceeds max initcode size",INVALID_INPUT_LENGTH:"invalid input length",INVALID_EOF_FORMAT:"invalid EOF format",BLS_12_381_INVALID_INPUT_LENGTH:"invalid input length",BLS_12_381_POINT_NOT_ON_CURVE:"point not on curve",BLS_12_381_INPUT_EMPTY:"input is empty",BLS_12_381_FP_NOT_IN_FIELD:"fp point not in field",BN254_FP_NOT_IN_FIELD:"fp point not in field",INVALID_COMMITMENT:"kzg commitment does not match versioned hash",INVALID_INPUTS:"kzg inputs invalid",INVALID_PROOF:"kzg proof invalid"};class x{constructor(t){this.error=t,this.errorType=va}}x.errorMessages=Hd;var os={exports:{}},fr,Ji;function Md(){if(Ji)return fr;Ji=1;var e=1e3,t=e*60,n=t*60,s=n*24,r=s*7,i=s*365.25;fr=function(l,u){u=u||{};var d=typeof l;if(d==="string"&&l.length>0)return o(l);if(d==="number"&&isFinite(l))return u.long?c(l):a(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function o(l){if(l=String(l),!(l.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(u){var d=parseFloat(u[1]),h=(u[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return d*i;case"weeks":case"week":case"w":return d*r;case"days":case"day":case"d":return d*s;case"hours":case"hour":case"hrs":case"hr":case"h":return d*n;case"minutes":case"minute":case"mins":case"min":case"m":return d*t;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function a(l){var u=Math.abs(l);return u>=s?Math.round(l/s)+"d":u>=n?Math.round(l/n)+"h":u>=t?Math.round(l/t)+"m":u>=e?Math.round(l/e)+"s":l+"ms"}function c(l){var u=Math.abs(l);return u>=s?f(l,u,s,"day"):u>=n?f(l,u,n,"hour"):u>=t?f(l,u,t,"minute"):u>=e?f(l,u,e,"second"):l+" ms"}function f(l,u,d,h){var p=u>=d*1.5;return Math.round(l/d)+" "+h+(p?"s":"")}return fr}var dr,Qi;function Fd(){if(Qi)return dr;Qi=1;function e(t){s.debug=s,s.default=s,s.coerce=f,s.disable=a,s.enable=i,s.enabled=c,s.humanize=Md(),s.destroy=l,Object.keys(t).forEach(u=>{s[u]=t[u]}),s.names=[],s.skips=[],s.formatters={};function n(u){let d=0;for(let h=0;h<u.length;h++)d=(d<<5)-d+u.charCodeAt(h),d|=0;return s.colors[Math.abs(d)%s.colors.length]}s.selectColor=n;function s(u){let d,h=null,p,g;function m(...w){if(!m.enabled)return;const T=m,E=Number(new Date),A=E-(d||E);T.diff=A,T.prev=d,T.curr=E,d=E,w[0]=s.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let G=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(P,H)=>{if(P==="%%")return"%";G++;const k=s.formatters[H];if(typeof k=="function"){const W=w[G];P=k.call(T,W),w.splice(G,1),G--}return P}),s.formatArgs.call(T,w),(T.log||s.log).apply(T,w)}return m.namespace=u,m.useColors=s.useColors(),m.color=s.selectColor(u),m.extend=r,m.destroy=s.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==s.namespaces&&(p=s.namespaces,g=s.enabled(u)),g),set:w=>{h=w}}),typeof s.init=="function"&&s.init(m),m}function r(u,d){const h=s(this.namespace+(typeof d>"u"?":":d)+u);return h.log=this.log,h}function i(u){s.save(u),s.namespaces=u,s.names=[],s.skips=[];const d=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const h of d)h[0]==="-"?s.skips.push(h.slice(1)):s.names.push(h)}function o(u,d){let h=0,p=0,g=-1,m=0;for(;h<u.length;)if(p<d.length&&(d[p]===u[h]||d[p]==="*"))d[p]==="*"?(g=p,m=h,p++):(h++,p++);else if(g!==-1)p=g+1,m++,h=m;else return!1;for(;p<d.length&&d[p]==="*";)p++;return p===d.length}function a(){const u=[...s.names,...s.skips.map(d=>"-"+d)].join(",");return s.enable(""),u}function c(u){for(const d of s.skips)if(o(u,d))return!1;for(const d of s.names)if(o(u,d))return!0;return!1}function f(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return dr=e,dr}var eo;function $d(){return eo||(eo=1,(function(e,t){var n={};t.formatArgs=r,t.save=i,t.load=o,t.useColors=s,t.storage=a(),t.destroy=(()=>{let f=!1;return()=>{f||(f=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let f;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(f=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(f[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;f.splice(1,0,l,"color: inherit");let u=0,d=0;f[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(u++,h==="%c"&&(d=u))}),f.splice(d,0,l)}t.log=console.debug||console.log||(()=>{});function i(f){try{f?t.storage.setItem("debug",f):t.storage.removeItem("debug")}catch{}}function o(){let f;try{f=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!f&&typeof process<"u"&&"env"in process&&(f=n.DEBUG),f}function a(){try{return localStorage}catch{}}e.exports=Fd()(t);const{formatters:c}=e.exports;c.j=function(f){try{return JSON.stringify(f)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(os,os.exports)),os.exports}var Vd=$d();const cn=wa(Vd),Fn=new Uint8Array([Ms,ui]),qd=Gt(Fn);function Yt(e){const t=e.subarray(0,Fn.length);return ge(Fn,t)}function zd(e,t=pt.Default){e.env.eof={container:new li(e.code,t),eofRunState:{returnStack:[]}},e.env.eof.container.body.txCallData!==void 0&&(e.env.callData=e.env.eof.container.body.txCallData);const n=e.env.eof.container.header.getCodePosition(0);e.programCounter=n}const Wd=3e7,jd=12,Zd=Wd/jd;class Kd{constructor(t){this.runTime=0,this.tag=t,this.startTime=performance.now()}pause(){this.runTime=this.runTime+performance.now()-this.startTime}unpause(){this.startTime=performance.now()}time(){return(performance.now()-this.startTime+this.runTime)/1e3}}class Yd{constructor(){this.clear()}clear(){this.opcodes={},this.precompiles={}}getLogs(){function t(n){const s=[];for(const r in n){const i=n[r],o=i.gasUsed/i.time,a={calls:i.calls,totalTime:Math.round(i.time*1e6)/1e3,avgTimePerCall:Math.round(i.time/i.calls*1e6)/1e3,gasUsed:i.gasUsed,millionGasPerSecond:Math.round(o/1e3)/1e3,blocksPerSlot:Math.round(o/Zd*1e3)/1e3,tag:r};i.dynamicGasUsed!==void 0&&(a.staticGas=i.staticGas,a.staticGasUsed=i.staticGas*i.calls,a.dynamicGasUsed=i.dynamicGasUsed),s.push(a)}return s.sort((r,i)=>i.millionGasPerSecond-r.millionGasPerSecond),s}return{opcodes:t(this.opcodes),precompiles:t(this.precompiles)}}hasTimer(){return this.currentTimer!==void 0}startTimer(t){if(this.currentTimer!==void 0)throw L("Cannot have two timers running at the same time");return this.currentTimer=new Kd(t),this.currentTimer}pauseTimer(){const t=this.currentTimer;if(t===void 0)throw L("No timer to pause");return t.pause(),this.currentTimer=void 0,t}unpauseTimer(t){if(this.currentTimer!==void 0)throw L("Cannot unpause timer: another timer is already running");t.unpause(),this.currentTimer=t}stopTimer(t,n,s="opcodes",r,i){if(this.currentTimer===void 0||this.currentTimer!==t)throw L("Cannot stop timer: another timer is already running");const o=t.time(),a=t.tag;this.currentTimer=void 0;const c=this[s];c[a]===void 0&&(c[a]={calls:0,time:0,gasUsed:0});const f=c[a];f.calls++,f.time+=o,f.gasUsed+=n,s==="opcodes"&&(f.staticGas=r,f.dynamicGasUsed=(f.dynamicGasUsed??0)+i)}}const Xd=(e,t)=>{const n=e%t;return n===0?e:e+t-n},ur=8192;class Jd{constructor(){this._store=new Uint8Array(ur)}extend(t,n){if(n===0)return;const r=Xd(t+n,32)-this._store.length;if(r>0){const i=Math.ceil(r/ur)*ur;this._store=Ke(this._store,new Uint8Array(i))}}write(t,n,s){if(n!==0){if(this.extend(t,n),s.length!==n)throw L("Invalid value size");if(t+n>this._store.length)throw L("Value exceeds memory capacity");this._store.set(s,t)}}read(t,n,s){this.extend(t,n);const r=this._store.subarray(t,t+n);if(s===!0)return r;const i=new Uint8Array(n);return i.set(r),i}}const Ht={value:y,caller:At(),data:new Uint8Array(0),depth:0,isStatic:!1,isCompiled:!1,delegatecall:!1,gasRefund:y};class Xt{constructor(t){if(this.to=t.to,this.value=t.value??Ht.value,this.caller=t.caller??Ht.caller,this.gasLimit=t.gasLimit,this.data=t.data??Ht.data,this.eofCallData=t.eofCallData,this.depth=t.depth??Ht.depth,this.code=t.code,this._codeAddress=t.codeAddress,this.isStatic=t.isStatic??Ht.isStatic,this.isCompiled=t.isCompiled??Ht.isCompiled,this.salt=t.salt,this.selfdestruct=t.selfdestruct,this.createdAddresses=t.createdAddresses,this.delegatecall=t.delegatecall??Ht.delegatecall,this.gasRefund=t.gasRefund??Ht.gasRefund,this.blobVersionedHashes=t.blobVersionedHashes,this.accessWitness=t.accessWitness,this.value<0)throw L(`value field cannot be negative, received ${this.value}`)}get codeAddress(){const t=this._codeAddress??this.to;if(!t)throw L("Missing codeAddress");return t}}const Qd=(Q<<ba)-Q;function $t(e,t){let n=e%t;return n<y&&(n=t+n),n}function Mt(e){return BigInt.asIntN(256,e)}function to(e){return BigInt.asUintN(256,e)}const no=BigInt(1157920892373162e62);function eu(e,t){let n=Q;for(;t>y;)t%Tt!==y&&(n=n*e%no),e=e*e%no,t=t/Tt;return n}function ie(e){const t=e&Qd;return cd(t)}function Cn(e){return ge(e,new Uint8Array(e.length))?new Uint8Array(0):se(e,32)}function q(e){throw new x(e)}function as(e){const t=e.interpreter._evm.common.customCrypto.keccak256??Gt,n=Y(t(e.interpreter.getCode())),s=e.interpreter.getAddress().toString(),r=e.programCounter-1;return`${n}/${s}:${r}`}function wt(e,t){const n=e/t;return $t(e,t)===y?n:n<y?n-Q:n+Q}function gn(e,t,n){const s=BigInt(e.length);t>s&&(t=s);let r=t+n;return r>s&&(r=s),e=e.subarray(Number(t),Number(r)),e=ot(e,Number(n)),e}function tu(e,t){switch(t){case"LOG":t+=e-160;break;case"PUSH":t+=e-95;break;case"DUP":t+=e-127;break;case"SWAP":t+=e-143;break}return t}function so(e,t){return e.validJumps[t]===1}function Kt(e,t,n,s){if(s.gteHardfork(O.TangerineWhistle)){const r=t-t/Ln;return e>r?r:e}else return e}function de(e,t,n,s){if(n===y)return y;const r=wt(t+n,_e);if(r<=e.memoryWordCount)return y;const i=r,o=s.param("memoryGas"),a=s.param("quadCoefficientDivGas");let c=i*o+i*i/a;if(c>e.highestMemCost){const f=e.highestMemCost;e.highestMemCost=c,c-=f}return e.memoryWordCount=r,c}function cs(e,t,n){const s=e.interpreter.getReturnData();if(s.length>0){const r=Number(t);let i=Number(n);BigInt(s.length)<i&&(i=s.length);const o=gn(s,y,BigInt(i));e.memory.extend(r,i),e.memory.write(r,i,o)}}function nu(e,t,n,s){if(n.length===0&&t.length===0||n.length>0&&t.length>0)return s.param("sstoreResetGas");if(n.length===0&&t.length>0){const r=s.param("sstoreResetGas");return e.interpreter.refundGas(s.param("sstoreRefundGas"),"updateSstoreGas"),r}else return s.param("sstoreSetGas")}const kt=new Map([[0,function(){q(x.errorMessages.STOP)}],[1,function(e){const[t,n]=e.stack.popN(2),s=$t(t+n,rs);e.stack.push(s)}],[2,function(e){const[t,n]=e.stack.popN(2),s=$t(t*n,rs);e.stack.push(s)}],[3,function(e){const[t,n]=e.stack.popN(2),s=$t(t-n,rs);e.stack.push(s)}],[4,function(e){const[t,n]=e.stack.popN(2);let s;n===y?s=y:s=$t(t/n,rs),e.stack.push(s)}],[5,function(e){const[t,n]=e.stack.popN(2);let s;n===y?s=y:s=to(Mt(t)/Mt(n)),e.stack.push(s)}],[6,function(e){const[t,n]=e.stack.popN(2);let s;n===y?s=n:s=$t(t,n),e.stack.push(s)}],[7,function(e){const[t,n]=e.stack.popN(2);let s;n===y?s=n:s=Mt(t)%Mt(n),e.stack.push(to(s))}],[8,function(e){const[t,n,s]=e.stack.popN(3);let r;s===y?r=y:r=$t(t+n,s),e.stack.push(r)}],[9,function(e){const[t,n,s]=e.stack.popN(3);let r;s===y?r=y:r=$t(t*n,s),e.stack.push(r)}],[10,function(e){const[t,n]=e.stack.popN(2);if(t===Tt)switch(n){case fi:e.stack.push(Wf);return;case ba:e.stack.push(jf);return;case zf:e.stack.push(Zf);return}if(n===y){e.stack.push(Q);return}if(t===y){e.stack.push(t);return}const s=eu(t,n);e.stack.push(s)}],[11,function(e){let[t,n]=e.stack.popN(2);if(t<Pn){const s=t*Wt+pa,r=(Q<<s)-Q;n>>s&Q?n=n|BigInt.asUintN(256,~r):n=n&r}e.stack.push(n)}],[16,function(e){const[t,n]=e.stack.popN(2),s=t<n?Q:y;e.stack.push(s)}],[17,function(e){const[t,n]=e.stack.popN(2),s=t>n?Q:y;e.stack.push(s)}],[18,function(e){const[t,n]=e.stack.popN(2),s=Mt(t)<Mt(n)?Q:y;e.stack.push(s)}],[19,function(e){const[t,n]=e.stack.popN(2),s=Mt(t)>Mt(n)?Q:y;e.stack.push(s)}],[20,function(e){const[t,n]=e.stack.popN(2),s=t===n?Q:y;e.stack.push(s)}],[21,function(e){const n=e.stack.pop()===y?Q:y;e.stack.push(n)}],[22,function(e){const[t,n]=e.stack.popN(2),s=t&n;e.stack.push(s)}],[23,function(e){const[t,n]=e.stack.popN(2),s=t|n;e.stack.push(s)}],[24,function(e){const[t,n]=e.stack.popN(2),s=t^n;e.stack.push(s)}],[25,function(e){const t=e.stack.pop(),n=BigInt.asUintN(256,~t);e.stack.push(n)}],[26,function(e){const[t,n]=e.stack.popN(2);if(t>_e){e.stack.push(y);return}const s=n>>(Pn-t)*Wt&ir;e.stack.push(s)}],[27,function(e){const[t,n]=e.stack.popN(2);if(t>is){e.stack.push(y);return}const s=n<<t&rr;e.stack.push(s)}],[28,function(e){const[t,n]=e.stack.popN(2);if(t>256){e.stack.push(y);return}const s=n>>t;e.stack.push(s)}],[29,function(e){const[t,n]=e.stack.popN(2);let s;const i=BigInt.asIntN(256,n)<0;if(t>256){i?s=rr:s=y,e.stack.push(s);return}const o=n>>t;if(i){const a=ir-t,c=rr>>a<<a;s=o|c}else s=o;e.stack.push(s)}],[30,function(e){const t=e.stack.pop();if(t===y){e.stack.push(is);return}const s=256-t.toString(2).length;e.stack.push(BigInt(s))}],[32,function(e,t){const[n,s]=e.stack.popN(2);let r=new Uint8Array(0);s!==y&&(r=e.memory.read(Number(n),Number(s)));const i=BigInt(Y((t.customCrypto.keccak256??Gt)(r)));e.stack.push(i)}],[48,function(e){const t=Z(e.interpreter.getAddress().bytes);e.stack.push(t)}],[49,async function(e){const t=e.stack.pop(),n=ie(t),s=await e.interpreter.getExternalBalance(n);e.stack.push(s)}],[50,function(e){e.stack.push(e.interpreter.getTxOrigin())}],[51,function(e){e.stack.push(e.interpreter.getCaller())}],[52,function(e){e.stack.push(e.interpreter.getCallValue())}],[53,function(e){const t=e.stack.pop();if(t>e.interpreter.getCallDataSize()){e.stack.push(y);return}const n=Number(t);let s=e.interpreter.getCallData().subarray(n,n+32);s=s.length?s:Uint8Array.from([0]);let r=Z(s);s.length<32&&(r=r<<Wt*BigInt(32-s.length)),e.stack.push(r)}],[54,function(e){const t=e.interpreter.getCallDataSize();e.stack.push(t)}],[55,function(e){const[t,n,s]=e.stack.popN(3);if(s!==y){const r=gn(e.interpreter.getCallData(),n,s),i=Number(t),o=Number(s);e.memory.write(i,o,r)}}],[56,function(e){e.stack.push(e.interpreter.getCodeSize())}],[57,function(e){const[t,n,s]=e.stack.popN(3);if(s!==y){const r=gn(e.interpreter.getCode(),n,s),i=Number(t),o=Number(s);e.memory.write(i,o,r)}}],[59,async function(e){const t=e.stack.pop(),n=ie(t),s=await e.stateManager.getCode(n);if(Yt(s)){e.stack.push(BigInt(Fn.length));return}const r=BigInt(s.length);e.stack.push(r)}],[60,async function(e){const[t,n,s,r]=e.stack.popN(4);if(r!==y){const i=ie(t);let o=await e.stateManager.getCode(i);Yt(o)&&(o=Fn);const a=gn(o,s,r),c=Number(n),f=Number(r);e.memory.write(c,f,a)}}],[63,async function(e){const t=e.stack.pop(),n=ie(t),s=await e.stateManager.getCode(n);if(Yt(s)){e.stack.push(Z(qd));return}const r=await e.stateManager.getAccount(n);if(!r||r.isEmpty()){e.stack.push(y);return}e.stack.push(BigInt(Y(r.codeHash)))}],[61,function(e){e.stack.push(e.interpreter.getReturnDataSize())}],[62,function(e){const[t,n,s]=e.stack.popN(3);if(s!==y){const r=gn(e.interpreter.getReturnData(),n,s),i=Number(t),o=Number(s);e.memory.write(i,o,r)}}],[58,function(e){e.stack.push(e.interpreter.getTxGasPrice())}],[64,async function(e,t){const n=e.stack.pop();if(t.isActivatedEIP(7709)){if(n>=e.interpreter.getBlockNumber()){e.stack.push(y);return}const s=e.interpreter.getBlockNumber()-n;if(s>is||s<=y){e.stack.push(y);return}const r=new jt(Rf(t.param("historyStorageAddress"))),i=t.param("historyServeWindow"),o=se(oe(n%i),32);if(t.isActivatedEIP(6800)||t.isActivatedEIP(7864)){const c=e.env.accessWitness.readAccountStorage(r,n);e.interpreter.useGas(c,"BLOCKHASH")}const a=await e.stateManager.getStorage(r,o);e.stack.push(Z(a))}else{const s=e.interpreter.getBlockNumber()-n;if(s>is||s<=y){e.stack.push(y);return}const r=await e.blockchain.getBlock(Number(n));e.stack.push(Z(r.hash()))}}],[65,function(e){e.stack.push(e.interpreter.getBlockCoinbase())}],[66,function(e){e.stack.push(e.interpreter.getBlockTimestamp())}],[67,function(e){e.stack.push(e.interpreter.getBlockNumber())}],[68,function(e,t){t.isActivatedEIP(4399)?e.stack.push(e.interpreter.getBlockPrevRandao()):e.stack.push(e.interpreter.getBlockDifficulty())}],[69,function(e){e.stack.push(e.interpreter.getBlockGasLimit())}],[70,function(e){e.stack.push(e.interpreter.getChainId())}],[71,function(e){e.stack.push(e.interpreter.getSelfBalance())}],[72,function(e){e.stack.push(e.interpreter.getBlockBaseFee())}],[73,function(e){const t=e.stack.pop();e.env.blobVersionedHashes.length>Number(t)?e.stack.push(BigInt(e.env.blobVersionedHashes[Number(t)])):e.stack.push(y)}],[74,function(e){e.stack.push(e.interpreter.getBlobBaseFee())}],[80,function(e){e.stack.pop()}],[81,function(e){const t=e.stack.pop(),n=e.memory.read(Number(t),32,!0);e.stack.push(Z(n))}],[82,function(e){const[t,n]=e.stack.popN(2),s=se(oe(n),32),r=Number(t);e.memory.write(r,32,s)}],[83,function(e){const[t,n]=e.stack.popN(2),s=oe(n&ir),r=Number(t);e.memory.write(r,1,s)}],[84,async function(e){const t=e.stack.pop(),n=se(oe(t),32),s=await e.interpreter.storageLoad(n),r=s.length?Z(s):y;e.stack.push(r)}],[85,async function(e){const[t,n]=e.stack.popN(2),s=se(oe(t),32);let r;n===y?r=Uint8Array.from([]):r=oe(n),await e.interpreter.storageStore(s,r)}],[86,function(e){const t=e.stack.pop();t>e.interpreter.getCodeSize()&&q(x.errorMessages.INVALID_JUMP+" at "+as(e));const n=Number(t);so(e,n)||q(x.errorMessages.INVALID_JUMP+" at "+as(e)),e.programCounter=n}],[87,function(e){const[t,n]=e.stack.popN(2);if(n!==y){t>e.interpreter.getCodeSize()&&q(x.errorMessages.INVALID_JUMP+" at "+as(e));const s=Number(t);so(e,s)||q(x.errorMessages.INVALID_JUMP+" at "+as(e)),e.programCounter=s}}],[88,function(e){e.stack.push(BigInt(e.programCounter-1))}],[89,function(e){e.stack.push(e.memoryWordCount*_e)}],[90,function(e){e.stack.push(e.interpreter.getGasLeft())}],[91,function(){}],[92,function(e){const t=e.stack.pop(),n=se(oe(t),32),s=e.interpreter.transientStorageLoad(n),r=s.length?Z(s):y;e.stack.push(r)}],[93,function(e){e.interpreter.isStatic()&&q(x.errorMessages.STATIC_STATE_CHANGE);const[t,n]=e.stack.popN(2),s=se(oe(t),32);let r;n===y?r=Uint8Array.from([]):r=oe(n),e.interpreter.transientStorageStore(s,r)}],[94,function(e){const[t,n,s]=e.stack.popN(3),r=e.memory.read(Number(n),Number(s),!0);e.memory.write(Number(t),Number(s),r)}],[95,function(e){e.stack.push(y)}],[96,function(e,t){const n=e.opCode-95;if((t.isActivatedEIP(6800)||t.isActivatedEIP(7864))&&e.env.chargeCodeAccesses===!0){const s=e.interpreter.getAddress(),r=Math.min(e.code.length,e.programCounter+1),i=Math.min(e.code.length,r+n-1),o=e.env.accessWitness.readAccountCodeChunks(s,r,i);e.interpreter.useGas(o,"PUSH")}if(!e.shouldDoJumpAnalysis)e.stack.push(e.cachedPushes[e.programCounter]),e.programCounter+=n;else{let s=e.code.subarray(e.programCounter,e.programCounter+n);s.length<n&&(s=ot(s,n)),e.programCounter+=n,e.stack.push(Z(s))}}],[128,function(e){const t=e.opCode-127;e.stack.dup(t)}],[144,function(e){const t=e.opCode-143;e.stack.swap(t)}],[160,function(e){const[t,n]=e.stack.popN(2),s=e.opCode-160,i=e.stack.popN(s).map(function(a){return se(oe(a),32)});let o=new Uint8Array(0);n!==y&&(o=e.memory.read(Number(t),Number(n))),e.interpreter.log(o,s,i)}],[208,function(e){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const t=e.stack.pop();if(t>e.env.eof.container.body.dataSection.length){e.stack.push(y);return}const n=Number(t);let s=e.env.eof.container.body.dataSection.subarray(n,n+32);s=s.length?s:Uint8Array.from([0]);let r=Z(s);s.length<32&&(r=r<<Wt*BigInt(32-s.length)),e.stack.push(r)}],[209,function(e){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const t=Number(Z(e.code.subarray(e.programCounter,e.programCounter+2))),n=Z(e.env.eof.container.body.dataSection.subarray(t,t+32));e.stack.push(n),e.programCounter+=2}],[210,function(e){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE),e.stack.push(BigInt(e.env.eof.container.body.dataSection.length))}],[211,function(e){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const[t,n,s]=e.stack.popN(3);if(s!==y){const r=gn(e.env.eof.container.body.dataSection,n,s),i=Number(t),o=Number(s);e.memory.write(i,o,r)}}],[224,function(e){if(e.env.eof===void 0)q(x.errorMessages.INVALID_OPCODE);else{const t=e.env.code,n=new DataView(t.buffer).getInt16(e.programCounter);e.programCounter+=2+n}}],[225,function(e){if(e.env.eof===void 0)q(x.errorMessages.INVALID_OPCODE);else{if(e.stack.pop()>0){const n=e.env.code,s=new DataView(n.buffer).getInt16(e.programCounter);e.programCounter+=s}e.programCounter+=2}}],[226,function(e){if(e.env.eof===void 0)q(x.errorMessages.INVALID_OPCODE);else{const t=e.env.code,n=t[e.programCounter],s=(n+1)*2;e.programCounter+=1;const r=e.stack.pop();if(r<=n){const i=new DataView(t.buffer).getInt16(e.programCounter+Number(r)*2);e.programCounter+=s+i}else e.programCounter+=s}}],[227,function(e){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const t=zi(e.code.slice(e.programCounter,e.programCounter+2)),n=e.stack.length,s=e.env.eof.container.body.typeSections[t];n>1024-s.maxStackHeight+s.inputs&&q(C.STACK_OVERFLOW),e.env.eof.eofRunState.returnStack.length>=1024&&q(C.RETURN_STACK_OVERFLOW),e.env.eof?.eofRunState.returnStack.push(e.programCounter+2),e.programCounter=e.env.eof.container.header.getCodePosition(t)}],[228,function(e){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const t=e.env.eof.eofRunState.returnStack.pop();t===void 0&&q(C.RETF_NO_RETURN),e.programCounter=t}],[229,function(e){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const t=zi(e.code.slice(e.programCounter,e.programCounter+2)),n=e.stack.length,s=e.env.eof.container.body.typeSections[t];n>1024-s.maxStackHeight+s.inputs&&q(C.STACK_OVERFLOW),e.programCounter=e.env.eof.container.header.getCodePosition(t)}],[230,function(e){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const t=Number(Z(e.code.subarray(e.programCounter,e.programCounter+1)))+1;e.stack.dup(t),e.programCounter++}],[231,function(e){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const t=Number(Z(e.code.subarray(e.programCounter,e.programCounter+1)))+1;e.stack.swap(t),e.programCounter++}],[232,function(e){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const t=Number(Z(e.code.subarray(e.programCounter,e.programCounter+1))),n=(t>>4)+1,s=(t&15)+1;e.stack.exchange(n,n+s),e.programCounter++}],[236,async function(e){if(e.env.eof===void 0)q(x.errorMessages.INVALID_OPCODE);else{e.interpreter.isStatic()&&q(x.errorMessages.STATIC_STATE_CHANGE);const t=e.env.code[e.programCounter],n=e.env.eof.container.body.containerSections[t],[s,r,i,o]=e.stack.popN(4),a=e.messageGasLimit;e.messageGasLimit=void 0;let c=new Uint8Array(0);o!==y&&(c=e.memory.read(Number(i),Number(o),!0)),e.programCounter++;const f=await e.interpreter.eofcreate(a,s,n,se(oe(r),32),c);e.stack.push(f)}}],[238,async function(e){if(e.env.eof===void 0)q(x.errorMessages.INVALID_OPCODE);else{const t=e.env.code[e.programCounter],n=e.env.eof.container.body.containerSections[t],s=new li(n,pt.Initmode),[r,i]=e.stack.popN(2);let o=new Uint8Array(0);i!==y&&(o=e.memory.read(Number(r),Number(i)));const a=s.header.dataSize,f=s.body.dataSection.length+Number(i);f<a&&q(C.INVALID_RETURN_CONTRACT_DATA_SIZE),f>65535&&q(x.errorMessages.OUT_OF_GAS);const l=se(oe(BigInt(f)),2),u=s.header.dataSizePtr;n[u]=l[0],n[u+1]=l[1];const d=Ke(n,o);e.interpreter.finish(d)}}],[240,async function(e,t){const[n,s,r]=e.stack.popN(3);t.isActivatedEIP(3860)&&r>Number(t.param("maxInitCodeSize"))&&!e.interpreter._evm.allowUnlimitedInitCodeSize&&q(x.errorMessages.INITCODE_SIZE_VIOLATION);const i=e.messageGasLimit;e.messageGasLimit=void 0;let o=new Uint8Array(0);if(r!==y&&(o=e.memory.read(Number(s),Number(r),!0)),Yt(o)){e.stack.push(y);return}const a=await e.interpreter.create(i,n,o);e.stack.push(a)}],[245,async function(e,t){e.interpreter.isStatic()&&q(x.errorMessages.STATIC_STATE_CHANGE);const[n,s,r,i]=e.stack.popN(4);t.isActivatedEIP(3860)&&r>Number(t.param("maxInitCodeSize"))&&!e.interpreter._evm.allowUnlimitedInitCodeSize&&q(x.errorMessages.INITCODE_SIZE_VIOLATION);const o=e.messageGasLimit;e.messageGasLimit=void 0;let a=new Uint8Array(0);if(r!==y&&(a=e.memory.read(Number(s),Number(r),!0)),Yt(a)){e.stack.push(y);return}const c=await e.interpreter.create2(o,n,a,se(oe(i),32));e.stack.push(c)}],[241,async function(e,t){const[n,s,r,i,o,a,c]=e.stack.popN(7),f=ie(s);let l=new Uint8Array(0);o!==y&&(l=e.memory.read(Number(i),Number(o),!0));let u=e.messageGasLimit;if(r!==y){const h=t.param("callStipendGas");e.interpreter.addStipend(h),u+=h}e.messageGasLimit=void 0;const d=await e.interpreter.call(u,f,r,l);cs(e,a,c),e.stack.push(d)}],[242,async function(e,t){const[n,s,r,i,o,a,c]=e.stack.popN(7),f=ie(s);let l=e.messageGasLimit;if(r!==y){const h=t.param("callStipendGas");e.interpreter.addStipend(h),l+=h}e.messageGasLimit=void 0;let u=new Uint8Array(0);o!==y&&(u=e.memory.read(Number(i),Number(o),!0));const d=await e.interpreter.callCode(l,f,r,u);cs(e,a,c),e.stack.push(d)}],[244,async function(e){const t=e.interpreter.getCallValue(),[n,s,r,i,o,a]=e.stack.popN(6),c=ie(s);let f=new Uint8Array(0);i!==y&&(f=e.memory.read(Number(r),Number(i),!0));const l=e.messageGasLimit;e.messageGasLimit=void 0;const u=await e.interpreter.callDelegate(l,c,t,f);cs(e,o,a),e.stack.push(u)}],[247,function(e){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const t=e.stack.pop();if(t>e.interpreter.getReturnDataSize()){e.stack.push(y);return}const n=Number(t);let s=e.interpreter.getReturnData().subarray(n,n+32);s=s.length?s:Uint8Array.from([0]);let r=Z(s);s.length<32&&(r=r<<Wt*BigInt(32-s.length)),e.stack.push(r)}],[248,async function(e){if(e.env.eof===void 0)q(x.errorMessages.INVALID_OPCODE);else{const[t,n,s,r]=e.stack.popN(4),i=e.messageGasLimit;if(e.messageGasLimit=void 0,i===-Q){e.stack.push(Q),e.returnBytes=new Uint8Array(0);return}const o=ie(t);let a=new Uint8Array(0);s!==y&&(a=e.memory.read(Number(n),Number(s),!0));const c=await e.interpreter.call(i,o,r,a);e.stack.push(c)}}],[249,async function(e){if(e.env.eof===void 0)q(x.errorMessages.INVALID_OPCODE);else{const t=e.interpreter.getCallValue(),[n,s,r]=e.stack.popN(3),i=e.messageGasLimit;if(e.messageGasLimit=void 0,i===-Q){e.stack.push(Q),e.returnBytes=new Uint8Array(0);return}const o=ie(n),a=await e.stateManager.getCode(o);if(!Yt(a)){e.stack.push(Q),e.returnBytes=new Uint8Array(0);return}let c=new Uint8Array(0);r!==y&&(c=e.memory.read(Number(s),Number(r),!0));const f=await e.interpreter.callDelegate(i,o,t,c);e.stack.push(f)}}],[250,async function(e){const t=y,[n,s,r,i,o,a]=e.stack.popN(6),c=ie(s),f=e.messageGasLimit;e.messageGasLimit=void 0;let l=new Uint8Array(0);i!==y&&(l=e.memory.read(Number(r),Number(i),!0));const u=await e.interpreter.callStatic(f,c,t,l);cs(e,o,a),e.stack.push(u)}],[251,async function(e){if(e.env.eof===void 0)q(x.errorMessages.INVALID_OPCODE);else{const t=y,[n,s,r]=e.stack.popN(3),i=e.messageGasLimit;if(e.messageGasLimit=void 0,i===-Q){e.stack.push(Q),e.returnBytes=new Uint8Array(0);return}const o=ie(n);let a=new Uint8Array(0);r!==y&&(a=e.memory.read(Number(s),Number(r),!0));const c=await e.interpreter.callStatic(i,o,t,a);e.stack.push(c)}}],[243,function(e){const[t,n]=e.stack.popN(2);let s=new Uint8Array(0);n!==y&&(s=e.memory.read(Number(t),Number(n))),e.interpreter.finish(s)}],[253,function(e){const[t,n]=e.stack.popN(2);let s=new Uint8Array(0);n!==y&&(s=e.memory.read(Number(t),Number(n))),e.interpreter.revert(s)}],[255,async function(e){const t=e.stack.pop(),n=ie(t);return e.interpreter.selfDestruct(n)}]]),su=kt.get(96);for(let e=97;e<=127;e++)kt.set(e,su);const ru=kt.get(128);for(let e=129;e<=143;e++)kt.set(e,ru);const iu=kt.get(144);for(let e=145;e<=159;e++)kt.set(e,iu);const ou=kt.get(160);for(let e=161;e<=164;e++)kt.set(e,ou);function au(e){return"opcode"in e&&"opcodeName"in e&&"baseFee"in e&&"logicFunction"in e}class cu{async getBlock(){return{hash(){return new Uint8Array(32)}}}async putBlock(){}shallowCopy(){return this}}const Na=new Uint8Array([239,1,0]);function fu(e,t,n,s,r){return ge(t,s)?r.param("netSstoreNoopGas"):ge(n,t)?n.length===0?r.param("netSstoreInitGas"):(s.length===0&&e.interpreter.refundGas(r.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund"),r.param("netSstoreCleanGas")):(n.length!==0&&(t.length===0?e.interpreter.subRefund(r.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund"):s.length===0&&e.interpreter.refundGas(r.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund")),ge(n,s)&&(n.length===0?e.interpreter.refundGas(r.param("netSstoreResetClearRefundGas"),"EIP-1283 -> netSstoreResetClearRefund"):e.interpreter.refundGas(r.param("netSstoreResetRefundGas"),"EIP-1283 -> netSstoreResetRefund")),r.param("netSstoreDirtyGas"))}function Fe(e,t,n,s=!0,r=!1){if(!n.isActivatedEIP(2929))return y;if(e.interpreter.journal.isWarmedAddress(t)){if(s&&!r)return n.param("warmstoragereadGas")}else{if(e.interpreter.journal.addWarmedAddress(t),s&&!n.isActivatedEIP(7864))return n.param("coldaccountaccessGas");if(s&&n.isActivatedEIP(7864))return n.param("warmstoragereadGas")}return y}function ro(e,t,n,s,r=!0){if(!s.isActivatedEIP(2929))return y;const i=e.interpreter.getAddress().bytes;if(!e.interpreter.journal.isWarmedStorage(i,t)){if(e.interpreter.journal.addWarmedStorage(i,t),r&&!(s.isActivatedEIP(6800)||s.isActivatedEIP(7864)))return s.param("coldsloadGas")}else if(r&&(!n||s.isActivatedEIP(6800)||s.isActivatedEIP(7864)))return s.param("warmstoragereadGas");return y}function lr(e,t,n,s,r){if(!r.isActivatedEIP(2929))return n;const i=e.interpreter.getAddress().bytes,o=r.param("warmstoragereadGas"),a=r.param("coldsloadGas");if(e.interpreter.journal.isWarmedStorage(i,t))switch(s){case"noop":return o;case"initRefund":return r.param("sstoreInitEIP2200Gas")-o;case"cleanRefund":return r.param("sstoreResetGas")-a-o}return n}function du(e,t,n,s,r,i){if(e.interpreter.getGasLeft()<=i.param("sstoreSentryEIP2200Gas")&&q(x.errorMessages.OUT_OF_GAS),ge(t,s)){const o=i.param("sstoreNoopEIP2200Gas");return lr(e,r,o,"noop",i)}if(ge(n,t))return n.length===0?i.param("sstoreInitEIP2200Gas"):(s.length===0&&e.interpreter.refundGas(i.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200"),i.param("sstoreCleanEIP2200Gas"));if(n.length>0&&(t.length===0?e.interpreter.subRefund(i.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200"):s.length===0&&e.interpreter.refundGas(i.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200")),ge(n,s))if(n.length===0){const o=i.param("sstoreInitRefundEIP2200Gas");e.interpreter.refundGas(lr(e,r,o,"initRefund",i),"EIP-2200 -> initRefund")}else{const o=i.param("sstoreCleanRefundEIP2200Gas");e.interpreter.refundGas(BigInt(lr(e,r,o,"cleanRefund",i)),"EIP-2200 -> cleanRefund")}return i.param("sstoreDirtyEIP2200Gas")}const hr=BigInt(2)**BigInt(160)-BigInt(1);async function fs(e,t,n,s){const r=await e.stateManager.getCode(n);return ge(r.slice(0,3),Na)?Fe(e,r.slice(3,24),t,s):y}const hi=new Map([[10,async function(e,t,n){const[s,r]=e.stack.peek(2);if(r===y)return t;let i=r.toString(2).length/8;i>Math.trunc(i)&&(i=Math.trunc(i)+1),(i<1||i>32)&&q(x.errorMessages.OUT_OF_RANGE);const o=n.param("expByteGas");return t+=BigInt(i)*o,t}],[32,async function(e,t,n){const[s,r]=e.stack.peek(2);return t+=de(e,s,r,n),t+=n.param("keccak256WordGas")*wt(r,_e),t}],[49,async function(e,t,n){const s=ie(e.stack.peek()[0]);let r=!0;if(n.isActivatedEIP(6800)||n.isActivatedEIP(7864)){const i=e.env.accessWitness.readAccountBasicData(s);t+=i,r=i===y}return n.isActivatedEIP(2929)&&(t+=Fe(e,s.bytes,n,r)),t}],[55,async function(e,t,n){const[s,r,i]=e.stack.peek(3);return t+=de(e,s,i,n),i!==y&&(t+=n.param("copyGas")*wt(i,_e)),t}],[57,async function(e,t,n){const[s,r,i]=e.stack.peek(3);if(t+=de(e,s,i,n),i!==y&&(t+=n.param("copyGas")*wt(i,_e),(n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&e.env.chargeCodeAccesses===!0)){const o=e.interpreter.getAddress();let a=r+i;const c=e.interpreter.getCodeSize();a>c&&(a=c),t+=e.env.accessWitness.readAccountCodeChunks(o,Number(r),Number(a))}return t}],[59,async function(e,t,n){const s=ie(e.stack.peek()[0]);let r=!0;if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&e.interpreter._evm.getPrecompile(s)===void 0&&!s.equals(ie(n.param("systemAddress")))){let i=y;i+=e.env.accessWitness.readAccountBasicData(s),t+=i,r=i===y}return n.isActivatedEIP(2929)&&(t+=Fe(e,s.bytes,n,r)),t}],[60,async function(e,t,n){const[s,r,i,o]=e.stack.peek(4),a=ie(s);t+=de(e,r,o,n);let c=!0;if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&e.interpreter._evm.getPrecompile(a)===void 0&&!a.equals(ie(n.param("systemAddress")))){let f=y;f+=e.env.accessWitness.readAccountBasicData(a),t+=f,c=f===y}if(n.isActivatedEIP(2929)&&(t+=Fe(e,a.bytes,n,c)),o!==y&&(t+=n.param("copyGas")*wt(o,_e),n.isActivatedEIP(6800)||n.isActivatedEIP(7864))){let f=i+o;const l=BigInt((await e.stateManager.getCode(a)).length);f>l&&(f=l),t+=e.env.accessWitness.readAccountCodeChunks(a,Number(i),Number(f))}return t}],[62,async function(e,t,n){const[s,r,i]=e.stack.peek(3);return r+i>e.interpreter.getReturnDataSize()&&e.env.eof===void 0&&q(x.errorMessages.OUT_OF_GAS),t+=de(e,s,i,n),i!==y&&(t+=n.param("copyGas")*wt(i,_e)),t}],[63,async function(e,t,n){const s=ie(e.stack.peek()[0]);let r=!0;if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&e.interpreter._evm.getPrecompile(s)===void 0&&!s.equals(ie(n.param("systemAddress")))){let i=y;i+=e.env.accessWitness.readAccountCodeHash(s),t+=i,r=i===y}return n.isActivatedEIP(2929)&&(t+=Fe(e,s.bytes,n,r)),t}],[81,async function(e,t,n){const s=e.stack.peek()[0];return t+=de(e,s,_e,n),t}],[82,async function(e,t,n){const s=e.stack.peek()[0];return t+=de(e,s,_e,n),t}],[83,async function(e,t,n){const s=e.stack.peek()[0];return t+=de(e,s,Q,n),t}],[84,async function(e,t,n){const s=e.stack.peek()[0],r=se(oe(s),32);let i=!0;if(n.isActivatedEIP(6800)||n.isActivatedEIP(7864)){const o=e.interpreter.getAddress(),a=e.env.accessWitness.readAccountStorage(o,s);t+=a,i=a===y}return n.isActivatedEIP(2929)&&(t+=ro(e,r,!1,n,i)),t}],[85,async function(e,t,n){e.interpreter.isStatic()&&q(x.errorMessages.STATIC_STATE_CHANGE);const[s,r]=e.stack.peek(2),i=se(oe(s),32);let o;r===y?o=Uint8Array.from([]):o=oe(r);const a=Cn(await e.interpreter.storageLoad(i)),c=Cn(await e.interpreter.storageLoad(i,!0));n.hardfork()===O.Constantinople?t+=fu(e,a,c,Cn(o),n):n.gteHardfork(O.Istanbul)?!n.isActivatedEIP(6800)&&!n.isActivatedEIP(7864)&&(t+=du(e,a,c,Cn(o),i,n)):t+=nu(e,a,Cn(o),n);let f=!0;if(n.isActivatedEIP(6800)||n.isActivatedEIP(7864)){const l=e.interpreter.getAddress(),u=e.env.accessWitness.writeAccountStorage(l,s);t+=u,f=u===y}return n.isActivatedEIP(2929)&&(t+=ro(e,i,!0,n,f)),t}],[94,async function(e,t,n){const[s,r,i]=e.stack.peek(3),o=(i+Pn)/_e;return t+=Vf*o,t+=de(e,r,i,n),t+=de(e,s,i,n),t}],[160,async function(e,t,n){e.interpreter.isStatic()&&q(x.errorMessages.STATIC_STATE_CHANGE);const[s,r]=e.stack.peek(2),i=e.opCode-160;return(i<0||i>4)&&q(x.errorMessages.OUT_OF_RANGE),t+=de(e,s,r,n),t+=n.param("logTopicGas")*BigInt(i)+r*n.param("logDataGas"),t}],[211,async function(e,t,n){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const[s,r,i]=e.stack.peek(3);return t+=de(e,s,i,n),i!==y&&(t+=n.param("copyGas")*wt(i,_e)),t}],[236,async function(e,t,n){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const s=e.env.code[e.programCounter+1],[r,i,o,a]=e.stack.peek(4);t+=de(e,o,a,n);const c=e.env.eof.container.body.containerSections[s];t+=n.param("keccak256WordGas")*wt(BigInt(c.length),_e);const f=e.interpreter.getGasLeft()-t;return e.messageGasLimit=Kt(f,f,e,n),t}],[238,async function(e,t,n){const[s,r]=e.stack.peek(2);return t+=de(e,s,r,n),t}],[240,async function(e,t,n){e.interpreter.isStatic()&&q(x.errorMessages.STATIC_STATE_CHANGE);const[s,r,i]=e.stack.peek(3);n.isActivatedEIP(2929)&&(t+=Fe(e,e.interpreter.getAddress().bytes,n,!1)),n.isActivatedEIP(3860)&&(t+=(i+Pn)/_e*n.param("initCodeWordGas")),t+=de(e,r,i,n);let o=BigInt(e.interpreter.getGasLeft())-t;return o=Kt(o,o,e,n),e.messageGasLimit=o,t}],[241,async function(e,t,n){const[s,r,i,o,a,c,f]=e.stack.peek(7),l=ie(r);e.interpreter.isStatic()&&i!==y&&q(x.errorMessages.STATIC_STATE_CHANGE),t+=de(e,o,a,n),t+=de(e,c,f,n);let u=!0;if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&e.interpreter._evm.getPrecompile(l)===void 0){const h=e.env.accessWitness.readAccountBasicData(l);if(i!==y){const p=e.interpreter.getAddress();t+=e.env.accessWitness.writeAccountBasicData(p),t+=e.env.accessWitness.writeAccountBasicData(l)}t+=h,u=h===y}if(n.isActivatedEIP(2929)&&(t+=Fe(e,l.bytes,n,u)),n.isActivatedEIP(7702)&&(t+=await fs(e,n,l,u)),i!==y&&!n.isActivatedEIP(6800)&&!n.isActivatedEIP(7864)&&(t+=n.param("callValueTransferGas")),n.gteHardfork(O.SpuriousDragon)){const h=await e.stateManager.getAccount(l);let p=!1;(h===void 0||h.isEmpty())&&(p=!0),p&&i!==y&&(t+=n.param("callNewAccountGas"))}else await e.stateManager.getAccount(l)===void 0&&(t+=n.param("callNewAccountGas"));const d=Kt(s,e.interpreter.getGasLeft()-t,e,n);return d>e.interpreter.getGasLeft()-t&&q(x.errorMessages.OUT_OF_GAS),t>e.interpreter.getGasLeft()&&q(x.errorMessages.OUT_OF_GAS),e.messageGasLimit=d,t}],[242,async function(e,t,n){const[s,r,i,o,a,c,f]=e.stack.peek(7),l=ie(r);t+=de(e,o,a,n),t+=de(e,c,f,n);let u=!0;if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&e.interpreter._evm.getPrecompile(l)===void 0){const h=e.env.accessWitness.readAccountBasicData(l);t+=h,u=h===y}n.isActivatedEIP(2929)&&(t+=Fe(e,ie(r).bytes,n,u)),n.isActivatedEIP(7702)&&(t+=await fs(e,n,l,u)),i!==y&&(t+=n.param("callValueTransferGas"));const d=Kt(s,e.interpreter.getGasLeft()-t,e,n);return d>e.interpreter.getGasLeft()-t&&q(x.errorMessages.OUT_OF_GAS),e.messageGasLimit=d,t}],[243,async function(e,t,n){const[s,r]=e.stack.peek(2);return t+=de(e,s,r,n),t}],[244,async function(e,t,n){const[s,r,i,o,a,c]=e.stack.peek(6),f=ie(r);t+=de(e,i,o,n),t+=de(e,a,c,n);let l=!0;if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&e.interpreter._evm.getPrecompile(f)===void 0){const d=e.env.accessWitness.readAccountBasicData(f);t+=d,l=d===y}n.isActivatedEIP(2929)&&(t+=Fe(e,ie(r).bytes,n,l)),n.isActivatedEIP(7702)&&(t+=await fs(e,n,f,l));const u=Kt(s,e.interpreter.getGasLeft()-t,e,n);return u>e.interpreter.getGasLeft()-t&&q(x.errorMessages.OUT_OF_GAS),e.messageGasLimit=u,t}],[245,async function(e,t,n){e.interpreter.isStatic()&&q(x.errorMessages.STATIC_STATE_CHANGE);const[s,r,i,o]=e.stack.peek(4);t+=de(e,r,i,n),n.isActivatedEIP(2929)&&(t+=Fe(e,e.interpreter.getAddress().bytes,n,!1)),n.isActivatedEIP(3860)&&(t+=(i+Pn)/_e*n.param("initCodeWordGas")),t+=n.param("keccak256WordGas")*wt(i,_e);let a=e.interpreter.getGasLeft()-t;return a=Kt(a,a,e,n),e.messageGasLimit=a,t}],[248,async function(e,t,n){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const[s,r,i,o]=e.stack.peek(4);e.interpreter.isStatic()&&o!==y&&q(x.errorMessages.STATIC_STATE_CHANGE),o>y&&(t+=n.param("callValueTransferGas")),s>hr&&q(C.INVALID_EXTCALL_TARGET),t+=de(e,r,i,n);const a=ie(s);if(t+=Fe(e,a.bytes,n),o>y){const h=await e.stateManager.getAccount(a);(h===void 0||h.isEmpty())&&(t+=n.param("callNewAccountGas"))}const c=n.param("minRetainedGas"),f=n.param("minCalleeGas"),l=e.interpreter.getGasLeft()-t,u=l/Ln;let d;return u<c?d=l-c:d=l-u,(e.env.depth>=Number(n.param("stackLimit"))||e.env.contract.balance<o||d<f)&&(d=-Q),e.messageGasLimit=d,t}],[249,async function(e,t,n){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const[s,r,i]=e.stack.peek(3);s>hr&&q(C.INVALID_EXTCALL_TARGET),t+=de(e,r,i,n);const o=ie(s);t+=Fe(e,o.bytes,n);const a=n.param("minRetainedGas"),c=n.param("minCalleeGas"),f=e.interpreter.getGasLeft()-t,l=f/Ln;let u;return l<a?u=f-a:u=f-l,(e.env.depth>=Number(n.param("stackLimit"))||u<c)&&(u=-Q),e.messageGasLimit=u,t}],[250,async function(e,t,n){const[s,r,i,o,a,c]=e.stack.peek(6);t+=de(e,i,o,n),t+=de(e,a,c,n);let f=!0;const l=ie(r);if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&e.interpreter._evm.getPrecompile(l)===void 0){const d=e.env.accessWitness.readAccountBasicData(l);t+=d,f=d===y}n.isActivatedEIP(2929)&&(t+=Fe(e,ie(r).bytes,n,f)),n.isActivatedEIP(7702)&&(t+=await fs(e,n,ie(r),f));const u=Kt(s,e.interpreter.getGasLeft()-t,e,n);return e.messageGasLimit=u,t}],[251,async function(e,t,n){e.env.eof===void 0&&q(x.errorMessages.INVALID_OPCODE);const[s,r,i]=e.stack.peek(3);s>hr&&q(C.INVALID_EXTCALL_TARGET),t+=de(e,r,i,n);const o=ie(s);t+=Fe(e,o.bytes,n);const a=n.param("minRetainedGas"),c=n.param("minCalleeGas"),f=e.interpreter.getGasLeft()-t,l=f/Ln;let u;return l<a?u=f-a:u=f-l,(e.env.depth>=Number(n.param("stackLimit"))||u<c)&&(u=-Q),e.messageGasLimit=u,t}],[253,async function(e,t,n){const[s,r]=e.stack.peek(2);return t+=de(e,s,r,n),t}],[255,async function(e,t,n){e.interpreter.isStatic()&&q(x.errorMessages.STATIC_STATE_CHANGE);const s=e.stack.peek()[0],r=ie(s),i=e.interpreter.getAddress();let o=!1;const a=await e.interpreter.getExternalBalance(i);if(n.gteHardfork(O.SpuriousDragon)){if(a>y){const f=await e.stateManager.getAccount(r);(f===void 0||f.isEmpty())&&(o=!0)}}else n.gteHardfork(O.TangerineWhistle)&&(await e.stateManager.getAccount(r)!==void 0||(o=!0));o&&(t+=n.param("callNewAccountGas"));let c=!0;if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&e.env.chargeCodeAccesses===!0){t+=e.env.accessWitness.readAccountBasicData(i),a>y&&(t+=e.env.accessWitness.writeAccountBasicData(i));let f=e.env.accessWitness.readAccountBasicData(r);a>y&&(f+=e.env.accessWitness.writeAccountBasicData(r)),t+=f,c=f===y}return n.isActivatedEIP(2929)&&(t+=Fe(e,r.bytes,n,c,!0)),t}]]),uu=hi.get(160);for(let e=161;e<=164;e++)hi.set(e,uu);class lu{constructor({code:t,name:n,fullName:s,fee:r,isAsync:i,dynamicGas:o}){this.code=t,this.name=n,this.fullName=s,this.fee=r,this.feeBigInt=BigInt(r),this.isAsync=i,this.dynamicGas=o,this.isInvalid=this.name==="INVALID",Object.freeze(this)}}const N=e=>({name:e,isAsync:!1,dynamicGas:!1}),$e=e=>({name:e,isAsync:!1,dynamicGas:!0}),ze=e=>({name:e,isAsync:!0,dynamicGas:!1}),ue=e=>({name:e,isAsync:!0,dynamicGas:!0}),hu={0:N("STOP"),1:N("ADD"),2:N("MUL"),3:N("SUB"),4:N("DIV"),5:N("SDIV"),6:N("MOD"),7:N("SMOD"),8:N("ADDMOD"),9:N("MULMOD"),10:$e("EXP"),11:N("SIGNEXTEND"),16:N("LT"),17:N("GT"),18:N("SLT"),19:N("SGT"),20:N("EQ"),21:N("ISZERO"),22:N("AND"),23:N("OR"),24:N("XOR"),25:N("NOT"),26:N("BYTE"),32:$e("KECCAK256"),48:ze("ADDRESS"),49:ue("BALANCE"),50:ze("ORIGIN"),51:ze("CALLER"),52:ze("CALLVALUE"),53:ze("CALLDATALOAD"),54:ze("CALLDATASIZE"),55:ue("CALLDATACOPY"),56:N("CODESIZE"),57:$e("CODECOPY"),58:N("GASPRICE"),59:ue("EXTCODESIZE"),60:ue("EXTCODECOPY"),64:ze("BLOCKHASH"),65:ze("COINBASE"),66:ze("TIMESTAMP"),67:ze("NUMBER"),68:ze("DIFFICULTY"),69:ze("GASLIMIT"),80:N("POP"),81:$e("MLOAD"),82:$e("MSTORE"),83:$e("MSTORE8"),84:ue("SLOAD"),85:ue("SSTORE"),86:N("JUMP"),87:N("JUMPI"),88:N("PC"),89:N("MSIZE"),90:N("GAS"),91:N("JUMPDEST"),96:N("PUSH"),97:N("PUSH"),98:N("PUSH"),99:N("PUSH"),100:N("PUSH"),101:N("PUSH"),102:N("PUSH"),103:N("PUSH"),104:N("PUSH"),105:N("PUSH"),106:N("PUSH"),107:N("PUSH"),108:N("PUSH"),109:N("PUSH"),110:N("PUSH"),111:N("PUSH"),112:N("PUSH"),113:N("PUSH"),114:N("PUSH"),115:N("PUSH"),116:N("PUSH"),117:N("PUSH"),118:N("PUSH"),119:N("PUSH"),120:N("PUSH"),121:N("PUSH"),122:N("PUSH"),123:N("PUSH"),124:N("PUSH"),125:N("PUSH"),126:N("PUSH"),127:N("PUSH"),128:N("DUP"),129:N("DUP"),130:N("DUP"),131:N("DUP"),132:N("DUP"),133:N("DUP"),134:N("DUP"),135:N("DUP"),136:N("DUP"),137:N("DUP"),138:N("DUP"),139:N("DUP"),140:N("DUP"),141:N("DUP"),142:N("DUP"),143:N("DUP"),144:N("SWAP"),145:N("SWAP"),146:N("SWAP"),147:N("SWAP"),148:N("SWAP"),149:N("SWAP"),150:N("SWAP"),151:N("SWAP"),152:N("SWAP"),153:N("SWAP"),154:N("SWAP"),155:N("SWAP"),156:N("SWAP"),157:N("SWAP"),158:N("SWAP"),159:N("SWAP"),160:$e("LOG"),161:$e("LOG"),162:$e("LOG"),163:$e("LOG"),164:$e("LOG"),240:ue("CREATE"),241:ue("CALL"),242:ue("CALLCODE"),243:$e("RETURN"),254:N("INVALID"),255:ue("SELFDESTRUCT")},mr=[{hardfork:O.Homestead,opcodes:{244:ue("DELEGATECALL")}},{hardfork:O.TangerineWhistle,opcodes:{84:ue("SLOAD"),241:ue("CALL"),242:ue("CALLCODE"),59:ue("EXTCODESIZE"),60:ue("EXTCODECOPY"),244:ue("DELEGATECALL"),255:ue("SELFDESTRUCT"),49:ue("BALANCE")}},{hardfork:O.Byzantium,opcodes:{253:$e("REVERT"),250:ue("STATICCALL"),61:ze("RETURNDATASIZE"),62:ue("RETURNDATACOPY")}},{hardfork:O.Constantinople,opcodes:{27:N("SHL"),28:N("SHR"),29:N("SAR"),63:ue("EXTCODEHASH"),245:ue("CREATE2")}},{hardfork:O.Istanbul,opcodes:{70:N("CHAINID"),71:N("SELFBALANCE")}},{hardfork:O.Paris,opcodes:{68:ze("PREVRANDAO")}}],mu=[{eip:663,opcodes:{230:N("DUPN"),231:N("SWAPN"),232:N("EXCHANGE")}},{eip:1153,opcodes:{92:N("TLOAD"),93:N("TSTORE")}},{eip:3198,opcodes:{72:N("BASEFEE")}},{eip:3855,opcodes:{95:N("PUSH0")}},{eip:4200,opcodes:{224:N("RJUMP"),225:N("RJUMPI"),226:N("RJUMPV")}},{eip:4750,opcodes:{227:N("CALLF"),228:N("RETF")}},{eip:4844,opcodes:{73:N("BLOBHASH")}},{eip:5656,opcodes:{94:$e("MCOPY")}},{eip:6206,opcodes:{229:N("JUMPF")}},{eip:7069,opcodes:{247:N("RETURNDATALOAD"),248:ue("EXTCALL"),249:ue("EXTDELEGATECALL"),251:ue("EXTSTATICCALL")}},{eip:7480,opcodes:{208:N("DATALOAD"),209:N("DATALOADN"),210:N("DATASIZE"),211:$e("DATACOPY")}},{eip:7516,opcodes:{74:N("BLOBBASEFEE")}},{eip:7620,opcodes:{236:ue("EOFCREATE"),238:ue("RETURNCONTRACT")}},{eip:7939,opcodes:{30:N("CLZ")}}];function pu(e){const t=new Map;for(const[n,s]of Object.entries(e)){const r=parseInt(n,10);isNaN(s.fee)&&(s.fee=0),t.set(r,new lu({code:r,fullName:tu(r,s.name),...s}))}return t}function gu(e,t){let n={...hu};const s=new Map(kt),r=new Map(hi);for(let c=0;c<mr.length;c++)e.gteHardfork(mr[c].hardfork)&&(n={...n,...mr[c].opcodes});for(const c of mu)e.isActivatedEIP(c.eip)&&(n={...n,...c.opcodes});for(const c in n){const f=Number(e.param(`${n[c].name.toLowerCase()}Gas`));if(f===void 0)throw L(`base fee not defined for: ${n[c].name}`);n[c].fee=f}if(t)for(const c of t){const f=c;if(!au(f)){delete n[f.opcode];continue}const l={[f.opcode]:{name:f.opcodeName,isAsync:!0,dynamicGas:f.gasFunction!==void 0,fee:f.baseFee,feeBigInt:BigInt(f.baseFee)}};n={...n,...l},f.gasFunction!==void 0&&r.set(f.opcode,f.gasFunction),s.set(f.opcode,f.logicFunction)}const i=pu(n),o=[];for(const[c,f]of i){const l=r.get(c),u=s.get(c);o[c]={opcodeInfo:f,opHandler:u,gasHandler:l}}const a=o[254];for(let c=0;c<=255;c++)o[c]===void 0&&(o[c]=a);return{dynamicGasHandlers:r,handlers:s,opcodes:i,opcodeMap:o}}class bu{constructor(t){this._len=0,this._store=[],this._maxHeight=t??1024}get length(){return this._len}push(t){if(this._len>=this._maxHeight)throw new x(x.errorMessages.STACK_OVERFLOW);this._store[this._len++]=t}pop(){if(this._len<1)throw new x(x.errorMessages.STACK_UNDERFLOW);return this._store[--this._len]}popN(t=1){if(this._len<t)throw new x(x.errorMessages.STACK_UNDERFLOW);if(t===0)return[];const n=Array(t),s=this._store;for(let r=0;r<t;r++)n[r]=s[--this._len];return n}peek(t=1){const n=Array(t);let s=this._len;for(let r=0;r<t;r++){const i=--s;if(i<0)throw new x(x.errorMessages.STACK_UNDERFLOW);n[r]=this._store[i]}return n}swap(t){if(this._len<=t)throw new x(x.errorMessages.STACK_UNDERFLOW);const n=this._len-1,s=n-t,r=this._store,i=r[n];r[n]=r[s],r[s]=i}dup(t){const n=this._len;if(n<t)throw new x(x.errorMessages.STACK_UNDERFLOW);if(n>=this._maxHeight)throw new x(x.errorMessages.STACK_OVERFLOW);const s=n-t;this._store[this._len++]=this._store[s]}exchange(t,n){const s=this._len-1,r=s-t,i=s-n;if(r<0||i<0)throw new x(x.errorMessages.STACK_UNDERFLOW);const o=this._store[i];this._store[i]=this._store[r],this._store[r]=o}getStack(){return this._store.slice(0,this._len)}}const Sn=cn("evm:gas");class xu{constructor(t,n,s,r,i,o,a,c){if(this.opDebuggers={},this._evm=t,this._stateManager=n,this.common=this._evm.common,this.common.consensusType()==="poa"&&this._evm._optsCached.cliqueSigner===void 0)throw L("Must include cliqueSigner function if clique/poa is being used for consensus type");this._runState={programCounter:0,opCode:254,memory:new Jd,memoryWordCount:y,highestMemCost:y,stack:new bu,code:new Uint8Array(0),validJumps:Uint8Array.from([]),cachedPushes:{},stateManager:this._stateManager,blockchain:s,env:r,shouldDoJumpAnalysis:!0,interpreter:this,gasRefund:r.gasRefund,gasLeft:i,returnBytes:new Uint8Array(0)},this.journal=o,this._env=r,this._result={logs:[],returnValue:void 0,selfdestruct:new Set},this.profilerOpts=c,this.performanceLogger=a}async run(t,n={}){if(!this.common.isActivatedEIP(3540)||t[0]!==Ms)this._runState.code=t;else if(this.common.isActivatedEIP(3540)){if(t[1]!==ui)return{runState:this._runState,exceptionError:new x(x.errorMessages.INVALID_BYTECODE_RESULT)};if(t[2]!==Aa)return{runState:this._runState,exceptionError:new x(x.errorMessages.INVALID_EOF_FORMAT)};this._runState.code=t;const f=this._env.isCreate&&this._env.depth===0,l=f?pt.TxInitmode:pt.Default;try{zd(this._runState,l)}catch{return{runState:this._runState,exceptionError:new x(x.errorMessages.INVALID_EOF_FORMAT)}}if(f)try{Ba(this._runState.code,this._evm,rt.InitCode,pt.TxInitmode)}catch{return{runState:this._runState,exceptionError:new x(x.errorMessages.INVALID_EOF_FORMAT)}}}this._runState.programCounter=n.pc??this._runState.programCounter;const s=this._runState.programCounter;if(s!==0&&(s<0||s>=this._runState.code.length))throw L("Internal error: program counter not in range");let r,i,o=!0,a,c;for(this.profilerOpts?.enabled===!0&&this.performanceLogger.hasTimer()&&(a=this.performanceLogger.pauseTimer(),c=this.performanceLogger.startTimer("Overhead"));this._runState.programCounter<this._runState.code.length;){const f=this._runState.programCounter;let l,u;if(o){if(l=this._runState.code[f],l===86||l===87||l===94){const{jumps:d,pushes:h,opcodesCached:p}=this._getValidJumpDestinations(this._runState.code);this._runState.validJumps=d,this._runState.cachedPushes=h,this._runState.shouldDoJumpAnalysis=!1,i=p,o=!1}}else u=i[f],l=u.opcodeInfo.code;if(l===254&&this.common.isActivatedEIP(7864)&&this._runState.env.chargeCodeAccesses===!0){const d=this._runState.interpreter.getAddress();if(!await this._runState.stateManager.checkChunkWitnessPresent(d,f))throw Error(`Invalid witness with missing codeChunk for pc=${f}`)}this._runState.opCode=l;try{c!==void 0&&this.performanceLogger.pauseTimer(),await this.runStep(u),c!==void 0&&this.performanceLogger.unpauseTimer(c)}catch(d){if(this._runState.env.accessWitness?.revert(),c!==void 0&&this.performanceLogger.unpauseTimer(c),!("errorType"in d&&d.errorType===va))throw d;d.error!==x.errorMessages.STOP&&(r=d);break}}return a!==void 0&&(this.performanceLogger.stopTimer(c,0),this.performanceLogger.unpauseTimer(a)),{runState:this._runState,exceptionError:r}}async runStep(t){const n=t??this.lookupOpInfo(this._runState.opCode),s=n.opcodeInfo;let r;this.profilerOpts?.enabled===!0&&(r=this.performanceLogger.startTimer(s.name));let i=s.feeBigInt;const o=this._runState.memoryWordCount;try{if(s.dynamicGas&&(i=await n.gasHandler(this._runState,i,this.common)),(this._evm.events.listenerCount("step")>0||this._evm.DEBUG)&&await this._runStepHook(i,this.getGasLeft(),o),(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864))&&this._env.chargeCodeAccesses===!0){const c=this._runState.interpreter.getAddress(),f=this._runState.env.accessWitness.readAccountCodeChunks(c,this._runState.programCounter,this._runState.programCounter);i+=f,Sn(`codechunk accessed statelessGas=${f} (-> ${i})`)}if(s.isInvalid)throw new x(x.errorMessages.INVALID_OPCODE);this.useGas(i,s),this._runState.programCounter++;const a=n.opHandler;s.isAsync?await a.apply(null,[this._runState,this.common]):a.apply(null,[this._runState,this.common]),this._runState.env.accessWitness?.commit()}finally{this.profilerOpts?.enabled===!0&&this.performanceLogger.stopTimer(r,Number(i),"opcodes",s.fee,Number(i)-s.fee)}}lookupOpInfo(t){return this._evm._opcodeMap[t]}async _runStepHook(t,n,s){const r=this.lookupOpInfo(this._runState.opCode).opcodeInfo,i=this._env.eof?.container.header.getSectionFromProgramCounter(this._runState.programCounter);let o,a;if(r.code===253){const[f,l]=this._runState.stack.peek(2);o=new Uint8Array(0),l!==y&&(o=this._runState.memory.read(Number(f),Number(l)))}en[r.code]!==void 0&&en[r.code].intermediates>0&&(a=this._runState.code.slice(this._runState.programCounter+1,this._runState.programCounter+1+en[r.code].intermediates));const c={pc:this._runState.programCounter,gasLeft:n,gasRefund:this._runState.gasRefund,opcode:{name:r.fullName,fee:r.fee,dynamicFee:t,isAsync:r.isAsync,code:r.code},stack:this._runState.stack.getStack(),depth:this._env.depth,address:this._env.address,account:this._env.contract,memory:this._runState.memory._store.subarray(0,Number(s)*32),memoryWordCount:s,codeAddress:this._env.codeAddress,stateManager:this._runState.stateManager,eofSection:i,immediate:a,error:o,eofFunctionDepth:this._env.eof!==void 0?this._env.eof?.eofRunState.returnStack.length+1:void 0};if(this._evm.DEBUG){let f=[];f=c.stack.map(d=>_s(BigInt(d)));const l=c.opcode.name,u={pc:c.pc,op:l,gas:_s(c.gasLeft),gasCost:_s(t),stack:f,depth:c.depth};l in this.opDebuggers||(this.opDebuggers[l]=cn(`evm:ops:${l}`)),this.opDebuggers[l](JSON.stringify(u))}await this._evm._emit("step",c)}_getValidJumpDestinations(t){const n=new Uint8Array(t.length),s={},r=Array(t.length);for(let i=0;i<t.length;i++){const o=t[i];if(r[i]=this.lookupOpInfo(o),o<=127)if(o>=96){const a=o-95;let c=t.subarray(i+1,i+o-94);c.length<a&&(c=ot(c,a));const f=Z(c);s[i+1]=f,i+=a}else o===91&&(n[i]=1)}return{jumps:n,pushes:s,opcodesCached:r}}useGas(t,n){if(this._runState.gasLeft-=t,this._evm.DEBUG){let s="";typeof n=="string"?s=n+": ":n!==void 0&&(s=`${n.name} fee: `),Sn(`${s}used ${t} gas (-> ${this._runState.gasLeft})`)}this._runState.gasLeft<y&&(this._runState.gasLeft=y,q(x.errorMessages.OUT_OF_GAS))}refundGas(t,n){this._evm.DEBUG&&Sn(`${typeof n=="string"?n+": ":""}refund ${t} gas (-> ${this._runState.gasRefund})`),this._runState.gasRefund+=t}subRefund(t,n){this._evm.DEBUG&&Sn(`${typeof n=="string"?n+": ":""}sub gas refund ${t} (-> ${this._runState.gasRefund})`),this._runState.gasRefund-=t,this._runState.gasRefund<y&&(this._runState.gasRefund=y,q(x.errorMessages.REFUND_EXHAUSTED))}addStipend(t){this._evm.DEBUG&&Sn(`add stipend ${t} (-> ${this._runState.gasLeft})`),this._runState.gasLeft+=t}async getExternalBalance(t){if(t.equals(this._env.address))return this._env.contract.balance;let n=await this._stateManager.getAccount(t);return n||(n=new We),n.balance}async storageStore(t,n){await this._stateManager.putStorage(this._env.address,t,n);const s=await this._stateManager.getAccount(this._env.address);if(!s)throw L("could not read account while persisting memory");this._env.contract=s}async storageLoad(t,n=!1){return n?this._stateManager.originalStorageCache.get(this._env.address,t):this._stateManager.getStorage(this._env.address,t)}transientStorageStore(t,n){return this._evm.transientStorage.put(this._env.address,t,n)}transientStorageLoad(t){return this._evm.transientStorage.get(this._env.address,t)}finish(t){this._result.returnValue=t,q(x.errorMessages.STOP)}revert(t){this._result.returnValue=t,q(x.errorMessages.REVERT)}getAddress(){return this._env.address}getSelfBalance(){return this._env.contract.balance}getCallValue(){return this._env.callValue}getCallData(){return this._env.callData}getCallDataSize(){return BigInt(this._env.callData.length)}getCaller(){return Z(this._env.caller.bytes)}getCodeSize(){return BigInt(this._env.code.length)}getCode(){return this._env.code}getGasLeft(){return this._runState.gasLeft}getReturnDataSize(){return BigInt(this._runState.returnBytes.length)}getReturnData(){return this._runState.returnBytes}isStatic(){return this._env.isStatic}getTxGasPrice(){return this._env.gasPrice}getTxOrigin(){return Z(this._env.origin.bytes)}getBlockNumber(){return this._env.block.header.number}getBlockCoinbase(){let t;return this.common.consensusAlgorithm()===bd.Clique?t=this._evm._optsCached.cliqueSigner(this._env.block.header):t=this._env.block.header.coinbase,Z(t.toBytes())}getBlockTimestamp(){return this._env.block.header.timestamp}getBlockDifficulty(){return this._env.block.header.difficulty}getBlockPrevRandao(){return Z(this._env.block.header.prevRandao)}getBlockGasLimit(){return this._env.block.header.gasLimit}getBlockBaseFee(){const t=this._env.block.header.baseFeePerGas;if(t===void 0)throw L("Block has no Base Fee");return t}getBlobBaseFee(){const t=this._env.block.header.getBlobGasPrice();if(t===void 0)throw L("Block has no Blob Base Fee");return t}getChainId(){return this.common.chainId()}async call(t,n,s,r){const i=new Xt({caller:this._env.address,gasLimit:t,to:n,value:s,data:r,isStatic:this._env.isStatic,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(i)}async callCode(t,n,s,r){const i=new Xt({caller:this._env.address,gasLimit:t,to:this._env.address,codeAddress:n,value:s,data:r,isStatic:this._env.isStatic,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(i)}async callStatic(t,n,s,r){const i=new Xt({caller:this._env.address,gasLimit:t,to:n,value:s,data:r,isStatic:!0,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(i)}async callDelegate(t,n,s,r){const i=new Xt({caller:this._env.caller,gasLimit:t,to:this._env.address,codeAddress:n,value:s,data:r,isStatic:this._env.isStatic,delegatecall:!0,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(i)}async _baseCall(t){const n=new Set(this._result.selfdestruct);t.selfdestruct=n,t.gasRefund=this._runState.gasRefund,this._runState.returnBytes=new Uint8Array(0);let s;if(this.common.isActivatedEIP(6780)&&(s=new Set(this._result.createdAddresses),t.createdAddresses=s),this._runState.returnBytes=new Uint8Array(0),this._env.depth>=Number(this.common.param("stackLimit"))||t.delegatecall!==!0&&this._env.contract.balance<t.value)return y;const r=await this._evm.runCall({message:t});if(r.execResult.logs&&(this._result.logs=this._result.logs.concat(r.execResult.logs)),this.useGas(r.execResult.executionGasUsed,"CALL, STATICCALL, DELEGATECALL, CALLCODE"),r.execResult.returnValue!==void 0&&(!r.execResult.exceptionError||r.execResult.exceptionError.error===x.errorMessages.REVERT)&&(this._runState.returnBytes=r.execResult.returnValue),!r.execResult.exceptionError){for(const o of n)this._result.selfdestruct.add(o);if(this.common.isActivatedEIP(6780))for(const o of s)this._result.createdAddresses.add(o);const i=await this._stateManager.getAccount(this._env.address);if(!i)throw L("could not read contract account");this._env.contract=i,this._runState.gasRefund=r.execResult.gasRefund??y}return this._getReturnCode(r)}async create(t,n,s,r,i){const o=new Set(this._result.selfdestruct),a=this._env.address,c=this._env.depth+1;if(this._runState.returnBytes=new Uint8Array(0),this._env.depth>=Number(this.common.param("stackLimit"))||this._env.contract.balance<n||this._env.contract.nonce>=Uf||(this._env.contract.nonce+=Q,await this.journal.putAccount(this._env.address,this._env.contract),this.common.isActivatedEIP(3860)&&s.length>Number(this.common.param("maxInitCodeSize"))&&this._evm.allowUnlimitedInitCodeSize===!1))return y;const f=new Xt({caller:a,gasLimit:t,value:n,data:s,eofCallData:i,salt:r,depth:c,selfdestruct:o,gasRefund:this._runState.gasRefund,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});let l;this.common.isActivatedEIP(6780)&&(l=new Set(this._result.createdAddresses),f.createdAddresses=l);const u=await this._evm.runCall({message:f});if(u.execResult.logs&&(this._result.logs=this._result.logs.concat(u.execResult.logs)),this.useGas(u.execResult.executionGasUsed,"CREATE"),u.execResult.exceptionError&&u.execResult.exceptionError.error===x.errorMessages.REVERT&&(this._runState.returnBytes=u.execResult.returnValue),!u.execResult.exceptionError||u.execResult.exceptionError.error===x.errorMessages.CODESTORE_OUT_OF_GAS){for(const h of o)this._result.selfdestruct.add(h);if(this.common.isActivatedEIP(6780))for(const h of l)this._result.createdAddresses.add(h);const d=await this._stateManager.getAccount(this._env.address);if(!d)throw L("could not read contract account");if(this._env.contract=d,this._runState.gasRefund=u.execResult.gasRefund??y,u.createdAddress)return Z(u.createdAddress.bytes)}return this._getReturnCode(u,!0)}async create2(t,n,s,r){return this.create(t,n,s,r)}async eofcreate(t,n,s,r,i){return this.create(t,n,s,r,i)}async selfDestruct(t){return this._selfDestruct(t)}async _selfDestruct(t){this._result.selfdestruct.has(Y(this._env.address.bytes))||this.refundGas(this.common.param("selfdestructRefundGas")),this._result.selfdestruct.add(Y(this._env.address.bytes));const n=ge(t.bytes,this._env.address.bytes);if(!n){let r=await this._stateManager.getAccount(t);r||(r=new We),r.balance+=this._env.contract.balance,await this.journal.putAccount(t,r)}let s=!this.common.isActivatedEIP(6780);s||(s=this._env.createdAddresses.has(this._env.address.toString()),s||(s=!n)),s&&await this._stateManager.modifyAccountFields(this._env.address,{balance:y}),q(x.errorMessages.STOP)}log(t,n,s){(n<0||n>4)&&q(x.errorMessages.OUT_OF_RANGE),s.length!==n&&q(x.errorMessages.INTERNAL_ERROR);const r=[this._env.address.bytes,s,t];this._result.logs.push(r)}_getReturnCode(t,n=!1){return this._runState.env.eof===void 0||n?t.execResult.exceptionError?y:Q:t.execResult.exceptionError!==void 0?t.execResult.exceptionError.error===x.errorMessages.REVERT?Q:Tt:y}}var yu={};class _u{constructor(t,n){this.DEBUG=typeof window>"u"?yu?.DEBUG?.includes("ethjs")??!1:!1,this._debug=cn("evm:journal"),this.cleanJournal(),this.journalHeight=0,this.stateManager=t,this.common=n}startReportingAccessList(){this.accessList=new Map}startReportingPreimages(){this.preimages=new Map}async putAccount(t,n){return this.touchAddress(t),this.stateManager.putAccount(t,n)}async deleteAccount(t){this.touchAddress(t),await this.stateManager.deleteAccount(t)}touchAddress(t){const n=t.toString().slice(2);this.touchAccount(n)}touchAccount(t){if(this.preimages!==void 0){const n=da(t);if(this.stateManager.getAppliedKey===void 0)throw L("touchAccount: stateManager.getAppliedKey can not be undefined if preimage storing is enabled");const s=this.stateManager.getAppliedKey(n);this.preimages.set(Y(s),n)}this.touched.has(t)||(this.touched.add(t),this.journalDiff[this.journalDiff.length-1][1][2].add(t))}async commit(){this.journalHeight--,this.journalDiff.push([this.journalHeight,[new Set,new Map,new Set]]),await this.stateManager.commit()}async checkpoint(){this.journalHeight++,this.journalDiff.push([this.journalHeight,[new Set,new Map,new Set]]),await this.stateManager.checkpoint()}async revert(){let t;for(let n=this.journalDiff.length-1;n>=0;n--){t=n;const[s,r]=this.journalDiff[n];if(s<this.journalHeight)break;const i=r[0],o=r[1],a=r[2];for(const c of i)this.journal.has(c)&&this.journal.delete(c);for(const[c,f]of o)if(this.journal.has(c)){const l=this.journal.get(c);for(const u of f)l.delete(u)}for(const c of a)c!==$f&&this.touched.delete(c)}this.journalDiff=this.journalDiff.slice(0,t+1),this.journalHeight--,await this.stateManager.revert()}cleanJournal(){this.journalHeight=0,this.journal=new Map,this.alwaysWarmJournal=new Map,this.touched=new Set,this.journalDiff=[[0,[new Set,new Map,new Set]]]}async cleanup(){if(this.common.gteHardfork(O.SpuriousDragon))for(const t of this.touched){const n=new jt(ye(`0x${t}`)),s=await this.stateManager.getAccount(n);(s===void 0||s.isEmpty())&&(await this.deleteAccount(n),this.DEBUG&&this._debug(`Cleanup touched account address=${n} (>= SpuriousDragon)`))}this.cleanJournal(),delete this.accessList,delete this.preimages}addAlwaysWarmAddress(t,n=!1){const s=ys(t);this.alwaysWarmJournal.has(s)||this.alwaysWarmJournal.set(s,new Set),n&&this.accessList!==void 0&&(this.accessList.has(s)||this.accessList.set(s,new Set))}addAlwaysWarmSlot(t,n,s=!1){const r=ys(t);this.addAlwaysWarmAddress(r,s);const i=this.alwaysWarmJournal.get(r),o=ys(n);i.add(o),s&&this.accessList!==void 0&&this.accessList.get(r).add(o)}isWarmedAddress(t){const n=Pe(t);return this.journal.has(n)||this.alwaysWarmJournal.has(n)}addWarmedAddress(t){const n=Pe(t);this.journal.has(n)||(this.journal.set(n,new Set),this.journalDiff[this.journalDiff.length-1][1][0].add(n)),this.accessList!==void 0&&(this.accessList.has(n)||this.accessList.set(n,new Set))}isWarmedStorage(t,n){const s=Pe(t),r=this.journal.get(s);return r===void 0?this.alwaysWarmJournal.has(s)?this.alwaysWarmJournal.get(s).has(Pe(n)):!1:r.has(Pe(n))?!0:this.alwaysWarmJournal.has(s)?this.alwaysWarmJournal.get(s).has(Pe(n)):!1}addWarmedStorage(t,n){const s=Pe(t);let r=this.journal.get(s);r===void 0&&(this.addWarmedAddress(t),r=this.journal.get(s));const i=Pe(n);if(!r.has(i)){r.add(i);const a=this.journalDiff[this.journalDiff.length-1][1][1];a.has(s)||a.set(s,new Set),a.get(s).add(i)}this.accessList!==void 0&&this.accessList.get(s).add(i)}}const Eu={1:{maxRefundQuotient:2,basefeeGas:2,expGas:10,expByteGas:10,keccak256Gas:30,keccak256WordGas:6,sloadGas:50,sstoreSetGas:2e4,sstoreResetGas:5e3,sstoreRefundGas:15e3,jumpdestGas:1,logGas:375,logDataGas:8,logTopicGas:375,createGas:32e3,callGas:40,callStipendGas:2300,callValueTransferGas:9e3,callNewAccountGas:25e3,selfdestructRefundGas:24e3,memoryGas:3,quadCoefficientDivGas:512,createDataGas:200,copyGas:3,ecRecoverGas:3e3,sha256Gas:60,sha256WordGas:12,ripemd160Gas:600,ripemd160WordGas:120,identityGas:15,identityWordGas:3,stopGas:0,addGas:3,mulGas:5,subGas:3,divGas:5,sdivGas:5,modGas:5,smodGas:5,addmodGas:8,mulmodGas:8,signextendGas:5,ltGas:3,gtGas:3,sltGas:3,sgtGas:3,eqGas:3,iszeroGas:3,andGas:3,orGas:3,xorGas:3,notGas:3,byteGas:3,addressGas:2,balanceGas:20,originGas:2,callerGas:2,callvalueGas:2,calldataloadGas:3,calldatasizeGas:2,calldatacopyGas:3,codesizeGas:2,codecopyGas:3,gaspriceGas:2,extcodesizeGas:20,extcodecopyGas:20,blockhashGas:20,coinbaseGas:2,timestampGas:2,numberGas:2,difficultyGas:2,gaslimitGas:2,popGas:2,mloadGas:3,mstoreGas:3,mstore8Gas:3,sstoreGas:0,jumpGas:8,jumpiGas:10,pcGas:2,msizeGas:2,gasGas:2,pushGas:3,dupGas:3,swapGas:3,callcodeGas:40,returnGas:0,invalidGas:0,selfdestructGas:0,prevrandaoGas:0,stackLimit:1024},606:{delegatecallGas:40},608:{sloadGas:200,callGas:700,extcodesizeGas:700,extcodecopyGas:700,balanceGas:400,delegatecallGas:700,callcodeGas:700,selfdestructGas:5e3},607:{expByteGas:50,maxCodeSize:24576},609:{modexpGquaddivisorGas:20,bn254AddGas:500,bn254MulGas:4e4,bn254PairingGas:1e5,bn254PairingWordGas:8e4,revertGas:0,staticcallGas:700,returndatasizeGas:2,returndatacopyGas:3},1013:{netSstoreNoopGas:200,netSstoreInitGas:2e4,netSstoreCleanGas:5e3,netSstoreDirtyGas:200,netSstoreClearRefundGas:15e3,netSstoreResetRefundGas:4800,netSstoreResetClearRefundGas:19800,shlGas:3,shrGas:3,sarGas:3,extcodehashGas:400,create2Gas:32e3},1716:{netSstoreNoopGas:null,netSstoreInitGas:null,netSstoreCleanGas:null,netSstoreDirtyGas:null,netSstoreClearRefundGas:null,netSstoreResetRefundGas:null,netSstoreResetClearRefundGas:null},1679:{blake2RoundGas:1,bn254AddGas:150,bn254MulGas:6e3,bn254PairingGas:45e3,bn254PairingWordGas:34e3,sstoreSentryEIP2200Gas:2300,sstoreNoopEIP2200Gas:800,sstoreDirtyEIP2200Gas:800,sstoreInitEIP2200Gas:2e4,sstoreInitRefundEIP2200Gas:19200,sstoreCleanEIP2200Gas:5e3,sstoreCleanRefundEIP2200Gas:4200,sstoreClearRefundEIP2200Gas:15e3,balanceGas:700,extcodehashGas:700,chainidGas:2,selfbalanceGas:5,sloadGas:800},663:{dupnGas:3,swapnGas:3,exchangeGas:3},1153:{tstoreGas:100,tloadGas:100},1559:{elasticityMultiplier:2},2565:{modexpGquaddivisorGas:3},2537:{bls12381G1AddGas:375,bls12381G1MulGas:12e3,bls12381G2AddGas:600,bls12381G2MulGas:22500,bls12381PairingBaseGas:37700,bls12381PairingPerPairGas:32600,bls12381MapG1Gas:5500,bls12381MapG2Gas:23800},2929:{coldsloadGas:2100,coldaccountaccessGas:2600,warmstoragereadGas:100,sstoreCleanEIP2200Gas:2900,sstoreNoopEIP2200Gas:100,sstoreDirtyEIP2200Gas:100,sstoreInitRefundEIP2200Gas:19900,sstoreCleanRefundEIP2200Gas:4900,callGas:0,callcodeGas:0,delegatecallGas:0,staticcallGas:0,balanceGas:0,extcodesizeGas:0,extcodecopyGas:0,extcodehashGas:0,sloadGas:0,sstoreGas:0},2935:{historyStorageAddress:"0x0000F90827F1C53A10CB7A02335B175320002935",historyServeWindow:8192,systemAddress:"0xfffffffffffffffffffffffffffffffffffffffe"},3198:{basefeeGas:2},3529:{maxRefundQuotient:5,selfdestructRefundGas:0,sstoreClearRefundEIP2200Gas:4800},3855:{push0Gas:2},3860:{initCodeWordGas:2,maxInitCodeSize:49152},4200:{rjumpGas:2,rjumpiGas:4,rjumpvGas:4},4399:{prevrandaoGas:2},4750:{callfGas:5,retfGas:3},4844:{kzgPointEvaluationPrecompileGas:5e4,blobhashGas:3,blobCommitmentVersionKzg:1,fieldElementsPerBlob:4096},5656:{mcopyGas:3},6206:{jumpfGas:5},7069:{extcallGas:0,extdelegatecallGas:0,extstaticcallGas:0,returndataloadGas:3,minRetainedGas:5e3,minCalleeGas:2300},7480:{dataloadGas:4,dataloadnGas:3,datasizeGas:2,datacopyGas:3},7516:{blobbasefeeGas:2},7620:{eofcreateGas:32e3,returncontractGas:0},7939:{clzGas:5}},Be=(e,t,n)=>(e._debug!==void 0&&e._debug(`Run ${n} precompile data=${ci(e.data)} length=${e.data.length} gasLimit=${e.gasLimit} gasUsed=${t}`),e.gasLimit<t?(e._debug!==void 0&&e._debug(`${n} failed: OOG`),!1):!0),Fs=(e,t,n)=>e.data.length!==t?(e._debug!==void 0&&e._debug(`${n} failed: Invalid input length length=${e.data.length} (expected: ${t})`),!1):!0,$s=(e,t,n)=>e.data.length%t!==0?(e._debug!==void 0&&e._debug(`${n} failed: Invalid input length length=${e.data.length} (expected: ${t}*k bytes)`),!1):!0,wu=BigInt("52435875175126190479447740508185965837690552500527637822603658699938581184513"),io=se(oe(wu),32);async function Au(e){const t=Ee("0a");if(e.common.customCrypto?.kzg===void 0)throw L("kzg not initialized");const n=e.common.param("kzgPointEvaluationPrecompileGas");if(!Be(e,n,t))return ae(e.gasLimit);if(e.data.length!==192)return te(new x(x.errorMessages.INVALID_INPUT_LENGTH),e.gasLimit);const s=Number(e.common.param("blobCommitmentVersionKzg")),r=e.common.param("fieldElementsPerBlob"),i=Y(e.data.subarray(0,32)),o=Y(e.data.subarray(32,64)),a=Y(e.data.subarray(64,96)),c=Y(e.data.subarray(96,144)),f=Y(e.data.subarray(144,192));if(ld(c,s)!==i)return e._debug!==void 0&&e._debug(`${t} failed: INVALID_COMMITMENT`),te(new x(x.errorMessages.INVALID_COMMITMENT),e.gasLimit);e._debug!==void 0&&e._debug(`${t}: proof verification with commitment=${c} z=${o} y=${a} kzgProof=${f}`);try{if(e.common.customCrypto?.kzg?.verifyProof(c,o,a,f)===!1)return te(new x(x.errorMessages.INVALID_PROOF),e.gasLimit)}catch(u){return u.message.includes("C_KZG_BADARGS")===!0?(e._debug!==void 0&&e._debug(`${t} failed: INVALID_INPUTS`),te(new x(x.errorMessages.INVALID_INPUTS),e.gasLimit)):(e._debug!==void 0&&e._debug(`${t} failed: Unknown error - ${u.message}`),te(new x(x.errorMessages.REVERT),e.gasLimit))}const l=se(oe(r),32);return e._debug!==void 0&&e._debug(`${t} return fieldElements=${Y(l)} modulus=${Y(io)}`),{executionGasUsed:n,returnValue:Ke(l,io)}}const qr=BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),Je=128,st=256,Ca=new Uint8Array(Je),Sa=new Uint8Array(st),Iu=new Uint8Array(32),Bu=Ke(new Uint8Array(31),ye("0x01")),vu=[[1,1e3],[2,949],[3,848],[4,797],[5,764],[6,750],[7,738],[8,728],[9,719],[10,712],[11,705],[12,698],[13,692],[14,687],[15,682],[16,677],[17,673],[18,669],[19,665],[20,661],[21,658],[22,654],[23,651],[24,648],[25,645],[26,642],[27,640],[28,637],[29,635],[30,632],[31,630],[32,627],[33,625],[34,623],[35,621],[36,619],[37,617],[38,615],[39,613],[40,611],[41,609],[42,608],[43,606],[44,604],[45,603],[46,601],[47,599],[48,598],[49,596],[50,595],[51,593],[52,592],[53,591],[54,589],[55,588],[56,586],[57,585],[58,584],[59,582],[60,581],[61,580],[62,579],[63,577],[64,576],[65,575],[66,574],[67,573],[68,572],[69,570],[70,569],[71,568],[72,567],[73,566],[74,565],[75,564],[76,563],[77,562],[78,561],[79,560],[80,559],[81,558],[82,557],[83,556],[84,555],[85,554],[86,553],[87,552],[88,551],[89,550],[90,549],[91,548],[92,547],[93,547],[94,546],[95,545],[96,544],[97,543],[98,542],[99,541],[100,540],[101,540],[102,539],[103,538],[104,537],[105,536],[106,536],[107,535],[108,534],[109,533],[110,532],[111,532],[112,531],[113,530],[114,529],[115,528],[116,528],[117,527],[118,526],[119,525],[120,525],[121,524],[122,523],[123,522],[124,522],[125,521],[126,520],[127,520],[128,519]],Nu=[[1,1e3],[2,1e3],[3,923],[4,884],[5,855],[6,832],[7,812],[8,796],[9,782],[10,770],[11,759],[12,749],[13,740],[14,732],[15,724],[16,717],[17,711],[18,704],[19,699],[20,693],[21,688],[22,683],[23,679],[24,674],[25,670],[26,666],[27,663],[28,659],[29,655],[30,652],[31,649],[32,646],[33,643],[34,640],[35,637],[36,634],[37,632],[38,629],[39,627],[40,624],[41,622],[42,620],[43,618],[44,615],[45,613],[46,611],[47,609],[48,607],[49,606],[50,604],[51,602],[52,600],[53,598],[54,597],[55,595],[56,593],[57,592],[58,590],[59,589],[60,587],[61,586],[62,584],[63,583],[64,582],[65,580],[66,579],[67,578],[68,576],[69,575],[70,574],[71,573],[72,571],[73,570],[74,569],[75,568],[76,567],[77,566],[78,565],[79,563],[80,562],[81,561],[82,560],[83,559],[84,558],[85,557],[86,556],[87,555],[88,554],[89,553],[90,552],[91,552],[92,551],[93,550],[94,549],[95,548],[96,547],[97,546],[98,545],[99,545],[100,544],[101,543],[102,542],[103,541],[104,541],[105,540],[106,539],[107,538],[108,537],[109,537],[110,536],[111,535],[112,535],[113,534],[114,533],[115,532],[116,532],[117,531],[118,530],[119,530],[120,529],[121,528],[122,528],[123,527],[124,526],[125,526],[126,525],[127,524],[128,524]];/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mi=BigInt(0),Ns=BigInt(1);function Cs(e,t=""){if(typeof e!="boolean"){const n=t&&`"${t}"`;throw new Error(n+"expected boolean, got type="+typeof e)}return e}function tn(e,t,n=""){const s=Wn(e),r=e?.length,i=t!==void 0;if(!s||i&&r!==t){const o=n&&`"${n}" `,a=i?` of length ${t}`:"",c=s?`length=${r}`:`type=${typeof e}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return e}function ds(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Oa(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?mi:BigInt("0x"+e)}function et(e){return Oa(St(e))}function Ta(e){return Me(e),Oa(St(Uint8Array.from(e).reverse()))}function Se(e,t){return Un(e.toString(16).padStart(t*2,"0"))}function Ga(e,t){return Se(e,t).reverse()}function Ie(e,t,n){let s;if(typeof t=="string")try{s=Un(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(Wn(t))s=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const r=s.length;if(typeof n=="number"&&r!==n)throw new Error(e+" of length "+n+" expected, got "+r);return s}const pr=e=>typeof e=="bigint"&&mi<=e;function ka(e,t,n){return pr(e)&&pr(t)&&pr(n)&&t<=e&&e<n}function Cu(e,t,n,s){if(!ka(t,n,s))throw new Error("expected valid "+e+": "+n+" <= n < "+s+", got "+t)}function An(e){let t;for(t=0;e>mi;e>>=Ns,t+=1);return t}function Su(e,t){return e>>BigInt(t)&Ns}const Zt=e=>(Ns<<BigInt(e))-Ns;function Ou(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const s=h=>new Uint8Array(h),r=h=>Uint8Array.of(h);let i=s(e),o=s(e),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},f=(...h)=>n(o,i,...h),l=(h=s(0))=>{o=f(r(0),h),i=f(),h.length!==0&&(o=f(r(1),h),i=f())},u=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const p=[];for(;h<t;){i=f();const g=i.slice();p.push(g),h+=i.length}return he(...p)};return(h,p)=>{c(),l(h);let g;for(;!(g=p(u()));)l();return c(),g}}function Tu(e){return typeof e=="function"&&Number.isSafeInteger(e.outputLen)}function Vs(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function s(r,i,o){const a=e[r];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${r}" is invalid: expected ${i}, got ${c}`)}Object.entries(t).forEach(([r,i])=>s(r,i,!1)),Object.entries(n).forEach(([r,i])=>s(r,i,!0))}const we=()=>{throw new Error("not implemented")};function zr(e){const t=new WeakMap;return(n,...s)=>{const r=t.get(n);if(r!==void 0)return r;const i=e(n,...s);return t.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ye=BigInt(0),qe=BigInt(1),nn=BigInt(2),Pa=BigInt(3),La=BigInt(4),Ra=BigInt(5),Gu=BigInt(7),Ua=BigInt(8),ku=BigInt(9),Da=BigInt(16);function Qe(e,t){const n=e%t;return n>=Ye?n:t+n}function oo(e,t){if(e===Ye)throw new Error("invert: expected non-zero number");if(t<=Ye)throw new Error("invert: expected positive modulus, got "+t);let n=Qe(e,t),s=t,r=Ye,i=qe;for(;n!==Ye;){const a=s/n,c=s%n,f=r-i*a;s=n,n=c,r=i,i=f}if(s!==qe)throw new Error("invert: does not exist");return Qe(r,t)}function pi(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function Ha(e,t){const n=(e.ORDER+qe)/La,s=e.pow(t,n);return pi(e,s,t),s}function Pu(e,t){const n=(e.ORDER-Ra)/Ua,s=e.mul(t,nn),r=e.pow(s,n),i=e.mul(t,r),o=e.mul(e.mul(i,nn),r),a=e.mul(i,e.sub(o,e.ONE));return pi(e,a,t),a}function Lu(e){const t=bt(e),n=Ma(e),s=n(t,t.neg(t.ONE)),r=n(t,s),i=n(t,t.neg(s)),o=(e+Gu)/Da;return(a,c)=>{let f=a.pow(c,o),l=a.mul(f,s);const u=a.mul(f,r),d=a.mul(f,i),h=a.eql(a.sqr(l),c),p=a.eql(a.sqr(u),c);f=a.cmov(f,l,h),l=a.cmov(d,u,p);const g=a.eql(a.sqr(l),c),m=a.cmov(f,l,g);return pi(a,m,c),m}}function Ma(e){if(e<Pa)throw new Error("sqrt is not defined for small field");let t=e-qe,n=0;for(;t%nn===Ye;)t/=nn,n++;let s=nn;const r=bt(e);for(;Ss(r,s)===1;)if(s++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Ha;let i=r.pow(s,t);const o=(t+qe)/nn;return function(c,f){if(c.is0(f))return f;if(Ss(c,f)!==1)throw new Error("Cannot find square root");let l=n,u=c.mul(c.ONE,i),d=c.pow(f,t),h=c.pow(f,o);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let p=1,g=c.sqr(d);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===l)throw new Error("Cannot find square root");const m=qe<<BigInt(l-p-1),w=c.pow(u,m);l=p,u=c.sqr(w),d=c.mul(d,u),h=c.mul(h,w)}return h}}function Ru(e){return e%La===Pa?Ha:e%Ua===Ra?Pu:e%Da===ku?Lu(e):Ma(e)}const Uu=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Fa(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Uu.reduce((s,r)=>(s[r]="function",s),t);return Vs(e,n),e}function qs(e,t,n){if(n<Ye)throw new Error("invalid exponent, negatives unsupported");if(n===Ye)return e.ONE;if(n===qe)return t;let s=e.ONE,r=t;for(;n>Ye;)n&qe&&(s=e.mul(s,r)),r=e.sqr(r),n>>=qe;return s}function fn(e,t,n=!1){const s=new Array(t.length).fill(n?e.ZERO:void 0),r=t.reduce((o,a,c)=>e.is0(a)?o:(s[c]=o,e.mul(o,a)),e.ONE),i=e.inv(r);return t.reduceRight((o,a,c)=>e.is0(a)?o:(s[c]=e.mul(o,s[c]),e.mul(o,a)),i),s}function Ss(e,t){const n=(e.ORDER-qe)/nn,s=e.pow(t,n),r=e.eql(s,e.ONE),i=e.eql(s,e.ZERO),o=e.eql(s,e.neg(e.ONE));if(!r&&!i&&!o)throw new Error("invalid Legendre symbol result");return r?1:i?0:-1}function $a(e,t){t!==void 0&&_n(t);const n=t!==void 0?t:e.toString(2).length,s=Math.ceil(n/8);return{nBitLength:n,nByteLength:s}}function bt(e,t,n=!1,s={}){if(e<=Ye)throw new Error("invalid field: expected ORDER > 0, got "+e);let r,i,o=!1,a;if(typeof t=="object"&&t!=null){if(s.sqrt||n)throw new Error("cannot specify opts in two arguments");const d=t;d.BITS&&(r=d.BITS),d.sqrt&&(i=d.sqrt),typeof d.isLE=="boolean"&&(n=d.isLE),typeof d.modFromBytes=="boolean"&&(o=d.modFromBytes),a=d.allowedLengths}else typeof t=="number"&&(r=t),s.sqrt&&(i=s.sqrt);const{nBitLength:c,nByteLength:f}=$a(e,r);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const u=Object.freeze({ORDER:e,isLE:n,BITS:c,BYTES:f,MASK:Zt(c),ZERO:Ye,ONE:qe,allowedLengths:a,create:d=>Qe(d,e),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return Ye<=d&&d<e},is0:d=>d===Ye,isValidNot0:d=>!u.is0(d)&&u.isValid(d),isOdd:d=>(d&qe)===qe,neg:d=>Qe(-d,e),eql:(d,h)=>d===h,sqr:d=>Qe(d*d,e),add:(d,h)=>Qe(d+h,e),sub:(d,h)=>Qe(d-h,e),mul:(d,h)=>Qe(d*h,e),pow:(d,h)=>qs(u,d,h),div:(d,h)=>Qe(d*oo(h,e),e),sqrN:d=>d*d,addN:(d,h)=>d+h,subN:(d,h)=>d-h,mulN:(d,h)=>d*h,inv:d=>oo(d,e),sqrt:i||(d=>(l||(l=Ru(e)),l(u,d))),toBytes:d=>n?Ga(d,f):Se(d,f),fromBytes:(d,h=!0)=>{if(a){if(!a.includes(d.length)||d.length>f)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+d.length);const g=new Uint8Array(f);g.set(d,n?0:g.length-d.length),d=g}if(d.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+d.length);let p=n?Ta(d):et(d);if(o&&(p=Qe(p,e)),!h&&!u.isValid(p))throw new Error("invalid field element: outside of range 0..ORDER");return p},invertBatch:d=>fn(u,d),cmov:(d,h,p)=>p?h:d});return Object.freeze(u)}function Va(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function gi(e){const t=Va(e);return t+Math.ceil(t/2)}function qa(e,t,n=!1){const s=e.length,r=Va(t),i=gi(t);if(s<16||s<i||s>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+s);const o=n?Ta(e):et(e),a=Qe(o,t-qe)+qe;return n?Ga(a,r):Se(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const In=BigInt(0),sn=BigInt(1);function Os(e,t){const n=t.negate();return e?n:t}function Rn(e,t){const n=fn(e.Fp,t.map(s=>s.Z));return t.map((s,r)=>e.fromAffine(s.toAffine(n[r])))}function za(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function gr(e,t){za(e,t);const n=Math.ceil(t/e)+1,s=2**(e-1),r=2**e,i=Zt(e),o=BigInt(e);return{windows:n,windowSize:s,mask:i,maxNumber:r,shiftBy:o}}function ao(e,t,n){const{windowSize:s,mask:r,maxNumber:i,shiftBy:o}=n;let a=Number(e&r),c=e>>o;a>s&&(a-=i,c+=sn);const f=t*s,l=f+Math.abs(a)-1,u=a===0,d=a<0,h=t%2!==0;return{nextN:c,offset:l,isZero:u,isNeg:d,isNegF:h,offsetF:f}}function Du(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,s)=>{if(!(n instanceof t))throw new Error("invalid point at index "+s)})}function Hu(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,s)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+s)})}const br=new WeakMap,Wa=new WeakMap;function xr(e){return Wa.get(e)||1}function co(e){if(e!==In)throw new Error("invalid wNAF")}class Mu{constructor(t,n){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=n}_unsafeLadder(t,n,s=this.ZERO){let r=t;for(;n>In;)n&sn&&(s=s.add(r)),r=r.double(),n>>=sn;return s}precomputeWindow(t,n){const{windows:s,windowSize:r}=gr(n,this.bits),i=[];let o=t,a=o;for(let c=0;c<s;c++){a=o,i.push(a);for(let f=1;f<r;f++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(t,n,s){if(!this.Fn.isValid(s))throw new Error("invalid scalar");let r=this.ZERO,i=this.BASE;const o=gr(t,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:f,isZero:l,isNeg:u,isNegF:d,offsetF:h}=ao(s,a,o);s=c,l?i=i.add(Os(d,n[h])):r=r.add(Os(u,n[f]))}return co(s),{p:r,f:i}}wNAFUnsafe(t,n,s,r=this.ZERO){const i=gr(t,this.bits);for(let o=0;o<i.windows&&s!==In;o++){const{nextN:a,offset:c,isZero:f,isNeg:l}=ao(s,o,i);if(s=a,!f){const u=n[c];r=r.add(l?u.negate():u)}}return co(s),r}getPrecomputes(t,n,s){let r=br.get(n);return r||(r=this.precomputeWindow(n,t),t!==1&&(typeof s=="function"&&(r=s(r)),br.set(n,r))),r}cached(t,n,s){const r=xr(t);return this.wNAF(r,this.getPrecomputes(r,t,s),n)}unsafe(t,n,s,r){const i=xr(t);return i===1?this._unsafeLadder(t,n,r):this.wNAFUnsafe(i,this.getPrecomputes(i,t,s),n,r)}createCache(t,n){za(n,this.bits),Wa.set(t,n),br.delete(t)}hasCache(t){return xr(t)!==1}}function Fu(e,t,n,s){let r=t,i=e.ZERO,o=e.ZERO;for(;n>In||s>In;)n&sn&&(i=i.add(r)),s&sn&&(o=o.add(r)),r=r.double(),n>>=sn,s>>=sn;return{p1:i,p2:o}}function $u(e,t,n,s){Du(n,e),Hu(s,t);const r=n.length,i=s.length;if(r!==i)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=An(BigInt(r));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const f=Zt(c),l=new Array(Number(f)+1).fill(o),u=Math.floor((t.BITS-1)/c)*c;let d=o;for(let h=u;h>=0;h-=c){l.fill(o);for(let g=0;g<i;g++){const m=s[g],w=Number(m>>BigInt(h)&f);l[w]=l[w].add(n[g])}let p=o;for(let g=l.length-1,m=o;g>0;g--)m=m.add(l[g]),p=p.add(m);if(d=d.add(p),h!==0)for(let g=0;g<c;g++)d=d.double()}return d}function fo(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Fa(t),t}else return bt(e,{isLE:n})}function Vu(e,t,n={},s){if(s===void 0&&(s=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const c of["p","n","h"]){const f=t[c];if(!(typeof f=="bigint"&&f>In))throw new Error(`CURVE.${c} must be positive bigint`)}const r=fo(t.p,n.Fp,s),i=fo(t.n,n.Fn,s),a=["Gx","Gy","a","b"];for(const c of a)if(!r.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:r,Fn:i}}const qu=et;function qt(e,t){if($n(e),$n(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const n=Array.from({length:t}).fill(0);for(let s=t-1;s>=0;s--)n[s]=e&255,e>>>=8;return new Uint8Array(n)}function zu(e,t){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e[s]^t[s];return n}function $n(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function ja(e){if(!Wn(e)&&typeof e!="string")throw new Error("DST must be Uint8Array or string");return typeof e=="string"?jn(e):e}function Wu(e,t,n,s){Me(e),$n(n),t=ja(t),t.length>255&&(t=s(he(jn("H2C-OVERSIZE-DST-"),t)));const{outputLen:r,blockLen:i}=s,o=Math.ceil(n/r);if(n>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=he(t,qt(t.length,1)),c=qt(0,i),f=qt(n,2),l=new Array(o),u=s(he(c,e,f,qt(0,1),a));l[0]=s(he(u,qt(1,1),a));for(let h=1;h<=o;h++){const p=[zu(u,l[h-1]),qt(h+1,1),a];l[h]=s(he(...p))}return he(...l).slice(0,n)}function ju(e,t,n,s,r){if(Me(e),$n(n),t=ja(t),t.length>255){const i=Math.ceil(2*s/8);t=r.create({dkLen:i}).update(jn("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return r.create({dkLen:n}).update(e).update(qt(n,2)).update(t).update(qt(t.length,1)).digest()}function yr(e,t,n){Vs(n,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:s,k:r,m:i,hash:o,expand:a,DST:c}=n;if(!Tu(n.hash))throw new Error("expected valid hash");Me(e),$n(t);const f=s.toString(2).length,l=Math.ceil((f+r)/8),u=t*i*l;let d;if(a==="xmd")d=Wu(e,c,u,o);else if(a==="xof")d=ju(e,c,u,r,o);else if(a==="_internal_pass")d=e;else throw new Error('expand must be "xmd" or "xof"');const h=new Array(t);for(let p=0;p<t;p++){const g=new Array(i);for(let m=0;m<i;m++){const w=l*(m+p*i),T=d.subarray(w,w+l);g[m]=Qe(qu(T),s)}h[p]=g}return h}function Za(e,t){const n=t.map(s=>Array.from(s).reverse());return(s,r)=>{const[i,o,a,c]=n.map(u=>u.reduce((d,h)=>e.add(e.mul(d,s),h))),[f,l]=fn(e,[o,c],!0);return s=e.mul(i,f),r=e.mul(r,e.mul(a,l)),{x:s,y:r}}}const Zu=jn("HashToScalar-");function uo(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");function s(i){return e.fromAffine(t(i))}function r(i){const o=i.clearCofactor();return o.equals(e.ZERO)?e.ZERO:(o.assertValidity(),o)}return{defaults:n,hashToCurve(i,o){const a=Object.assign({},n,o),c=yr(i,2,a),f=s(c[0]),l=s(c[1]);return r(f.add(l))},encodeToCurve(i,o){const a=n.encodeDST?{DST:n.encodeDST}:{},c=Object.assign({},n,a,o),f=yr(i,1,c),l=s(f[0]);return r(l)},mapToCurve(i){if(!Array.isArray(i))throw new Error("expected array of bigints");for(const o of i)if(typeof o!="bigint")throw new Error("expected array of bigints");return r(s(i))},hashToScalar(i,o){const a=e.Fn.ORDER,c=Object.assign({},n,{p:a,m:1,DST:Zu},o);return yr(i,1,c)[0][0]}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lo=(e,t)=>(e+(e>=0?t:-t)/lt)/t;function Ku(e,t,n){const[[s,r],[i,o]]=t,a=lo(o*e,n),c=lo(-r*e,n);let f=e-a*s-c*i,l=-a*r-c*o;const u=f<at,d=l<at;u&&(f=-f),d&&(l=-l);const h=Zt(Math.ceil(An(n)/2))+Ne;if(f<at||f>=h||l<at||l>=h)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:u,k1:f,k2neg:d,k2:l}}function Wr(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function _r(e,t){const n={};for(let s of Object.keys(t))n[s]=e[s]===void 0?t[s]:e[s];return Cs(n.lowS,"lowS"),Cs(n.prehash,"prehash"),n.format!==void 0&&Wr(n.format),n}class Yu extends Error{constructor(t=""){super(t)}}const Bt={Err:Yu,_tlv:{encode:(e,t)=>{const{Err:n}=Bt;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const s=t.length/2,r=ds(s);if(r.length/2&128)throw new n("tlv.encode: long form length too big");const i=s>127?ds(r.length/2|128):"";return ds(e)+i+r+t},decode(e,t){const{Err:n}=Bt;let s=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[s++]!==e)throw new n("tlv.decode: wrong tlv");const r=t[s++],i=!!(r&128);let o=0;if(!i)o=r;else{const c=r&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const f=t.subarray(s,s+c);if(f.length!==c)throw new n("tlv.decode: length bytes not complete");if(f[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of f)o=o<<8|l;if(s+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(s,s+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(s+o)}}},_int:{encode(e){const{Err:t}=Bt;if(e<at)throw new t("integer: negative integers are not allowed");let n=ds(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=Bt;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return et(e)}},toSig(e){const{Err:t,_int:n,_tlv:s}=Bt,r=Ie("signature",e),{v:i,l:o}=s.decode(48,r);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=s.decode(2,i),{v:f,l}=s.decode(2,c);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(f)}},hexFromSig(e){const{_tlv:t,_int:n}=Bt,s=t.encode(2,n.encode(e.r)),r=t.encode(2,n.encode(e.s)),i=s+r;return t.encode(48,i)}},at=BigInt(0),Ne=BigInt(1),lt=BigInt(2),bn=BigInt(3),jr=BigInt(4);function Nt(e,t){const{BYTES:n}=e;let s;if(typeof t=="bigint")s=t;else{let r=Ie("private key",t);try{s=e.fromBytes(r)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(s))throw new Error("invalid private key: out of range [1..N-1]");return s}function Ka(e,t={}){const n=Vu("weierstrass",e,t),{Fp:s,Fn:r}=n;let i=n.CURVE;const{h:o,n:a}=i;Vs(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=t;if(c&&(!s.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=Ja(s,r);function l(){if(!s.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function u(M,v,b){const{x:_,y:I}=v.toAffine(),R=s.toBytes(_);if(Cs(b,"isCompressed"),b){l();const S=!s.isOdd(I);return he(Ya(S),R)}else return he(Uint8Array.of(4),R,s.toBytes(I))}function d(M){tn(M,void 0,"Point");const{publicKey:v,publicKeyUncompressed:b}=f,_=M.length,I=M[0],R=M.subarray(1);if(_===v&&(I===2||I===3)){const S=s.fromBytes(R);if(!s.isValid(S))throw new Error("bad point: is not on curve, wrong x");const D=g(S);let B;try{B=s.sqrt(D)}catch(X){const K=X instanceof Error?": "+X.message:"";throw new Error("bad point: is not on curve, sqrt error"+K)}l();const F=s.isOdd(B);return(I&1)===1!==F&&(B=s.neg(B)),{x:S,y:B}}else if(_===b&&I===4){const S=s.BYTES,D=s.fromBytes(R.subarray(0,S)),B=s.fromBytes(R.subarray(S,S*2));if(!m(D,B))throw new Error("bad point: is not on curve");return{x:D,y:B}}else throw new Error(`bad point: got length ${_}, expected compressed=${v} or uncompressed=${b}`)}const h=t.toBytes||u,p=t.fromBytes||d;function g(M){const v=s.sqr(M),b=s.mul(v,M);return s.add(s.add(b,s.mul(M,i.a)),i.b)}function m(M,v){const b=s.sqr(v),_=g(M);return s.eql(b,_)}if(!m(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const w=s.mul(s.pow(i.a,bn),jr),T=s.mul(s.sqr(i.b),BigInt(27));if(s.is0(s.add(w,T)))throw new Error("bad curve params: a or b");function E(M,v,b=!1){if(!s.isValid(v)||b&&s.is0(v))throw new Error(`bad point coordinate ${M}`);return v}function A(M){if(!(M instanceof k))throw new Error("ProjectivePoint expected")}function G(M){if(!c||!c.basises)throw new Error("no endo");return Ku(M,c.basises,r.ORDER)}const U=zr((M,v)=>{const{X:b,Y:_,Z:I}=M;if(s.eql(I,s.ONE))return{x:b,y:_};const R=M.is0();v==null&&(v=R?s.ONE:s.inv(I));const S=s.mul(b,v),D=s.mul(_,v),B=s.mul(I,v);if(R)return{x:s.ZERO,y:s.ZERO};if(!s.eql(B,s.ONE))throw new Error("invZ was invalid");return{x:S,y:D}}),P=zr(M=>{if(M.is0()){if(t.allowInfinityPoint&&!s.is0(M.Y))return;throw new Error("bad point: ZERO")}const{x:v,y:b}=M.toAffine();if(!s.isValid(v)||!s.isValid(b))throw new Error("bad point: x or y not field elements");if(!m(v,b))throw new Error("bad point: equation left != right");if(!M.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function H(M,v,b,_,I){return b=new k(s.mul(b.X,M),b.Y,b.Z),v=Os(_,v),b=Os(I,b),v.add(b)}class k{constructor(v,b,_){this.X=E("x",v),this.Y=E("y",b,!0),this.Z=E("z",_),Object.freeze(this)}static CURVE(){return i}static fromAffine(v){const{x:b,y:_}=v||{};if(!v||!s.isValid(b)||!s.isValid(_))throw new Error("invalid affine point");if(v instanceof k)throw new Error("projective point not allowed");return s.is0(b)&&s.is0(_)?k.ZERO:new k(b,_,s.ONE)}static fromBytes(v){const b=k.fromAffine(p(tn(v,void 0,"point")));return b.assertValidity(),b}static fromHex(v){return k.fromBytes(Ie("pointHex",v))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(v=8,b=!0){return $.createCache(this,v),b||this.multiply(bn),this}assertValidity(){P(this)}hasEvenY(){const{y:v}=this.toAffine();if(!s.isOdd)throw new Error("Field doesn't support isOdd");return!s.isOdd(v)}equals(v){A(v);const{X:b,Y:_,Z:I}=this,{X:R,Y:S,Z:D}=v,B=s.eql(s.mul(b,D),s.mul(R,I)),F=s.eql(s.mul(_,D),s.mul(S,I));return B&&F}negate(){return new k(this.X,s.neg(this.Y),this.Z)}double(){const{a:v,b}=i,_=s.mul(b,bn),{X:I,Y:R,Z:S}=this;let D=s.ZERO,B=s.ZERO,F=s.ZERO,V=s.mul(I,I),X=s.mul(R,R),K=s.mul(S,S),J=s.mul(I,R);return J=s.add(J,J),F=s.mul(I,S),F=s.add(F,F),D=s.mul(v,F),B=s.mul(_,K),B=s.add(D,B),D=s.sub(X,B),B=s.add(X,B),B=s.mul(D,B),D=s.mul(J,D),F=s.mul(_,F),K=s.mul(v,K),J=s.sub(V,K),J=s.mul(v,J),J=s.add(J,F),F=s.add(V,V),V=s.add(F,V),V=s.add(V,K),V=s.mul(V,J),B=s.add(B,V),K=s.mul(R,S),K=s.add(K,K),V=s.mul(K,J),D=s.sub(D,V),F=s.mul(K,X),F=s.add(F,F),F=s.add(F,F),new k(D,B,F)}add(v){A(v);const{X:b,Y:_,Z:I}=this,{X:R,Y:S,Z:D}=v;let B=s.ZERO,F=s.ZERO,V=s.ZERO;const X=i.a,K=s.mul(i.b,bn);let J=s.mul(b,R),re=s.mul(_,S),me=s.mul(I,D),pe=s.add(b,_),fe=s.add(R,S);pe=s.mul(pe,fe),fe=s.add(J,re),pe=s.sub(pe,fe),fe=s.add(b,I);let be=s.add(R,D);return fe=s.mul(fe,be),be=s.add(J,me),fe=s.sub(fe,be),be=s.add(_,I),B=s.add(S,D),be=s.mul(be,B),B=s.add(re,me),be=s.sub(be,B),V=s.mul(X,fe),B=s.mul(K,me),V=s.add(B,V),B=s.sub(re,V),V=s.add(re,V),F=s.mul(B,V),re=s.add(J,J),re=s.add(re,J),me=s.mul(X,me),fe=s.mul(K,fe),re=s.add(re,me),me=s.sub(J,me),me=s.mul(X,me),fe=s.add(fe,me),J=s.mul(re,fe),F=s.add(F,J),J=s.mul(be,fe),B=s.mul(pe,B),B=s.sub(B,J),J=s.mul(pe,re),V=s.mul(be,V),V=s.add(V,J),new k(B,F,V)}subtract(v){return this.add(v.negate())}is0(){return this.equals(k.ZERO)}multiply(v){const{endo:b}=t;if(!r.isValidNot0(v))throw new Error("invalid scalar: out of range");let _,I;const R=S=>$.cached(this,S,D=>Rn(k,D));if(b){const{k1neg:S,k1:D,k2neg:B,k2:F}=G(v),{p:V,f:X}=R(D),{p:K,f:J}=R(F);I=X.add(J),_=H(b.beta,V,K,S,B)}else{const{p:S,f:D}=R(v);_=S,I=D}return Rn(k,[_,I])[0]}multiplyUnsafe(v){const{endo:b}=t,_=this;if(!r.isValid(v))throw new Error("invalid scalar: out of range");if(v===at||_.is0())return k.ZERO;if(v===Ne)return _;if($.hasCache(this))return this.multiply(v);if(b){const{k1neg:I,k1:R,k2neg:S,k2:D}=G(v),{p1:B,p2:F}=Fu(k,_,R,D);return H(b.beta,B,F,I,S)}else return $.unsafe(_,v)}multiplyAndAddUnsafe(v,b,_){const I=this.multiplyUnsafe(b).add(v.multiplyUnsafe(_));return I.is0()?void 0:I}toAffine(v){return U(this,v)}isTorsionFree(){const{isTorsionFree:v}=t;return o===Ne?!0:v?v(k,this):$.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:v}=t;return o===Ne?this:v?v(k,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(v=!0){return Cs(v,"isCompressed"),this.assertValidity(),h(k,this,v)}toHex(v=!0){return St(this.toBytes(v))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(v=!0){return this.toBytes(v)}_setWindowSize(v){this.precompute(v)}static normalizeZ(v){return Rn(k,v)}static msm(v,b){return $u(k,r,v,b)}static fromPrivateKey(v){return k.BASE.multiply(Nt(r,v))}}k.BASE=new k(i.Gx,i.Gy,s.ONE),k.ZERO=new k(s.ZERO,s.ONE,s.ZERO),k.Fp=s,k.Fn=r;const W=r.BITS,$=new Mu(k,t.endo?Math.ceil(W/2):W);return k.BASE.precompute(8),k}function Ya(e){return Uint8Array.of(e?2:3)}function Xu(e,t){const n=e.ORDER;let s=at;for(let p=n-Ne;p%lt===at;p/=lt)s+=Ne;const r=s,i=lt<<r-Ne-Ne,o=i*lt,a=(n-Ne)/o,c=(a-Ne)/lt,f=o-Ne,l=i,u=e.pow(t,a),d=e.pow(t,(a+Ne)/lt);let h=(p,g)=>{let m=u,w=e.pow(g,f),T=e.sqr(w);T=e.mul(T,g);let E=e.mul(p,T);E=e.pow(E,c),E=e.mul(E,w),w=e.mul(E,g),T=e.mul(E,p);let A=e.mul(T,w);E=e.pow(A,l);let G=e.eql(E,e.ONE);w=e.mul(T,d),E=e.mul(A,m),T=e.cmov(w,T,G),A=e.cmov(E,A,G);for(let U=r;U>Ne;U--){let P=U-lt;P=lt<<P-Ne;let H=e.pow(A,P);const k=e.eql(H,e.ONE);w=e.mul(T,m),m=e.mul(m,m),H=e.mul(A,m),T=e.cmov(w,T,k),A=e.cmov(H,A,k)}return{isValid:G,value:T}};if(e.ORDER%jr===bn){const p=(e.ORDER-bn)/jr,g=e.sqrt(e.neg(t));h=(m,w)=>{let T=e.sqr(w);const E=e.mul(m,w);T=e.mul(T,E);let A=e.pow(T,p);A=e.mul(A,E);const G=e.mul(A,g),U=e.mul(e.sqr(A),w),P=e.eql(U,m);let H=e.cmov(G,A,P);return{isValid:P,value:H}}}return h}function Xa(e,t){Fa(e);const{A:n,B:s,Z:r}=t;if(!e.isValid(n)||!e.isValid(s)||!e.isValid(r))throw new Error("mapToCurveSimpleSWU: invalid opts");const i=Xu(e,r);if(!e.isOdd)throw new Error("Field does not have .isOdd()");return o=>{let a,c,f,l,u,d,h,p;a=e.sqr(o),a=e.mul(a,r),c=e.sqr(a),c=e.add(c,a),f=e.add(c,e.ONE),f=e.mul(f,s),l=e.cmov(r,e.neg(c),!e.eql(c,e.ZERO)),l=e.mul(l,n),c=e.sqr(f),d=e.sqr(l),u=e.mul(d,n),c=e.add(c,u),c=e.mul(c,f),d=e.mul(d,l),u=e.mul(d,s),c=e.add(c,u),h=e.mul(a,f);const{isValid:g,value:m}=i(c,d);p=e.mul(a,o),p=e.mul(p,m),h=e.cmov(h,f,g),p=e.cmov(p,m,g);const w=e.isOdd(o)===e.isOdd(p);p=e.cmov(e.neg(p),p,w);const T=fn(e,[l],!0)[0];return h=e.mul(h,T),{x:h,y:p}}}function Ja(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function Ju(e,t={}){const{Fn:n}=e,s=t.randomBytes||Rs,r=Object.assign(Ja(e.Fp,n),{seed:gi(n.ORDER)});function i(h){try{return!!Nt(n,h)}catch{return!1}}function o(h,p){const{publicKey:g,publicKeyUncompressed:m}=r;try{const w=h.length;return p===!0&&w!==g||p===!1&&w!==m?!1:!!e.fromBytes(h)}catch{return!1}}function a(h=s(r.seed)){return qa(tn(h,r.seed,"seed"),n.ORDER)}function c(h,p=!0){return e.BASE.multiply(Nt(n,h)).toBytes(p)}function f(h){const p=a(h);return{secretKey:p,publicKey:c(p)}}function l(h){if(typeof h=="bigint")return!1;if(h instanceof e)return!0;const{secretKey:p,publicKey:g,publicKeyUncompressed:m}=r;if(n.allowedLengths||p===g)return;const w=Ie("key",h).length;return w===g||w===m}function u(h,p,g=!0){if(l(h)===!0)throw new Error("first arg must be private key");if(l(p)===!1)throw new Error("second arg must be public key");const m=Nt(n,h);return e.fromHex(p).multiply(m).toBytes(g)}return Object.freeze({getPublicKey:c,getSharedSecret:u,keygen:f,Point:e,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:h=>Nt(n,h),precompute(h=8,p=e.BASE){return p.precompute(h,!1)}},lengths:r})}function Qu(e,t,n={}){Mo(t),Vs(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const s=n.randomBytes||Rs,r=n.hmac||((b,..._)=>Qr(t,b,he(..._))),{Fp:i,Fn:o}=e,{ORDER:a,BITS:c}=o,{keygen:f,getPublicKey:l,getSharedSecret:u,utils:d,lengths:h}=Ju(e,n),p={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},g="compact";function m(b){const _=a>>Ne;return b>_}function w(b,_){if(!o.isValidNot0(_))throw new Error(`invalid signature ${b}: out of range 1..Point.Fn.ORDER`);return _}function T(b,_){Wr(_);const I=h.signature,R=_==="compact"?I:_==="recovered"?I+1:void 0;return tn(b,R,`${_} signature`)}class E{constructor(_,I,R){this.r=w("r",_),this.s=w("s",I),R!=null&&(this.recovery=R),Object.freeze(this)}static fromBytes(_,I=g){T(_,I);let R;if(I==="der"){const{r:F,s:V}=Bt.toSig(tn(_));return new E(F,V)}I==="recovered"&&(R=_[0],I="compact",_=_.subarray(1));const S=o.BYTES,D=_.subarray(0,S),B=_.subarray(S,S*2);return new E(o.fromBytes(D),o.fromBytes(B),R)}static fromHex(_,I){return this.fromBytes(Un(_),I)}addRecoveryBit(_){return new E(this.r,this.s,_)}recoverPublicKey(_){const I=i.ORDER,{r:R,s:S,recovery:D}=this;if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");if(a*lt<I&&D>1)throw new Error("recovery id is ambiguous for h>1 curve");const F=D===2||D===3?R+a:R;if(!i.isValid(F))throw new Error("recovery id 2 or 3 invalid");const V=i.toBytes(F),X=e.fromBytes(he(Ya((D&1)===0),V)),K=o.inv(F),J=G(Ie("msgHash",_)),re=o.create(-J*K),me=o.create(S*K),pe=e.BASE.multiplyUnsafe(re).add(X.multiplyUnsafe(me));if(pe.is0())throw new Error("point at infinify");return pe.assertValidity(),pe}hasHighS(){return m(this.s)}toBytes(_=g){if(Wr(_),_==="der")return Un(Bt.hexFromSig(this));const I=o.toBytes(this.r),R=o.toBytes(this.s);if(_==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return he(Uint8Array.of(this.recovery),I,R)}return he(I,R)}toHex(_){return St(this.toBytes(_))}assertValidity(){}static fromCompact(_){return E.fromBytes(Ie("sig",_),"compact")}static fromDER(_){return E.fromBytes(Ie("sig",_),"der")}normalizeS(){return this.hasHighS()?new E(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return St(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return St(this.toBytes("compact"))}}const A=n.bits2int||function(_){if(_.length>8192)throw new Error("input is too large");const I=et(_),R=_.length*8-c;return R>0?I>>BigInt(R):I},G=n.bits2int_modN||function(_){return o.create(A(_))},U=Zt(c);function P(b){return Cu("num < 2^"+c,b,at,U),o.toBytes(b)}function H(b,_){return tn(b,void 0,"message"),_?tn(t(b),void 0,"prehashed message"):b}function k(b,_,I){if(["recovered","canonical"].some(re=>re in I))throw new Error("sign() legacy options not supported");const{lowS:R,prehash:S,extraEntropy:D}=_r(I,p);b=H(b,S);const B=G(b),F=Nt(o,_),V=[P(F),P(B)];if(D!=null&&D!==!1){const re=D===!0?s(h.secretKey):D;V.push(Ie("extraEntropy",re))}const X=he(...V),K=B;function J(re){const me=A(re);if(!o.isValidNot0(me))return;const pe=o.inv(me),fe=e.BASE.multiply(me).toAffine(),be=o.create(fe.x);if(be===at)return;const ct=o.create(pe*o.create(K+be*F));if(ct===at)return;let ft=(fe.x===be?0:2)|Number(fe.y&Ne),Pt=ct;return R&&m(ct)&&(Pt=o.neg(ct),ft^=1),new E(be,Pt,ft)}return{seed:X,k2sig:J}}function W(b,_,I={}){b=Ie("message",b);const{seed:R,k2sig:S}=k(b,_,I);return Ou(t.outputLen,o.BYTES,r)(R,S)}function $(b){let _;const I=typeof b=="string"||Wn(b),R=!I&&b!==null&&typeof b=="object"&&typeof b.r=="bigint"&&typeof b.s=="bigint";if(!I&&!R)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(R)_=new E(b.r,b.s);else if(I){try{_=E.fromBytes(Ie("sig",b),"der")}catch(S){if(!(S instanceof Bt.Err))throw S}if(!_)try{_=E.fromBytes(Ie("sig",b),"compact")}catch{return!1}}return _||!1}function M(b,_,I,R={}){const{lowS:S,prehash:D,format:B}=_r(R,p);if(I=Ie("publicKey",I),_=H(Ie("message",_),D),"strict"in R)throw new Error("options.strict was renamed to lowS");const F=B===void 0?$(b):E.fromBytes(Ie("sig",b),B);if(F===!1)return!1;try{const V=e.fromBytes(I);if(S&&F.hasHighS())return!1;const{r:X,s:K}=F,J=G(_),re=o.inv(K),me=o.create(J*re),pe=o.create(X*re),fe=e.BASE.multiplyUnsafe(me).add(V.multiplyUnsafe(pe));return fe.is0()?!1:o.create(fe.x)===X}catch{return!1}}function v(b,_,I={}){const{prehash:R}=_r(I,p);return _=H(_,R),E.fromBytes(b,"recovered").recoverPublicKey(_).toBytes()}return Object.freeze({keygen:f,getPublicKey:l,getSharedSecret:u,utils:d,lengths:h,Point:e,sign:W,verify:M,recoverPublicKey:v,Signature:E,hash:t})}function ho(e){const{CURVE:t,curveOpts:n}=Qa(e),s=Ka(t,n);return n0(e,s)}function Qa(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let s=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const r=bt(t.n,{BITS:e.nBitLength,allowedLengths:s,modFromBytes:e.wrapPrivateKey}),i={Fp:n,Fn:r,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:i}}function e0(e){const{CURVE:t,curveOpts:n}=Qa(e),s={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:s}}function t0(e,t,n){function s(r){const i=e.sqr(r),o=e.mul(i,r);return e.add(e.add(o,e.mul(r,t)),n)}return s}function n0(e,t){const{Fp:n,Fn:s}=t;function r(o){return ka(o,Ne,s.ORDER)}const i=t0(n,e.a,e.b);return Object.assign({},{CURVE:e,Point:t,ProjectivePoint:t,normPrivateKeyToScalar:o=>Nt(s,o),weierstrassEquation:i,isWithinCurveOrder:r})}function s0(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,$a(n.Fn.ORDER,n.Fn.BITS))})}function ec(e){const{CURVE:t,curveOpts:n,hash:s,ecdsaOpts:r}=e0(e),i=Ka(t,n),o=Qu(i,s,r);return s0(e,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const r0=BigInt(0),us=BigInt(1),mo=BigInt(2),xn=BigInt(3);function i0(e){const t=[];for(;e>us;e>>=us)(e&us)===r0?t.unshift(0):(e&xn)===xn?(t.unshift(-1),e+=us):t.unshift(1);return t}function Er(e){if(!Array.isArray(e)||e.length===0)throw new Error("expected non-empty array")}function o0(e,t,n,s){const{Fp2:r,Fp12:i}=e,{twistType:o,ateLoopSize:a,xNegative:c,postPrecompute:f}=s;let l;if(o==="multiplicative")l=(E,A,G,U,P,H)=>i.mul014(U,E,r.mul(A,P),r.mul(G,H));else if(o==="divisive")l=(E,A,G,U,P,H)=>i.mul034(U,r.mul(G,H),r.mul(A,P),E);else throw new Error("bls: unknown twist type");const u=r.div(r.ONE,r.mul(r.ONE,mo));function d(E,A,G,U){const P=r.sqr(G),H=r.sqr(U),k=r.mulByB(r.mul(H,xn)),W=r.mul(k,xn),$=r.sub(r.sub(r.sqr(r.add(G,U)),H),P),M=r.sub(k,P),v=r.mul(r.sqr(A),xn),b=r.neg($);return E.push([M,v,b]),A=r.mul(r.mul(r.mul(r.sub(P,W),A),G),u),G=r.sub(r.sqr(r.mul(r.add(P,W),u)),r.mul(r.sqr(k),xn)),U=r.mul(P,$),{Rx:A,Ry:G,Rz:U}}function h(E,A,G,U,P,H){const k=r.sub(G,r.mul(H,U)),W=r.sub(A,r.mul(P,U)),$=r.sub(r.mul(k,P),r.mul(W,H)),M=r.neg(k),v=W;E.push([$,M,v]);const b=r.sqr(W),_=r.mul(b,W),I=r.mul(b,A),R=r.add(r.sub(_,r.mul(I,mo)),r.mul(r.sqr(k),U));return A=r.mul(W,R),G=r.sub(r.mul(r.sub(I,R),k),r.mul(_,G)),U=r.mul(U,_),{Rx:A,Ry:G,Rz:U}}const p=i0(a),g=zr(E=>{const A=E,{x:G,y:U}=A.toAffine(),P=G,H=U,k=r.neg(U);let W=P,$=H,M=r.ONE;const v=[];for(const b of p){const _=[];({Rx:W,Ry:$,Rz:M}=d(_,W,$,M)),b&&({Rx:W,Ry:$,Rz:M}=h(_,W,$,M,P,b===-1?k:H)),v.push(_)}if(f){const b=v[v.length-1];f(W,$,M,P,H,h.bind(null,b))}return v});function m(E,A=!1){let G=i.ONE;if(E.length){const U=E[0][0].length;for(let P=0;P<U;P++){G=i.sqr(G);for(const[H,k,W]of E)for(const[$,M,v]of H[P])G=l($,M,v,G,k,W)}}return c&&(G=i.conjugate(G)),A?i.finalExponentiate(G):G}function w(E,A=!0){const G=[];Rn(t,E.map(({g1:U})=>U)),Rn(n,E.map(({g2:U})=>U));for(const{g1:U,g2:P}of E){if(U.is0()||P.is0())throw new Error("pairing is not available for ZERO point");U.assertValidity(),P.assertValidity();const H=U.toAffine();G.push([g(P),H.x,H.y])}return m(G,A)}function T(E,A,G=!0){return w([{g1:E,g2:A}],G)}return{Fp12:i,millerLoopBatch:m,pairing:T,pairingBatch:w,calcPairingPrecomputes:g}}function po(e,t,n,s,r){const{Fp12:i,pairingBatch:o}=e;function a(u){return u instanceof t.Point?u:t.Point.fromHex(u)}function c(u){return u instanceof n.Point?u:n.Point.fromHex(u)}function f(u){if(!(u instanceof n.Point))throw new Error(`expected valid message hashed to ${r?"G1":"G2"} curve`);return u}const l=r?(u,d)=>({g1:d,g2:u}):(u,d)=>({g1:u,g2:d});return{getPublicKey(u){const d=Nt(t.Point.Fn,u);return t.Point.BASE.multiply(d)},sign(u,d,h){if(h!=null)throw new Error("sign() expects 2 arguments");const p=Nt(t.Point.Fn,d);return f(u).assertValidity(),u.multiply(p)},verify(u,d,h,p){if(p!=null)throw new Error("verify() expects 3 arguments");u=c(u),h=a(h);const g=h.negate(),m=t.Point.BASE,w=f(d),T=u,E=o([l(g,w),l(m,T)]);return i.eql(E,i.ONE)},verifyBatch(u,d,h){if(Er(d),h.length!==d.length)throw new Error("amount of public keys and messages should be equal");const p=c(u),g=d,m=h.map(a),w=new Map;for(let A=0;A<m.length;A++){const G=m[A],U=g[A];let P=w.get(U);P===void 0&&(P=[],w.set(U,P)),P.push(G)}const T=[],E=t.Point.BASE;try{for(const[A,G]of w){const U=G.reduce((P,H)=>P.add(H));T.push(l(U,A))}return T.push(l(E.negate(),p)),i.eql(o(T),i.ONE)}catch{return!1}},aggregatePublicKeys(u){Er(u),u=u.map(h=>a(h));const d=u.reduce((h,p)=>h.add(p),t.Point.ZERO);return d.assertValidity(),d},aggregateSignatures(u){Er(u),u=u.map(h=>c(h));const d=u.reduce((h,p)=>h.add(p),n.Point.ZERO);return d.assertValidity(),d},hash(u,d){Me(u);const h=d?{DST:d}:void 0;return n.hashToCurve(u,h)},Signature:s}}function tc(e){const{Fp:t,Fr:n,Fp2:s,Fp6:r,Fp12:i}=e.fields,o=ho(e.G1),a=Object.assign(o,uo(o.Point,e.G1.mapToCurve,{...e.htfDefaults,...e.G1.htfDefaults})),c=ho(e.G2),f=Object.assign(c,uo(c.Point,e.G2.mapToCurve,{...e.htfDefaults,...e.G2.htfDefaults})),l=o0(e.fields,a.Point,f.Point,{...e.params,postPrecompute:e.postPrecompute}),{millerLoopBatch:u,pairing:d,pairingBatch:h,calcPairingPrecomputes:p}=l,g=po(l,a,f,e.G2.Signature,!1),m=po(l,f,a,e.G1.ShortSignature,!0),w=e.randomBytes||Rs,T=()=>{const S=gi(n.ORDER);return qa(w(S),n.ORDER)},E={randomSecretKey:T,randomPrivateKey:T,calcPairingPrecomputes:p},{ShortSignature:A}=e.G1,{Signature:G}=e.G2;function U(S,D){return S instanceof a.Point?S:m.hash(Ie("point",S),D?.DST)}function P(S,D){return S instanceof f.Point?S:g.hash(Ie("point",S),D?.DST)}function H(S){return g.getPublicKey(S).toBytes(!0)}function k(S){return m.getPublicKey(S).toBytes(!0)}function W(S,D,B){const F=P(S,B),V=g.sign(F,D);return S instanceof f.Point?V:G.toBytes(V)}function $(S,D,B){const F=U(S,B),V=m.sign(F,D);return S instanceof a.Point?V:A.toBytes(V)}function M(S,D,B,F){const V=P(D,F);return g.verify(S,V,B)}function v(S,D,B,F){const V=U(D,F);return m.verify(S,V,B)}function b(S){const D=g.aggregatePublicKeys(S);return S[0]instanceof a.Point?D:D.toBytes(!0)}function _(S){const D=g.aggregateSignatures(S);return S[0]instanceof f.Point?D:G.toBytes(D)}function I(S){const D=m.aggregateSignatures(S);return S[0]instanceof a.Point?D:A.toBytes(D)}function R(S,D,B,F){const V=D.map(X=>P(X,F));return g.verifyBatch(S,V,B)}return a.Point.BASE.precompute(4),{longSignatures:g,shortSignatures:m,millerLoopBatch:u,pairing:d,pairingBatch:h,verifyBatch:R,fields:{Fr:n,Fp:t,Fp2:s,Fp6:r,Fp12:i},params:{ateLoopSize:e.params.ateLoopSize,twistType:e.params.twistType,r:e.params.r,G1b:e.G1.b,G2b:e.G2.b},utils:E,getPublicKey:H,getPublicKeyForShortSignatures:k,sign:W,signShortSignature:$,verify:M,verifyShortSignature:v,aggregatePublicKeys:b,aggregateSignatures:_,aggregateShortSignatures:I,G1:a,G2:f,Signature:G,ShortSignature:A}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const go=BigInt(0),Ct=BigInt(1),Ve=BigInt(2),bo=BigInt(3);function bi(e,t,n,s,r=1,i){const o=BigInt(i===void 0?s:i),a=n**BigInt(s),c=[];for(let f=0;f<r;f++){const l=BigInt(f+1),u=[];for(let d=0,h=Ct;d<s;d++){const p=(l*h-l)/o%a;u.push(e.pow(t,p)),h*=n}c.push(u)}return c}function nc(e,t,n){const s=t.pow(n,(e.ORDER-Ct)/bo),r=t.pow(n,(e.ORDER-Ct)/Ve);function i(d,h){const p=t.mul(t.frobeniusMap(d,1),s),g=t.mul(t.frobeniusMap(h,1),r);return[p,g]}const o=t.pow(n,(e.ORDER**Ve-Ct)/bo),a=t.pow(n,(e.ORDER**Ve-Ct)/Ve);if(!t.eql(a,t.neg(t.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function c(d,h){return[t.mul(d,o),t.neg(h)]}const f=d=>(h,p)=>{const g=p.toAffine(),m=d(g.x,g.y);return h.fromAffine({x:m[0],y:m[1]})},l=f(i),u=f(c);return{psi:i,psi2:c,G2psi:l,G2psi2:u,PSI_X:s,PSI_Y:r,PSI2_X:o,PSI2_Y:a}}const xo=(e,t)=>{if(t.length!==2)throw new Error("invalid tuple");const n=t.map(s=>e.create(s));return{c0:n[0],c1:n[1]}};class a0{constructor(t,n={}){this.MASK=Ct;const s=t.ORDER,r=s*s;this.Fp=t,this.ORDER=r,this.BITS=An(r),this.BYTES=Math.ceil(An(r)/8),this.isLE=t.isLE,this.ZERO={c0:t.ZERO,c1:t.ZERO},this.ONE={c0:t.ONE,c1:t.ZERO},this.Fp_NONRESIDUE=t.create(n.NONRESIDUE||BigInt(-1)),this.Fp_div2=t.div(t.ONE,Ve),this.NONRESIDUE=xo(t,n.FP2_NONRESIDUE),this.FROBENIUS_COEFFICIENTS=bi(t,this.Fp_NONRESIDUE,t.ORDER,2)[0],this.mulByB=n.Fp2mulByB,Object.seal(this)}fromBigTuple(t){return xo(this.Fp,t)}create(t){return t}isValid({c0:t,c1:n}){function s(r,i){return typeof r=="bigint"&&go<=r&&r<i}return s(t,this.ORDER)&&s(n,this.ORDER)}is0({c0:t,c1:n}){return this.Fp.is0(t)&&this.Fp.is0(n)}isValidNot0(t){return!this.is0(t)&&this.isValid(t)}eql({c0:t,c1:n},{c0:s,c1:r}){return this.Fp.eql(t,s)&&this.Fp.eql(n,r)}neg({c0:t,c1:n}){return{c0:this.Fp.neg(t),c1:this.Fp.neg(n)}}pow(t,n){return qs(this,t,n)}invertBatch(t){return fn(this,t)}add(t,n){const{c0:s,c1:r}=t,{c0:i,c1:o}=n;return{c0:this.Fp.add(s,i),c1:this.Fp.add(r,o)}}sub({c0:t,c1:n},{c0:s,c1:r}){return{c0:this.Fp.sub(t,s),c1:this.Fp.sub(n,r)}}mul({c0:t,c1:n},s){const{Fp:r}=this;if(typeof s=="bigint")return{c0:r.mul(t,s),c1:r.mul(n,s)};const{c0:i,c1:o}=s;let a=r.mul(t,i),c=r.mul(n,o);const f=r.sub(a,c),l=r.sub(r.mul(r.add(t,n),r.add(i,o)),r.add(a,c));return{c0:f,c1:l}}sqr({c0:t,c1:n}){const{Fp:s}=this,r=s.add(t,n),i=s.sub(t,n),o=s.add(t,t);return{c0:s.mul(r,i),c1:s.mul(o,n)}}addN(t,n){return this.add(t,n)}subN(t,n){return this.sub(t,n)}mulN(t,n){return this.mul(t,n)}sqrN(t){return this.sqr(t)}div(t,n){const{Fp:s}=this;return this.mul(t,typeof n=="bigint"?s.inv(s.create(n)):this.inv(n))}inv({c0:t,c1:n}){const{Fp:s}=this,r=s.inv(s.create(t*t+n*n));return{c0:s.mul(r,s.create(t)),c1:s.mul(r,s.create(-n))}}sqrt(t){const{Fp:n}=this,s=this,{c0:r,c1:i}=t;if(n.is0(i))return Ss(n,r)===1?s.create({c0:n.sqrt(r),c1:n.ZERO}):s.create({c0:n.ZERO,c1:n.sqrt(n.div(r,this.Fp_NONRESIDUE))});const o=n.sqrt(n.sub(n.sqr(r),n.mul(n.sqr(i),this.Fp_NONRESIDUE)));let a=n.mul(n.add(o,r),this.Fp_div2);Ss(n,a)===-1&&(a=n.sub(a,o));const f=n.sqrt(a),l=s.create({c0:f,c1:n.div(n.mul(i,this.Fp_div2),f)});if(!s.eql(s.sqr(l),t))throw new Error("Cannot find square root");const u=l,d=s.neg(u),{re:h,im:p}=s.reim(u),{re:g,im:m}=s.reim(d);return p>m||p===m&&h>g?u:d}isOdd(t){const{re:n,im:s}=this.reim(t),r=n%Ve,i=n===go,o=s%Ve;return BigInt(r||i&&o)==Ct}fromBytes(t){const{Fp:n}=this;if(t.length!==this.BYTES)throw new Error("fromBytes invalid length="+t.length);return{c0:n.fromBytes(t.subarray(0,n.BYTES)),c1:n.fromBytes(t.subarray(n.BYTES))}}toBytes({c0:t,c1:n}){return he(this.Fp.toBytes(t),this.Fp.toBytes(n))}cmov({c0:t,c1:n},{c0:s,c1:r},i){return{c0:this.Fp.cmov(t,s,i),c1:this.Fp.cmov(n,r,i)}}reim({c0:t,c1:n}){return{re:t,im:n}}Fp4Square(t,n){const s=this,r=s.sqr(t),i=s.sqr(n);return{first:s.add(s.mulByNonresidue(i),r),second:s.sub(s.sub(s.sqr(s.add(t,n)),r),i)}}mulByNonresidue({c0:t,c1:n}){return this.mul({c0:t,c1:n},this.NONRESIDUE)}frobeniusMap({c0:t,c1:n},s){return{c0:t,c1:this.Fp.mul(n,this.FROBENIUS_COEFFICIENTS[s%2])}}}class c0{constructor(t){this.MASK=Ct,this.Fp2=t,this.ORDER=t.ORDER,this.BITS=3*t.BITS,this.BYTES=3*t.BYTES,this.isLE=t.isLE,this.ZERO={c0:t.ZERO,c1:t.ZERO,c2:t.ZERO},this.ONE={c0:t.ONE,c1:t.ZERO,c2:t.ZERO};const{Fp:n}=t,s=bi(t,t.NONRESIDUE,n.ORDER,6,2,3);this.FROBENIUS_COEFFICIENTS_1=s[0],this.FROBENIUS_COEFFICIENTS_2=s[1],Object.seal(this)}add({c0:t,c1:n,c2:s},{c0:r,c1:i,c2:o}){const{Fp2:a}=this;return{c0:a.add(t,r),c1:a.add(n,i),c2:a.add(s,o)}}sub({c0:t,c1:n,c2:s},{c0:r,c1:i,c2:o}){const{Fp2:a}=this;return{c0:a.sub(t,r),c1:a.sub(n,i),c2:a.sub(s,o)}}mul({c0:t,c1:n,c2:s},r){const{Fp2:i}=this;if(typeof r=="bigint")return{c0:i.mul(t,r),c1:i.mul(n,r),c2:i.mul(s,r)};const{c0:o,c1:a,c2:c}=r,f=i.mul(t,o),l=i.mul(n,a),u=i.mul(s,c);return{c0:i.add(f,i.mulByNonresidue(i.sub(i.mul(i.add(n,s),i.add(a,c)),i.add(l,u)))),c1:i.add(i.sub(i.mul(i.add(t,n),i.add(o,a)),i.add(f,l)),i.mulByNonresidue(u)),c2:i.sub(i.add(l,i.mul(i.add(t,s),i.add(o,c))),i.add(f,u))}}sqr({c0:t,c1:n,c2:s}){const{Fp2:r}=this;let i=r.sqr(t),o=r.mul(r.mul(t,n),Ve),a=r.mul(r.mul(n,s),Ve),c=r.sqr(s);return{c0:r.add(r.mulByNonresidue(a),i),c1:r.add(r.mulByNonresidue(c),o),c2:r.sub(r.sub(r.add(r.add(o,r.sqr(r.add(r.sub(t,n),s))),a),i),c)}}addN(t,n){return this.add(t,n)}subN(t,n){return this.sub(t,n)}mulN(t,n){return this.mul(t,n)}sqrN(t){return this.sqr(t)}create(t){return t}isValid({c0:t,c1:n,c2:s}){const{Fp2:r}=this;return r.isValid(t)&&r.isValid(n)&&r.isValid(s)}is0({c0:t,c1:n,c2:s}){const{Fp2:r}=this;return r.is0(t)&&r.is0(n)&&r.is0(s)}isValidNot0(t){return!this.is0(t)&&this.isValid(t)}neg({c0:t,c1:n,c2:s}){const{Fp2:r}=this;return{c0:r.neg(t),c1:r.neg(n),c2:r.neg(s)}}eql({c0:t,c1:n,c2:s},{c0:r,c1:i,c2:o}){const{Fp2:a}=this;return a.eql(t,r)&&a.eql(n,i)&&a.eql(s,o)}sqrt(t){return we()}div(t,n){const{Fp2:s}=this,{Fp:r}=s;return this.mul(t,typeof n=="bigint"?r.inv(r.create(n)):this.inv(n))}pow(t,n){return qs(this,t,n)}invertBatch(t){return fn(this,t)}inv({c0:t,c1:n,c2:s}){const{Fp2:r}=this;let i=r.sub(r.sqr(t),r.mulByNonresidue(r.mul(s,n))),o=r.sub(r.mulByNonresidue(r.sqr(s)),r.mul(t,n)),a=r.sub(r.sqr(n),r.mul(t,s)),c=r.inv(r.add(r.mulByNonresidue(r.add(r.mul(s,o),r.mul(n,a))),r.mul(t,i)));return{c0:r.mul(c,i),c1:r.mul(c,o),c2:r.mul(c,a)}}fromBytes(t){const{Fp2:n}=this;if(t.length!==this.BYTES)throw new Error("fromBytes invalid length="+t.length);const s=n.BYTES;return{c0:n.fromBytes(t.subarray(0,s)),c1:n.fromBytes(t.subarray(s,s*2)),c2:n.fromBytes(t.subarray(2*s))}}toBytes({c0:t,c1:n,c2:s}){const{Fp2:r}=this;return he(r.toBytes(t),r.toBytes(n),r.toBytes(s))}cmov({c0:t,c1:n,c2:s},{c0:r,c1:i,c2:o},a){const{Fp2:c}=this;return{c0:c.cmov(t,r,a),c1:c.cmov(n,i,a),c2:c.cmov(s,o,a)}}fromBigSix(t){const{Fp2:n}=this;if(!Array.isArray(t)||t.length!==6)throw new Error("invalid Fp6 usage");return{c0:n.fromBigTuple(t.slice(0,2)),c1:n.fromBigTuple(t.slice(2,4)),c2:n.fromBigTuple(t.slice(4,6))}}frobeniusMap({c0:t,c1:n,c2:s},r){const{Fp2:i}=this;return{c0:i.frobeniusMap(t,r),c1:i.mul(i.frobeniusMap(n,r),this.FROBENIUS_COEFFICIENTS_1[r%6]),c2:i.mul(i.frobeniusMap(s,r),this.FROBENIUS_COEFFICIENTS_2[r%6])}}mulByFp2({c0:t,c1:n,c2:s},r){const{Fp2:i}=this;return{c0:i.mul(t,r),c1:i.mul(n,r),c2:i.mul(s,r)}}mulByNonresidue({c0:t,c1:n,c2:s}){const{Fp2:r}=this;return{c0:r.mulByNonresidue(s),c1:t,c2:n}}mul1({c0:t,c1:n,c2:s},r){const{Fp2:i}=this;return{c0:i.mulByNonresidue(i.mul(s,r)),c1:i.mul(t,r),c2:i.mul(n,r)}}mul01({c0:t,c1:n,c2:s},r,i){const{Fp2:o}=this;let a=o.mul(t,r),c=o.mul(n,i);return{c0:o.add(o.mulByNonresidue(o.sub(o.mul(o.add(n,s),i),c)),a),c1:o.sub(o.sub(o.mul(o.add(r,i),o.add(t,n)),a),c),c2:o.add(o.sub(o.mul(o.add(t,s),r),a),c)}}}class f0{constructor(t,n){this.MASK=Ct;const{Fp2:s}=t,{Fp:r}=s;this.Fp6=t,this.ORDER=s.ORDER,this.BITS=2*t.BITS,this.BYTES=2*t.BYTES,this.isLE=t.isLE,this.ZERO={c0:t.ZERO,c1:t.ZERO},this.ONE={c0:t.ONE,c1:t.ZERO},this.FROBENIUS_COEFFICIENTS=bi(s,s.NONRESIDUE,r.ORDER,12,1,6)[0],this.X_LEN=n.X_LEN,this.finalExponentiate=n.Fp12finalExponentiate}create(t){return t}isValid({c0:t,c1:n}){const{Fp6:s}=this;return s.isValid(t)&&s.isValid(n)}is0({c0:t,c1:n}){const{Fp6:s}=this;return s.is0(t)&&s.is0(n)}isValidNot0(t){return!this.is0(t)&&this.isValid(t)}neg({c0:t,c1:n}){const{Fp6:s}=this;return{c0:s.neg(t),c1:s.neg(n)}}eql({c0:t,c1:n},{c0:s,c1:r}){const{Fp6:i}=this;return i.eql(t,s)&&i.eql(n,r)}sqrt(t){we()}inv({c0:t,c1:n}){const{Fp6:s}=this;let r=s.inv(s.sub(s.sqr(t),s.mulByNonresidue(s.sqr(n))));return{c0:s.mul(t,r),c1:s.neg(s.mul(n,r))}}div(t,n){const{Fp6:s}=this,{Fp2:r}=s,{Fp:i}=r;return this.mul(t,typeof n=="bigint"?i.inv(i.create(n)):this.inv(n))}pow(t,n){return qs(this,t,n)}invertBatch(t){return fn(this,t)}add({c0:t,c1:n},{c0:s,c1:r}){const{Fp6:i}=this;return{c0:i.add(t,s),c1:i.add(n,r)}}sub({c0:t,c1:n},{c0:s,c1:r}){const{Fp6:i}=this;return{c0:i.sub(t,s),c1:i.sub(n,r)}}mul({c0:t,c1:n},s){const{Fp6:r}=this;if(typeof s=="bigint")return{c0:r.mul(t,s),c1:r.mul(n,s)};let{c0:i,c1:o}=s,a=r.mul(t,i),c=r.mul(n,o);return{c0:r.add(a,r.mulByNonresidue(c)),c1:r.sub(r.mul(r.add(t,n),r.add(i,o)),r.add(a,c))}}sqr({c0:t,c1:n}){const{Fp6:s}=this;let r=s.mul(t,n);return{c0:s.sub(s.sub(s.mul(s.add(s.mulByNonresidue(n),t),s.add(t,n)),r),s.mulByNonresidue(r)),c1:s.add(r,r)}}addN(t,n){return this.add(t,n)}subN(t,n){return this.sub(t,n)}mulN(t,n){return this.mul(t,n)}sqrN(t){return this.sqr(t)}fromBytes(t){const{Fp6:n}=this;if(t.length!==this.BYTES)throw new Error("fromBytes invalid length="+t.length);return{c0:n.fromBytes(t.subarray(0,n.BYTES)),c1:n.fromBytes(t.subarray(n.BYTES))}}toBytes({c0:t,c1:n}){const{Fp6:s}=this;return he(s.toBytes(t),s.toBytes(n))}cmov({c0:t,c1:n},{c0:s,c1:r},i){const{Fp6:o}=this;return{c0:o.cmov(t,s,i),c1:o.cmov(n,r,i)}}fromBigTwelve(t){const{Fp6:n}=this;return{c0:n.fromBigSix(t.slice(0,6)),c1:n.fromBigSix(t.slice(6,12))}}frobeniusMap(t,n){const{Fp6:s}=this,{Fp2:r}=s,{c0:i,c1:o,c2:a}=s.frobeniusMap(t.c1,n),c=this.FROBENIUS_COEFFICIENTS[n%12];return{c0:s.frobeniusMap(t.c0,n),c1:s.create({c0:r.mul(i,c),c1:r.mul(o,c),c2:r.mul(a,c)})}}mulByFp2({c0:t,c1:n},s){const{Fp6:r}=this;return{c0:r.mulByFp2(t,s),c1:r.mulByFp2(n,s)}}conjugate({c0:t,c1:n}){return{c0:t,c1:this.Fp6.neg(n)}}mul014({c0:t,c1:n},s,r,i){const{Fp6:o}=this,{Fp2:a}=o;let c=o.mul01(t,s,r),f=o.mul1(n,i);return{c0:o.add(o.mulByNonresidue(f),c),c1:o.sub(o.sub(o.mul01(o.add(n,t),s,a.add(r,i)),c),f)}}mul034({c0:t,c1:n},s,r,i){const{Fp6:o}=this,{Fp2:a}=o,c=o.create({c0:a.mul(t.c0,s),c1:a.mul(t.c1,s),c2:a.mul(t.c2,s)}),f=o.mul01(n,r,i),l=o.mul01(o.add(t,n),a.add(s,r),i);return{c0:o.add(o.mulByNonresidue(f),c),c1:o.sub(l,o.add(c,f))}}_cyclotomicSquare({c0:t,c1:n}){const{Fp6:s}=this,{Fp2:r}=s,{c0:i,c1:o,c2:a}=t,{c0:c,c1:f,c2:l}=n,{first:u,second:d}=r.Fp4Square(i,f),{first:h,second:p}=r.Fp4Square(c,a),{first:g,second:m}=r.Fp4Square(o,l),w=r.mulByNonresidue(m);return{c0:s.create({c0:r.add(r.mul(r.sub(u,i),Ve),u),c1:r.add(r.mul(r.sub(h,o),Ve),h),c2:r.add(r.mul(r.sub(g,a),Ve),g)}),c1:s.create({c0:r.add(r.mul(r.add(w,c),Ve),w),c1:r.add(r.mul(r.add(d,f),Ve),d),c2:r.add(r.mul(r.add(p,l),Ve),p)})}}_cyclotomicExp(t,n){let s=this.ONE;for(let r=this.X_LEN-1;r>=0;r--)s=this._cyclotomicSquare(s),Su(n,r)&&(s=this.mul(s,t));return s}}function sc(e){const t=bt(e.ORDER),n=new a0(t,e),s=new c0(n),r=new f0(s,e);return{Fp:t,Fp2:n,Fp6:s,Fp12:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Le=BigInt(0),Ts=BigInt(1),tt=BigInt(2),zs=BigInt(3),Vn=BigInt(4),zt=BigInt("0xd201000000010000"),d0=An(zt),on={p:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),n:BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001"),h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),a:Le,b:Vn,Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1")},u0=bt(on.n,{modFromBytes:!0,isLE:!0}),{Fp:j,Fp2:ee,Fp6:l0,Fp12:ne}=sc({ORDER:on.p,X_LEN:d0,FP2_NONRESIDUE:[Ts,Ts],Fp2mulByB:({c0:e,c1:t})=>{const n=j.mul(e,Vn),s=j.mul(t,Vn);return{c0:j.sub(n,s),c1:j.add(n,s)}},Fp12finalExponentiate:e=>{const t=zt,n=ne.div(ne.frobeniusMap(e,6),e),s=ne.mul(ne.frobeniusMap(n,2),n),r=ne.conjugate(ne._cyclotomicExp(s,t)),i=ne.mul(ne.conjugate(ne._cyclotomicSquare(s)),r),o=ne.conjugate(ne._cyclotomicExp(i,t)),a=ne.conjugate(ne._cyclotomicExp(o,t)),c=ne.mul(ne.conjugate(ne._cyclotomicExp(a,t)),ne._cyclotomicSquare(r)),f=ne.conjugate(ne._cyclotomicExp(c,t)),l=ne.frobeniusMap(ne.mul(r,a),2),u=ne.frobeniusMap(ne.mul(o,s),3),d=ne.frobeniusMap(ne.mul(c,ne.conjugate(s)),1),h=ne.mul(ne.mul(f,ne.conjugate(i)),s);return ne.mul(ne.mul(ne.mul(l,u),d),h)}}),{G2psi:yo,G2psi2:h0}=nc(j,ee,ee.div(ee.ONE,ee.NONRESIDUE)),wr=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:j.ORDER,m:2,k:128,expand:"xmd",hash:Bn}),xi={p:ee.ORDER,n:on.n,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),a:ee.ZERO,b:ee.fromBigTuple([Vn,Vn]),Gx:ee.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:ee.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")])},Ws=Yn(j.toBytes(Le),{infinity:!0,compressed:!0});function js(e){e=e.slice();const t=e[0]&224,n=!!(t>>7&1),s=!!(t>>6&1),r=!!(t>>5&1);return e[0]&=31,{compressed:n,infinity:s,sort:r,value:e}}function Yn(e,t){if(e[0]&224)throw new Error("setMask: non-empty mask");return t.compressed&&(e[0]|=128),t.infinity&&(e[0]|=64),t.sort&&(e[0]|=32),e}function m0(e,t,n){const{BYTES:s,ORDER:r}=j,i=t.is0(),{x:o,y:a}=t.toAffine();if(n){if(i)return Ws.slice();const c=!!(a*tt/r);return Yn(Se(o,s),{compressed:!0,sort:c})}else return i?he(Uint8Array.of(64),new Uint8Array(2*s-1)):he(Se(o,s),Se(a,s))}function Ar(e){e.assertValidity();const{BYTES:t,ORDER:n}=j,{x:s,y:r}=e.toAffine();if(e.is0())return Ws.slice();const i=!!(r*tt/n);return Yn(Se(s,t),{compressed:!0,sort:i})}function p0(e){const{compressed:t,infinity:n,sort:s,value:r}=js(e),{BYTES:i,ORDER:o}=j;if(r.length===48&&t){const a=et(r),c=j.create(a&Zt(j.BITS));if(n){if(c!==Le)throw new Error("invalid G1 point: non-empty, at infinity, with compression");return{x:Le,y:Le}}const f=j.add(j.pow(c,zs),j.create(on.b));let l=j.sqrt(f);if(!l)throw new Error("invalid G1 point: compressed point");return l*tt/o!==BigInt(s)&&(l=j.neg(l)),{x:j.create(c),y:j.create(l)}}else if(r.length===96&&!t){const a=et(r.subarray(0,i)),c=et(r.subarray(i));if(n){if(a!==Le||c!==Le)throw new Error("G1: non-empty point at infinity");return Re.G1.Point.ZERO.toAffine()}return{x:j.create(a),y:j.create(c)}}else throw new Error("invalid G1 point: expected 48/96 bytes")}function _o(e){const{infinity:t,sort:n,value:s}=js(Ie("signatureHex",e,48)),r=j.ORDER,i=Re.G1.Point,o=et(s);if(t)return i.ZERO;const a=j.create(o&Zt(j.BITS)),c=j.add(j.pow(a,zs),j.create(on.b));let f=j.sqrt(c);if(!f)throw new Error("invalid G1 point: compressed");const l=BigInt(n);f*tt/r!==l&&(f=j.neg(f));const u=i.fromAffine({x:a,y:f});return u.assertValidity(),u}function g0(e,t,n){const{BYTES:s,ORDER:r}=j,i=t.is0(),{x:o,y:a}=t.toAffine();if(n){if(i)return he(Ws,Se(Le,s));const c=!!(a.c1===Le?a.c0*tt/r:a.c1*tt/r);return he(Yn(Se(o.c1,s),{compressed:!0,sort:c}),Se(o.c0,s))}else{if(i)return he(Uint8Array.of(64),new Uint8Array(4*s-1));const{re:c,im:f}=ee.reim(o),{re:l,im:u}=ee.reim(a);return he(Se(f,s),Se(c,s),Se(u,s),Se(l,s))}}function Ir(e){e.assertValidity();const{BYTES:t}=j;if(e.is0())return he(Ws,Se(Le,t));const{x:n,y:s}=e.toAffine(),{re:r,im:i}=ee.reim(n),{re:o,im:a}=ee.reim(s),f=!!((a>Le?a*tt:o*tt)/j.ORDER&Ts),l=r;return he(Yn(Se(i,t),{sort:f,compressed:!0}),Se(l,t))}function b0(e){const{BYTES:t,ORDER:n}=j,{compressed:s,infinity:r,sort:i,value:o}=js(e);if(!s&&!r&&i||!s&&r&&i||i&&r&&s)throw new Error("invalid encoding flag: "+(e[0]&224));const a=(c,f,l)=>et(c.slice(f,l));if(o.length===96&&s){if(r){if(o.reduce((p,g)=>p!==0?g+1:g,0)>0)throw new Error("invalid G2 point: compressed");return{x:ee.ZERO,y:ee.ZERO}}const c=a(o,0,t),f=a(o,t,2*t),l=ee.create({c0:j.create(f),c1:j.create(c)}),u=ee.add(ee.pow(l,zs),xi.b);let d=ee.sqrt(u);const h=d.c1===Le?d.c0*tt/n:d.c1*tt/n?Ts:Le;return d=i&&h>0?d:ee.neg(d),{x:l,y:d}}else if(o.length===192&&!s){if(r){if(o.reduce((d,h)=>d!==0?h+1:h,0)>0)throw new Error("invalid G2 point: uncompressed");return{x:ee.ZERO,y:ee.ZERO}}const c=a(o,0*t,1*t),f=a(o,1*t,2*t),l=a(o,2*t,3*t),u=a(o,3*t,4*t);return{x:ee.fromBigTuple([f,c]),y:ee.fromBigTuple([u,l])}}else throw new Error("invalid G2 point: expected 96/192 bytes")}function Eo(e){const{ORDER:t}=j,{infinity:n,sort:s,value:r}=js(Ie("signatureHex",e)),i=Re.G2.Point,o=r.length/2;if(o!==48&&o!==96)throw new Error("invalid compressed signature length, expected 96/192 bytes");const a=et(r.slice(0,o)),c=et(r.slice(o));if(n)return i.ZERO;const f=j.create(a&Zt(j.BITS)),l=j.create(c),u=ee.create({c0:l,c1:f}),d=ee.add(ee.pow(u,zs),xi.b);let h=ee.sqrt(d);if(!h)throw new Error("Failed to find a square root");const{re:p,im:g}=ee.reim(h),m=BigInt(s),w=g>Le&&g*tt/t!==m,T=g===Le&&p*tt/t!==m;(w||T)&&(h=ee.neg(h));const E=i.fromAffine({x:u,y:h});return E.assertValidity(),E}const Re=tc({fields:{Fp:j,Fp2:ee,Fp6:l0,Fp12:ne,Fr:u0},G1:{...on,Fp:j,htfDefaults:{...wr,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(e,t)=>{const n=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),s=new e(j.mul(t.X,n),t.Y,t.Z);return t.multiplyUnsafe(zt).negate().multiplyUnsafe(zt).equals(s)},clearCofactor:(e,t)=>t.multiplyUnsafe(zt).add(t),mapToCurve:w0,fromBytes:p0,toBytes:m0,ShortSignature:{fromBytes(e){return Me(e),_o(e)},fromHex(e){return _o(e)},toBytes(e){return Ar(e)},toRawBytes(e){return Ar(e)},toHex(e){return St(Ar(e))}}},G2:{...xi,Fp:ee,hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...wr},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:A0,isTorsionFree:(e,t)=>t.multiplyUnsafe(zt).negate().equals(yo(e,t)),clearCofactor:(e,t)=>{const n=zt;let s=t.multiplyUnsafe(n).negate(),r=yo(e,t),i=t.double();return i=h0(e,i),i=i.subtract(r),r=s.add(r),r=r.multiplyUnsafe(n).negate(),i=i.add(r),i=i.subtract(s),i.subtract(t)},fromBytes:b0,toBytes:g0,Signature:{fromBytes(e){return Me(e),Eo(e)},fromHex(e){return Eo(e)},toBytes(e){return Ir(e)},toRawBytes(e){return Ir(e)},toHex(e){return St(Ir(e))}}},params:{ateLoopSize:zt,r:on.n,xNegative:!0,twistType:"multiplicative"},htfDefaults:wr}),x0=Za(ee,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(e=>e.map(t=>ee.fromBigTuple(t.map(BigInt))))),y0=Za(j,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),_0=Xa(j,{A:j.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:j.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:j.create(BigInt(11))}),E0=Xa(ee,{A:ee.create({c0:j.create(Le),c1:j.create(BigInt(240))}),B:ee.create({c0:j.create(BigInt(1012)),c1:j.create(BigInt(1012))}),Z:ee.create({c0:j.create(BigInt(-2)),c1:j.create(BigInt(-1))})});function w0(e){const{x:t,y:n}=_0(j.create(e[0]));return y0(t,n)}function A0(e){const{x:t,y:n}=E0(ee.fromBigTuple(e));return x0(t,n)}const Es=Re.G1.ProjectivePoint.ZERO,ws=Re.G2.ProjectivePoint.ZERO;function Zr(e,t){if(Z(e)>=qr)throw new x(x.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);if(Z(t)>=qr)throw new x(x.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);const n=Ke(e.subarray(16),t.subarray(16));return Re.fields.Fp2.fromBytes(n)}function On(e,t=!0){if(ge(e,Ca)===!0)return Es;const n=Z(e.subarray(16,Je/2)),s=Z(e.subarray(80,Je)),r=Re.G1.ProjectivePoint.fromAffine({x:n,y:s});try{r.assertValidity()}catch(i){if(t||i.message!=="bad point: not in prime-order subgroup")throw new x(x.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE)}return r}function ls(e){const t=se(oe(e.x),64),n=se(oe(e.y),64);return Ke(t,n)}function Tn(e,t=!0){if(ge(e,Sa)===!0)return ws;const n=e.subarray(0,64),s=e.subarray(64,st/2),r=e.subarray(128,192),i=e.subarray(192,st),o=Zr(n,s),a=Zr(r,i),c=Re.G2.ProjectivePoint.fromAffine({x:o,y:a});try{c.assertValidity()}catch(f){if(t||f.message!=="bad point: not in prime-order subgroup")throw new x(x.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE)}return c}function hs(e){const t=se(oe(e.x.c0),64),n=se(oe(e.x.c1),64),s=se(oe(e.y.c0),64),r=se(oe(e.y.c1),64);return Ke(t,n,s,r)}function ms(e){const t=Re.fields.Fr.fromBytes(e);return Re.fields.Fr.create(t)}function I0(e){if(Z(e)>=qr)throw new x(x.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);return Re.fields.Fp.fromBytes(e.slice(16))}class B0{addG1(t){const n=On(t.subarray(0,Je),!1),s=On(t.subarray(Je,Je*2),!1),r=n.add(s);return ls(r)}mulG1(t){const n=On(t.subarray(0,Je)),s=ms(t.subarray(Je,160));if(s===y)return Ca;const r=n.multiplyUnsafe(s);return ls(r)}addG2(t){const n=Tn(t.subarray(0,st),!1),s=Tn(t.subarray(st,st*2),!1),r=n.add(s);return hs(r)}mulG2(t){const n=Tn(t.subarray(0,st)),s=ms(t.subarray(st,288));if(s===y)return Sa;const r=n.multiplyUnsafe(s);return hs(r)}mapFPtoG1(t){const n=I0(t.subarray(0,64)),s=Re.G1.mapToCurve([n]).toAffine();return ls(s)}mapFP2toG2(t){const n=Zr(t.subarray(0,64),t.subarray(64,128)),s=Re.G2.mapToCurve([n.c0,n.c1]).toAffine();return hs(s)}msmG1(t){const s=t.length/160;let r=Es;for(let i=0;i<s;i++){const o=160*i,a=On(t.subarray(o,o+Je)),c=ms(t.subarray(o+Je,o+160));let f;c===y?f=Es:f=a.multiplyUnsafe(c),r=r.add(f)}return ls(r)}msmG2(t){const s=t.length/288;let r=ws;for(let i=0;i<s;i++){const o=288*i,a=Tn(t.subarray(o,o+st)),c=ms(t.subarray(o+st,o+288));let f;c===y?f=ws:f=a.multiplyUnsafe(c),r=r.add(f)}return hs(r)}pairingCheck(t){const s=[];for(let o=0;o<t.length/384;o++){const a=384*o,c=On(t.subarray(a,a+Je)),f=a+Je,l=Tn(t.subarray(f,f+st));s.push({g1:c,g2:l})}const r=s.filter(o=>!o.g1.equals(Es)&&!o.g2.equals(ws)),i=Re.pairingBatch(r,!0);return Re.fields.Fp12.eql(i,Re.fields.Fp12.ONE)?Bu:Iu}}const v0=new Uint8Array(16),rc=(e,t,n)=>{const s=n[n.length-1][1];let r;return e<=n.length?e===0?r=0:r=n[e-1][1]:r=s,BigInt(e)*t*BigInt(r)/BigInt(1e3)},dn=(e,t,n,s=0)=>{for(const r in t){const i=e.data.subarray(t[r][0]+s,t[r][1]+s);if(ge(i,v0)!==!0)return e._debug!==void 0&&e._debug(`${n} failed: Point not on curve`),!1}return!0};async function N0(e){const t=Ee("0b"),n=e._EVM._bls,s=e.common.param("bls12381G1AddGas")??BigInt(0);if(!Be(e,s,t))return ae(e.gasLimit);if(!Fs(e,256,t))return te(new x(x.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);if(!dn(e,[[0,16],[64,80],[128,144],[192,208]],t))return te(new x(x.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),e.gasLimit);let i;try{i=n.addG1(e.data)}catch(o){return e._debug!==void 0&&e._debug(`${t} failed: ${o.message}`),te(o,e.gasLimit)}return e._debug!==void 0&&e._debug(`${t} return value=${Y(i)}`),{executionGasUsed:s,returnValue:i}}async function C0(e){const t=Ee("0d"),n=e._EVM._bls,s=e.data;if(s.length===0)return e._debug!==void 0&&e._debug(`${t} failed: Empty input`),te(new x(x.errorMessages.BLS_12_381_INPUT_EMPTY),e.gasLimit);const r=Math.floor(s.length/160),i=e.common.param("bls12381G1MulGas")??BigInt(0),o=rc(r,i,vu);if(!Be(e,o,t))return ae(e.gasLimit);if(s.length%160!==0)return e._debug!==void 0&&e._debug(`${t} failed: Invalid input length length=${s.length}`),te(new x(x.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);if(!$s(e,160,t))return te(new x(x.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);const a=[[0,16],[64,80]];for(let f=0;f<r;f++){const l=160*f;if(!dn(e,a,t,l))return te(new x(x.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),e.gasLimit)}let c;try{c=n.msmG1(e.data)}catch(f){return e._debug!==void 0&&e._debug(`${t} failed: ${f.message}`),te(f,e.gasLimit)}return e._debug!==void 0&&e._debug(`${t} return value=${Y(c)}`),{executionGasUsed:o,returnValue:c}}async function S0(e){const t=Ee("0e"),n=e._EVM._bls,s=e.common.param("bls12381G2AddGas")??BigInt(0);if(!Be(e,s,t))return ae(e.gasLimit);if(!Fs(e,512,t))return te(new x(x.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);if(!dn(e,[[0,16],[64,80],[128,144],[192,208],[256,272],[320,336],[384,400],[448,464]],t))return te(new x(x.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),e.gasLimit);let i;try{i=n.addG2(e.data)}catch(o){return te(o,e.gasLimit)}return e._debug!==void 0&&e._debug(`${t} return value=${Y(i)}`),{executionGasUsed:s,returnValue:i}}async function O0(e){const t=Ee("10"),n=e._EVM._bls;if(e.data.length===0)return e._debug!==void 0&&e._debug(`${t} failed: Empty input`),te(new x(x.errorMessages.BLS_12_381_INPUT_EMPTY),e.gasLimit);const s=Math.floor(e.data.length/288),r=e.common.param("bls12381G2MulGas")??BigInt(0),i=rc(s,r,Nu);if(!Be(e,i,t))return ae(e.gasLimit);if(!$s(e,288,t))return te(new x(x.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);const o=[[0,16],[64,80],[128,144],[192,208]];for(let c=0;c<s;c++){const f=288*c;if(!dn(e,o,t,f))return te(new x(x.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),e.gasLimit)}let a;try{a=n.msmG2(e.data)}catch(c){return e._debug!==void 0&&e._debug(`${t} failed: ${c.message}`),te(c,e.gasLimit)}return e._debug!==void 0&&e._debug(`${t} return value=${Y(a)}`),{executionGasUsed:i,returnValue:a}}async function T0(e){const t=Ee("11"),n=e._EVM._bls,s=e.common.param("bls12381PairingBaseGas")??BigInt(0);if(e.data.length===0)return e._debug!==void 0&&e._debug(`${t} failed: Empty input`),te(new x(x.errorMessages.BLS_12_381_INPUT_EMPTY),e.gasLimit);const r=e.common.param("bls12381PairingPerPairGas")??BigInt(0);if(!$s(e,384,t))return te(new x(x.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);const i=s+r*BigInt(Math.floor(e.data.length/384));if(!Be(e,i,t))return ae(e.gasLimit);const o=[[0,16],[64,80],[128,144],[192,208],[256,272],[320,336]];for(let c=0;c<e.data.length/384;c++){const f=384*c;if(!dn(e,o,t,f))return te(new x(x.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),e.gasLimit)}let a;try{a=n.pairingCheck(e.data)}catch(c){return e._debug!==void 0&&e._debug(`${t} failed: ${c.message}`),te(c,e.gasLimit)}return e._debug!==void 0&&e._debug(`${t} return value=${Y(a)}`),{executionGasUsed:i,returnValue:a}}function G0(e){const t=Ee("01"),n=e.common.customCrypto.ecrecover??ud,s=e.common.param("ecRecoverGas");if(!Be(e,s,t))return ae(e.gasLimit);const r=ot(e.data,128),i=r.subarray(0,32),o=r.subarray(32,64),a=Z(o);if(a!==ga&&a!==qf)return e._debug!==void 0&&e._debug(`${t} failed: v neither 27 nor 28`),{executionGasUsed:s,returnValue:new Uint8Array};const c=r.subarray(64,96),f=r.subarray(96,128);let l;try{e._debug!==void 0&&e._debug(`${t}: PK recovery with msgHash=${Y(i)} v=${Y(o)} r=${Y(c)}s=${Y(f)}}`),l=n(i,Z(o),c,f)}catch{return e._debug!==void 0&&e._debug(`${t} failed: PK recovery failed`),{executionGasUsed:s,returnValue:new Uint8Array(0)}}const u=se(ad(l),32);return e._debug!==void 0&&e._debug(`${t} return address=${Y(u)}`),{executionGasUsed:s,returnValue:u}}function k0(e){const t=Ee("02"),n=e.data,s=e.common.customCrypto.sha256??ii;let r=e.common.param("sha256Gas");if(r+=e.common.param("sha256WordGas")*BigInt(Math.ceil(n.length/32)),!Be(e,r,t))return ae(e.gasLimit);const i=s(n);return e._debug!==void 0&&e._debug(`${t} return hash=${Y(i)}`),{executionGasUsed:r,returnValue:i}}const P0=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),ic=Uint8Array.from(new Array(16).fill(0).map((e,t)=>t)),L0=ic.map(e=>(9*e+5)%16),oc=(()=>{const n=[[ic],[L0]];for(let s=0;s<4;s++)for(let r of n)r.push(r[s].map(i=>P0[i]));return n})(),ac=oc[0],cc=oc[1],fc=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>Uint8Array.from(e)),R0=ac.map((e,t)=>e.map(n=>fc[t][n])),U0=cc.map((e,t)=>e.map(n=>fc[t][n])),D0=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),H0=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function wo(e,t,n,s){return e===0?t^n^s:e===1?t&n|~t&s:e===2?(t|~n)^s:e===3?t&s|n&~s:t^(n|~s)}const ps=new Uint32Array(16);class M0 extends Jr{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:n,h2:s,h3:r,h4:i}=this;return[t,n,s,r,i]}set(t,n,s,r,i){this.h0=t|0,this.h1=n|0,this.h2=s|0,this.h3=r|0,this.h4=i|0}process(t,n){for(let h=0;h<16;h++,n+=4)ps[h]=t.getUint32(n,!0);let s=this.h0|0,r=s,i=this.h1|0,o=i,a=this.h2|0,c=a,f=this.h3|0,l=f,u=this.h4|0,d=u;for(let h=0;h<5;h++){const p=4-h,g=D0[h],m=H0[h],w=ac[h],T=cc[h],E=R0[h],A=U0[h];for(let G=0;G<16;G++){const U=Xn(s+wo(h,i,a,f)+ps[w[G]]+g,E[G])+u|0;s=u,u=f,f=Xn(a,10)|0,a=i,i=U}for(let G=0;G<16;G++){const U=Xn(r+wo(p,o,c,l)+ps[T[G]]+m,A[G])+d|0;r=d,d=l,l=Xn(c,10)|0,c=o,o=U}}this.set(this.h1+a+l|0,this.h2+f+d|0,this.h3+u+r|0,this.h4+s+o|0,this.h0+i+c|0)}roundClean(){gt(ps)}destroy(){this.destroyed=!0,gt(this.buffer),this.set(0,0,0,0,0)}}const F0=Zn(()=>new M0),Ao=ri(F0);function $0(e){const t=Ee("03"),n=e.data;let s=e.common.param("ripemd160Gas");if(s+=e.common.param("ripemd160WordGas")*BigInt(Math.ceil(n.length/32)),!Be(e,s,t))return ae(e.gasLimit);const r=se(Ao(n),32);return e._debug!==void 0&&e._debug(`${t} return hash=${Y(r)}`),{executionGasUsed:s,returnValue:se(Ao(n),32)}}function V0(e){const t=Ee("04"),n=e.data;let s=e.common.param("identityGas");return s+=e.common.param("identityWordGas")*BigInt(Math.ceil(n.length/32)),Be(e,s,t)?(e._debug!==void 0&&e._debug(`${t} return data=${ci(e.data)}`),{executionGasUsed:s,returnValue:Uint8Array.from(n)}):ae(e.gasLimit)}const q0=BigInt(4),yi=BigInt(16),z0=BigInt(480),Io=BigInt(200),Bo=BigInt(500),dc=BigInt(1024),W0=BigInt(3072),j0=BigInt(199680),Z0=BigInt(2147483647),K0=BigInt(Number.MAX_SAFE_INTEGER);function Y0(e){let t,n;return e<=Ln?e**Tt:e<=dc?(t=e**Tt/q0,n=e*fi,t+n-W0):(t=e**Tt/yi,n=e*z0,t+n-j0)}function X0(e,t){let n;try{const l=Z(e.subarray(0,32));n=96+Number(l)}catch{n=Number.MAX_SAFE_INTEGER-32}const s=Z(e.subarray(32,64));let r=e.subarray(n,n+32);r=ot(r,32);let i=Z(r),o=0;s<_e&&(o=32-Number(s)),i=i>>Wt*BigInt(Math.max(o,0));let a=-1;for(;i>y;)a=a+1,i=i>>Q;let c=s-_e;c<y&&(c=y);let f=c*(t.common.isActivatedEIP(7883)===!0?yi:Wt);return a>0&&(f+=BigInt(a)),f}function J0(e,t,n){if(t===y)return Q%n;let s=Q;for(;t>y;)t&Q&&(s=s*e%n),e=e*e%n,t>>=Q;return s}function Q0(e){const t=Ee("05"),n=e.data.length<96?ot(e.data,96):e.data;let s=X0(n,e);s<Q&&(s=Q);const r=Z(n.subarray(0,32)),i=Z(n.subarray(32,64)),o=Z(n.subarray(64,96));let a=r;a<o&&(a=o);const c=e.common.param("modexpGquaddivisorGas");let f;const l=fi,u=l+r,d=u,h=d+i,p=h,g=p+o;if(e.common.isActivatedEIP(2565)){const U=(a+pa)/Wt;e.common.isActivatedEIP(7883)?(f=s*(a>_e?Tt*U*U:yi),f<Bo&&(f=Bo)):(f=s*U*U/c,f<Io&&(f=Io))}else f=s*Y0(a)/c;if(!Be(e,f,t))return ae(e.gasLimit);const m=e.common.isActivatedEIP(7823)?dc:Z0;if(e._debug!==void 0){const U=BigInt(96)+r+i+o,P=BigInt(e.data.length);let H=`${t} length values: maxSize(b/e/m)=${m} bLen=${r} eLen=${i} mLen=${o} 96+b+e+m=${U} `;H+=`data=${P} lengthMatch=${U===P}`,e._debug(H)}if(!e.common.isActivatedEIP(7823)&&r===y&&o===y)return{executionGasUsed:f,returnValue:new Uint8Array};if(r>m||i>m||o>m)return e._debug!==void 0&&e._debug(`${t} failed: one or more input values too large`),ae(e.gasLimit);if(g>K0)return e._debug!==void 0&&e._debug(`${t} failed: total input too large`),ae(e.gasLimit);const w=Z(ot(n.subarray(Number(l),Number(u)),Number(r))),T=Z(ot(n.subarray(Number(d),Number(h)),Number(i))),E=Z(ot(n.subarray(Number(p),Number(g)),Number(o)));e._debug!==void 0&&e._debug(`${t} input: B=${w} E=${T} M=${E}`);let A;E===y?A=new Uint8Array:(A=J0(w,T,E),A===y?A=new Uint8Array:A=oe(A));const G=se(A,Number(o));return e._debug!==void 0&&e._debug(`${t} return value=${Y(G)}`),{executionGasUsed:f,returnValue:G}}function el(e){const t=Ee("06"),n=e.common.param("bn254AddGas");if(!Be(e,n,t))return ae(e.gasLimit);const s=ot(e.data.subarray(0,128),128);let r;try{r=e._EVM._bn254.add(s)}catch(i){return e._debug!==void 0&&e._debug(`${t} failed: ${i.message}`),te(i,e.gasLimit)}return r.length!==64?(e._debug!==void 0&&e._debug(`${t} failed: OOG`),ae(e.gasLimit)):(e._debug!==void 0&&e._debug(`${t} return value=${Y(r)}`),{executionGasUsed:n,returnValue:r})}function tl(e){const t=Ee("07"),n=e.common.param("bn254MulGas");if(!Be(e,n,t))return ae(e.gasLimit);const s=ot(e.data.subarray(0,128),128);let r;try{r=e._EVM._bn254.mul(s)}catch(i){return e._debug!==void 0&&e._debug(`${t} failed: ${i.message}`),te(i,e.gasLimit)}return r.length!==64?(e._debug!==void 0&&e._debug(`${t} failed: OOG`),ae(e.gasLimit)):(e._debug!==void 0&&e._debug(`${t} return value=${Y(r)}`),{executionGasUsed:n,returnValue:r})}function nl(e){const t=Ee("08");if(!$s(e,192,t))return te(new x(x.errorMessages.INVALID_INPUT_LENGTH),e.gasLimit);const n=BigInt(Math.floor(e.data.length/192)),s=e.common.param("bn254PairingGas")+n*e.common.param("bn254PairingWordGas");if(!Be(e,s,t))return ae(e.gasLimit);let r;try{r=e._EVM._bn254.pairing(e.data)}catch(i){return e._debug!==void 0&&e._debug(`${t} failed: ${i.message}`),te(i,e.gasLimit)}return r.length!==32?(e._debug!==void 0&&e._debug(`${t} failed: OOG`),ae(e.gasLimit)):(e._debug!==void 0&&e._debug(`${t} return value=${Y(r)}`),{executionGasUsed:s,returnValue:r})}function gs(e,t,n){const s=e[t]+e[n];let r=e[t+1]+e[n+1];s>=4294967296&&r++,e[t]=s,e[t+1]=r}function vo(e,t,n,s){let r=e[t]+n;n<0&&(r+=4294967296);let i=e[t+1]+s;r>=4294967296&&i++,e[t]=r,e[t+1]=i}function Ft(e,t,n,s,r,i,o,a){const c=t[o],f=t[o+1],l=t[a],u=t[a+1];gs(e,n,s),vo(e,n,c,f);let d=e[i]^e[n],h=e[i+1]^e[n+1];e[i]=h,e[i+1]=d,gs(e,r,i),d=e[s]^e[r],h=e[s+1]^e[r+1],e[s]=d>>>24^h<<8,e[s+1]=h>>>24^d<<8,gs(e,n,s),vo(e,n,l,u),d=e[i]^e[n],h=e[i+1]^e[n+1],e[i]=d>>>16^h<<16,e[i+1]=h>>>16^d<<16,gs(e,r,i),d=e[s]^e[r],h=e[s+1]^e[r+1],e[s]=h>>>31^d<<1,e[s+1]=d>>>31^h<<1}const sl=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),rl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],ke=new Uint8Array(rl.map(function(e){return e*2}));function il(e,t,n,s,r){const i=new Uint32Array(32);let o=0;for(o=0;o<16;o++)i[o]=e[o],i[o+16]=sl[o];for(i[24]=i[24]^n[0],i[25]=i[25]^n[1],i[26]=i[26]^n[2],i[27]=i[27]^n[3],s&&(i[28]=~i[28],i[29]=~i[29]),o=0;o<r;o++){const a=o%10*16;Ft(i,t,0,8,16,24,ke[a+0],ke[a+1]),Ft(i,t,2,10,18,26,ke[a+2],ke[a+3]),Ft(i,t,4,12,20,28,ke[a+4],ke[a+5]),Ft(i,t,6,14,22,30,ke[a+6],ke[a+7]),Ft(i,t,0,10,20,30,ke[a+8],ke[a+9]),Ft(i,t,2,12,22,24,ke[a+10],ke[a+11]),Ft(i,t,4,14,16,26,ke[a+12],ke[a+13]),Ft(i,t,6,8,18,28,ke[a+14],ke[a+15])}for(o=0;o<16;o++)e[o]=e[o]^i[o]^i[o+16]}function ol(e){const t=Ee("09"),n=e.data;if(n.length!==213)return e._debug!==void 0&&e._debug(`${t} failed: OUT_OF_RANGE dataLength=${n.length}`),{returnValue:new Uint8Array(0),executionGasUsed:e.gasLimit,exceptionError:new x(x.errorMessages.OUT_OF_RANGE)};const s=n.subarray(212,213)[0];if(s!==1&&s!==0)return e._debug!==void 0&&e._debug(`${t} failed: OUT_OF_RANGE lastByte=${s}`),{returnValue:new Uint8Array(0),executionGasUsed:e.gasLimit,exceptionError:new x(x.errorMessages.OUT_OF_RANGE)};const r=new DataView(n.buffer,n.byteOffset).getUint32(0),i=new DataView(n.buffer,n.byteOffset+4,64),o=new DataView(n.buffer,n.byteOffset+68,128),a=new DataView(n.buffer,n.byteOffset+196,16),c=s===1;let f=e.common.param("blake2RoundGas");if(f*=BigInt(r),!Be(e,f,t))return ae(e.gasLimit);const l=new Uint32Array(16);for(let g=0;g<16;g++)l[g]=i.getUint32(g*4,!0);const u=new Uint32Array(32);for(let g=0;g<32;g++)u[g]=o.getUint32(g*4,!0);const d=new Uint32Array(4);for(let g=0;g<4;g++)d[g]=a.getUint32(g*4,!0);il(l,u,d,c,r);const h=new Uint8Array(64),p=new DataView(h.buffer);for(let g=0;g<16;g++)p.setUint32(g*4,l[g],!0);return e._debug!==void 0&&e._debug(`${t} return hash=${Y(h)}`),{executionGasUsed:f,returnValue:h}}async function al(e){const t=Ee("12"),n=e._EVM._bls,s=e.common.param("bls12381MapG1Gas")??BigInt(0);if(!Be(e,s,t))return ae(e.gasLimit);if(!Fs(e,64,t))return te(new x(x.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);if(!dn(e,[[0,16]],t))return te(new x(x.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),e.gasLimit);let i;try{i=n.mapFPtoG1(e.data)}catch(o){return e._debug!==void 0&&e._debug(`${t} failed: ${o.message}`),te(o,e.gasLimit)}return e._debug!==void 0&&e._debug(`${t} return value=${Y(i)}`),{executionGasUsed:s,returnValue:i}}async function cl(e){const t=Ee("13"),n=e._EVM._bls,s=e.common.param("bls12381MapG2Gas")??BigInt(0);if(!Be(e,s,t))return ae(e.gasLimit);if(!Fs(e,128,t))return te(new x(x.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);if(!dn(e,[[0,16],[64,80]],t))return te(new x(x.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),e.gasLimit);let i;try{i=n.mapFP2toG2(e.data)}catch(o){return e._debug!==void 0&&e._debug(`${t} failed: ${o.message}`),te(o,e.gasLimit)}return e._debug!==void 0&&e._debug(`${t} return value=${Y(i)}`),{executionGasUsed:s,returnValue:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _i(e,t){const n=s=>ec({...e,hash:s});return{...n(t),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uc={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},lc={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},hc={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},fl=bt(uc.p),dl=bt(lc.p),ul=bt(hc.p),ll=_i({...uc,Fp:fl,lowS:!1},Bn);_i({...lc,Fp:dl,lowS:!1},Yc);_i({...hc,Fp:ul,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Kc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Br=ll,hl=BigInt(6900),ml=new Uint8Array(32).fill(0).map((e,t)=>t===31?1:0),No=BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),bs=BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),pl=BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),gl=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b");function bl(e){const t=Ee("100"),n=hl;if(!Be(e,n,t))return ae(e.gasLimit);const s=e.data;if(s.length!==160)return e._debug!==void 0&&e._debug(`${t} failed: invalid input length ${s.length}, expected 160`),{executionGasUsed:n,returnValue:new Uint8Array};const r=s.subarray(0,32),i=s.subarray(32,64),o=s.subarray(64,96),a=s.subarray(96,128),c=s.subarray(128,160),f=Z(i),l=Z(o),u=Z(a),d=Z(c);if(!(f>BigInt(0)&&f<No&&l>BigInt(0)&&l<No))return e._debug!==void 0&&e._debug(`${t} failed: signature component out of bounds: r=${Y(i)}, s=${Y(o)}`),{executionGasUsed:n,returnValue:new Uint8Array};if(!(u>=BigInt(0)&&u<bs&&d>=BigInt(0)&&d<bs))return e._debug!==void 0&&e._debug(`${t} failed: public key component out of bounds: qx=${Y(a)}, qy=${Y(c)}`),{executionGasUsed:n,returnValue:new Uint8Array};const h=d*d%bs,p=(u*u*u+pl*u+gl)%bs;if(h!==p)return e._debug!==void 0&&e._debug(`${t} failed: point not on curve`),{executionGasUsed:n,returnValue:new Uint8Array};if(u===BigInt(0)&&d===BigInt(0))return e._debug!==void 0&&e._debug(`${t} failed: public key is point at infinity`),{executionGasUsed:n,returnValue:new Uint8Array};try{const g=Br.ProjectivePoint.fromAffine({x:u,y:d}),m=se(i,32),w=se(o,32),T=new Uint8Array(64);T.set(m,0),T.set(w,32);const E=Br.Signature.fromCompact(T);return Br.verify(E,r,g.toRawBytes(!1))?(e._debug!==void 0&&e._debug(`${t} succeeded: signature verification passed`),{executionGasUsed:n,returnValue:ml}):(e._debug!==void 0&&e._debug(`${t} failed: signature verification failed`),{executionGasUsed:n,returnValue:new Uint8Array})}catch(g){return e._debug!==void 0&&e._debug(`${t} failed: verification error: ${g}`),{executionGasUsed:n,returnValue:new Uint8Array}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xl=BigInt(0),Kr=BigInt(1),mc=BigInt(2),yl=BigInt(3),pc=BigInt(6),Zs=BigInt("4965661367192848881"),_l=An(Zs),El=pc*Zs**mc,Ks={p:BigInt("0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47"),n:BigInt("0x30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001"),h:Kr,a:xl,b:yl,Gx:Kr,Gy:BigInt(2)},Co=bt(Ks.n),gc={c0:BigInt("19485874751759354771024239261021720505790618469301721065564631296452457478373"),c1:BigInt("266929791119991161246907387137283842545076965332900288569378510910307636690")},{Fp:qn,Fp2:ht,Fp6:wl,Fp12:le}=sc({ORDER:Ks.p,X_LEN:_l,FP2_NONRESIDUE:[BigInt(9),Kr],Fp2mulByB:e=>ht.mul(e,gc),Fp12finalExponentiate:e=>{const t=l=>le.conjugate(le._cyclotomicExp(l,Zs)),n=le.mul(le.conjugate(e),le.inv(e)),s=le.mul(le.frobeniusMap(n,2),n),r=le._cyclotomicSquare(t(s)),i=le.mul(le._cyclotomicSquare(r),r),o=t(i),a=t(le._cyclotomicSquare(o)),c=le.mul(le.mul(le.conjugate(a),o),le.conjugate(i)),f=le.mul(c,r);return le.mul(le.frobeniusMap(le.mul(le.conjugate(s),f),3),le.mul(le.frobeniusMap(c,2),le.mul(le.frobeniusMap(f,1),le.mul(le.mul(c,o),s))))}}),{G2psi:Al,psi:So}=nc(qn,ht,ht.NONRESIDUE),vr=Object.freeze({DST:"BN254G2_XMD:SHA-256_SVDW_RO_",encodeDST:"BN254G2_XMD:SHA-256_SVDW_RO_",p:qn.ORDER,m:2,k:128,expand:"xmd",hash:Bn}),Il=(e,t,n,s,r,i)=>{const o=So(s,r);({Rx:e,Ry:t,Rz:n}=i(e,t,n,o[0],o[1]));const a=So(o[0],o[1]);i(e,t,n,a[0],ht.neg(a[1]))},Bl={p:ht.ORDER,n:Ks.n,h:BigInt("0x30644e72e131a029b85045b68181585e06ceecda572a2489345f2299c0f9fa8d"),a:ht.ZERO,b:gc,Gx:ht.fromBigTuple([BigInt("10857046999023057135944570762232829481370756359578518086990519993285655852781"),BigInt("11559732032986387107991004021392285783925812861821192530917403151452391805634")]),Gy:ht.fromBigTuple([BigInt("8495653923123431417604973247489272438418190587263600148770280649306958101930"),BigInt("4082367875863433681332203403145435568316851327593401208105741076214120093531")])},Ue=tc({fields:{Fp:qn,Fp2:ht,Fp6:wl,Fp12:le,Fr:Co},G1:{...Ks,Fp:qn,htfDefaults:{...vr,m:1,DST:"BN254G2_XMD:SHA-256_SVDW_RO_"},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:we,fromBytes:we,toBytes:we,ShortSignature:{fromBytes:we,fromHex:we,toBytes:we,toRawBytes:we,toHex:we}},G2:{...Bl,Fp:ht,hEff:BigInt("21888242871839275222246405745257275088844257914179612981679871602714643921549"),htfDefaults:{...vr},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(e,t)=>t.multiplyUnsafe(El).equals(Al(e,t)),mapToCurve:we,fromBytes:we,toBytes:we,Signature:{fromBytes:we,fromHex:we,toBytes:we,toRawBytes:we,toHex:we}},params:{ateLoopSize:Zs*pc+mc,r:Co.ORDER,xNegative:!1,twistType:"divisive"},htfDefaults:vr,postPrecompute:Il});ec({a:BigInt(0),b:BigInt(3),Fp:qn,n:BigInt("21888242871839275222246405745257275088548364400416034343698204186575808495617"),Gx:BigInt(1),Gy:BigInt(2),h:BigInt(1),hash:Bn});const bc=new Uint8Array(64),vl=new Uint8Array(128),Vt=64,it=32,Nl=128,Cl=new Uint8Array(32),Sl=Ke(new Uint8Array(31),ye("0x01"));function xs(e){if(ge(e,bc)===!0)return Ue.G1.ProjectivePoint.ZERO;const t=Z(e.subarray(0,it)),n=Z(e.subarray(it,Vt)),s=Ue.G1.ProjectivePoint.fromAffine({x:t,y:n});return s.assertValidity(),s}function Oo(e){const t=se(oe(e.x),it),n=se(oe(e.y),it);return Ke(t,n)}function Ol(e){const t=Ue.fields.Fr.fromBytes(e);return t>=Ue.fields.Fr.ORDER?t%Ue.fields.Fr.ORDER:t}function To(e,t){if(Z(e)>=Ue.fields.Fp2.ORDER)throw new x(x.errorMessages.BN254_FP_NOT_IN_FIELD);if(Z(t)>=Ue.fields.Fp2.ORDER)throw new x(x.errorMessages.BN254_FP_NOT_IN_FIELD);const n=Ke(e,t);return Ue.fields.Fp2.fromBytes(n)}function Tl(e){if(ge(e,vl)===!0)return Ue.G2.ProjectivePoint.ZERO;const t=e.subarray(0,it),n=e.subarray(it,it*2),s=it*2,r=e.subarray(s,s+it),i=e.subarray(s+it,s+it*2);for(const f of[n,t,i,r]){const l=Z(f);if(Ue.fields.Fp.create(l)!==l)throw new x(x.errorMessages.BN254_FP_NOT_IN_FIELD)}const o=To(n,t),a=To(i,r),c=Ue.G2.ProjectivePoint.fromAffine({x:o,y:a});return c.assertValidity(),c}class Gl{add(t){const n=xs(t.slice(0,Vt)),s=xs(t.slice(Vt,Vt*2));return Oo(n.add(s))}mul(t){const n=xs(t.slice(0,Vt)),s=Ol(t.slice(Vt,96));return s===y?bc:Oo(n.multiply(s))}pairing(t){const s=[];for(let i=0;i<t.length/192;i++){const o=192*i,a=xs(t.subarray(o,o+Vt)),c=o+Vt,f=Tl(t.subarray(c,c+Nl));a===Ue.G1.ProjectivePoint.ZERO||f===Ue.G2.ProjectivePoint.ZERO||s.push({g1:a,g2:f})}const r=Ue.pairingBatch(s);return Ue.fields.Fp12.eql(r,Ue.fields.Fp12.ONE)===!0?Sl:Cl}}const xe={EIP:"eip",Hardfork:"hardfork"},ve="00000000000000000000000000000000000000",xc=[{address:ve+"01",check:{type:xe.Hardfork,param:O.Chainstart},precompile:G0,name:"ECRECOVER (0x01)"},{address:ve+"02",check:{type:xe.Hardfork,param:O.Chainstart},precompile:k0,name:"SHA256 (0x02)"},{address:ve+"03",check:{type:xe.Hardfork,param:O.Chainstart},precompile:$0,name:"RIPEMD160 (0x03)"},{address:ve+"04",check:{type:xe.Hardfork,param:O.Chainstart},precompile:V0,name:"IDENTITY (0x04)"},{address:ve+"05",check:{type:xe.Hardfork,param:O.Byzantium},precompile:Q0,name:"MODEXP (0x05)"},{address:ve+"06",check:{type:xe.Hardfork,param:O.Byzantium},precompile:el,name:"BN254_ADD (0x06)"},{address:ve+"07",check:{type:xe.Hardfork,param:O.Byzantium},precompile:tl,name:"BN254_MUL (0x07)"},{address:ve+"08",check:{type:xe.Hardfork,param:O.Byzantium},precompile:nl,name:"BN254_PAIRING (0x08)"},{address:ve+"09",check:{type:xe.Hardfork,param:O.Istanbul},precompile:ol,name:"BLAKE2f (0x09)"},{address:ve+"0a",check:{type:xe.EIP,param:4844},precompile:Au,name:"KZG_POINT_EVALUATION (0x0a)"},{address:ve+"0b",check:{type:xe.EIP,param:2537},precompile:N0,name:"BLS12_G1ADD (0x0b)"},{address:ve+"0c",check:{type:xe.EIP,param:2537},precompile:C0,name:"BLS12_G1MSM (0x0c)"},{address:ve+"0d",check:{type:xe.EIP,param:2537},precompile:S0,name:"BLS12_G2ADD (0x0d)"},{address:ve+"0e",check:{type:xe.EIP,param:2537},precompile:O0,name:"BLS12_G2MSM (0x0e)"},{address:ve+"0f",check:{type:xe.EIP,param:2537},precompile:T0,name:"BLS12_PAIRING (0x0f)"},{address:ve+"10",check:{type:xe.EIP,param:2537},precompile:al,name:"BLS12_MAP_FP_TO_G1 (0x10)"},{address:ve+"11",check:{type:xe.EIP,param:2537},precompile:cl,name:"BLS12_MAP_FP_TO_G2 (0x11)"},{address:"0000000000000000000000000000000000000100",check:{type:xe.EIP,param:7951},precompile:bl,name:"P256VERIFY (0x100)"}];function Gs(e,t){const n=new Map;if(t)for(const s of t)n.set(Pe(s.address.bytes),"function"in s?s.function:void 0);for(const s of xc){if(n.has(s.address))continue;(s.check.type===xe.Hardfork&&e.gteHardfork(s.check.param)||s.check.type===xe.EIP&&e.isActivatedEIP(s.check.param))&&n.set(s.address,s.precompile)}return n}function Ee(e){e.length<40&&(e=e.padStart(40,"0"));for(const t of xc)if(t.address===e)return t.name;return""}class kl{constructor(){this._storage=new Map,this._changeJournal=[],this._indices=[0]}get(t,n){const s=this._storage.get(t.toString());if(!s)return new Uint8Array(32);const r=s.get(Y(n));return r||new Uint8Array(32)}put(t,n,s){if(n.length!==32)throw L("Transient storage key must be 32 bytes long");if(s.length>32)throw L("Transient storage value cannot be longer than 32 bytes");const r=t.toString();this._storage.has(r)||this._storage.set(r,new Map);const i=this._storage.get(r),o=Y(n),a=i.get(o)??new Uint8Array(32);this._changeJournal.push({addr:r,key:o,prevValue:a}),i.set(o,s)}commit(){if(this._indices.length===0)throw L("Nothing to commit");this._indices.pop()}checkpoint(){this._indices.push(this._changeJournal.length)}revert(){const t=this._indices.pop();if(typeof t>"u")throw L("Nothing to revert");for(let n=this._changeJournal.length-1;n>=t;n--){const{key:s,prevValue:r,addr:i}=this._changeJournal[n];this._storage.get(i).set(s,r)}this._changeJournal.splice(t,this._changeJournal.length-t)}toJSON(){const t={};for(const[n,s]of this._storage.entries()){t[n]={};for(const[r,i]of s.entries())t[n][r]=Y(i)}return t}clear(){this._storage=new Map,this._changeJournal=[]}}var Pl={};const ce=cn("evm:evm"),ut=cn("evm:gas"),Ll=cn("evm:precompiles");function ae(e){return{returnValue:new Uint8Array(0),executionGasUsed:e,exceptionError:new x(x.errorMessages.OUT_OF_GAS)}}function Rl(e){return{returnValue:new Uint8Array(0),executionGasUsed:e,exceptionError:new x(x.errorMessages.CODESTORE_OUT_OF_GAS)}}function Go(e){return{returnValue:new Uint8Array(0),executionGasUsed:e,exceptionError:new x(x.errorMessages.INVALID_BYTECODE_RESULT)}}function Ul(e){return{returnValue:new Uint8Array(0),executionGasUsed:e,exceptionError:new x(x.errorMessages.CODESIZE_EXCEEDS_MAXIMUM)}}function te(e,t){return{returnValue:new Uint8Array(0),executionGasUsed:t,exceptionError:e}}function Nr(){return{header:{number:y,coinbase:At(),timestamp:y,difficulty:y,prevRandao:new Uint8Array(32),gasLimit:y,baseFeePerGas:void 0,getBlobGasPrice:()=>{}}}}class zn{get precompiles(){return this._precompiles}get opcodes(){return this._opcodes}constructor(t){if(this.DEBUG=!1,this.common=t.common,this.blockchain=t.blockchain,this.stateManager=t.stateManager,this.common.isActivatedEIP(7864)){const s=["checkChunkWitnessPresent"];for(const r of s)if(!(r in this.stateManager))throw L(`State manager used must implement ${r} if Binary Trees (EIP-7864) is activated`)}this.events=new Fr,this._optsCached=t;const n=[663,1153,1559,2537,2565,2718,2929,2930,2935,3198,3529,3540,3541,3607,3651,3670,3855,3860,4200,4399,4750,4788,4844,4895,5133,5450,5656,6110,6206,6780,7002,7069,7251,7480,7516,7594,7620,7685,7691,7692,7698,7702,7709,7823,7825,7934,7939,7951];for(const s of this.common.eips())if(!n.includes(s))throw L(`EIP-${s} is not supported by the EVM`);if(!zn.supportedHardforks.includes(this.common.hardfork()))throw L(`Hardfork ${this.common.hardfork()} not set as supported in supportedHardforks`);this.common.updateParams(t.params??Eu),this.allowUnlimitedContractSize=t.allowUnlimitedContractSize??!1,this.allowUnlimitedInitCodeSize=t.allowUnlimitedInitCodeSize??!1,this._customOpcodes=t.customOpcodes,this._customPrecompiles=t.customPrecompiles,this.journal=new _u(this.stateManager,this.common),this.transientStorage=new kl,this.common.events.on("hardforkChanged",()=>{this.getActiveOpcodes(),this._precompiles=Gs(this.common,this._customPrecompiles)}),this.getActiveOpcodes(),this._precompiles=Gs(this.common,this._customPrecompiles),this.common.isActivatedEIP(2537)&&(this._bls=t.bls??new B0,this._bls.init?.()),this._bn254=t.bn254,this._emit=async(s,r)=>{const i=this.events.listeners(s);for(const o of i)o.length===2?await new Promise(a=>{o(r,a)}):o(r)},this.performanceLogger=new Yd,this.DEBUG=typeof window>"u"?Pl?.DEBUG?.includes("ethjs")??!1:!1}getActiveOpcodes(){const t=gu(this.common,this._customOpcodes);return this._opcodes=t.opcodes,this._dynamicGasHandlers=t.dynamicGasHandlers,this._handlers=t.handlers,this._opcodeMap=t.opcodeMap,t.opcodes}async _executeCall(t){let n=t.gasLimit;const s=t.caller;if(this.common.isActivatedEIP(7864)){if(t.accessWitness===void 0)throw L("accessWitness is required for EIP-7864");const f=t.value!==y;if(t.depth===0){const u=t.accessWitness.readAccountHeader(s);ut(`originAccessGas=${u} waived off for origin at depth=0`);let d=t.accessWitness.readAccountCodeHash(t.to);f?d+=t.accessWitness.writeAccountBasicData(t.to):d+=t.accessWitness.readAccountBasicData(t.to),ut(`destAccessGas=${d} waived off for target at depth=0`)}let l=t.accessWitness.readAccountBasicData(t.to);if(f&&(l+=t.accessWitness.writeAccountBasicData(t.to)),n-=l,n<y)return this.DEBUG&&ut(`callAccessGas charged(${l}) caused OOG (-> ${n})`),t.accessWitness.revert(),{execResult:ae(t.gasLimit)};this.DEBUG&&ut(`callAccessGas used (${l} gas (-> ${n}))`),t.accessWitness.commit()}let r=await this.stateManager.getAccount(s);r||(r=new We);let i;if(!t.delegatecall)try{await this._reduceSenderBalance(r,t)}catch(f){i=f}let o=await this.stateManager.getAccount(t.to);if(!o){if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){const f=t.accessWitness.readAccountHeader(t.to);if(n-=f,n<y)return this.DEBUG&&ut(`Proof of absence access charged(${f}) caused OOG (-> ${n})`),t.accessWitness?.revert(),{execResult:ae(t.gasLimit)};this.DEBUG&&ut(`Proof of absence access used (${f} gas (-> ${n}))`),t.accessWitness?.commit()}o=new We}if(!t.delegatecall)try{await this._addToBalance(o,t)}catch(f){i=f}await this._loadCode(t);let a=!1;if((!t.code||typeof t.code!="function"&&t.code.length===0)&&(a=!0,this.DEBUG&&ce("Exit early on no code (CALL)")),i!==void 0&&(a=!0,this.DEBUG&&ce("Exit early on value transfer overflowed (CALL)")),a)return{execResult:{gasRefund:t.gasRefund,executionGasUsed:t.gasLimit-n,exceptionError:i,returnValue:new Uint8Array(0)}};let c;if(t.isCompiled){let f,l,u;this._optsCached.profiler?.enabled===!0&&(u=Pe(t.codeAddress.bytes),u=Ee(u)??u.slice(20),this.performanceLogger.hasTimer()&&(l=this.performanceLogger.pauseTimer()),f=this.performanceLogger.startTimer(u)),c=await this.runPrecompile(t.code,t.data,n),this._optsCached.profiler?.enabled===!0&&(this.performanceLogger.stopTimer(f,Number(c.executionGasUsed),"precompiles"),l!==void 0&&this.performanceLogger.unpauseTimer(l)),c.gasRefund=t.gasRefund}else this.DEBUG&&ce("Start bytecode processing..."),c=await this.runInterpreter({...t,gasLimit:n});return t.depth===0&&this.postMessageCleanup(),c.executionGasUsed+=t.gasLimit-n,{execResult:c}}async _executeCreate(t){let n=t.gasLimit;const s=t.caller;if((this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864))&&t.depth===0){const p=t.accessWitness.readAccountHeader(s);ut(`originAccessGas=${p} waived off for origin at depth=0`)}let r=await this.stateManager.getAccount(t.caller);if(r||(r=new We),await this._reduceSenderBalance(r,t),this.common.isActivatedEIP(3860)&&t.data.length>Number(this.common.param("maxInitCodeSize"))&&!this.allowUnlimitedInitCodeSize)return{createdAddress:t.to,execResult:{returnValue:new Uint8Array(0),exceptionError:new x(x.errorMessages.INITCODE_SIZE_VIOLATION),executionGasUsed:t.gasLimit}};t.code=t.data,t.data=t.eofCallData??new Uint8Array,t.to=await this._generateAddress(t),this.common.isActivatedEIP(6780)&&t.createdAddresses.add(t.to.toString()),this.DEBUG&&ce(`Generated CREATE contract address ${t.to}`);let i=await this.stateManager.getAccount(t.to);if(i||(i=new We),this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){const p=t.accessWitness.writeAccountBasicData(t.to)+t.accessWitness.readAccountCodeHash(t.to);if(n-=p,n<y)return this.DEBUG&&(ut(`ContractCreateInit charge(${p}) caused OOG (-> ${n})`),t.accessWitness?.revert()),{execResult:ae(t.gasLimit)};this.DEBUG&&ut(`ContractCreateInit charged (${p} gas (-> ${n}))`),t.accessWitness?.commit()}if(i.nonce&&i.nonce>y||ge(i.codeHash,Gn)!==!0||ge(i.storageRoot,ma)!==!0)return this.DEBUG&&ce("Returning on address collision"),{createdAddress:t.to,execResult:{returnValue:new Uint8Array(0),exceptionError:new x(x.errorMessages.CREATE_COLLISION),executionGasUsed:t.gasLimit}};await this.journal.putAccount(t.to,i),await this.stateManager.clearStorage(t.to);const o={address:t.to,code:t.code};await this._emit("newContract",o),i=await this.stateManager.getAccount(t.to),i||(i=new We),this.common.gteHardfork(O.SpuriousDragon)&&(i.nonce+=Q);let a;try{await this._addToBalance(i,t)}catch(p){a=p}let c=!1;if((t.code===void 0||typeof t.code!="function"&&t.code.length===0)&&(c=!0,this.DEBUG&&ce("Exit early on no code (CREATE)")),a!==void 0&&(c=!0,this.DEBUG&&ce("Exit early on value transfer overflowed (CREATE)")),c){if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){const p=t.accessWitness.writeAccountHeader(t.to);if(n-=p,n<y)return this.DEBUG&&ce(`ContractCreateComplete access gas (${p}) caused OOG (-> ${n})`),t.accessWitness?.revert(),{execResult:ae(t.gasLimit)};this.DEBUG&&ce(`ContractCreateComplete access used (${p}) gas (-> ${n})`),t.accessWitness?.commit()}return{createdAddress:t.to,execResult:{executionGasUsed:t.gasLimit-n,gasRefund:t.gasRefund,exceptionError:a,returnValue:new Uint8Array(0)}}}this.DEBUG&&ce("Start bytecode processing...");let f=await this.runInterpreter({...t,gasLimit:n,isCreate:!0});f.executionGasUsed+=t.gasLimit-n;let l=f.executionGasUsed,u=y;!f.exceptionError&&!this.common.isActivatedEIP(6800)&&(u=BigInt(f.returnValue.length)*BigInt(this.common.param("createDataGas")),l=l+u,this.DEBUG&&ut(`Add return value size fee (${u} to gas used (-> ${l}))`));let d=!0;!f.exceptionError&&this.common.gteHardfork(O.SpuriousDragon)&&f.returnValue.length>Number(this.common.param("maxCodeSize"))&&(d=!1);let h=!1;if(l<=t.gasLimit&&(this.allowUnlimitedContractSize||d)?this.common.isActivatedEIP(3541)&&f.returnValue[0]===Ms?this.common.isActivatedEIP(3540)?Yt(t.code)?f.executionGasUsed=l:f={...f,...Go(t.gasLimit)}:f={...f,...Go(t.gasLimit)}:f.executionGasUsed=l:this.common.gteHardfork(O.Homestead)?d?(this.DEBUG&&ce("Contract creation: out of gas"),t.accessWitness?.revert(),f={...f,...ae(t.gasLimit)}):(this.DEBUG&&ce("Code size exceeds maximum code size (>= SpuriousDragon)"),f={...f,...Ul(t.gasLimit)}):l-u<=t.gasLimit?(this.DEBUG&&ce("Not enough gas to pay the code deposit fee (Frontier)"),t.accessWitness?.revert(),f={...f,...Rl(l-u)},h=!0):(this.DEBUG&&ce("Contract creation: out of gas"),t.accessWitness?.revert(),f={...f,...ae(t.gasLimit)}),n=t.gasLimit-f.executionGasUsed,!f.exceptionError&&(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864))){const p=t.accessWitness.writeAccountHeader(t.to);n-=p,n<y?(this.DEBUG&&ce(`ContractCreateComplete access gas (${p}) caused OOG (-> ${n})`),t.accessWitness?.revert(),f={...f,...ae(t.gasLimit)}):(ce(`ContractCreateComplete access used (${p}) gas (-> ${n})`),f.executionGasUsed+=p)}if(!f.exceptionError&&f.returnValue!==void 0&&f.returnValue.length!==0){if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){const p=t.accessWitness.writeAccountCodeChunks(t.to,0,f.returnValue.length-1);n-=p,n<y?(this.DEBUG&&ce(`byteCodeWrite access gas (${p}) caused OOG (-> ${n})`),t.accessWitness?.revert(),f={...f,...ae(t.gasLimit)}):(ce(`byteCodeWrite access used (${p}) gas (-> ${n})`),t.accessWitness?.commit(),f.executionGasUsed+=p)}await this.stateManager.putCode(t.to,f.returnValue),this.DEBUG&&ce("Code saved on new contract creation")}else if(h&&!this.common.gteHardfork(O.Homestead)){const p=await this.stateManager.getAccount(t.to);await this.journal.putAccount(t.to,p??new We)}return t.depth===0&&this.postMessageCleanup(),{createdAddress:t.to,execResult:f}}async runInterpreter(t,n={}){let s=await this.stateManager.getAccount(t.to??At());s||(s=new We);const r={address:t.to??At(),caller:t.caller??At(),callData:t.data??Uint8Array.from([0]),callValue:t.value??y,code:t.code,isStatic:t.isStatic??!1,isCreate:t.isCreate??!1,depth:t.depth??0,gasPrice:this._tx.gasPrice,origin:this._tx.origin??t.caller??At(),block:this._block??Nr(),contract:s,codeAddress:t.codeAddress,gasRefund:t.gasRefund,chargeCodeAccesses:t.chargeCodeAccesses,blobVersionedHashes:t.blobVersionedHashes??[],accessWitness:t.accessWitness,createdAddresses:t.createdAddresses},i=new xu(this,this.stateManager,this.blockchain,r,t.gasLimit,this.journal,this.performanceLogger,this._optsCached.profiler);t.selfdestruct&&(i._result.selfdestruct=t.selfdestruct),t.createdAddresses&&(i._result.createdAddresses=t.createdAddresses);const o=await i.run(t.code,n);let a=i._result,c=t.gasLimit-o.runState.gasLeft;return o.exceptionError&&(o.exceptionError.error!==x.errorMessages.REVERT&&o.exceptionError.error!==x.errorMessages.INVALID_EOF_FORMAT&&(c=t.gasLimit),a={...a,logs:[],selfdestruct:new Set,createdAddresses:new Set}),t.accessWitness?.commit(),{...a,runState:{...o.runState,...a,...i._env},exceptionError:o.exceptionError,gas:o.runState?.gasLeft,executionGasUsed:c,gasRefund:o.runState.gasRefund,returnValue:a.returnValue??new Uint8Array(0)}}async runCall(t){let n;(t.depth===0||t.message===void 0)&&this._optsCached.profiler?.enabled===!0&&(n=this.performanceLogger.startTimer("Initialization"));let s=t.message,r;if(!s){this._block=t.block??Nr();const a=t.caller??At();this._tx={gasPrice:t.gasPrice??y,origin:t.origin??a};const c=t.value??y;t.skipBalance===!0&&(r=await this.stateManager.getAccount(a),r||(r=new We),r.balance<c&&(r.balance=c,await this.journal.putAccount(a,r))),s=new Xt({caller:a,gasLimit:t.gasLimit??BigInt(16777215),to:t.to,value:c,data:t.data,code:t.code,depth:t.depth,isCompiled:t.isCompiled,isStatic:t.isStatic,salt:t.salt,selfdestruct:t.selfdestruct??new Set,createdAddresses:t.createdAddresses??new Set,delegatecall:t.delegatecall,blobVersionedHashes:t.blobVersionedHashes})}s.depth===0&&(r||(r=await this.stateManager.getAccount(s.caller)),r||(r=new We),r.nonce++,await this.journal.putAccount(s.caller,r),this.DEBUG&&ce(`Update fromAccount (caller) nonce (-> ${r.nonce}))`)),await this._emit("beforeMessage",s),!s.to&&this.common.isActivatedEIP(2929)&&(s.code=s.data,this.journal.addWarmedAddress((await this._generateAddress(s)).bytes)),await this.journal.checkpoint(),this.common.isActivatedEIP(1153)&&this.transientStorage.checkpoint(),this.DEBUG&&(ce("-".repeat(100)),ce("message checkpoint"));let i;if(this.DEBUG){const{caller:a,gasLimit:c,to:f,value:l,delegatecall:u}=s;ce(`New message caller=${a} gasLimit=${c} to=${f?.toString()??"none"} value=${l} delegatecall=${u?"yes":"no"}`)}if(s.to?(this.DEBUG&&ce(`Message CALL execution (to: ${s.to})`),i=await this._executeCall(s)):(this.DEBUG&&ce("Message CREATE execution (to: undefined)"),i=await this._executeCreate(s)),this.DEBUG){const{executionGasUsed:a,exceptionError:c,returnValue:f}=i.execResult;ce(`Received message execResult: [ gasUsed=${a} exceptionError=${c?`'${c.error}'`:"none"} returnValue=${ci(f)} gasRefund=${i.execResult.gasRefund??0} ]`)}const o=i.execResult.exceptionError;return o&&o.error!==x.errorMessages.CODESTORE_OUT_OF_GAS&&(i.execResult.selfdestruct=new Set,i.execResult.createdAddresses=new Set,i.execResult.gasRefund=y),o&&!(this.common.hardfork()===O.Chainstart&&o.error===x.errorMessages.CODESTORE_OUT_OF_GAS)?(i.execResult.logs=[],await this.journal.revert(),this.common.isActivatedEIP(1153)&&this.transientStorage.revert(),this.DEBUG&&ce("message checkpoint reverted")):(await this.journal.commit(),this.common.isActivatedEIP(1153)&&this.transientStorage.commit(),this.DEBUG&&ce("message checkpoint committed")),await this._emit("afterMessage",i),s.depth===0&&this._optsCached.profiler?.enabled===!0&&this.performanceLogger.stopTimer(n,0),s.accessWitness?.commit(),i}async runCode(t){this._block=t.block??Nr(),this._tx={gasPrice:t.gasPrice??y,origin:t.origin??t.caller??At()};const n=new Xt({code:t.code,data:t.data,gasLimit:t.gasLimit??BigInt(16777215),to:t.to??At(),caller:t.caller,value:t.value,depth:t.depth,selfdestruct:t.selfdestruct??new Set,isStatic:t.isStatic,blobVersionedHashes:t.blobVersionedHashes});return this.runInterpreter(n,{pc:t.pc})}getPrecompile(t){return this.precompiles.get(Pe(t.bytes))}runPrecompile(t,n,s){if(typeof t!="function")throw L("Invalid precompile");const r={data:n,gasLimit:s,common:this.common,_EVM:this,_debug:this.DEBUG?Ll:void 0,stateManager:this.stateManager};return t(r)}async _loadCode(t){if(!t.code){const n=this.getPrecompile(t.codeAddress);if(n)t.code=n,t.isCompiled=!0;else{if(t.code=await this.stateManager.getCode(t.codeAddress),this.common.isActivatedEIP(7702)&&ge(t.code.slice(0,3),Na)){const s=new jt(t.code.slice(3,24));t.code=await this.stateManager.getCode(s),t.depth===0&&this.journal.addAlwaysWarmAddress(s.toString())}t.isCompiled=!1,t.chargeCodeAccesses=!0}}}async _generateAddress(t){let n;if(t.salt)n=id(t.caller.bytes,t.salt,t.code);else{let s=await this.stateManager.getAccount(t.caller);s||(s=new We);const r=s.nonce-Q;n=rd(t.caller.bytes,oe(r))}return new jt(n)}async _reduceSenderBalance(t,n){if(t.balance-=n.value,t.balance<y)throw new x(x.errorMessages.INSUFFICIENT_BALANCE);const s=this.journal.putAccount(n.caller,t);return this.DEBUG&&ce(`Reduced sender (${n.caller}) balance (-> ${t.balance})`),s}async _addToBalance(t,n){const s=t.balance+n.value;if(s>Df)throw new x(x.errorMessages.VALUE_OVERFLOW);t.balance=s,await this.journal.putAccount(n.to,t),this.DEBUG&&ce(`Added toAccount (${n.to}) balance (-> ${t.balance})`)}postMessageCleanup(){this.common.isActivatedEIP(1153)&&this.transientStorage.clear()}shallowCopy(){const t=this.common.copy();t.setHardfork(this.common.hardfork());const n={...this._optsCached,common:t,stateManager:this.stateManager.shallowCopy()};return n.stateManager.common=t,new zn(n)}getPerformanceLogs(){return this.performanceLogger.getLogs()}clearPerformanceLogs(){this.performanceLogger.clear()}}zn.supportedHardforks=[O.Chainstart,O.Homestead,O.Dao,O.TangerineWhistle,O.SpuriousDragon,O.Byzantium,O.Constantinople,O.Petersburg,O.Istanbul,O.MuirGlacier,O.Berlin,O.London,O.ArrowGlacier,O.GrayGlacier,O.MergeNetsplitBlock,O.Paris,O.Shanghai,O.Cancun,O.Prague,O.Osaka,O.Bpo1,O.Bpo2,O.Bpo3,O.Bpo4,O.Bpo5];cn("evm:binaryTree:aw");BigInt(1900);BigInt(200);BigInt(3e3);BigInt(500);BigInt(6200);class Dl{constructor(t){this.map=new Map,this.getStorage=t}async get(t,n){const s=Pe(t.bytes),r=this.map.get(s);if(r!==void 0){const o=Pe(n),a=r.get(o);if(a!==void 0)return a}const i=await this.getStorage(t,n);return this.put(t,n,i),i}put(t,n,s){const r=Pe(t.bytes);let i=this.map.get(r);i===void 0&&(i=new Map,this.map.set(r,i));const o=Pe(n);i.has(o)===!1&&i.set(o,s)}clear(){this.map=new Map}}async function Hl(e,t,n){const s=await e.getAccount(t)??new We;if(s.nonce=n.nonce??s.nonce,s.balance=n.balance??s.balance,s.storageRoot=n.storageRoot??s.storageRoot,s.codeHash=n.codeHash??s.codeHash,s.codeSize=n.codeSize??s.codeSize,e._debug!==void 0)for(const[r,i]of Object.entries(n))e._debug(`modifyAccountFields address=${t.toString()} ${r}=${i instanceof Uint8Array?Y(i):i} `);await e.putAccount(t,s)}class Ei{constructor(t={}){this.accountStack=[],this.codeStack=[],this.storageStack=[],this.checkpointSync(),this.originalStorageCache=new Dl(this.getStorage.bind(this)),this.common=t.common}topAccountStack(){return this.accountStack[this.accountStack.length-1]}topCodeStack(){return this.codeStack[this.codeStack.length-1]}topStorageStack(){return this.storageStack[this.storageStack.length-1]}checkpointSync(){const t=new Map(this.topAccountStack());for(const[n,s]of t){const r=s!==void 0?Object.assign(Object.create(Object.getPrototypeOf(s)),s):void 0;t.set(n,r)}this.accountStack.push(t),this.codeStack.push(new Map(this.topCodeStack())),this.storageStack.push(new Map(this.topStorageStack()))}async getAccount(t){return this.topAccountStack().get(t.toString())}async putAccount(t,n){this.topAccountStack().set(t.toString(),n)}async deleteAccount(t){this.topAccountStack().set(t.toString(),void 0)}async modifyAccountFields(t,n){await Hl(this,t,n)}async getCode(t){return this.topCodeStack().get(t.toString())??new Uint8Array(0)}async putCode(t,n){this.topCodeStack().set(t.toString(),n),await this.getAccount(t)===void 0&&await this.putAccount(t,new We),await this.modifyAccountFields(t,{codeHash:(this.common?.customCrypto.keccak256??Gt)(n)})}async getCodeSize(t){return(await this.getCode(t)).length}async getStorage(t,n){return this.topStorageStack().get(`${t.toString()}_${Y(n)}`)??new Uint8Array(0)}async putStorage(t,n,s){this.topStorageStack().set(`${t.toString()}_${Y(n)}`,s)}async clearStorage(){}async checkpoint(){this.checkpointSync()}async commit(){this.accountStack.splice(-2,1),this.codeStack.splice(-2,1),this.storageStack.splice(-2,1)}async revert(){this.accountStack.pop(),this.codeStack.pop(),this.storageStack.pop()}async flush(){}clearCaches(){}shallowCopy(){const t=new Ei({common:this.common});for(let n=0;n<this.accountStack.length;n++)t.accountStack.push(new Map(this.accountStack[n])),t.codeStack.push(new Map(this.codeStack[n])),t.storageStack.push(new Map(this.storageStack[n]));return t}getStateRoot(){throw L("Method not implemented.")}setStateRoot(){throw L("Method not implemented.")}hasStateRoot(){throw L("Method not implemented.")}}async function ko(e){const t=e??{};return t.bn254=new Gl,t.common===void 0&&(t.common=new Vr({chain:Or})),t.blockchain===void 0&&(t.blockchain=new cu),t.stateManager===void 0&&(t.stateManager=new Ei),new zn(t)}const Ml=(e,t)=>{const n=[];return e.substring(0,2)==="0x"&&n.push("Enter without 0x-prefix"),t!==void 0&&e.length!==Number(t)*2&&n.push(`${Number(t)} bytes expected (${e.length/2} bytes provided)`),Kn(`0x${e}`)||n.push("Hex value invalid"),n},Fl=(e,t,n)=>ha(`0x${e.value.substring(t,n)}`),gh=(e,t)=>_s(e).substring(2).padStart(t,"0"),bh=e=>e.length%2===0?e:`0${e}`,xh=(e,t,n,s)=>{let r=0;for(let i=0;i<t.value.length;i++){const o=r+Number(s.value[i])*2;t.value[i]=e.value.substring(r,o),n.value[i]!==void 0&&(n.value[i]=Fl(e,r,o)),r=o}},yh=(e,t,n,s)=>{for(let r=0;r<e.value.length;r++)n.value[r]===void 0?s.value[r]=BigInt(ye(`0x${e.value[r]}`).byteLength):s.value[r]=n.value[r],t.value[r]!==void 0&&(t.value[r]=ha(`0x${e.value[r]}`))},_h=e=>{let t="";for(let n=1;n<=e;n++)t+=n.toString().substring(0,2).padStart(2,"0");return t},$l={class:"value-input-{{ num }} border-blue-900 border-t-1 bg-clip-border pt-1.5 pb-0.5 pl-0.5 pr-0.5 mb-0.5"},Vl={class:"grid grid-cols-6 items-center"},ql={class:"font-bold text-xl col-span-1 text-blue-900"},zl={class:"group relative col-span-5"},Wl={class:"col-span-1 text-xs"},jl={class:"text-right font-mono col-span-5 text-xs mt-0.5 break-words w-full overflow-hidden"},Eh=an({__name:"PrecompileValueInput",props:ks({title:{},input:{type:Function},len:{},expectedLen:{},bigIntVal:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Ps(e,"modelValue"),n=e,s=Ys(()=>Ml(t?.value??"",n.expectedLen)),r=Ys(()=>s.value.length>0?"text-red-400":"text-slate-600"),i=Ys(()=>s.value.length>0?s.value.join(" | "):"");return(o,a)=>(Oe(),De("div",$l,[Ce("div",Vl,[Ce("p",ql,mt(o.title),1),Ce("span",zl,[Yr(Ce("input",{onInput:a[0]||(a[0]=(...c)=>o.input&&o.input(...c)),"onUpdate:modelValue":a[1]||(a[1]=c=>t.value=c),class:Ro([r.value,"text-right font-mono text-xs bg-blue-50 rounded-xs p-0.5 w-full"])},null,34),[[Lo,t.value]]),As(Ho,{tooltip:i.value},null,8,["tooltip"])]),Ce("p",Wl,mt(o.len)+" Bytes",1),Ce("p",jl,mt(o.bigIntVal),1)])]))}}),Zl={class:"text-xs bg-white p-1 text-blue-900 rounded-xs"},Kl={key:0,class:"text-2xl font-bold text-white mt-2.5"},Yl={key:1,class:"text-xs font-bold font-mono text-white mt-1 break-words w-full overflow-hidden"},Xl={key:2,class:"text-xl font-bold text-white mt-4.5"},wh=an({__name:"PrecompileResultC",props:ks(["title","left"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Ps(e,"modelValue");return(n,s)=>(Oe(),De("div",{class:Ro(["bg-blue-900 rounded-sm p-2.5",[e.left?"text-left pre-hardfork":"text-right post-hardfork"]])},[Ce("span",Zl,mt(e.title),1),t.value?(Oe(),De("p",Kl,mt(t.value?.executionGasUsed)+" Gas ",1)):Uo("",!0),t.value?(Oe(),De("p",Yl," Result: "+mt(t.value?Cr(Y)(t.value.returnValue):""),1)):(Oe(),De("p",Xl,"Not available"))],2))}}),Jl=["value"],Ah=an({__name:"PrecompileExamplesC",props:ks({examples:{},change:{type:Function}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Ps(e,"modelValue");return(n,s)=>Yr((Oe(),De("select",{"onUpdate:modelValue":s[0]||(s[0]=r=>t.value=r),class:"examples-select text-blue-900 text-xs border-1 pl-1 pr-1 pt-0.5 pb-0.5 mb-0.5 rounded-sm",onChange:s[1]||(s[1]=(...r)=>n.change&&n.change(...r))},[s[2]||(s[2]=Ce("option",{disabled:"",value:""},"Examples",-1)),(Oe(!0),De(Sr,null,Do(n.examples,(r,i)=>(Oe(),De("option",{key:i,value:i},mt(r.title),9,Jl))),128))],544)),[[yc,t.value]])}}),Ql=["rows"],Ih=an({__name:"PrecompileDataInput",props:ks(["rows","formChange"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Ps(e,"modelValue");return(n,s)=>Yr((Oe(),De("textarea",{onInput:s[0]||(s[0]=(...r)=>e.formChange&&e.formChange(...r)),rows:e.rows,"onUpdate:modelValue":s[1]||(s[1]=r=>t.value=r),class:"block w-full mt-1.5 mb-2 font-mono text-xs rounded-sm text-slate-600 bg-blue-50 p-1"},null,40,Ql)),[[Lo,t.value]])}});function eh(e,t){return Oe(),De("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[Ce("path",{"fill-rule":"evenodd",d:"M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z","clip-rule":"evenodd"})])}const th={class:"group relative inline-block"},Po=an({__name:"ButtonC",props:{icon:Object,tooltip:String},setup(e){return(t,n)=>(Oe(),De("span",th,[(Oe(),_c(Ec(e.icon),{class:"size-4 inline align-baseline border-blue-900 border-1 text-blue-900 p-0.5 rounded-xs"})),As(Ho,{tooltip:e.tooltip},null,8,["tooltip"])]))}}),nh=["id"],sh={class:"grid grid-cols-2 mb-3"},rh={class:"font-bold text-xl text-blue-900"},ih={class:"flex justify-end items-baseline"},oh=["href"],ah={class:"text-xl text-blue-900 ml-2"},ch={class:"text-blue-900 font-mono text-xs mb-6"},Bh=an({__name:"EIPC",props:["title","eip","shareURL"],setup(e){return(t,n)=>(Oe(),De("div",{id:"eip-"+e.eip+"-precompile-c",class:"eip-precompile-c bg-blue-200 bg-clip-border p-4 rounded-xl"},[Ce("div",sh,[Ce("h3",rh,mt(e.title),1),Ce("div",ih,[Ce("a",{href:"#",onClick:n[0]||(n[0]=wc((...s)=>e.shareURL&&e.shareURL(...s),["prevent"])),class:"share-url-button mr-1.5"},[As(Po,{icon:Cr(eh),tooltip:"Open Shareable URL (with values)"},null,8,["icon"])]),Ce("a",{href:"https://eips.ethereum.org/EIPS/eip-"+e.eip,target:"_blank",class:"visit-eip-button mr-1"},[As(Po,{icon:Cr(Ic),tooltip:"Visit EIP Specification"},null,8,["icon"])],8,oh),Ce("h3",ah,"EIP-"+mt(e.eip),1)])]),Ce("div",ch,[Ai(t.$slots,"description")]),Ai(t.$slots,"content")],8,nh))}}),fh={class:"text-right text-xs mt-7"},dh=["href"],uh={key:0},vh=an({__name:"PoweredByC",props:{poweredBy:{}},setup(e){return(t,n)=>(Oe(),De("div",fh,[n[0]||(n[0]=Ac(" Powered by: ",-1)),(Oe(!0),De(Sr,null,Do(t.poweredBy,(s,r)=>(Oe(),De(Sr,{key:s.name},[Ce("a",{href:s.href,class:"text-blue-900 font-bold",target:"_blank",rel:"noopener"},mt(s.name),9,dh),r<t.poweredBy.length-1?(Oe(),De("span",uh," | ")):Uo("",!0)],64))),128))]))}});async function Nh(e,t,n,s,r,i){const o=BigInt(5e6),a=new Vr({chain:Or,hardfork:t}),c=await ko({common:a}),f=Gs(a).get(s.padStart(40,"0")),l=new Vr({chain:Or,hardfork:n}),u=await ko({common:l}),d=Gs(l).get(s.padStart(40,"0"));if(f){const p={data:ye(`0x${e}`),gasLimit:o,common:a,_EVM:c};r.value=await f(p)}const h={data:ye(`0x${e}`),gasLimit:o,common:l,_EVM:u};i.value=await d(h)}export{O as H,Bh as _,Ah as a,Ih as b,_h as c,Eh as d,wh as e,vh as f,Fl as g,xh as h,Ml as i,bh as p,Nh as r,gh as t,yh as v};
