import{d as ei,p as ti,q as si,s as nn,b as vs,o as Yt,g as vt,t as Jt,v as la,a as ha,x as ma,f as Ts,c as pa,w as ga,i as ba,u as ds}from"./index-BDmlhFEC.js";import{k as Pt,l as wt,m as de,n as Ut,o as le,p as Vn,q as ni,r as ts,s as Rs,t as qs,u as as,E as N,v as ke,w as ri,x as _a,y as cr,z as xa,A as fs,B as us,C as pe,D as Rt,F as De,G as z,H as j,I as oe,J as se,K as ii,L as Ea,M as ya,N as Ze,O as Ia,Q as dr,R as Gs,S as Aa,T as rn,U as Te,V as $n,h as wa,W as Ba,X as ls,Y as ai,e as Ca,Z as Na,P as Oa,$ as va}from"./blobs-BeWBpyBh.js";import{_ as Ta}from"./TooltipC.vue_vue_type_script_setup_true_lang-BoZKkDQ8.js";const hs=BigInt(2**32-1),fr=BigInt(32);function Ga(t,e=!1){return e?{h:Number(t&hs),l:Number(t>>fr&hs)}:{h:Number(t>>fr&hs)|0,l:Number(t&hs)|0}}function ka(t,e=!1){const s=t.length;let n=new Uint32Array(s),r=new Uint32Array(s);for(let i=0;i<s;i++){const{h:a,l:o}=Ga(t[i],e);[n[i],r[i]]=[a,o]}return[n,r]}const La=(t,e,s)=>t<<s|e>>>32-s,Sa=(t,e,s)=>e<<s|t>>>32-s,Ra=(t,e,s)=>e<<s-32|t>>>64-s,Pa=(t,e,s)=>t<<s-32|e>>>64-s;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qn=BigInt(0),Ps=BigInt(1);function Us(t,e=""){if(typeof t!="boolean"){const s=e&&`"${e}" `;throw new Error(s+"expected boolean, got type="+typeof t)}return t}function oi(t){if(typeof t=="bigint"){if(!ks(t))throw new Error("positive bigint expected, got "+t)}else wt(t);return t}function Dt(t,e=""){if(!Number.isSafeInteger(t)){const s=e&&`"${e}" `;throw new Error(s+"expected safe integer, got type="+typeof t)}}function ms(t){const e=oi(t).toString(16);return e.length&1?"0"+e:e}function ci(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?qn:BigInt("0x"+t)}function Ve(t){return ci(Pt(t))}function di(t){return ci(Pt(ui(de(t)).reverse()))}function Ae(t,e){wt(e),t=oi(t);const s=Ut(t.toString(16).padStart(e*2,"0"));if(s.length!==e)throw new Error("number too large");return s}function fi(t,e){return Ae(t,e).reverse()}function ui(t){return Uint8Array.from(t)}function zs(t){return Uint8Array.from(t,(e,s)=>{const n=e.charCodeAt(0);if(e.length!==1||n>127)throw new Error(`string contains non-ASCII character "${t[s]}" with code ${n} at position ${s}`);return n})}const ks=t=>typeof t=="bigint"&&qn<=t;function Ua(t,e,s){return ks(t)&&ks(e)&&ks(s)&&e<=t&&t<s}function Da(t,e,s,n){if(!Ua(e,s,n))throw new Error("expected valid "+t+": "+s+" <= n < "+n+", got "+e)}function ss(t){let e;for(e=0;t>qn;t>>=Ps,e+=1);return e}function Ma(t,e){return t>>BigInt(e)&Ps}const Ht=t=>(Ps<<BigInt(t))-Ps;function Ha(t,e,s){if(wt(t,"hashLen"),wt(e,"qByteLen"),typeof s!="function")throw new Error("hmacFn must be a function");const n=b=>new Uint8Array(b),r=Uint8Array.of(),i=Uint8Array.of(0),a=Uint8Array.of(1),o=1e3;let c=n(t),d=n(t),f=0;const u=()=>{c.fill(1),d.fill(0),f=0},l=(...b)=>s(d,le(c,...b)),h=(b=r)=>{d=l(i,b),c=l(),b.length!==0&&(d=l(a,b),c=l())},m=()=>{if(f++>=o)throw new Error("drbg: tried max amount of iterations");let b=0;const w=[];for(;b<e;){c=l();const G=c.slice();w.push(G),b+=c.length}return le(...w)};return(b,w)=>{u(),h(b);let G;for(;!(G=w(m()));)h();return u(),G}}function Ws(t,e={},s={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(i,a,o){const c=t[i];if(o&&c===void 0)return;const d=typeof c;if(d!==a||c===null)throw new Error(`param "${i}" is invalid: expected ${a}, got ${d}`)}const r=(i,a)=>Object.entries(i).forEach(([o,c])=>n(o,c,a));r(e,!1),r(s,!0)}const mt=()=>{throw new Error("not implemented")};function On(t){const e=new WeakMap;return(s,...n)=>{const r=e.get(s);if(r!==void 0)return r;const i=t(s,...n);return e.set(s,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ue=BigInt(0),Le=BigInt(1),Et=BigInt(2),li=BigInt(3),hi=BigInt(4),mi=BigInt(5),Fa=BigInt(7),pi=BigInt(8),Va=BigInt(9),gi=BigInt(16);function Fe(t,e){const s=t%e;return s>=Ue?s:e+s}function Me(t,e,s){let n=t;for(;e-- >Ue;)n*=n,n%=s;return n}function ur(t,e){if(t===Ue)throw new Error("invert: expected non-zero number");if(e<=Ue)throw new Error("invert: expected positive modulus, got "+e);let s=Fe(t,e),n=e,r=Ue,i=Le;for(;s!==Ue;){const o=n/s,c=n%s,d=r-i*o;n=s,s=c,r=i,i=d}if(n!==Le)throw new Error("invert: does not exist");return Fe(r,e)}function zn(t,e,s){if(!t.eql(t.sqr(e),s))throw new Error("Cannot find square root")}function bi(t,e){const s=(t.ORDER+Le)/hi,n=t.pow(e,s);return zn(t,n,e),n}function $a(t,e){const s=(t.ORDER-mi)/pi,n=t.mul(e,Et),r=t.pow(n,s),i=t.mul(e,r),a=t.mul(t.mul(i,Et),r),o=t.mul(i,t.sub(a,t.ONE));return zn(t,o,e),o}function qa(t){const e=Ct(t),s=_i(t),n=s(e,e.neg(e.ONE)),r=s(e,n),i=s(e,e.neg(n)),a=(t+Fa)/gi;return(o,c)=>{let d=o.pow(c,a),f=o.mul(d,n);const u=o.mul(d,r),l=o.mul(d,i),h=o.eql(o.sqr(f),c),m=o.eql(o.sqr(u),c);d=o.cmov(d,f,h),f=o.cmov(l,u,m);const _=o.eql(o.sqr(f),c),b=o.cmov(d,f,_);return zn(o,b,c),b}}function _i(t){if(t<li)throw new Error("sqrt is not defined for small field");let e=t-Le,s=0;for(;e%Et===Ue;)e/=Et,s++;let n=Et;const r=Ct(t);for(;Ds(r,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(s===1)return bi;let i=r.pow(n,e);const a=(e+Le)/Et;return function(c,d){if(c.is0(d))return d;if(Ds(c,d)!==1)throw new Error("Cannot find square root");let f=s,u=c.mul(c.ONE,i),l=c.pow(d,e),h=c.pow(d,a);for(;!c.eql(l,c.ONE);){if(c.is0(l))return c.ZERO;let m=1,_=c.sqr(l);for(;!c.eql(_,c.ONE);)if(m++,_=c.sqr(_),m===f)throw new Error("Cannot find square root");const b=Le<<BigInt(f-m-1),w=c.pow(u,b);f=m,u=c.sqr(w),l=c.mul(l,u),h=c.mul(h,w)}return h}}function za(t){return t%hi===li?bi:t%pi===mi?$a:t%gi===Va?qa(t):_i(t)}const Wa=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function xi(t){const e={ORDER:"bigint",BYTES:"number",BITS:"number"},s=Wa.reduce((n,r)=>(n[r]="function",n),e);return Ws(t,s),t}function Zs(t,e,s){if(s<Ue)throw new Error("invalid exponent, negatives unsupported");if(s===Ue)return t.ONE;if(s===Le)return e;let n=t.ONE,r=e;for(;s>Ue;)s&Le&&(n=t.mul(n,r)),r=t.sqr(r),s>>=Le;return n}function Bt(t,e,s=!1){const n=new Array(e.length).fill(s?t.ZERO:void 0),r=e.reduce((a,o,c)=>t.is0(o)?a:(n[c]=a,t.mul(a,o)),t.ONE),i=t.inv(r);return e.reduceRight((a,o,c)=>t.is0(o)?a:(n[c]=t.mul(a,n[c]),t.mul(a,o)),i),n}function Ds(t,e){const s=(t.ORDER-Le)/Et,n=t.pow(e,s),r=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),a=t.eql(n,t.neg(t.ONE));if(!r&&!i&&!a)throw new Error("invalid Legendre symbol result");return r?1:i?0:-1}function Za(t,e){e!==void 0&&wt(e);const s=e!==void 0?e:t.toString(2).length,n=Math.ceil(s/8);return{nBitLength:s,nByteLength:n}}class ja{ORDER;BITS;BYTES;isLE;ZERO=Ue;ONE=Le;_lengths;_sqrt;_mod;constructor(e,s={}){if(e<=Ue)throw new Error("invalid field: expected ORDER > 0, got "+e);let n;this.isLE=!1,s!=null&&typeof s=="object"&&(typeof s.BITS=="number"&&(n=s.BITS),typeof s.sqrt=="function"&&(this.sqrt=s.sqrt),typeof s.isLE=="boolean"&&(this.isLE=s.isLE),s.allowedLengths&&(this._lengths=s.allowedLengths?.slice()),typeof s.modFromBytes=="boolean"&&(this._mod=s.modFromBytes));const{nBitLength:r,nByteLength:i}=Za(e,n);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=e,this.BITS=r,this.BYTES=i,this._sqrt=void 0,Object.preventExtensions(this)}create(e){return Fe(e,this.ORDER)}isValid(e){if(typeof e!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof e);return Ue<=e&&e<this.ORDER}is0(e){return e===Ue}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}isOdd(e){return(e&Le)===Le}neg(e){return Fe(-e,this.ORDER)}eql(e,s){return e===s}sqr(e){return Fe(e*e,this.ORDER)}add(e,s){return Fe(e+s,this.ORDER)}sub(e,s){return Fe(e-s,this.ORDER)}mul(e,s){return Fe(e*s,this.ORDER)}pow(e,s){return Zs(this,e,s)}div(e,s){return Fe(e*ur(s,this.ORDER),this.ORDER)}sqrN(e){return e*e}addN(e,s){return e+s}subN(e,s){return e-s}mulN(e,s){return e*s}inv(e){return ur(e,this.ORDER)}sqrt(e){return this._sqrt||(this._sqrt=za(this.ORDER)),this._sqrt(this,e)}toBytes(e){return this.isLE?fi(e,this.BYTES):Ae(e,this.BYTES)}fromBytes(e,s=!1){de(e);const{_lengths:n,BYTES:r,isLE:i,ORDER:a,_mod:o}=this;if(n){if(!n.includes(e.length)||e.length>r)throw new Error("Field.fromBytes: expected "+n+" bytes, got "+e.length);const d=new Uint8Array(r);d.set(e,i?0:d.length-e.length),e=d}if(e.length!==r)throw new Error("Field.fromBytes: expected "+r+" bytes, got "+e.length);let c=i?di(e):Ve(e);if(o&&(c=Fe(c,a)),!s&&!this.isValid(c))throw new Error("invalid field element: outside of range 0..ORDER");return c}invertBatch(e){return Bt(this,e)}cmov(e,s,n){return n?s:e}}function Ct(t,e={}){return new ja(t,e)}function Ei(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Wn(t){const e=Ei(t);return e+Math.ceil(e/2)}function yi(t,e,s=!1){de(t);const n=t.length,r=Ei(e),i=Wn(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const a=s?di(t):Ve(t),o=Fe(a,e-Le)+Le;return s?fi(o,r):Ae(o,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mt=BigInt(0),yt=BigInt(1);function Ms(t,e){const s=e.negate();return t?s:e}function Hs(t,e){const s=Bt(t.Fp,e.map(n=>n.Z));return e.map((n,r)=>t.fromAffine(n.toAffine(s[r])))}function Ii(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function an(t,e){Ii(t,e);const s=Math.ceil(e/t)+1,n=2**(t-1),r=2**t,i=Ht(t),a=BigInt(t);return{windows:s,windowSize:n,mask:i,maxNumber:r,shiftBy:a}}function lr(t,e,s){const{windowSize:n,mask:r,maxNumber:i,shiftBy:a}=s;let o=Number(t&r),c=t>>a;o>n&&(o-=i,c+=yt);const d=e*n,f=d+Math.abs(o)-1,u=o===0,l=o<0,h=e%2!==0;return{nextN:c,offset:f,isZero:u,isNeg:l,isNegF:h,offsetF:d}}const on=new WeakMap,Ai=new WeakMap;function cn(t){return Ai.get(t)||1}function hr(t){if(t!==Mt)throw new Error("invalid wNAF")}class Ya{BASE;ZERO;Fn;bits;constructor(e,s){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=s}_unsafeLadder(e,s,n=this.ZERO){let r=e;for(;s>Mt;)s&yt&&(n=n.add(r)),r=r.double(),s>>=yt;return n}precomputeWindow(e,s){const{windows:n,windowSize:r}=an(s,this.bits),i=[];let a=e,o=a;for(let c=0;c<n;c++){o=a,i.push(o);for(let d=1;d<r;d++)o=o.add(a),i.push(o);a=o.double()}return i}wNAF(e,s,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let r=this.ZERO,i=this.BASE;const a=an(e,this.bits);for(let o=0;o<a.windows;o++){const{nextN:c,offset:d,isZero:f,isNeg:u,isNegF:l,offsetF:h}=lr(n,o,a);n=c,f?i=i.add(Ms(l,s[h])):r=r.add(Ms(u,s[d]))}return hr(n),{p:r,f:i}}wNAFUnsafe(e,s,n,r=this.ZERO){const i=an(e,this.bits);for(let a=0;a<i.windows&&n!==Mt;a++){const{nextN:o,offset:c,isZero:d,isNeg:f}=lr(n,a,i);if(n=o,!d){const u=s[c];r=r.add(f?u.negate():u)}}return hr(n),r}getPrecomputes(e,s,n){let r=on.get(s);return r||(r=this.precomputeWindow(s,e),e!==1&&(typeof n=="function"&&(r=n(r)),on.set(s,r))),r}cached(e,s,n){const r=cn(e);return this.wNAF(r,this.getPrecomputes(r,e,n),s)}unsafe(e,s,n,r){const i=cn(e);return i===1?this._unsafeLadder(e,s,r):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),s,r)}createCache(e,s){Ii(s,this.bits),Ai.set(e,s),on.delete(e)}hasCache(e){return cn(e)!==1}}function Ka(t,e,s,n){let r=e,i=t.ZERO,a=t.ZERO;for(;s>Mt||n>Mt;)s&yt&&(i=i.add(r)),n&yt&&(a=a.add(r)),r=r.double(),s>>=yt,n>>=yt;return{p1:i,p2:a}}function mr(t,e,s){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return xi(e),e}else return Ct(t,{isLE:s})}function Xa(t,e,s={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const d=e[c];if(!(typeof d=="bigint"&&d>Mt))throw new Error(`CURVE.${c} must be positive bigint`)}const r=mr(e.p,s.Fp,n),i=mr(e.n,s.Fn,n),o=["Gx","Gy","a","b"];for(const c of o)if(!r.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:r,Fn:i}}function Ja(t,e){return function(n){const r=t(n);return{secretKey:r,publicKey:e(r)}}}const Qa=Ve;function ut(t,e){if(Dt(t),Dt(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const s=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)s[n]=t&255,t>>>=8;return new Uint8Array(s)}function eo(t,e){const s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t[n]^e[n];return s}function wi(t){if(!Vn(t)&&typeof t!="string")throw new Error("DST must be Uint8Array or ascii string");return typeof t=="string"?zs(t):t}function to(t,e,s,n){de(t),Dt(s),e=wi(e),e.length>255&&(e=n(le(zs("H2C-OVERSIZE-DST-"),e)));const{outputLen:r,blockLen:i}=n,a=Math.ceil(s/r);if(s>65535||a>255)throw new Error("expand_message_xmd: invalid lenInBytes");const o=le(e,ut(e.length,1)),c=ut(0,i),d=ut(s,2),f=new Array(a),u=n(le(c,t,d,ut(0,1),o));f[0]=n(le(u,ut(1,1),o));for(let h=1;h<=a;h++){const m=[eo(u,f[h-1]),ut(h+1,1),o];f[h]=n(le(...m))}return le(...f).slice(0,s)}function so(t,e,s,n,r){if(de(t),Dt(s),e=wi(e),e.length>255){const i=Math.ceil(2*n/8);e=r.create({dkLen:i}).update(zs("H2C-OVERSIZE-DST-")).update(e).digest()}if(s>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return r.create({dkLen:s}).update(t).update(ut(s,2)).update(e).update(ut(e.length,1)).digest()}function dn(t,e,s){Ws(s,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:n,k:r,m:i,hash:a,expand:o,DST:c}=s;Dt(a.outputLen,"valid hash"),de(t),Dt(e);const d=n.toString(2).length,f=Math.ceil((d+r)/8),u=e*i*f;let l;if(o==="xmd")l=to(t,c,u,a);else if(o==="xof")l=so(t,c,u,r,a);else if(o==="_internal_pass")l=t;else throw new Error('expand must be "xmd" or "xof"');const h=new Array(e);for(let m=0;m<e;m++){const _=new Array(i);for(let b=0;b<i;b++){const w=f*(b+m*i),G=l.subarray(w,w+f);_[b]=Fe(Qa(G),n)}h[m]=_}return h}function Bi(t,e){const s=e.map(n=>Array.from(n).reverse());return(n,r)=>{const[i,a,o,c]=s.map(u=>u.reduce((l,h)=>t.add(t.mul(l,n),h))),[d,f]=Bt(t,[a,c],!0);return n=t.mul(i,d),r=t.mul(r,t.mul(o,f)),{x:n,y:r}}}const no=zs("HashToScalar-");function pr(t,e,s){if(typeof e!="function")throw new Error("mapToCurve() must be defined");function n(i){return t.fromAffine(e(i))}function r(i){const a=i.clearCofactor();return a.equals(t.ZERO)?t.ZERO:(a.assertValidity(),a)}return{defaults:Object.freeze(s),Point:t,hashToCurve(i,a){const o=Object.assign({},s,a),c=dn(i,2,o),d=n(c[0]),f=n(c[1]);return r(d.add(f))},encodeToCurve(i,a){const o=s.encodeDST?{DST:s.encodeDST}:{},c=Object.assign({},s,o,a),d=dn(i,1,c),f=n(d[0]);return r(f)},mapToCurve(i){if(s.m===1){if(typeof i!="bigint")throw new Error("expected bigint (m=1)");return r(n([i]))}if(!Array.isArray(i))throw new Error("expected array of bigints");for(const a of i)if(typeof a!="bigint")throw new Error("expected array of bigints");return r(n(i))},hashToScalar(i,a){const o=t.Fn.ORDER,c=Object.assign({},s,{p:o,m:1,DST:no},a);return dn(i,1,c)[0][0]}}}class Ci{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(e,s){if(ni(e),de(s,void 0,"key"),this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,r=new Uint8Array(n);r.set(s.length>n?e.create().update(s).digest():s);for(let i=0;i<r.length;i++)r[i]^=54;this.iHash.update(r),this.oHash=e.create();for(let i=0;i<r.length;i++)r[i]^=106;this.oHash.update(r),ts(r)}update(e){return Rs(this),this.iHash.update(e),this}digestInto(e){Rs(this),de(e,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||=Object.create(Object.getPrototypeOf(this),{});const{oHash:s,iHash:n,finished:r,destroyed:i,blockLen:a,outputLen:o}=this;return e=e,e.finished=r,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=s._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ni=(t,e,s)=>new Ci(t,e).update(s).digest();Ni.create=(t,e)=>new Ci(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gr=(t,e)=>(t+(t>=0?e:-e)/Xe)/e;function ro(t,e,s){const[[n,r],[i,a]]=e,o=gr(a*t,s),c=gr(-r*t,s);let d=t-o*n-c*i,f=-o*r-c*a;const u=d<je,l=f<je;u&&(d=-d),l&&(f=-f);const h=Ht(Math.ceil(ss(s)/2))+Ce;if(d<je||d>=h||f<je||f>=h)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:u,k1:d,k2neg:l,k2:f}}function vn(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function fn(t,e){const s={};for(let n of Object.keys(e))s[n]=t[n]===void 0?e[n]:t[n];return Us(s.lowS,"lowS"),Us(s.prehash,"prehash"),s.format!==void 0&&vn(s.format),s}class io extends Error{constructor(e=""){super(e)}}const lt={Err:io,_tlv:{encode:(t,e)=>{const{Err:s}=lt;if(t<0||t>256)throw new s("tlv.encode: wrong tag");if(e.length&1)throw new s("tlv.encode: unpadded data");const n=e.length/2,r=ms(n);if(r.length/2&128)throw new s("tlv.encode: long form length too big");const i=n>127?ms(r.length/2|128):"";return ms(t)+i+r+e},decode(t,e){const{Err:s}=lt;let n=0;if(t<0||t>256)throw new s("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new s("tlv.decode: wrong tlv");const r=e[n++],i=!!(r&128);let a=0;if(!i)a=r;else{const c=r&127;if(!c)throw new s("tlv.decode(long): indefinite length not supported");if(c>4)throw new s("tlv.decode(long): byte length is too big");const d=e.subarray(n,n+c);if(d.length!==c)throw new s("tlv.decode: length bytes not complete");if(d[0]===0)throw new s("tlv.decode(long): zero leftmost byte");for(const f of d)a=a<<8|f;if(n+=c,a<128)throw new s("tlv.decode(long): not minimal encoding")}const o=e.subarray(n,n+a);if(o.length!==a)throw new s("tlv.decode: wrong value length");return{v:o,l:e.subarray(n+a)}}},_int:{encode(t){const{Err:e}=lt;if(t<je)throw new e("integer: negative integers are not allowed");let s=ms(t);if(Number.parseInt(s[0],16)&8&&(s="00"+s),s.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return s},decode(t){const{Err:e}=lt;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Ve(t)}},toSig(t){const{Err:e,_int:s,_tlv:n}=lt,r=de(t,void 0,"signature"),{v:i,l:a}=n.decode(48,r);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:o,l:c}=n.decode(2,i),{v:d,l:f}=n.decode(2,c);if(f.length)throw new e("invalid signature: left bytes after parsing");return{r:s.decode(o),s:s.decode(d)}},hexFromSig(t){const{_tlv:e,_int:s}=lt,n=e.encode(2,s.encode(t.r)),r=e.encode(2,s.encode(t.s)),i=n+r;return e.encode(48,i)}},je=BigInt(0),Ce=BigInt(1),Xe=BigInt(2),kt=BigInt(3),Tn=BigInt(4);function Ft(t,e={}){const s=Xa("weierstrass",t,e),{Fp:n,Fn:r}=s;let i=s.CURVE;const{h:a,n:o}=i;Ws(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object"});const{endo:c}=e;if(c&&(!n.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const d=Ti(n,r);function f(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function u(F,C,B){const{x:A,y:T}=C.toAffine(),L=n.toBytes(A);if(Us(B,"isCompressed"),B){f();const R=!n.isOdd(T);return le(Oi(R),L)}else return le(Uint8Array.of(4),L,n.toBytes(T))}function l(F){de(F,void 0,"Point");const{publicKey:C,publicKeyUncompressed:B}=d,A=F.length,T=F[0],L=F.subarray(1);if(A===C&&(T===2||T===3)){const R=n.fromBytes(L);if(!n.isValid(R))throw new Error("bad point: is not on curve, wrong x");const D=_(R);let I;try{I=n.sqrt(D)}catch(fe){const ee=fe instanceof Error?": "+fe.message:"";throw new Error("bad point: is not on curve, sqrt error"+ee)}f();const U=n.isOdd(I);return(T&1)===1!==U&&(I=n.neg(I)),{x:R,y:I}}else if(A===B&&T===4){const R=n.BYTES,D=n.fromBytes(L.subarray(0,R)),I=n.fromBytes(L.subarray(R,R*2));if(!b(D,I))throw new Error("bad point: is not on curve");return{x:D,y:I}}else throw new Error(`bad point: got length ${A}, expected compressed=${C} or uncompressed=${B}`)}const h=e.toBytes||u,m=e.fromBytes||l;function _(F){const C=n.sqr(F),B=n.mul(C,F);return n.add(n.add(B,n.mul(F,i.a)),i.b)}function b(F,C){const B=n.sqr(C),A=_(F);return n.eql(B,A)}if(!b(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const w=n.mul(n.pow(i.a,kt),Tn),G=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(w,G)))throw new Error("bad curve params: a or b");function k(F,C,B=!1){if(!n.isValid(C)||B&&n.is0(C))throw new Error(`bad point coordinate ${F}`);return C}function O(F){if(!(F instanceof v))throw new Error("Weierstrass Point expected")}function Z(F){if(!c||!c.basises)throw new Error("no endo");return ro(F,c.basises,r.ORDER)}const X=On((F,C)=>{const{X:B,Y:A,Z:T}=F;if(n.eql(T,n.ONE))return{x:B,y:A};const L=F.is0();C==null&&(C=L?n.ONE:n.inv(T));const R=n.mul(B,C),D=n.mul(A,C),I=n.mul(T,C);if(L)return{x:n.ZERO,y:n.ZERO};if(!n.eql(I,n.ONE))throw new Error("invZ was invalid");return{x:R,y:D}}),H=On(F=>{if(F.is0()){if(e.allowInfinityPoint&&!n.is0(F.Y))return;throw new Error("bad point: ZERO")}const{x:C,y:B}=F.toAffine();if(!n.isValid(C)||!n.isValid(B))throw new Error("bad point: x or y not field elements");if(!b(C,B))throw new Error("bad point: equation left != right");if(!F.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function W(F,C,B,A,T){return B=new v(n.mul(B.X,F),B.Y,B.Z),C=Ms(A,C),B=Ms(T,B),C.add(B)}class v{static BASE=new v(i.Gx,i.Gy,n.ONE);static ZERO=new v(n.ZERO,n.ONE,n.ZERO);static Fp=n;static Fn=r;X;Y;Z;constructor(C,B,A){this.X=k("x",C),this.Y=k("y",B,!0),this.Z=k("z",A),Object.freeze(this)}static CURVE(){return i}static fromAffine(C){const{x:B,y:A}=C||{};if(!C||!n.isValid(B)||!n.isValid(A))throw new Error("invalid affine point");if(C instanceof v)throw new Error("projective point not allowed");return n.is0(B)&&n.is0(A)?v.ZERO:new v(B,A,n.ONE)}static fromBytes(C){const B=v.fromAffine(m(de(C,void 0,"point")));return B.assertValidity(),B}static fromHex(C){return v.fromBytes(Ut(C))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(C=8,B=!0){return M.createCache(this,C),B||this.multiply(kt),this}assertValidity(){H(this)}hasEvenY(){const{y:C}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(C)}equals(C){O(C);const{X:B,Y:A,Z:T}=this,{X:L,Y:R,Z:D}=C,I=n.eql(n.mul(B,D),n.mul(L,T)),U=n.eql(n.mul(A,D),n.mul(R,T));return I&&U}negate(){return new v(this.X,n.neg(this.Y),this.Z)}double(){const{a:C,b:B}=i,A=n.mul(B,kt),{X:T,Y:L,Z:R}=this;let D=n.ZERO,I=n.ZERO,U=n.ZERO,V=n.mul(T,T),fe=n.mul(L,L),ee=n.mul(R,R),J=n.mul(T,L);return J=n.add(J,J),U=n.mul(T,R),U=n.add(U,U),D=n.mul(C,U),I=n.mul(A,ee),I=n.add(D,I),D=n.sub(fe,I),I=n.add(fe,I),I=n.mul(D,I),D=n.mul(J,D),U=n.mul(A,U),ee=n.mul(C,ee),J=n.sub(V,ee),J=n.mul(C,J),J=n.add(J,U),U=n.add(V,V),V=n.add(U,V),V=n.add(V,ee),V=n.mul(V,J),I=n.add(I,V),ee=n.mul(L,R),ee=n.add(ee,ee),V=n.mul(ee,J),D=n.sub(D,V),U=n.mul(ee,fe),U=n.add(U,U),U=n.add(U,U),new v(D,I,U)}add(C){O(C);const{X:B,Y:A,Z:T}=this,{X:L,Y:R,Z:D}=C;let I=n.ZERO,U=n.ZERO,V=n.ZERO;const fe=i.a,ee=n.mul(i.b,kt);let J=n.mul(B,L),he=n.mul(A,R),ye=n.mul(T,D),Ye=n.add(B,A),me=n.add(L,R);Ye=n.mul(Ye,me),me=n.add(J,he),Ye=n.sub(Ye,me),me=n.add(B,T);let we=n.add(L,D);return me=n.mul(me,we),we=n.add(J,ye),me=n.sub(me,we),we=n.add(A,T),I=n.add(R,D),we=n.mul(we,I),I=n.add(he,ye),we=n.sub(we,I),V=n.mul(fe,me),I=n.mul(ee,ye),V=n.add(I,V),I=n.sub(he,V),V=n.add(he,V),U=n.mul(I,V),he=n.add(J,J),he=n.add(he,J),ye=n.mul(fe,ye),me=n.mul(ee,me),he=n.add(he,ye),ye=n.sub(J,ye),ye=n.mul(fe,ye),me=n.add(me,ye),J=n.mul(he,me),U=n.add(U,J),J=n.mul(we,me),I=n.mul(Ye,I),I=n.sub(I,J),J=n.mul(Ye,he),V=n.mul(we,V),V=n.add(V,J),new v(I,U,V)}subtract(C){return this.add(C.negate())}is0(){return this.equals(v.ZERO)}multiply(C){const{endo:B}=e;if(!r.isValidNot0(C))throw new Error("invalid scalar: out of range");let A,T;const L=R=>M.cached(this,R,D=>Hs(v,D));if(B){const{k1neg:R,k1:D,k2neg:I,k2:U}=Z(C),{p:V,f:fe}=L(D),{p:ee,f:J}=L(U);T=fe.add(J),A=W(B.beta,V,ee,R,I)}else{const{p:R,f:D}=L(C);A=R,T=D}return Hs(v,[A,T])[0]}multiplyUnsafe(C){const{endo:B}=e,A=this;if(!r.isValid(C))throw new Error("invalid scalar: out of range");if(C===je||A.is0())return v.ZERO;if(C===Ce)return A;if(M.hasCache(this))return this.multiply(C);if(B){const{k1neg:T,k1:L,k2neg:R,k2:D}=Z(C),{p1:I,p2:U}=Ka(v,A,L,D);return W(B.beta,I,U,T,R)}else return M.unsafe(A,C)}toAffine(C){return X(this,C)}isTorsionFree(){const{isTorsionFree:C}=e;return a===Ce?!0:C?C(v,this):M.unsafe(this,o).is0()}clearCofactor(){const{clearCofactor:C}=e;return a===Ce?this:C?C(v,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(C=!0){return Us(C,"isCompressed"),this.assertValidity(),h(v,this,C)}toHex(C=!0){return Pt(this.toBytes(C))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}const $=r.BITS,M=new Ya(v,e.endo?Math.ceil($/2):$);return v.BASE.precompute(8),v}function Oi(t){return Uint8Array.of(t?2:3)}function ao(t,e){const s=t.ORDER;let n=je;for(let m=s-Ce;m%Xe===je;m/=Xe)n+=Ce;const r=n,i=Xe<<r-Ce-Ce,a=i*Xe,o=(s-Ce)/a,c=(o-Ce)/Xe,d=a-Ce,f=i,u=t.pow(e,o),l=t.pow(e,(o+Ce)/Xe);let h=(m,_)=>{let b=u,w=t.pow(_,d),G=t.sqr(w);G=t.mul(G,_);let k=t.mul(m,G);k=t.pow(k,c),k=t.mul(k,w),w=t.mul(k,_),G=t.mul(k,m);let O=t.mul(G,w);k=t.pow(O,f);let Z=t.eql(k,t.ONE);w=t.mul(G,l),k=t.mul(O,b),G=t.cmov(w,G,Z),O=t.cmov(k,O,Z);for(let X=r;X>Ce;X--){let H=X-Xe;H=Xe<<H-Ce;let W=t.pow(O,H);const v=t.eql(W,t.ONE);w=t.mul(G,b),b=t.mul(b,b),W=t.mul(O,b),G=t.cmov(w,G,v),O=t.cmov(W,O,v)}return{isValid:Z,value:G}};if(t.ORDER%Tn===kt){const m=(t.ORDER-kt)/Tn,_=t.sqrt(t.neg(e));h=(b,w)=>{let G=t.sqr(w);const k=t.mul(b,w);G=t.mul(G,k);let O=t.pow(G,m);O=t.mul(O,k);const Z=t.mul(O,_),X=t.mul(t.sqr(O),w),H=t.eql(X,b);let W=t.cmov(Z,O,H);return{isValid:H,value:W}}}return h}function vi(t,e){xi(t);const{A:s,B:n,Z:r}=e;if(!t.isValid(s)||!t.isValid(n)||!t.isValid(r))throw new Error("mapToCurveSimpleSWU: invalid opts");const i=ao(t,r);if(!t.isOdd)throw new Error("Field does not have .isOdd()");return a=>{let o,c,d,f,u,l,h,m;o=t.sqr(a),o=t.mul(o,r),c=t.sqr(o),c=t.add(c,o),d=t.add(c,t.ONE),d=t.mul(d,n),f=t.cmov(r,t.neg(c),!t.eql(c,t.ZERO)),f=t.mul(f,s),c=t.sqr(d),l=t.sqr(f),u=t.mul(l,s),c=t.add(c,u),c=t.mul(c,d),l=t.mul(l,f),u=t.mul(l,n),c=t.add(c,u),h=t.mul(o,d);const{isValid:_,value:b}=i(c,l);m=t.mul(o,a),m=t.mul(m,b),h=t.cmov(h,d,_),m=t.cmov(m,b,_);const w=t.isOdd(a)===t.isOdd(m);m=t.cmov(t.neg(m),m,w);const G=Bt(t,[f],!0)[0];return h=t.mul(h,G),{x:h,y:m}}}function Ti(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function oo(t,e={}){const{Fn:s}=t,n=e.randomBytes||qs,r=Object.assign(Ti(t.Fp,s),{seed:Wn(s.ORDER)});function i(h){try{const m=s.fromBytes(h);return s.isValidNot0(m)}catch{return!1}}function a(h,m){const{publicKey:_,publicKeyUncompressed:b}=r;try{const w=h.length;return m===!0&&w!==_||m===!1&&w!==b?!1:!!t.fromBytes(h)}catch{return!1}}function o(h=n(r.seed)){return yi(de(h,r.seed,"seed"),s.ORDER)}function c(h,m=!0){return t.BASE.multiply(s.fromBytes(h)).toBytes(m)}function d(h){const{secretKey:m,publicKey:_,publicKeyUncompressed:b}=r;if(!Vn(h)||"_lengths"in s&&s._lengths||m===_)return;const w=de(h,void 0,"key").length;return w===_||w===b}function f(h,m,_=!0){if(d(h)===!0)throw new Error("first arg must be private key");if(d(m)===!1)throw new Error("second arg must be public key");const b=s.fromBytes(h);return t.fromBytes(m).multiply(b).toBytes(_)}const u={isValidSecretKey:i,isValidPublicKey:a,randomSecretKey:o},l=Ja(o,c);return Object.freeze({getPublicKey:c,getSharedSecret:f,keygen:l,Point:t,utils:u,lengths:r})}function Gi(t,e,s={}){ni(e),Ws(s,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"}),s=Object.assign({},s);const n=s.randomBytes||qs,r=s.hmac||((B,A)=>Ni(e,B,A)),{Fp:i,Fn:a}=t,{ORDER:o,BITS:c}=a,{keygen:d,getPublicKey:f,getSharedSecret:u,utils:l,lengths:h}=oo(t,s),m={prehash:!0,lowS:typeof s.lowS=="boolean"?s.lowS:!0,format:"compact",extraEntropy:!1},_=o*Xe<i.ORDER;function b(B){const A=o>>Ce;return B>A}function w(B,A){if(!a.isValidNot0(A))throw new Error(`invalid signature ${B}: out of range 1..Point.Fn.ORDER`);return A}function G(){if(_)throw new Error('"recovered" sig type is not supported for cofactor >2 curves')}function k(B,A){vn(A);const T=h.signature,L=A==="compact"?T:A==="recovered"?T+1:void 0;return de(B,L)}class O{r;s;recovery;constructor(A,T,L){if(this.r=w("r",A),this.s=w("s",T),L!=null){if(G(),![0,1,2,3].includes(L))throw new Error("invalid recovery id");this.recovery=L}Object.freeze(this)}static fromBytes(A,T=m.format){k(A,T);let L;if(T==="der"){const{r:U,s:V}=lt.toSig(de(A));return new O(U,V)}T==="recovered"&&(L=A[0],T="compact",A=A.subarray(1));const R=h.signature/2,D=A.subarray(0,R),I=A.subarray(R,R*2);return new O(a.fromBytes(D),a.fromBytes(I),L)}static fromHex(A,T){return this.fromBytes(Ut(A),T)}assertRecovery(){const{recovery:A}=this;if(A==null)throw new Error("invalid recovery id: must be present");return A}addRecoveryBit(A){return new O(this.r,this.s,A)}recoverPublicKey(A){const{r:T,s:L}=this,R=this.assertRecovery(),D=R===2||R===3?T+o:T;if(!i.isValid(D))throw new Error("invalid recovery id: sig.r+curve.n != R.x");const I=i.toBytes(D),U=t.fromBytes(le(Oi((R&1)===0),I)),V=a.inv(D),fe=X(de(A,void 0,"msgHash")),ee=a.create(-fe*V),J=a.create(L*V),he=t.BASE.multiplyUnsafe(ee).add(U.multiplyUnsafe(J));if(he.is0())throw new Error("invalid recovery: point at infinify");return he.assertValidity(),he}hasHighS(){return b(this.s)}toBytes(A=m.format){if(vn(A),A==="der")return Ut(lt.hexFromSig(this));const{r:T,s:L}=this,R=a.toBytes(T),D=a.toBytes(L);return A==="recovered"?(G(),le(Uint8Array.of(this.assertRecovery()),R,D)):le(R,D)}toHex(A){return Pt(this.toBytes(A))}}const Z=s.bits2int||function(A){if(A.length>8192)throw new Error("input is too large");const T=Ve(A),L=A.length*8-c;return L>0?T>>BigInt(L):T},X=s.bits2int_modN||function(A){return a.create(Z(A))},H=Ht(c);function W(B){return Da("num < 2^"+c,B,je,H),a.toBytes(B)}function v(B,A){return de(B,void 0,"message"),A?de(e(B),void 0,"prehashed message"):B}function $(B,A,T){const{lowS:L,prehash:R,extraEntropy:D}=fn(T,m);B=v(B,R);const I=X(B),U=a.fromBytes(A);if(!a.isValidNot0(U))throw new Error("invalid private key");const V=[W(U),W(I)];if(D!=null&&D!==!1){const he=D===!0?n(h.secretKey):D;V.push(de(he,void 0,"extraEntropy"))}const fe=le(...V),ee=I;function J(he){const ye=Z(he);if(!a.isValidNot0(ye))return;const Ye=a.inv(ye),me=t.BASE.multiply(ye).toAffine(),we=a.create(me.x);if(we===je)return;const cs=a.create(Ye*a.create(ee+we*U));if(cs===je)return;let ar=(me.x===we?0:2)|Number(me.y&Ce),or=cs;return L&&b(cs)&&(or=a.neg(cs),ar^=1),new O(we,or,_?void 0:ar)}return{seed:fe,k2sig:J}}function M(B,A,T={}){const{seed:L,k2sig:R}=$(B,A,T);return Ha(e.outputLen,a.BYTES,r)(L,R).toBytes(T.format)}function F(B,A,T,L={}){const{lowS:R,prehash:D,format:I}=fn(L,m);if(T=de(T,void 0,"publicKey"),A=v(A,D),!Vn(B)){const U=B instanceof O?", use sig.toBytes()":"";throw new Error("verify expects Uint8Array signature"+U)}k(B,I);try{const U=O.fromBytes(B,I),V=t.fromBytes(T);if(R&&U.hasHighS())return!1;const{r:fe,s:ee}=U,J=X(A),he=a.inv(ee),ye=a.create(J*he),Ye=a.create(fe*he),me=t.BASE.multiplyUnsafe(ye).add(V.multiplyUnsafe(Ye));return me.is0()?!1:a.create(me.x)===fe}catch{return!1}}function C(B,A,T={}){const{prehash:L}=fn(T,m);return A=v(A,L),O.fromBytes(B,"recovered").recoverPublicKey(A).toBytes()}return Object.freeze({keygen:d,getPublicKey:f,getSharedSecret:u,utils:l,lengths:h,Point:t,sign:M,verify:F,recoverPublicKey:C,Signature:O,hash:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zn={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},co={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},br=BigInt(2);function fo(t){const e=Zn.p,s=BigInt(3),n=BigInt(6),r=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),d=t*t*t%e,f=d*d*t%e,u=Me(f,s,e)*f%e,l=Me(u,s,e)*f%e,h=Me(l,br,e)*d%e,m=Me(h,r,e)*h%e,_=Me(m,i,e)*m%e,b=Me(_,o,e)*_%e,w=Me(b,c,e)*b%e,G=Me(w,o,e)*_%e,k=Me(G,s,e)*f%e,O=Me(k,a,e)*m%e,Z=Me(O,n,e)*d%e,X=Me(Z,br,e);if(!Gn.eql(Gn.sqr(X),t))throw new Error("Cannot find square root");return X}const Gn=Ct(Zn.p,{sqrt:fo}),uo=Ft(Zn,{Fp:Gn,endo:co}),jn=Gi(uo,as);function _r(t){if(t[0]===0)throw N("invalid RLP: extra zeros");return mo(ho(t))}function xr(t,e){if(t<56)return Uint8Array.from([t+e]);const s=Sn(t),n=s.length/2,r=Sn(e+55+n);return Uint8Array.from(Ln(r+s))}function Tt(t,e,s){if(s>t.length)throw N("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return t.slice(e,s)}function kn(t){let e,s,n,r,i;const a=[],o=t[0];if(o<=127)return{data:t.slice(0,1),remainder:t.subarray(1)};if(o<=183){if(e=o-127,o===128?n=Uint8Array.from([]):n=Tt(t,1,e),e===2&&n[0]<128)throw N("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:t.subarray(e)}}else if(o<=191){if(s=o-182,t.length-1<s)throw N("invalid RLP: not enough bytes for string length");if(e=_r(Tt(t,1,s)),e<=55)throw N("invalid RLP: expected string length to be greater than 55");return n=Tt(t,s,e+s),{data:n,remainder:t.subarray(e+s)}}else if(o<=247){for(e=o-191,r=Tt(t,1,e);r.length;)i=kn(r),a.push(i.data),r=i.remainder;return{data:a,remainder:t.subarray(e)}}else{if(s=o-246,e=_r(Tt(t,1,s)),e<56)throw N("invalid RLP: encoded list too short");const c=s+e;if(c>t.length)throw N("invalid RLP: total length is larger than the data");for(r=Tt(t,s,c);r.length;)i=kn(r),a.push(i.data),r=i.remainder;return{data:a,remainder:t.subarray(c)}}}const lo=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ho(t){let e="";for(let s=0;s<t.length;s++)e+=lo[t[s]];return e}function mo(t){const e=Number.parseInt(t,16);if(Number.isNaN(e))throw N("Invalid byte sequence");return e}const et={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Er(t){if(t>=et._0&&t<=et._9)return t-et._0;if(t>=et._A&&t<=et._F)return t-(et._A-10);if(t>=et._a&&t<=et._f)return t-(et._a-10)}function Ln(t){if(t.slice(0,2)==="0x"&&(t=t.slice(0,2)),typeof t!="string")throw N("hex string expected, got "+typeof t);const e=t.length,s=e/2;if(e%2)throw N("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(s);for(let r=0,i=0;r<s;r++,i+=2){const a=Er(t.charCodeAt(i)),o=Er(t.charCodeAt(i+1));if(a===void 0||o===void 0){const c=t[i]+t[i+1];throw N('hex string expected, got non-hex character "'+c+'" at index '+i)}n[r]=a*16+o}return n}function yr(...t){if(t.length===1)return t[0];const e=t.reduce((n,r)=>n+r.length,0),s=new Uint8Array(e);for(let n=0,r=0;n<t.length;n++){const i=t[n];s.set(i,r),r+=i.length}return s}function po(t){return new TextEncoder().encode(t)}function Sn(t){if(t<0)throw N("Invalid integer as argument, must be unsigned!");const e=t.toString(16);return e.length%2?`0${e}`:e}function go(t){return t.length%2?`0${t}`:t}function ki(t){return t.length>=2&&t[0]==="0"&&t[1]==="x"}function bo(t){return typeof t!="string"?t:ki(t)?t.slice(2):t}function Li(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")return ki(t)?Ln(go(bo(t))):po(t);if(typeof t=="number"||typeof t=="bigint")return t?Ln(Sn(t)):Uint8Array.from([]);if(t==null)return Uint8Array.from([]);throw N("toBytes: received unsupported type "+typeof t)}function Si(t){if(Array.isArray(t)){const s=[];let n=0;for(let r=0;r<t.length;r++){const i=Si(t[r]);s.push(i),n+=i.length}return yr(xr(n,192),...s)}const e=Li(t);return e.length===1&&e[0]<128?e:yr(xr(e.length,128),e)}function _o(t,e=!1){if(typeof t>"u"||t===null||t.length===0)return Uint8Array.from([]);const s=Li(t),n=kn(s);if(e)return{data:n.data,remainder:n.remainder.slice()};if(n.remainder.length!==0)throw N("invalid RLP: remainder must be zero");return n.data}const Fs={encode:Si,decode:_o},xo=BigInt("0xffffffffffffffff"),Eo=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),un=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),yo=jn.Point.CURVE().n;yo/BigInt(2);const ps=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),Io="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",Kt=ke(Io),Ao="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";ke(Ao);const wo="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",Ri=ke(wo);as(new Uint8Array);Uint8Array.from([128]);const Bo="0000000000000000000000000000000000000003";BigInt(-1);const g=BigInt(0),Y=BigInt(1),nt=BigInt(2),Co=BigInt(3),Pi=BigInt(7),ht=BigInt(8),Ui=BigInt(27),No=BigInt(28),Qt=BigInt(31),be=BigInt(32),es=BigInt(64);BigInt(128);const ln=BigInt(255),gs=BigInt(256),Yn=BigInt(96);BigInt(100);const Di=BigInt(160),Oo=BigInt(224),vo=BigInt(7922816251426434e13),To=BigInt(1461501637330903e33),Go=BigInt(2695994666715064e52),ko=BigInt(0),$t=BigInt(1),Lo=BigInt(2),So=BigInt(7),Ro=BigInt(256),Po=BigInt(113),Mi=[],Hi=[],Fi=[];for(let t=0,e=$t,s=1,n=0;t<24;t++){[s,n]=[n,(2*s+3*n)%5],Mi.push(2*(5*n+s)),Hi.push((t+1)*(t+2)/2%64);let r=ko;for(let i=0;i<7;i++)e=(e<<$t^(e>>So)*Po)%Ro,e&Lo&&(r^=$t<<($t<<BigInt(i))-$t);Fi.push(r)}const Vi=ka(Fi,!0),Uo=Vi[0],Do=Vi[1],Ir=(t,e,s)=>s>32?Ra(t,e,s):La(t,e,s),Ar=(t,e,s)=>s>32?Pa(t,e,s):Sa(t,e,s);function Mo(t,e=24){const s=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let a=0;a<10;a++)s[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,d=s[c],f=s[c+1],u=Ir(d,f,1)^s[o],l=Ar(d,f,1)^s[o+1];for(let h=0;h<50;h+=10)t[a+h]^=u,t[a+h+1]^=l}let r=t[2],i=t[3];for(let a=0;a<24;a++){const o=Hi[a],c=Ir(r,i,o),d=Ar(r,i,o),f=Mi[a];r=t[f],i=t[f+1],t[f]=c,t[f+1]=d}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)s[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~s[(o+2)%10]&s[(o+4)%10]}t[0]^=Uo[n],t[1]^=Do[n]}ts(s)}class Kn{state;pos=0;posOut=0;finished=!1;state32;destroyed=!1;blockLen;suffix;outputLen;enableXOF=!1;rounds;constructor(e,s,n,r=!1,i=24){if(this.blockLen=e,this.suffix=s,this.outputLen=n,this.enableXOF=r,this.rounds=i,wt(n,"outputLen"),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=_a(this.state)}clone(){return this._cloneInto()}keccak(){cr(this.state32),Mo(this.state32,this.rounds),cr(this.state32),this.posOut=0,this.pos=0}update(e){Rs(this),de(e);const{blockLen:s,state:n}=this,r=e.length;for(let i=0;i<r;){const a=Math.min(s-this.pos,r-i);for(let o=0;o<a;o++)n[this.pos++]^=e[i++];this.pos===s&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:s,pos:n,blockLen:r}=this;e[n]^=s,(s&128)!==0&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){Rs(this,!1),de(e),this.finish();const s=this.state,{blockLen:n}=this;for(let r=0,i=e.length;r<i;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,i-r);e.set(s.subarray(this.posOut,this.posOut+a),r),this.posOut+=a,r+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return wt(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(xa(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ts(this.state)}_cloneInto(e){const{blockLen:s,suffix:n,outputLen:r,rounds:i,enableXOF:a}=this;return e||=new Kn(s,n,r,a,i),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=r,e.enableXOF=a,e.destroyed=this.destroyed,e}}const Ho=(t,e,s,n={})=>ri(()=>new Kn(e,t,s),n),rt=Ho(1,136,32);class Re{get version(){if(this._version!==null)return this._version;throw Error(`version=${this._version} not loaded`)}set version(e){this._version=e}get nonce(){if(this._nonce!==null)return this._nonce;throw Error(`nonce=${this._nonce} not loaded`)}set nonce(e){this._nonce=e}get balance(){if(this._balance!==null)return this._balance;throw Error(`balance=${this._balance} not loaded`)}set balance(e){this._balance=e}get storageRoot(){if(this._storageRoot!==null)return this._storageRoot;throw Error(`storageRoot=${this._storageRoot} not loaded`)}set storageRoot(e){this._storageRoot=e}get codeHash(){if(this._codeHash!==null)return this._codeHash;throw Error(`codeHash=${this._codeHash} not loaded`)}set codeHash(e){this._codeHash=e}get codeSize(){if(this._codeSize!==null)return this._codeSize;throw Error(`codeSize=${this._codeSize} not loaded`)}set codeSize(e){this._codeSize=e}constructor(e=g,s=g,n=Ri,r=Kt,i=0,a=0){this._nonce=null,this._balance=null,this._storageRoot=null,this._codeHash=null,this._codeSize=null,this._version=null,this._nonce=e,this._balance=s,this._storageRoot=n,this._codeHash=r,i===null&&r!==null&&!this.isContract()&&(i=0),this._codeSize=i,this._version=a,this._validate()}_validate(){if(this._nonce!==null&&this._nonce<g)throw N("nonce must be greater than zero");if(this._balance!==null&&this._balance<g)throw N("balance must be greater than zero");if(this._storageRoot!==null&&this._storageRoot.length!==32)throw N("storageRoot must have a length of 32");if(this._codeHash!==null&&this._codeHash.length!==32)throw N("codeHash must have a length of 32");if(this._codeSize!==null&&this._codeSize<g)throw N("codeSize must be greater than zero")}raw(){return[fs(this.nonce),fs(this.balance),this.storageRoot,this.codeHash]}serialize(){return Fs.encode(this.raw())}serializeWithPartialInfo(){const e=[],s=us(0),n=us(1);return this._nonce!==null?e.push([n,fs(this._nonce)]):e.push([s]),this._balance!==null?e.push([n,fs(this._balance)]):e.push([s]),this._storageRoot!==null?e.push([n,this._storageRoot]):e.push([s]),this._codeHash!==null?e.push([n,this._codeHash]):e.push([s]),this._codeSize!==null?e.push([n,us(this._codeSize)]):e.push([s]),this._version!==null?e.push([n,us(this._version)]):e.push([s]),Fs.encode(e)}isContract(){if(this._codeHash===null&&this._codeSize===null)throw Error("Insufficient data as codeHash=null and codeSize=null");return this._codeHash!==null&&!pe(this._codeHash,Kt)||this._codeSize!==null&&this._codeSize!==0}isEmpty(){return this._balance!==null&&this.balance!==g||this._nonce===null&&this.nonce!==g||this._codeHash!==null&&!pe(this.codeHash,Kt)?!1:this.balance===g&&this.nonce===g&&pe(this.codeHash,Kt)}}const Fo=function(t,e){return Rt(t),Rt(e),z(e)===g?rt(Fs.encode([t,Uint8Array.from([])])).subarray(-20):rt(Fs.encode([t,e])).subarray(-20)},Vo=function(t,e,s){if(Rt(t),Rt(e),Rt(s),t.length!==20)throw N("Expected from to be of length 20");if(e.length!==32)throw N("Expected salt to be of length 32");return rt(De(ke("0xff"),t,e,rt(s))).subarray(-20)},$o=function(t,e=!1){if(Rt(t),e&&t.length!==64&&(t=jn.Point.fromBytes(t).toBytes(!1).slice(1)),t.length!==64)throw N("Expected pubKey to be of length 64");return rt(t).subarray(-20)},qo=$o;class gt{constructor(e){if(e.length!==20)throw N("Invalid address length");this.bytes=e}equals(e){return pe(this.bytes,e.bytes)}isZero(){return this.equals(new gt(new Uint8Array(20)))}isPrecompileOrSystemAddress(){const e=z(this.bytes),s=g,n=BigInt("0xffff");return e>=s&&e<=n}toString(){return j(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}}function st(){return new gt(new Uint8Array(20))}function zo(t){const e=oe(t);if(e.length>20)throw N(`Invalid address, too long: ${e.length}`);return new gt(se(e,20))}const It={Number:0,BigInt:1,Uint8Array:2,PrefixedHexString:3};function hn(t,e){if(t===null)return null;if(t===void 0)return;if(typeof t=="string"&&!ii(t))throw N(`A string must be provided with a 0x-prefix, given: ${t}`);if(typeof t=="number"&&!Number.isSafeInteger(t))throw N("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const s=Ea(t);switch(e){case It.Uint8Array:return s;case It.BigInt:return z(s);case It.Number:{const n=z(s);if(n>BigInt(Number.MAX_SAFE_INTEGER))throw N("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(n)}case It.PrefixedHexString:return j(s);default:throw N("unknown outputType")}}function Wo(t,e){return t===g||t===Y?t:e===void 0?t-Ui:t-(e*nt+BigInt(35))}function Zo(t){return t===g||t===Y}const jo=function(t,e,s,n,r){const i=De(se(s,32),se(n,32)),a=Wo(e,r);if(!Zo(a))throw N("Invalid signature v value");return jn.Signature.fromBytes(i).addRecoveryBit(Number(a)).recoverPublicKey(t).toBytes(!1).slice(1)},Rn={name:"mainnet",chainId:1,defaultHardfork:"prague",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},depositContractAddress:"0x00000000219ab540356cBB839Cbe05303d7705Fa",hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{name:"paris",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeNetsplitBlock",block:null,forkHash:null},{name:"shanghai",block:null,timestamp:"1681338455",forkHash:"0xdce96c2d"},{name:"cancun",block:null,timestamp:"1710338135",forkHash:"0x9f3d2254"},{name:"prague",block:null,timestamp:"1746612311",forkHash:"0xc376cf8b"},{name:"osaka",block:null,timestamp:"1764798551",forkHash:"0x5167e2a6"},{name:"bpo1",block:null,timestamp:"1765290071",forkHash:"0xcba2a1c0"},{name:"bpo2",block:null,timestamp:"1767747671",forkHash:"0x07c9462e"}],bootstrapNodes:[{ip:"18.138.108.67",port:30303,id:"d860a01f9722d78051619d1e2351aba3f43f943f6f00718d1b9baa4101932a1f5011f16bb2b1bb35db20d6fe28fa0bf09636d26a87d31de9ec6203eeedb1f666",location:"ap-southeast-1-001",comment:"bootnode-aws-ap-southeast-1-001"},{ip:"3.209.45.79",port:30303,id:"22a8232c3abc76a16ae9d6c3b164f98775fe226f0917b0ca871128a74a8e9630b458460865bab457221f1d448dd9791d24c4e5d88786180ac185df813a68d4de",location:"us-east-1-001",comment:"bootnode-aws-us-east-1-001"},{ip:"65.108.70.101",port:30303,id:"2b252ab6a1d0f971d9722cb839a42cb81db019ba44c08754628ab4a823487071b5695317c8ccd085219c3a03af063495b2f1da8d18218da2d6a82981b45e6ffc",location:"eu-west-1-001",comment:"bootnode-hetzner-hel"},{ip:"157.90.35.166",port:30303,id:"4aeb4ab6c14b23e2c4cfdce879c04b0748a20d8e9b59e25ded2a08143e265c6c25936e74cbc8e641e3312ca288673d91f2f93f8e277de3cfa444ecdaaf982052",location:"eu-central-1-001",comment:"bootnode-hetzner-fsn"}],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]};function $i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mn={exports:{}},wr;function Yo(){return wr||(wr=1,(function(t){var e=Object.prototype.hasOwnProperty,s="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(s=!1));function r(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function i(c,d,f,u,l){if(typeof f!="function")throw new TypeError("The listener must be a function");var h=new r(f,u||c,l),m=s?s+d:d;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],h]:c._events[m].push(h):(c._events[m]=h,c._eventsCount++),c}function a(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],f,u;if(this._eventsCount===0)return d;for(u in f=this._events)e.call(f,u)&&d.push(s?u.slice(1):u);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},o.prototype.listeners=function(d){var f=s?s+d:d,u=this._events[f];if(!u)return[];if(u.fn)return[u.fn];for(var l=0,h=u.length,m=new Array(h);l<h;l++)m[l]=u[l].fn;return m},o.prototype.listenerCount=function(d){var f=s?s+d:d,u=this._events[f];return u?u.fn?1:u.length:0},o.prototype.emit=function(d,f,u,l,h,m){var _=s?s+d:d;if(!this._events[_])return!1;var b=this._events[_],w=arguments.length,G,k;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,f),!0;case 3:return b.fn.call(b.context,f,u),!0;case 4:return b.fn.call(b.context,f,u,l),!0;case 5:return b.fn.call(b.context,f,u,l,h),!0;case 6:return b.fn.call(b.context,f,u,l,h,m),!0}for(k=1,G=new Array(w-1);k<w;k++)G[k-1]=arguments[k];b.fn.apply(b.context,G)}else{var O=b.length,Z;for(k=0;k<O;k++)switch(b[k].once&&this.removeListener(d,b[k].fn,void 0,!0),w){case 1:b[k].fn.call(b[k].context);break;case 2:b[k].fn.call(b[k].context,f);break;case 3:b[k].fn.call(b[k].context,f,u);break;case 4:b[k].fn.call(b[k].context,f,u,l);break;default:if(!G)for(Z=1,G=new Array(w-1);Z<w;Z++)G[Z-1]=arguments[Z];b[k].fn.apply(b[k].context,G)}}return!0},o.prototype.on=function(d,f,u){return i(this,d,f,u,!1)},o.prototype.once=function(d,f,u){return i(this,d,f,u,!0)},o.prototype.removeListener=function(d,f,u,l){var h=s?s+d:d;if(!this._events[h])return this;if(!f)return a(this,h),this;var m=this._events[h];if(m.fn)m.fn===f&&(!l||m.once)&&(!u||m.context===u)&&a(this,h);else{for(var _=0,b=[],w=m.length;_<w;_++)(m[_].fn!==f||l&&!m[_].once||u&&m[_].context!==u)&&b.push(m[_]);b.length?this._events[h]=b.length===1?b[0]:b:a(this,h)}return this},o.prototype.removeAllListeners=function(d){var f;return d?(f=s?s+d:d,this._events[f]&&a(this,f)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=s,o.EventEmitter=o,t.exports=o})(mn)),mn.exports}var Ko=Yo();const Pn=$i(Ko);let Un=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(Un=new Int32Array(Un));const Xo=(t,e)=>{let s=e===0?0:-1;for(let n=0;n<t.length;n++)s=Un[(s^t[n])&255]^s>>>8;return s^-1},Jo=(t,e)=>Xo(t,e)>>>0,Xt={Mainnet:1,Sepolia:11155111,Holesky:17e3,Hoodi:560048};Object.entries(Xt).reduce((t,[e,s])=>(t[s]=e,t),{});Xt.Mainnet+"",ke("0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544"),Xt.Sepolia+"",ke("0x5eb6e371a698b8d68f665192350ffcecbbbf322916f4b51bd79bb6887da3f494"),Xt.Holesky+"",ke("0x69d8c9d72f6fa4ad42d4702b433707212f90db395eb54dc20bc85de253788783"),Xt.Hoodi+"",ke("0xda87d7f5f91c51508791bbcbd4aa5baf04917830b86985eeb9ad3d5bfb657576");const y={Chainstart:"chainstart",Homestead:"homestead",Dao:"dao",TangerineWhistle:"tangerineWhistle",SpuriousDragon:"spuriousDragon",Byzantium:"byzantium",Constantinople:"constantinople",Petersburg:"petersburg",Istanbul:"istanbul",MuirGlacier:"muirGlacier",Berlin:"berlin",London:"london",ArrowGlacier:"arrowGlacier",GrayGlacier:"grayGlacier",MergeNetsplitBlock:"mergeNetsplitBlock",Paris:"paris",Shanghai:"shanghai",Cancun:"cancun",Prague:"prague",Osaka:"osaka",Bpo1:"bpo1",Bpo2:"bpo2",Bpo3:"bpo3",Bpo4:"bpo4",Bpo5:"bpo5"},Qo={Clique:"clique"},qt={1:{minimumHardfork:y.Chainstart},606:{minimumHardfork:y.Chainstart},608:{minimumHardfork:y.Homestead},607:{minimumHardfork:y.TangerineWhistle},609:{minimumHardfork:y.SpuriousDragon},1013:{minimumHardfork:y.Constantinople},1716:{minimumHardfork:y.Constantinople},1679:{minimumHardfork:y.Constantinople},2384:{minimumHardfork:y.Istanbul},663:{minimumHardfork:y.Chainstart,requiredEIPs:[3540,5450]},1153:{minimumHardfork:y.Chainstart},1559:{minimumHardfork:y.Berlin,requiredEIPs:[2930]},2565:{minimumHardfork:y.Byzantium},2537:{minimumHardfork:y.Chainstart},2718:{minimumHardfork:y.Chainstart},2929:{minimumHardfork:y.Chainstart},2930:{minimumHardfork:y.Istanbul,requiredEIPs:[2718,2929]},2935:{minimumHardfork:y.Chainstart},3198:{minimumHardfork:y.London},3529:{minimumHardfork:y.Berlin,requiredEIPs:[2929]},3540:{minimumHardfork:y.London,requiredEIPs:[3541,3860]},3541:{minimumHardfork:y.Berlin},3554:{minimumHardfork:y.MuirGlacier},3607:{minimumHardfork:y.Chainstart},3651:{minimumHardfork:y.London,requiredEIPs:[2929]},3670:{minimumHardfork:y.London,requiredEIPs:[3540]},3675:{minimumHardfork:y.London},3855:{minimumHardfork:y.Chainstart},3860:{minimumHardfork:y.SpuriousDragon},4200:{minimumHardfork:y.London,requiredEIPs:[3540,3670]},4345:{minimumHardfork:y.London},4399:{minimumHardfork:y.London},4750:{minimumHardfork:y.London,requiredEIPs:[3540,3670,5450]},4788:{minimumHardfork:y.Cancun},4844:{minimumHardfork:y.Paris,requiredEIPs:[1559,2718,2930,4895]},4895:{minimumHardfork:y.Paris},5133:{minimumHardfork:y.GrayGlacier},5450:{minimumHardfork:y.London,requiredEIPs:[3540,3670,4200,4750]},5656:{minimumHardfork:y.Shanghai},6110:{minimumHardfork:y.Cancun,requiredEIPs:[7685]},6206:{minimumHardfork:y.London,requiredEIPs:[4750,5450]},6780:{minimumHardfork:y.London},7002:{minimumHardfork:y.Paris,requiredEIPs:[7685]},7069:{minimumHardfork:y.Berlin,requiredEIPs:[2929]},7251:{minimumHardfork:y.Paris,requiredEIPs:[7685]},7480:{minimumHardfork:y.London,requiredEIPs:[3540,3670]},7516:{minimumHardfork:y.Paris,requiredEIPs:[4844]},7594:{minimumHardfork:y.Paris,requiredEIPs:[4844]},7620:{minimumHardfork:y.London,requiredEIPs:[3540,3541,3670]},7623:{minimumHardfork:y.Chainstart,requiredEIPs:[]},7685:{minimumHardfork:y.Cancun,requiredEIPs:[3675]},7691:{minimumHardfork:y.Paris,requiredEIPs:[4844]},7918:{minimumHardfork:y.Paris,requiredEIPs:[4844]},7692:{minimumHardfork:y.Cancun,requiredEIPs:[663,3540,3670,4200,4750,5450,6206,7069,7480,7620,7698]},7698:{minimumHardfork:y.London,requiredEIPs:[3540,7620]},7702:{minimumHardfork:y.Cancun,requiredEIPs:[2718,2929,2930]},7823:{minimumHardfork:y.Byzantium},7709:{minimumHardfork:y.Chainstart,requiredEIPs:[2935]},7825:{minimumHardfork:y.Chainstart,requiredEIPs:[]},7864:{minimumHardfork:y.London},7883:{minimumHardfork:y.Chainstart},7939:{minimumHardfork:y.Chainstart,requiredEIPs:[]},7951:{minimumHardfork:y.Chainstart,requiredEIPs:[]},7934:{minimumHardfork:y.Chainstart,requiredEIPs:[]}},ec={chainstart:{eips:[1]},homestead:{eips:[606]},dao:{eips:[]},tangerineWhistle:{eips:[608]},spuriousDragon:{eips:[607]},byzantium:{eips:[609]},constantinople:{eips:[1013]},petersburg:{eips:[1716]},istanbul:{eips:[1679]},muirGlacier:{eips:[2384]},berlin:{eips:[2565,2929,2718,2930]},london:{eips:[1559,3198,3529,3541]},arrowGlacier:{eips:[4345]},grayGlacier:{eips:[5133]},paris:{consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]},mergeNetsplitBlock:{eips:[]},shanghai:{eips:[3651,3855,3860,4895]},cancun:{eips:[1153,4844,4788,5656,6780,7516]},prague:{eips:[2537,2935,6110,7002,7251,7623,7685,7691,7702]},osaka:{eips:[7594,7823,7825,7883,7939,7951,7918]},bpo1:{eips:[],params:{target:10,max:15,blobGasPriceUpdateFraction:8346193}},bpo2:{eips:[],params:{target:14,max:21,blobGasPriceUpdateFraction:11684671}}};class Dn{constructor(e){this._eips=[],this._paramsCache={},this._activatedEIPsCache=[],this.events=new Pn,this._chainParams=JSON.parse(JSON.stringify(e.chain)),this.DEFAULT_HARDFORK=this._chainParams.defaultHardfork??y.Prague,this.HARDFORK_CHANGES=this.hardforks().map(s=>[s.name,(this._chainParams.customHardforks&&this._chainParams.customHardforks[s.name])??ec[s.name]]),this._hardfork=this.DEFAULT_HARDFORK,this._params=e.params?JSON.parse(JSON.stringify(e.params)):{},e.hardfork!==void 0&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips),this.customCrypto=e.customCrypto??{},Object.keys(this._paramsCache).length===0&&(this._buildParamsCache(),this._buildActivatedEIPsCache())}updateParams(e){for(const[s,n]of Object.entries(e))s in this._params?this._params[s]=JSON.parse(JSON.stringify({...this._params[s],...e[s]})):this._params[s]=JSON.parse(JSON.stringify(n));this._buildParamsCache()}resetParams(e){this._params=JSON.parse(JSON.stringify(e)),this._buildParamsCache()}setHardfork(e){let s=!1;for(const n of this.HARDFORK_CHANGES)n[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this._buildParamsCache(),this._buildActivatedEIPsCache(),this.events.emit("hardforkChanged",e)),s=!0);if(!s)throw N(`Hardfork with name ${e} not supported`)}getHardforkBy(e){const s=hn(e.blockNumber,It.BigInt),n=hn(e.timestamp,It.BigInt),r=this.hardforks().filter(c=>c.block!==null||c.timestamp!==void 0);let i=r.findIndex(c=>s!==void 0&&c.block!==null&&BigInt(c.block)>s||n!==void 0&&c.timestamp!==void 0&&BigInt(c.timestamp)>n);if(i===-1)i=r.length;else if(i===0)throw Error("Must have at least one hardfork at block 0");if(n===void 0){const c=r.slice(0,i).reverse().findIndex(d=>d.block!==null);i=i-c}i=i-1;const a=i;for(;i<r.length-1&&!(r[i].block!==r[i+1].block||r[i].timestamp!==r[i+1].timestamp);i++);if(n!==void 0){if(r.slice(0,a).reduce((f,u)=>Math.max(Number(u.timestamp??"0"),f),0)>n)throw Error("Maximum HF determined by timestamp is lower than the block number HF");if(r.slice(i+1).reduce((f,u)=>Math.min(Number(u.timestamp??n),f),Number(n))<n)throw Error("Maximum HF determined by block number is lower than timestamp HF")}return r[i].name}setHardforkBy(e){const s=this.getHardforkBy(e);return this.setHardfork(s),s}_getHardfork(e){const s=this.hardforks();for(const n of s)if(n.name===e)return n;return null}setEIPs(e=[]){for(const s of e){if(!(s in qt))throw N(`${s} not supported`);const n=this.gteHardfork(qt[s].minimumHardfork);if(!n)throw N(`${s} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${n}`)}this._eips=e,this._buildParamsCache(),this._buildActivatedEIPsCache();for(const s of e)if(qt[s].requiredEIPs!==void 0){for(const n of qt[s].requiredEIPs)if(!(e.includes(n)||this.isActivatedEIP(n)))throw N(`${s} requires EIP ${n}, but is not included in the EIP list`)}}_mergeWithParamsCache(e){for(const[s,n]of Object.entries(e))this._paramsCache[s]=n}_buildParamsCache(){this._paramsCache={};const e=this.hardfork();for(const s of this.HARDFORK_CHANGES){if("eips"in s[1]){const r=s[1].eips??[];for(const i of r)this._params[i]!==void 0&&this._params[i]!==null&&this._mergeWithParamsCache(this._params[i])}const n=this._params[s[0]];if(n!=null&&this._mergeWithParamsCache(n),s[1].params!==void 0&&s[1].params!==null&&this._mergeWithParamsCache(s[1].params),s[0]===e)break}for(const s of this._eips)this._params[s]!==void 0&&this._params[s]!==null&&this._mergeWithParamsCache(this._params[s])}_buildActivatedEIPsCache(){this._activatedEIPsCache=[];for(const[e,s]of this.HARDFORK_CHANGES)this.gteHardfork(e)&&"eips"in s&&(this._activatedEIPsCache=this._activatedEIPsCache.concat(s.eips??[]));this._activatedEIPsCache=this._activatedEIPsCache.concat(this._eips)}param(e){if(!(e in this._paramsCache))throw N(`Missing parameter value for ${e}`);const s=this._paramsCache[e];return BigInt(s??0)}paramByHardfork(e,s){let n;for(const r of this.HARDFORK_CHANGES){if("eips"in r[1]){const i=r[1].eips;for(const a of i){const c=this._params[a]?.[e];c!==void 0&&(n=c)}}else{const i=r[1].params?.[e];i!==void 0&&(n=i)}if(r[0]===s)break}if(n===void 0)throw N(`Missing parameter value for ${e}`);return BigInt(n??0)}paramByEIP(e,s){if(!(s in qt))throw N(`${s} not supported`);const n=this._params[s];if(n?.[e]===void 0)throw N(`Missing parameter value for ${e}`);const r=n[e];return BigInt(r??0)}paramByBlock(e,s,n){const r=this.getHardforkBy({blockNumber:s,timestamp:n});return this.paramByHardfork(e,r)}getBlobGasSchedule(){return this.gteHardfork(y.Bpo1)?{targetBlobGasPerBlock:this.param("target")*this.param("blobGasPerBlob"),maxBlobGasPerBlock:this.param("max")*this.param("blobGasPerBlob"),blobGasPriceUpdateFraction:this.param("blobGasPriceUpdateFraction")}:{targetBlobGasPerBlock:this.param("targetBlobGasPerBlock"),maxBlobGasPerBlock:this.param("maxBlobGasPerBlock"),blobGasPriceUpdateFraction:this.param("blobGasPriceUpdateFraction")}}isActivatedEIP(e){return!!this._activatedEIPsCache.includes(e)}hardforkIsActiveOnBlock(e,s){s=hn(s,It.BigInt),e=e??this._hardfork;const n=this.hardforkBlock(e);return typeof n=="bigint"&&n!==g&&s>=n}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,s){e=e??this._hardfork;const n=this.hardforks();let r=-1,i=-1,a=0;for(const o of n)o.name===e&&(r=a),o.name===s&&(i=a),a+=1;return r>=i&&i!==-1}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){e=e??this._hardfork;const s=this._getHardfork(e)?.block;return s==null?null:BigInt(s)}hardforkTimestamp(e){e=e??this._hardfork;const s=this._getHardfork(e)?.timestamp;return s==null?null:BigInt(s)}eipBlock(e){for(const s of this.HARDFORK_CHANGES){const n=s[1];if("eips"in n&&n.eips.includes(e))return this.hardforkBlock(s[0])}return null}eipTimestamp(e){for(const s of this.HARDFORK_CHANGES){const n=s[1];if("eips"in n&&n.eips.includes(e))return this.hardforkTimestamp(s[0])}return null}nextHardforkBlockOrTimestamp(e){const s=e??this._hardfork,n=this.hardforks();let r=n.findIndex(d=>d.name===s);if(s===y.Paris&&(r-=1),r<0)return null;const i=n[r],a=i.timestamp??i.block;if(a==null)return null;const o=n.slice(r+1).find(d=>{const f=d.timestamp??d.block;return f!=null&&f!==a});if(o===void 0)return null;const c=o.timestamp??o.block;return c==null?null:BigInt(c)}_calcForkHash(e,s){let n=new Uint8Array(0),r=0;for(const o of this.hardforks()){const{block:c,timestamp:d,name:f}=o;let u=d??c;if(u=u!==null?Number(u):null,typeof u=="number"&&u!==0&&u!==r&&f!==y.Paris){const l=ke(`0x${u.toString(16).padStart(16,"0")}`);n=De(n,l),r=u}if(o.name===e)break}const i=De(s,n);return j(ya(Jo(i)>>>0))}forkHash(e,s){e=e??this._hardfork;const n=this._getHardfork(e);if(n===null||n?.block===null&&n?.timestamp===void 0)throw N("No fork hash calculation possible for future hardfork");if(n?.forkHash!==null&&n?.forkHash!==void 0)return n.forkHash;if(!s)throw N("genesisHash required for forkHash calculation");return this._calcForkHash(e,s)}hardforkForForkHash(e){const s=this.hardforks().filter(n=>n.forkHash===e);return s.length>=1?s[s.length-1]:null}setForkHashes(e){for(const s of this.hardforks()){const n=s.timestamp??s.block;(s.forkHash===null||s.forkHash===void 0)&&n!==null&&n!==void 0&&(s.forkHash=this.forkHash(s.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){const e=this._chainParams.hardforks;return this._chainParams.customHardforks!==void 0&&this._chainParams.customHardforks,e}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}eips(){return this._eips}consensusType(){const e=this.hardfork();let s;for(const n of this.HARDFORK_CHANGES)if("consensus"in n[1]&&(s=n[1].consensus.type),n[0]===e)break;return s??this._chainParams.consensus.type}consensusAlgorithm(){const e=this.hardfork();let s;for(const n of this.HARDFORK_CHANGES)if("consensus"in n[1]&&(s=n[1].consensus.algorithm),n[0]===e)break;return s??this._chainParams.consensus.algorithm}consensusConfig(){const e=this.hardfork();let s;for(const n of this.HARDFORK_CHANGES){if("consensus"in n[1]){const r=n[1],i=r.consensus.algorithm;s=r.consensus[i]}if(n[0]===e)break}return s??this._chainParams.consensus[this.consensusAlgorithm()]??{}}copy(){const e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.events=new Pn,e}}const js=239,Xn=0,qi=1,tc=49152,sc=1,nc=2,rc=3,ic=4,ac=0,oc=4,cc=4096,pn=4,dc=1,fc=1,uc=1,lc=256,hc=1,mc=127,pc=128,gc=1023,E={OUT_OF_BOUNDS:"Trying to read out of bounds",VERIFY_UINT:"Uint does not match expected value ",VERIFY_BYTES:"Bytes do not match expected value",FORMAT:"err: invalid format",MAGIC:"err: invalid magic",VERSION:"err: invalid eof version",KIND_TYPE:"err: expected kind types",KIND_CODE:"err: expected kind code",KIND_DATA:"err: expected kind data",TERMINATOR:"err: expected terminator",TYPE_SIZE:"missing type size",INVALID_TYPE_SIZE:"err: type section size invalid",CODE_SIZE:"missing code size",CODE_SECTION_SIZE:"code section should be at least one byte",INVALID_CODE_SIZE:"code size does not match type size",DATA_SIZE:"missing data size",CONTAINER_SIZE:"missing container size",CONTAINER_SECTION_SIZE:"container section should at least contain one section and at most 255 sections",TYPE_SECTIONS:"err: mismatch of code sections count and type signatures",INPUTS:"expected inputs",OUTPUTS:"expected outputs",MAX_INPUTS:"inputs exceeds 127, the maximum, got: ",MAX_OUTPUTS:"outputs exceeds 127, the maximum, got: ",CODE0_INPUTS:"first code section should have 0 inputs",CODE0_OUTPUTS:"first code section should have 0x80 (terminating section) outputs",MAX_STACK_HEIGHT:"expected maxStackHeight",MAX_STACK_HEIGHT_LIMIT:"stack height limit of 1024 exceeded: ",MIN_CODE_SECTIONS:"should have at least 1 code section",CODE_SECTION:"expected a code section",DATA_SECTION:"Expected data section",CONTAINER_SECTION:"expected a container section",CONTAINER_SECTION_MIN:"container section should be at least 1 byte",INVALID_EOF_CREATE_TARGET:"EOFCREATE targets an undefined container",INVALID_RETURN_CONTRACT_TARGET:"RETURNCONTRACT targets an undefined container",CONTAINER_DOUBLE_TYPE:"Container is targeted by both EOFCREATE and RETURNCONTRACT",UNREACHABLE_CONTAINER_SECTIONS:"Unreachable containers (by both EOFCREATE and RETURNCONTRACT)",CONTAINER_TYPE_ERROR:"Container contains opcodes which this mode (deployment mode / init code / runtime mode) cannot have",DANGLING_BYTES:"got dangling bytes in body",INVALID_OPCODE:"invalid opcode",INVALID_TERMINATOR:"invalid terminating opcode",OPCODE_INTERMEDIATES_OOB:"invalid opcode: intermediates out-of-bounds",INVALID_RJUMP:"invalid rjump* target",INVALID_CALL_TARGET:"invalid callf/jumpf target",INVALID_CALLF_RETURNING:"invalid callf: calls to non-returning function",INVALID_STACK_HEIGHT:"invalid stack height",INVALID_JUMPF:"invalid jumpf target (output count)",INVALID_RETURNING_SECTION:"invalid returning code section: section is not returning",RETURNING_NO_RETURN:"invalid section: section should return but has no RETF/JUMP to return",RJUMPV_TABLE_SIZE0:"invalid RJUMPV: table size 0",UNREACHABLE_CODE_SECTIONS:"unreachable code sections",UNREACHABLE_CODE:"unreachable code (by forward jumps)",DATALOADN_OOB:"DATALOADN reading out of bounds",MAX_STACK_HEIGHT_VIOLATION:"Max stack height does not match the reported max stack height",STACK_UNDERFLOW:"Stack underflow",STACK_OVERFLOW:"Stack overflow",UNSTABLE_STACK:"Unstable stack (can reach stack under/overflow by jumps)",RETF_NO_RETURN:"Trying to return to undefined function",RETURN_STACK_OVERFLOW:"Return stack overflow",INVALID_EXTCALL_TARGET:"invalid extcall target: address > 20 bytes",INVALID_RETURN_CONTRACT_DATA_SIZE:"invalid RETURNCONTRACT: data size lower than expected"};function P(t,...e){switch(t){case E.OUT_OF_BOUNDS:{const s=e[0];throw s===0||s===2||s===3||s===6?N(e[1]):N(E.OUT_OF_BOUNDS+" ")}case E.VERIFY_BYTES:{const s=e[0];throw s===0||s===2||s===3||s===6?N(e[1]):N(E.VERIFY_BYTES+` at pos: ${e[0]}: ${e[1]}`)}case E.VERIFY_UINT:{const s=e[0];throw s===0||s===2||s===3||s===6||s===18?N(e[1]):N(E.VERIFY_UINT+`at pos: ${e[0]}: ${e[1]}`)}case E.TYPE_SIZE:throw N(E.TYPE_SIZE+e[0]);case E.TYPE_SECTIONS:throw N(`${E.TYPE_SECTIONS} (types ${e[0]} code ${e[1]})`);case E.INVALID_TYPE_SIZE:throw N(E.INVALID_TYPE_SIZE);case E.INVALID_CODE_SIZE:throw N(E.INVALID_CODE_SIZE+e[0]);case E.INPUTS:throw N(`${E.INPUTS} - typeSection ${e[0]}`);case E.OUTPUTS:throw N(`${E.OUTPUTS} - typeSection ${e[0]}`);case E.CODE0_INPUTS:throw N("first code section should have 0 inputs");case E.CODE0_OUTPUTS:throw N("first code section should have 0 outputs");case E.MAX_INPUTS:throw N(E.MAX_INPUTS+`${e[1]} - code section ${e[0]}`);case E.MAX_OUTPUTS:throw N(E.MAX_OUTPUTS+`${e[1]} - code section ${e[0]}`);case E.CODE_SECTION:throw N(`expected code: codeSection ${e[0]}: `);case E.DATA_SECTION:throw N(E.DATA_SECTION);case E.MAX_STACK_HEIGHT:throw N(`${E.MAX_STACK_HEIGHT} - typeSection ${e[0]}: `);case E.MAX_STACK_HEIGHT_LIMIT:throw N(`${E.MAX_STACK_HEIGHT_LIMIT}, got: ${e[1]} - typeSection ${e[0]}`);case E.DANGLING_BYTES:throw N(E.DANGLING_BYTES);default:throw N(t)}}const At={0:{inputs:0,outputs:0,name:"STOP",intermediates:0,terminating:!0},1:{inputs:2,outputs:1,name:"ADD",intermediates:0},2:{inputs:2,outputs:1,name:"MUL",intermediates:0},3:{inputs:2,outputs:1,name:"SUB",intermediates:0},4:{inputs:2,outputs:1,name:"DIV",intermediates:0},5:{inputs:2,outputs:1,name:"SDIV",intermediates:0},6:{inputs:2,outputs:1,name:"MOD",intermediates:0},7:{inputs:2,outputs:1,name:"SMOD",intermediates:0},8:{inputs:3,outputs:1,name:"ADDMOD",intermediates:0},9:{inputs:3,outputs:1,name:"MULMOD",intermediates:0},10:{inputs:2,outputs:1,name:"EXP",intermediates:0},11:{inputs:2,outputs:1,name:"SIGNEXTEND",intermediates:0},16:{inputs:2,outputs:1,name:"LT",intermediates:0},17:{inputs:2,outputs:1,name:"GT",intermediates:0},18:{inputs:2,outputs:1,name:"SLT",intermediates:0},19:{inputs:2,outputs:1,name:"SGT",intermediates:0},20:{inputs:2,outputs:1,name:"EQ",intermediates:0},21:{inputs:1,outputs:1,name:"ISZERO",intermediates:0},22:{inputs:2,outputs:1,name:"AND",intermediates:0},23:{inputs:2,outputs:1,name:"OR",intermediates:0},24:{inputs:2,outputs:1,name:"XOR",intermediates:0},25:{inputs:1,outputs:1,name:"NOT",intermediates:0},26:{inputs:2,outputs:1,name:"BYTE",intermediates:0},27:{inputs:2,outputs:1,name:"SHL",intermediates:0},28:{inputs:2,outputs:1,name:"SHR",intermediates:0},29:{inputs:2,outputs:1,name:"SAR",intermediates:0},32:{inputs:2,outputs:1,name:"SHA3",intermediates:0},48:{inputs:0,outputs:1,name:"ADDRESS",intermediates:0},49:{inputs:1,outputs:1,name:"BALANCE",intermediates:0},50:{inputs:0,outputs:1,name:"ORIGIN",intermediates:0},51:{inputs:0,outputs:1,name:"CALLER",intermediates:0},52:{inputs:0,outputs:1,name:"CALLVALUE",intermediates:0},53:{inputs:1,outputs:1,name:"CALLDATALOAD",intermediates:0},54:{inputs:0,outputs:1,name:"CALLDATASIZE",intermediates:0},55:{inputs:3,outputs:0,name:"CALLDATACOPY",intermediates:0},58:{inputs:0,outputs:1,name:"GASPRICE",intermediates:0},61:{inputs:0,outputs:1,name:"RETURNDATASIZE",intermediates:0},62:{inputs:3,outputs:0,name:"RETURNDATACOPY",intermediates:0},64:{inputs:1,outputs:1,name:"BLOCKHASH",intermediates:0},65:{inputs:0,outputs:1,name:"COINBASE",intermediates:0},66:{inputs:0,outputs:1,name:"TIMESTAMP",intermediates:0},67:{inputs:0,outputs:1,name:"NUMBER",intermediates:0},68:{inputs:0,outputs:1,name:"PREVRANDAO",intermediates:0},69:{inputs:0,outputs:1,name:"GASLIMIT",intermediates:0},70:{inputs:0,outputs:1,name:"CHAINID",intermediates:0},71:{inputs:0,outputs:1,name:"SELFBALANCE",intermediates:0},72:{inputs:0,outputs:1,name:"BASEFEE",intermediates:0},73:{inputs:1,outputs:1,name:"BLOBAHASH",intermediates:0},74:{inputs:0,outputs:1,name:"BLOBBASEFEE",intermediates:0},80:{inputs:1,outputs:0,name:"POP",intermediates:0},81:{inputs:1,outputs:1,name:"MLOAD",intermediates:0},82:{inputs:2,outputs:0,name:"MSTORE",intermediates:0},83:{inputs:2,outputs:0,name:"MSTORE8",intermediates:0},84:{inputs:1,outputs:1,name:"SLOAD",intermediates:0},85:{inputs:2,outputs:0,name:"SSTORE",intermediates:0},89:{inputs:0,outputs:1,name:"MSIZE",intermediates:0},91:{inputs:0,outputs:0,name:"NOOP",intermediates:0},92:{inputs:1,outputs:1,name:"TLOAD",intermediates:0},93:{inputs:2,outputs:0,name:"TSTORE",intermediates:0},94:{inputs:3,outputs:0,name:"MCOPY",intermediates:0},95:{inputs:0,outputs:1,name:"PUSH0",intermediates:0},96:{inputs:0,outputs:1,name:"PUSH1",intermediates:1},97:{inputs:0,outputs:1,name:"PUSH2",intermediates:2},98:{inputs:0,outputs:1,name:"PUSH3",intermediates:3},99:{inputs:0,outputs:1,name:"PUSH4",intermediates:4},100:{inputs:0,outputs:1,name:"PUSH5",intermediates:5},101:{inputs:0,outputs:1,name:"PUSH6",intermediates:6},102:{inputs:0,outputs:1,name:"PUSH7",intermediates:7},103:{inputs:0,outputs:1,name:"PUSH8",intermediates:8},104:{inputs:0,outputs:1,name:"PUSH9",intermediates:9},105:{inputs:0,outputs:1,name:"PUSH10",intermediates:10},106:{inputs:0,outputs:1,name:"PUSH11",intermediates:11},107:{inputs:0,outputs:1,name:"PUSH12",intermediates:12},108:{inputs:0,outputs:1,name:"PUSH13",intermediates:13},109:{inputs:0,outputs:1,name:"PUSH14",intermediates:14},110:{inputs:0,outputs:1,name:"PUSH15",intermediates:15},111:{inputs:0,outputs:1,name:"PUSH16",intermediates:16},112:{inputs:0,outputs:1,name:"PUSH17",intermediates:17},113:{inputs:0,outputs:1,name:"PUSH18",intermediates:18},114:{inputs:0,outputs:1,name:"PUSH19",intermediates:19},115:{inputs:0,outputs:1,name:"PUSH20",intermediates:20},116:{inputs:0,outputs:1,name:"PUSH21",intermediates:21},117:{inputs:0,outputs:1,name:"PUSH22",intermediates:22},118:{inputs:0,outputs:1,name:"PUSH23",intermediates:23},119:{inputs:0,outputs:1,name:"PUSH24",intermediates:24},120:{inputs:0,outputs:1,name:"PUSH25",intermediates:25},121:{inputs:0,outputs:1,name:"PUSH26",intermediates:26},122:{inputs:0,outputs:1,name:"PUSH27",intermediates:27},123:{inputs:0,outputs:1,name:"PUSH28",intermediates:28},124:{inputs:0,outputs:1,name:"PUSH29",intermediates:29},125:{inputs:0,outputs:1,name:"PUSH30",intermediates:30},126:{inputs:0,outputs:1,name:"PUSH31",intermediates:31},127:{inputs:0,outputs:1,name:"PUSH32",intermediates:32},128:{inputs:1,outputs:2,name:"DUP1",intermediates:0},129:{inputs:2,outputs:3,name:"DUP2",intermediates:0},130:{inputs:3,outputs:4,name:"DUP3",intermediates:0},131:{inputs:4,outputs:5,name:"DUP4",intermediates:0},132:{inputs:5,outputs:6,name:"DUP5",intermediates:0},133:{inputs:6,outputs:7,name:"DUP6",intermediates:0},134:{inputs:7,outputs:8,name:"DUP7",intermediates:0},135:{inputs:8,outputs:9,name:"DUP8",intermediates:0},136:{inputs:9,outputs:10,name:"DUP9",intermediates:0},137:{inputs:10,outputs:11,name:"DUP10",intermediates:0},138:{inputs:11,outputs:12,name:"DUP11",intermediates:0},139:{inputs:12,outputs:13,name:"DUP12",intermediates:0},140:{inputs:13,outputs:14,name:"DUP13",intermediates:0},141:{inputs:14,outputs:15,name:"DUP14",intermediates:0},142:{inputs:15,outputs:16,name:"DUP15",intermediates:0},143:{inputs:16,outputs:17,name:"DUP16",intermediates:0},144:{inputs:2,outputs:2,name:"SWAP1",intermediates:0},145:{inputs:3,outputs:3,name:"SWAP2",intermediates:0},146:{inputs:4,outputs:4,name:"SWAP3",intermediates:0},147:{inputs:5,outputs:5,name:"SWAP4",intermediates:0},148:{inputs:6,outputs:6,name:"SWAP5",intermediates:0},149:{inputs:7,outputs:7,name:"SWAP6",intermediates:0},150:{inputs:8,outputs:8,name:"SWAP7",intermediates:0},151:{inputs:9,outputs:9,name:"SWAP8",intermediates:0},152:{inputs:10,outputs:10,name:"SWAP9",intermediates:0},153:{inputs:11,outputs:11,name:"SWAP10",intermediates:0},154:{inputs:12,outputs:12,name:"SWAP11",intermediates:0},155:{inputs:13,outputs:13,name:"SWAP12",intermediates:0},156:{inputs:14,outputs:14,name:"SWAP13",intermediates:0},157:{inputs:15,outputs:15,name:"SWAP14",intermediates:0},158:{inputs:16,outputs:16,name:"SWAP15",intermediates:0},159:{inputs:17,outputs:17,name:"SWAP16",intermediates:0},160:{inputs:2,outputs:0,name:"LOG0",intermediates:0},161:{inputs:3,outputs:0,name:"LOG1",intermediates:0},162:{inputs:4,outputs:0,name:"LOG2",intermediates:0},163:{inputs:5,outputs:0,name:"LOG3",intermediates:0},164:{inputs:6,outputs:0,name:"LOG4",intermediates:0},208:{inputs:1,outputs:1,name:"DATALOAD",intermediates:0},209:{inputs:0,outputs:1,name:"DATALOADN",intermediates:2},210:{inputs:0,outputs:1,name:"DATASIZE",intermediates:0},211:{inputs:3,outputs:0,name:"DATACOPY",intermediates:0},224:{inputs:0,outputs:0,name:"RJUMP",intermediates:2},225:{inputs:1,outputs:0,name:"RJUMPI",intermediates:2},226:{inputs:1,outputs:0,name:"RJUMPV",intermediates:0},227:{inputs:0,outputs:0,name:"CALLF",intermediates:2},228:{inputs:0,outputs:0,name:"RETF",intermediates:0,terminating:!0},229:{inputs:0,outputs:0,name:"JUMPF",intermediates:2,terminating:!0},230:{inputs:0,outputs:1,name:"DUPN",intermediates:1},231:{inputs:0,outputs:0,name:"SWAPN",intermediates:1},232:{inputs:0,outputs:0,name:"EXCHANGE",intermediates:1},236:{inputs:4,outputs:1,name:"EOFCREATE",intermediates:1},238:{inputs:2,outputs:0,name:"RETURNCONTRACT",intermediates:1,terminating:!0},243:{inputs:2,outputs:0,name:"RETURN",intermediates:0,terminating:!0},247:{inputs:1,outputs:1,name:"RETURNDATALOAD",intermediates:0},248:{inputs:4,outputs:1,name:"EXTCALL",intermediates:0},249:{inputs:3,outputs:1,name:"EXTDELEGATECALL",intermediates:0},251:{inputs:3,outputs:1,name:"EXTSTATICCALL",intermediates:0},253:{inputs:2,outputs:0,name:"REVERT",intermediates:0,terminating:!0},254:{inputs:0,outputs:0,name:"INVALID",intermediates:0,terminating:!0}},ze={InitCode:"initCode",DeploymentCode:"deploymentCode",RuntimeCode:"runtimeCode"};function bc(t,e,s=ze.RuntimeCode){return _c(t,e,s)}function Br(t,e){return new DataView(t.buffer).getInt16(e)}function Cr(t,e){return new DataView(t.buffer).getUint16(e)}function _c(t,e,s=ze.RuntimeCode){const n=new Map,r=e.getActiveOpcodes(),i=new Set;for(const[l]of r)i.add(l);i.add(254),i.delete(56),i.delete(57),i.delete(90),i.delete(59),i.delete(60),i.delete(63),i.delete(242),i.delete(255),i.delete(86),i.delete(87),i.delete(88),i.delete(240),i.delete(245);const a=new Set;a.add(0),a.add(243),a.add(253),a.add(254),a.add(238),a.add(228),a.add(229),a.add(224);for(const l of a)i.has(l)||a.delete(l);const o=new Set,c={};let d=-1;for(const l of t.body.codeSections){let _=function($){h.has($)&&P(E.INVALID_RJUMP),m.add($)},b=function($){m.has($)&&P(E.INVALID_RJUMP),h.add($)};const h=new Set,m=new Set;d++,c[d]=new Set;const w=t.body.typeSections[d].outputs===128;let G=!1;const k=new Set;k.add(0);let O=0,Z=0;const X=t.body.typeSections[d].inputs;let H=X;const W=[X],v=[X];for(;O<l.length;){const $=new Set;k.has(O)||P(E.UNREACHABLE_CODE),(W[O]===void 0||v[O]===void 0)&&P(E.UNREACHABLE_CODE),o.add(O);const M=l[O],F=W[O],C=v[O],B=At[M].inputs,A=At[M].outputs;F-B<0&&P(E.STACK_UNDERFLOW);const T=A-B;let L=F+T,R=C+T;if(R>1024&&P(E.STACK_OVERFLOW),w&&M===228&&P(E.INVALID_RETURNING_SECTION),Z=M,i.has(M)||P(E.INVALID_OPCODE),M===224||M===225){const I=Br(l,O+1)+O+3;(I<0||I>=l.length)&&P(E.INVALID_RJUMP),$.add(I),_(I),k.add(I),M===224&&!k.has(O+3)&&O+3<l.length&&P(E.UNREACHABLE_CODE)}else if(M===226){const I=l[O+1]+1;I===void 0?P(E.OPCODE_INTERMEDIATES_OOB):I===0&&P(E.RJUMPV_TABLE_SIZE0),O+I*2+2>=l.length&&P(E.OPCODE_INTERMEDIATES_OOB);const U=O+2+I*2;for(let V=0;V<I;V++){const fe=O+2+V*2;b(fe),b(fe+1);const ee=Br(l,fe)+U;(ee<0||ee>=l.length)&&P(E.OPCODE_INTERMEDIATES_OOB),$.add(ee),_(ee),k.add(ee)}b(O+1),O+=2*I+1}else if(M===227||M===229){const I=Cr(l,O+1);if(c[d].add(I),I>=t.header.codeSizes.length&&P(E.INVALID_CALL_TARGET),M===227){const U=t.body.typeSections[I].outputs,V=t.body.typeSections[I].inputs;U===128&&P(E.INVALID_CALLF_RETURNING),F<V&&P(E.STACK_UNDERFLOW),C+t.body.typeSections[I].maxStackHeight-V>1024&&P(E.STACK_OVERFLOW),L+=U-V,R+=U-V}else{const U=t.body.typeSections[d].outputs,V=t.body.typeSections[I].outputs,fe=t.body.typeSections[I].inputs,ee=V===128;if(V>U&&!ee&&P(E.INVALID_JUMPF),w&&V<=127&&P(E.INVALID_RETURNING_SECTION),ee)F<fe&&P(E.STACK_UNDERFLOW);else{const J=U+fe-V;F===C&&C===J||P(E.INVALID_STACK_HEIGHT),G=!0}C+t.body.typeSections[I].maxStackHeight-fe>1024&&P(E.STACK_OVERFLOW)}}else if(M===228){const I=t.body.typeSections[d].outputs;F===C&&C===I||P(E.INVALID_STACK_HEIGHT),G=!0}else if(M===230)l[O+1]+1>F&&P(E.STACK_UNDERFLOW);else if(M===231)l[O+1]+2>F&&P(E.STACK_UNDERFLOW);else if(M===232){const I=l[O+1],U=(I>>4)+1,V=(I&15)+1;U+V+1>F&&P(E.STACK_UNDERFLOW)}else if(M===236){const I=l[O+1];I>=t.header.containerSizes.length&&P(E.INVALID_EOF_CREATE_TARGET),n.has(I)&&n.get(I)!==ze.InitCode&&P(E.CONTAINER_DOUBLE_TYPE),n.set(I,ze.InitCode)}else if(M===238){s!==ze.InitCode&&P(E.CONTAINER_TYPE_ERROR);const I=l[O+1];I>=t.header.containerSizes.length&&P(E.INVALID_RETURN_CONTRACT_TARGET),n.has(I)&&n.get(I)!==ze.DeploymentCode&&P(E.CONTAINER_DOUBLE_TYPE),n.set(I,ze.DeploymentCode)}else if(M===209){const U=Cr(l,O+1)+32;t.header.dataSize<U&&P(E.DATALOADN_OOB)}else(M===0||M===243)&&s===ze.InitCode&&P(E.CONTAINER_TYPE_ERROR);const D=At[M].intermediates;if(D>0){for(let I=1;I<=D;I++)b(O+I);O+=D}O>=l.length&&P(E.OPCODE_INTERMEDIATES_OOB),O++,At[M].terminating===void 0&&(k.add(O),M!==224&&$.add(O));for(const I of $)I<O&&(W[I]!==L||v[I]!==R)&&P(E.UNSTABLE_STACK),v[I]===void 0?(W[I]=L,v[I]=R):(W[I]=Math.min(W[I],L),v[I]=Math.max(v[I],R));H=Math.max(R,H)}a.has(Z)||P(E.INVALID_TERMINATOR),t.body.typeSections[d].maxStackHeight!==H&&P(E.MAX_STACK_HEIGHT_VIOLATION),H>1024&&P(E.MAX_STACK_HEIGHT_LIMIT),!G&&!w&&P(E.RETURNING_NO_RETURN)}const f=new Set;f.add(0);const u=[0];for(;u.length>0;){const l=c[u.pop()];for(const h of l)f.has(h)||(f.add(h),u.push(h))}return f.size!==t.header.codeSizes.length&&P(E.UNREACHABLE_CODE_SECTIONS),n.size!==t.header.containerSizes.length&&P(E.UNREACHABLE_CONTAINER_SECTIONS),n}const Qe={Default:"default",Initmode:"initMode",TxInitmode:"txInitMode"};class zi{constructor(e){this.data=e,this.ptr=0}readBytes(e,s){const n=this.ptr+e;n>this.data.length&&P(E.OUT_OF_BOUNDS,this.ptr,s);const r=this.ptr;return this.ptr+=e,this.data.slice(r,n)}readUint(e){return this.ptr>=this.data.length&&P(E.OUT_OF_BOUNDS,this.ptr,e),this.data[this.ptr++]}verifyUint(e,s){this.readUint()!==e&&P(E.VERIFY_UINT,this.ptr-1,s)}readUint16(e){this.ptr+2>this.data.length&&P(E.OUT_OF_BOUNDS,this.ptr,e);const n=this.ptr;return this.ptr+=2,new DataView(this.data.buffer).getUint16(n)}getPtr(){return this.ptr}readRemainder(){return this.data.slice(this.ptr)}isAtEnd(){return this.ptr===this.data.length}}class xc{constructor(e){if(e.length>tc)throw N("err: container size more than maximum valid size");const s=new zi(e);if(s.verifyUint(js,E.FORMAT),s.verifyUint(Xn,E.MAGIC),s.verifyUint(qi,E.VERSION),e.length<15)throw N("err: container size less than minimum valid size");s.verifyUint(sc,E.KIND_TYPE);const n=s.readUint16(E.TYPE_SIZE);if(n<oc&&P(E.INVALID_TYPE_SIZE,n),n%pn!==0&&P(E.INVALID_TYPE_SIZE,n),n>cc)throw N(`err: number of code sections must not exceed 1024 (got ${n})`);s.verifyUint(nc,E.KIND_CODE);const r=s.readUint16(E.CODE_SIZE);r<dc&&P(E.MIN_CODE_SECTIONS),r!==n/pn&&P(E.TYPE_SECTIONS,n/pn,r);const i=[];for(let f=0;f<r;f++){const u=s.readUint16(E.CODE_SECTION);u<fc&&P(E.CODE_SECTION_SIZE),i.push(u)}let a=s.readUint();const o=[];if(a===rc){const f=s.readUint16(E.CONTAINER_SIZE);f<uc&&P(E.CONTAINER_SECTION_SIZE),f>lc&&P(E.CONTAINER_SECTION_SIZE);for(let u=0;u<f;u++){const l=s.readUint16(E.CONTAINER_SECTION);l<hc&&P(E.CONTAINER_SECTION_MIN),o.push(l)}a=s.readUint()}a!==ic&&P(E.KIND_DATA),this.dataSizePtr=s.getPtr();const c=s.readUint16(E.DATA_SIZE);s.verifyUint(ac,E.TERMINATOR),this.typeSize=n,this.codeSizes=i,this.containerSizes=o,this.dataSize=c,this.buffer=e.slice(0,s.getPtr());const d=this.buffer.length+this.typeSize;this.codeStartPos=[d]}sections(){return[this.typeSize,this.codeSizes,this.containerSizes,this.dataSize]}sectionSizes(){return[1,this.codeSizes.length,this.containerSizes.length,1]}getCodePosition(e){if(this.codeStartPos[e])return this.codeStartPos[e];const s=this.codeStartPos.length;let n=this.codeStartPos[s-1];for(let r=s;r<=e;r++)n+=this.codeSizes[r-1],this.codeStartPos[r]=n;return n}getSectionFromProgramCounter(e){const s=this.codeSizes.length-1,r=this.getCodePosition(s)+this.codeSizes[s];if(e<0||e>r)throw N("program counter out of bounds");this.codeStartPos.length<this.codeSizes.length&&this.getCodePosition(this.codeSizes.length-1);for(let i=0;i<this.codeSizes.length;i++)if(e<this.codeStartPos[i]+this.codeSizes[i])return i;throw N(`Invalid program counter value: ${e}`)}}class Ec{constructor(e,s,n=Qe.Default,r=!1){const i=new zi(e),a=[];for(let l=0;l<s.typeSize/4;l++){const h=i.readUint(E.INPUTS),m=i.readUint(E.OUTPUTS),_=i.readUint16(E.MAX_STACK_HEIGHT);l===0&&(h!==0&&P(E.CODE0_INPUTS),m!==128&&P(E.CODE0_OUTPUTS)),h>mc&&P(E.MAX_INPUTS,l,h),m>pc&&P(E.MAX_OUTPUTS,l,m),_>gc&&P(E.MAX_STACK_HEIGHT_LIMIT,l,_),a.push({inputs:h,outputs:m,maxStackHeight:_})}const o=i.getPtr(),c=[];for(const[l,h]of s.codeSizes.entries())try{const m=i.readBytes(h);c.push(m)}catch{P(E.CODE_SECTION,l)}const d=e.slice(o,i.getPtr()),f=[];for(const[l,h]of s.containerSizes.entries())try{const m=i.readBytes(h);f.push(m)}catch{P(E.CONTAINER_SECTION,l)}let u;n!==Qe.Initmode&&!r?(u=i.readBytes(s.dataSize,E.DATA_SECTION),n===Qe.Default?i.isAtEnd()||P(E.DANGLING_BYTES):this.txCallData=i.readRemainder()):(u=i.readRemainder(),u.length>s.dataSize&&P(E.DANGLING_BYTES)),this.typeSections=a,this.codeSections=c,this.containerSections=f,this.entireCode=d,this.dataSection=u,this.buffer=e}sections(){return[this.typeSections,this.codeSections,this.dataSection]}size(){return{typeSize:this.typeSections.length,codeSize:this.codeSections.length,dataSize:this.dataSection.length}}sectionSizes(){return[this.typeSections.map(()=>4),this.codeSections.map(e=>e.length),this.dataSection.length]}}class Jn{constructor(e,s=Qe.Default,n=!1){this.eofMode=s,this.header=new xc(e),this.body=new Ec(e.slice(this.header.buffer.length),this.header,s,n),this.buffer=e}}function Wi(t,e,s=ze.RuntimeCode,n=Qe.Default){const r=new Jn(t,n,s===ze.DeploymentCode),i=bc(r,e,s);for(let a=0;a<r.body.containerSections.length;a++){const o=r.body.containerSections[a],c=i.get(a);Wi(o,e,c)}return r}const Zi="EVMError",yc={OUT_OF_GAS:"out of gas",CODESTORE_OUT_OF_GAS:"code store out of gas",CODESIZE_EXCEEDS_MAXIMUM:"code size to deposit exceeds maximum code size",STACK_UNDERFLOW:"stack underflow",STACK_OVERFLOW:"stack overflow",INVALID_JUMP:"invalid JUMP",INVALID_OPCODE:"invalid opcode",OUT_OF_RANGE:"value out of range",REVERT:"revert",STATIC_STATE_CHANGE:"static state change",INTERNAL_ERROR:"internal error",CREATE_COLLISION:"create collision",STOP:"stop",REFUND_EXHAUSTED:"refund exhausted",VALUE_OVERFLOW:"value overflow",INSUFFICIENT_BALANCE:"insufficient balance",INVALID_BYTECODE_RESULT:"invalid bytecode deployed",INITCODE_SIZE_VIOLATION:"initcode exceeds max initcode size",INVALID_INPUT_LENGTH:"invalid input length",INVALID_EOF_FORMAT:"invalid EOF format",BLS_12_381_INVALID_INPUT_LENGTH:"invalid input length",BLS_12_381_POINT_NOT_ON_CURVE:"point not on curve",BLS_12_381_INPUT_EMPTY:"input is empty",BLS_12_381_FP_NOT_IN_FIELD:"fp point not in field",BN254_FP_NOT_IN_FIELD:"fp point not in field",INVALID_COMMITMENT:"kzg commitment does not match versioned hash",INVALID_INPUTS:"kzg inputs invalid",INVALID_PROOF:"kzg proof invalid"};class p{constructor(e){this.error=e,this.errorType=Zi}}p.errorMessages=yc;var bs={exports:{}},gn,Nr;function Ic(){if(Nr)return gn;Nr=1;var t=1e3,e=t*60,s=e*60,n=s*24,r=n*7,i=n*365.25;gn=function(f,u){u=u||{};var l=typeof f;if(l==="string"&&f.length>0)return a(f);if(l==="number"&&isFinite(f))return u.long?c(f):o(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function a(f){if(f=String(f),!(f.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(u){var l=parseFloat(u[1]),h=(u[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return l*i;case"weeks":case"week":case"w":return l*r;case"days":case"day":case"d":return l*n;case"hours":case"hour":case"hrs":case"hr":case"h":return l*s;case"minutes":case"minute":case"mins":case"min":case"m":return l*e;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function o(f){var u=Math.abs(f);return u>=n?Math.round(f/n)+"d":u>=s?Math.round(f/s)+"h":u>=e?Math.round(f/e)+"m":u>=t?Math.round(f/t)+"s":f+"ms"}function c(f){var u=Math.abs(f);return u>=n?d(f,u,n,"day"):u>=s?d(f,u,s,"hour"):u>=e?d(f,u,e,"minute"):u>=t?d(f,u,t,"second"):f+" ms"}function d(f,u,l,h){var m=u>=l*1.5;return Math.round(f/l)+" "+h+(m?"s":"")}return gn}var bn,Or;function Ac(){if(Or)return bn;Or=1;function t(e){n.debug=n,n.default=n,n.coerce=d,n.disable=o,n.enable=i,n.enabled=c,n.humanize=Ic(),n.destroy=f,Object.keys(e).forEach(u=>{n[u]=e[u]}),n.names=[],n.skips=[],n.formatters={};function s(u){let l=0;for(let h=0;h<u.length;h++)l=(l<<5)-l+u.charCodeAt(h),l|=0;return n.colors[Math.abs(l)%n.colors.length]}n.selectColor=s;function n(u){let l,h=null,m,_;function b(...w){if(!b.enabled)return;const G=b,k=Number(new Date),O=k-(l||k);G.diff=O,G.prev=l,G.curr=k,l=k,w[0]=n.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let Z=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(H,W)=>{if(H==="%%")return"%";Z++;const v=n.formatters[W];if(typeof v=="function"){const $=w[Z];H=v.call(G,$),w.splice(Z,1),Z--}return H}),n.formatArgs.call(G,w),(G.log||n.log).apply(G,w)}return b.namespace=u,b.useColors=n.useColors(),b.color=n.selectColor(u),b.extend=r,b.destroy=n.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(m!==n.namespaces&&(m=n.namespaces,_=n.enabled(u)),_),set:w=>{h=w}}),typeof n.init=="function"&&n.init(b),b}function r(u,l){const h=n(this.namespace+(typeof l>"u"?":":l)+u);return h.log=this.log,h}function i(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];const l=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const h of l)h[0]==="-"?n.skips.push(h.slice(1)):n.names.push(h)}function a(u,l){let h=0,m=0,_=-1,b=0;for(;h<u.length;)if(m<l.length&&(l[m]===u[h]||l[m]==="*"))l[m]==="*"?(_=m,b=h,m++):(h++,m++);else if(_!==-1)m=_+1,b++,h=b;else return!1;for(;m<l.length&&l[m]==="*";)m++;return m===l.length}function o(){const u=[...n.names,...n.skips.map(l=>"-"+l)].join(",");return n.enable(""),u}function c(u){for(const l of n.skips)if(a(u,l))return!1;for(const l of n.names)if(a(u,l))return!0;return!1}function d(u){return u instanceof Error?u.stack||u.message:u}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return bn=t,bn}var vr;function wc(){return vr||(vr=1,(function(t,e){var s={};e.formatArgs=r,e.save=i,e.load=a,e.useColors=n,e.storage=o(),e.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let d;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(d=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(d[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;d.splice(1,0,f,"color: inherit");let u=0,l=0;d[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(u++,h==="%c"&&(l=u))}),d.splice(l,0,f)}e.log=console.debug||console.log||(()=>{});function i(d){try{d?e.storage.setItem("debug",d):e.storage.removeItem("debug")}catch{}}function a(){let d;try{d=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!d&&typeof process<"u"&&"env"in process&&(d=s.DEBUG),d}function o(){try{return localStorage}catch{}}t.exports=Ac()(e);const{formatters:c}=t.exports;c.j=function(d){try{return JSON.stringify(d)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}})(bs,bs.exports)),bs.exports}var Bc=wc();const Nt=$i(Bc),ns=new Uint8Array([js,Xn]),Cc=rt(ns);function _t(t){const e=t.subarray(0,ns.length);return pe(ns,e)}function Nc(t,e=Qe.Default){t.env.eof={container:new Jn(t.code,e),eofRunState:{returnStack:[]}},t.env.eof.container.body.txCallData!==void 0&&(t.env.callData=t.env.eof.container.body.txCallData);const s=t.env.eof.container.header.getCodePosition(0);t.programCounter=s}const Oc=3e7,vc=12,Tc=Oc/vc;class Gc{constructor(e){this.runTime=0,this.tag=e,this.startTime=performance.now()}pause(){this.runTime=this.runTime+performance.now()-this.startTime}unpause(){this.startTime=performance.now()}time(){return(performance.now()-this.startTime+this.runTime)/1e3}}class kc{constructor(){this.clear()}clear(){this.opcodes={},this.precompiles={}}getLogs(){function e(s){const n=[];for(const r in s){const i=s[r],a=i.gasUsed/i.time,o={calls:i.calls,totalTime:Math.round(i.time*1e6)/1e3,avgTimePerCall:Math.round(i.time/i.calls*1e6)/1e3,gasUsed:i.gasUsed,millionGasPerSecond:Math.round(a/1e3)/1e3,blocksPerSlot:Math.round(a/Tc*1e3)/1e3,tag:r};i.dynamicGasUsed!==void 0&&(o.staticGas=i.staticGas,o.staticGasUsed=i.staticGas*i.calls,o.dynamicGasUsed=i.dynamicGasUsed),n.push(o)}return n.sort((r,i)=>i.millionGasPerSecond-r.millionGasPerSecond),n}return{opcodes:e(this.opcodes),precompiles:e(this.precompiles)}}hasTimer(){return this.currentTimer!==void 0}startTimer(e){if(this.currentTimer!==void 0)throw N("Cannot have two timers running at the same time");return this.currentTimer=new Gc(e),this.currentTimer}pauseTimer(){const e=this.currentTimer;if(e===void 0)throw N("No timer to pause");return e.pause(),this.currentTimer=void 0,e}unpauseTimer(e){if(this.currentTimer!==void 0)throw N("Cannot unpause timer: another timer is already running");e.unpause(),this.currentTimer=e}stopTimer(e,s,n="opcodes",r,i){if(this.currentTimer===void 0||this.currentTimer!==e)throw N("Cannot stop timer: another timer is already running");const a=e.time(),o=e.tag;this.currentTimer=void 0;const c=this[n];c[o]===void 0&&(c[o]={calls:0,time:0,gasUsed:0});const d=c[o];d.calls++,d.time+=a,d.gasUsed+=s,n==="opcodes"&&(d.staticGas=r,d.dynamicGasUsed=(d.dynamicGasUsed??0)+i)}}const Lc=(t,e)=>{const s=t%e;return s===0?t:t+e-s},_n=8192;class Sc{constructor(){this._store=new Uint8Array(_n)}extend(e,s){if(s===0)return;const r=Lc(e+s,32)-this._store.length;if(r>0){const i=Math.ceil(r/_n)*_n;this._store=De(this._store,new Uint8Array(i))}}write(e,s,n){if(s!==0){if(this.extend(e,s),n.length!==s)throw N("Invalid value size");if(e+s>this._store.length)throw N("Value exceeds memory capacity");this._store.set(n,e)}}read(e,s,n){this.extend(e,s);const r=this._store.subarray(e,e+s);if(n===!0)return r;const i=new Uint8Array(s);return i.set(r),i}}const at={value:g,caller:st(),data:new Uint8Array(0),depth:0,isStatic:!1,isCompiled:!1,delegatecall:!1,gasRefund:g};class xt{constructor(e){if(this.to=e.to,this.value=e.value??at.value,this.caller=e.caller??at.caller,this.gasLimit=e.gasLimit,this.data=e.data??at.data,this.eofCallData=e.eofCallData,this.depth=e.depth??at.depth,this.code=e.code,this._codeAddress=e.codeAddress,this.isStatic=e.isStatic??at.isStatic,this.isCompiled=e.isCompiled??at.isCompiled,this.salt=e.salt,this.selfdestruct=e.selfdestruct,this.createdAddresses=e.createdAddresses,this.delegatecall=e.delegatecall??at.delegatecall,this.gasRefund=e.gasRefund??at.gasRefund,this.blobVersionedHashes=e.blobVersionedHashes,this.accessWitness=e.accessWitness,this.value<0)throw N(`value field cannot be negative, received ${this.value}`)}get codeAddress(){const e=this._codeAddress??this.to;if(!e)throw N("Missing codeAddress");return e}}const Rc=(Y<<Di)-Y;function dt(t,e){let s=t%e;return s<g&&(s=e+s),s}function ot(t){return BigInt.asIntN(256,t)}function Tr(t){return BigInt.asUintN(256,t)}const Gr=BigInt(1157920892373162e62);function Pc(t,e){let s=Y;for(;e>g;)e%nt!==g&&(s=s*t%Gr),t=t*t%Gr,e=e/nt;return s}function ne(t){const e=t&Rc;return zo(e)}function zt(t){return pe(t,new Uint8Array(t.length))?new Uint8Array(0):se(t,32)}function S(t){throw new p(t)}function _s(t){const e=t.interpreter._evm.common.customCrypto.keccak256??rt,s=j(e(t.interpreter.getCode())),n=t.interpreter.getAddress().toString(),r=t.programCounter-1;return`${s}/${n}:${r}`}function tt(t,e){const s=t/e;return dt(t,e)===g?s:s<g?s-Y:s+Y}function Gt(t,e,s){const n=BigInt(t.length);e>n&&(e=n);let r=e+s;return r>n&&(r=n),t=t.subarray(Number(e),Number(r)),t=Ze(t,Number(s)),t}function Uc(t,e){switch(e){case"LOG":e+=t-160;break;case"PUSH":e+=t-95;break;case"DUP":e+=t-127;break;case"SWAP":e+=t-143;break}return e}function kr(t,e){return t.validJumps[e]===1}function bt(t,e,s,n){if(n.gteHardfork(y.TangerineWhistle)){const r=e-e/es;return t>r?r:t}else return t}function ae(t,e,s,n){if(s===g)return g;const r=tt(e+s,be);if(r<=t.memoryWordCount)return g;const i=r,a=n.param("memoryGas"),o=n.param("quadCoefficientDivGas");let c=i*a+i*i/o;if(c>t.highestMemCost){const d=t.highestMemCost;t.highestMemCost=c,c-=d}return t.memoryWordCount=r,c}function xs(t,e,s){const n=t.interpreter.getReturnData();if(n.length>0){const r=Number(e);let i=Number(s);BigInt(n.length)<i&&(i=n.length);const a=Gt(n,g,BigInt(i));t.memory.extend(r,i),t.memory.write(r,i,a)}}function Dc(t,e,s,n){if(s.length===0&&e.length===0||s.length>0&&e.length>0)return n.param("sstoreResetGas");if(s.length===0&&e.length>0){const r=n.param("sstoreResetGas");return t.interpreter.refundGas(n.param("sstoreRefundGas"),"updateSstoreGas"),r}else return n.param("sstoreSetGas")}const it=new Map([[0,function(){S(p.errorMessages.STOP)}],[1,function(t){const[e,s]=t.stack.popN(2),n=dt(e+s,ps);t.stack.push(n)}],[2,function(t){const[e,s]=t.stack.popN(2),n=dt(e*s,ps);t.stack.push(n)}],[3,function(t){const[e,s]=t.stack.popN(2),n=dt(e-s,ps);t.stack.push(n)}],[4,function(t){const[e,s]=t.stack.popN(2);let n;s===g?n=g:n=dt(e/s,ps),t.stack.push(n)}],[5,function(t){const[e,s]=t.stack.popN(2);let n;s===g?n=g:n=Tr(ot(e)/ot(s)),t.stack.push(n)}],[6,function(t){const[e,s]=t.stack.popN(2);let n;s===g?n=s:n=dt(e,s),t.stack.push(n)}],[7,function(t){const[e,s]=t.stack.popN(2);let n;s===g?n=s:n=ot(e)%ot(s),t.stack.push(Tr(n))}],[8,function(t){const[e,s,n]=t.stack.popN(3);let r;n===g?r=g:r=dt(e+s,n),t.stack.push(r)}],[9,function(t){const[e,s,n]=t.stack.popN(3);let r;n===g?r=g:r=dt(e*s,n),t.stack.push(r)}],[10,function(t){const[e,s]=t.stack.popN(2);if(e===nt)switch(s){case Yn:t.stack.push(vo);return;case Di:t.stack.push(To);return;case Oo:t.stack.push(Go);return}if(s===g){t.stack.push(Y);return}if(e===g){t.stack.push(e);return}const n=Pc(e,s);t.stack.push(n)}],[11,function(t){let[e,s]=t.stack.popN(2);if(e<Qt){const n=e*ht+Pi,r=(Y<<n)-Y;s>>n&Y?s=s|BigInt.asUintN(256,~r):s=s&r}t.stack.push(s)}],[16,function(t){const[e,s]=t.stack.popN(2),n=e<s?Y:g;t.stack.push(n)}],[17,function(t){const[e,s]=t.stack.popN(2),n=e>s?Y:g;t.stack.push(n)}],[18,function(t){const[e,s]=t.stack.popN(2),n=ot(e)<ot(s)?Y:g;t.stack.push(n)}],[19,function(t){const[e,s]=t.stack.popN(2),n=ot(e)>ot(s)?Y:g;t.stack.push(n)}],[20,function(t){const[e,s]=t.stack.popN(2),n=e===s?Y:g;t.stack.push(n)}],[21,function(t){const s=t.stack.pop()===g?Y:g;t.stack.push(s)}],[22,function(t){const[e,s]=t.stack.popN(2),n=e&s;t.stack.push(n)}],[23,function(t){const[e,s]=t.stack.popN(2),n=e|s;t.stack.push(n)}],[24,function(t){const[e,s]=t.stack.popN(2),n=e^s;t.stack.push(n)}],[25,function(t){const e=t.stack.pop(),s=BigInt.asUintN(256,~e);t.stack.push(s)}],[26,function(t){const[e,s]=t.stack.popN(2);if(e>be){t.stack.push(g);return}const n=s>>(Qt-e)*ht&ln;t.stack.push(n)}],[27,function(t){const[e,s]=t.stack.popN(2);if(e>gs){t.stack.push(g);return}const n=s<<e&un;t.stack.push(n)}],[28,function(t){const[e,s]=t.stack.popN(2);if(e>256){t.stack.push(g);return}const n=s>>e;t.stack.push(n)}],[29,function(t){const[e,s]=t.stack.popN(2);let n;const i=BigInt.asIntN(256,s)<0;if(e>256){i?n=un:n=g,t.stack.push(n);return}const a=s>>e;if(i){const o=ln-e,c=un>>o<<o;n=a|c}else n=a;t.stack.push(n)}],[30,function(t){const e=t.stack.pop();if(e===g){t.stack.push(gs);return}const n=256-e.toString(2).length;t.stack.push(BigInt(n))}],[32,function(t,e){const[s,n]=t.stack.popN(2);let r=new Uint8Array(0);n!==g&&(r=t.memory.read(Number(s),Number(n)));const i=BigInt(j((e.customCrypto.keccak256??rt)(r)));t.stack.push(i)}],[48,function(t){const e=z(t.interpreter.getAddress().bytes);t.stack.push(e)}],[49,async function(t){const e=t.stack.pop(),s=ne(e),n=await t.interpreter.getExternalBalance(s);t.stack.push(n)}],[50,function(t){t.stack.push(t.interpreter.getTxOrigin())}],[51,function(t){t.stack.push(t.interpreter.getCaller())}],[52,function(t){t.stack.push(t.interpreter.getCallValue())}],[53,function(t){const e=t.stack.pop();if(e>t.interpreter.getCallDataSize()){t.stack.push(g);return}const s=Number(e);let n=t.interpreter.getCallData().subarray(s,s+32);n=n.length?n:Uint8Array.from([0]);let r=z(n);n.length<32&&(r=r<<ht*BigInt(32-n.length)),t.stack.push(r)}],[54,function(t){const e=t.interpreter.getCallDataSize();t.stack.push(e)}],[55,function(t){const[e,s,n]=t.stack.popN(3);if(n!==g){const r=Gt(t.interpreter.getCallData(),s,n),i=Number(e),a=Number(n);t.memory.write(i,a,r)}}],[56,function(t){t.stack.push(t.interpreter.getCodeSize())}],[57,function(t){const[e,s,n]=t.stack.popN(3);if(n!==g){const r=Gt(t.interpreter.getCode(),s,n),i=Number(e),a=Number(n);t.memory.write(i,a,r)}}],[59,async function(t){const e=t.stack.pop(),s=ne(e),n=await t.stateManager.getCode(s);if(_t(n)){t.stack.push(BigInt(ns.length));return}const r=BigInt(n.length);t.stack.push(r)}],[60,async function(t){const[e,s,n,r]=t.stack.popN(4);if(r!==g){const i=ne(e);let a=await t.stateManager.getCode(i);_t(a)&&(a=ns);const o=Gt(a,n,r),c=Number(s),d=Number(r);t.memory.write(c,d,o)}}],[63,async function(t){const e=t.stack.pop(),s=ne(e),n=await t.stateManager.getCode(s);if(_t(n)){t.stack.push(z(Cc));return}const r=await t.stateManager.getAccount(s);if(!r||r.isEmpty()){t.stack.push(g);return}t.stack.push(BigInt(j(r.codeHash)))}],[61,function(t){t.stack.push(t.interpreter.getReturnDataSize())}],[62,function(t){const[e,s,n]=t.stack.popN(3);if(n!==g){const r=Gt(t.interpreter.getReturnData(),s,n),i=Number(e),a=Number(n);t.memory.write(i,a,r)}}],[58,function(t){t.stack.push(t.interpreter.getTxGasPrice())}],[64,async function(t,e){const s=t.stack.pop();if(e.isActivatedEIP(7709)){if(s>=t.interpreter.getBlockNumber()){t.stack.push(g);return}const n=t.interpreter.getBlockNumber()-s;if(n>gs||n<=g){t.stack.push(g);return}const r=new gt(Ia(e.param("historyStorageAddress"))),i=e.param("historyServeWindow"),a=se(oe(s%i),32);if(e.isActivatedEIP(6800)||e.isActivatedEIP(7864)){const c=t.env.accessWitness.readAccountStorage(r,s);t.interpreter.useGas(c,"BLOCKHASH")}const o=await t.stateManager.getStorage(r,a);t.stack.push(z(o))}else{const n=t.interpreter.getBlockNumber()-s;if(n>gs||n<=g){t.stack.push(g);return}const r=await t.blockchain.getBlock(Number(s));t.stack.push(z(r.hash()))}}],[65,function(t){t.stack.push(t.interpreter.getBlockCoinbase())}],[66,function(t){t.stack.push(t.interpreter.getBlockTimestamp())}],[67,function(t){t.stack.push(t.interpreter.getBlockNumber())}],[68,function(t,e){e.isActivatedEIP(4399)?t.stack.push(t.interpreter.getBlockPrevRandao()):t.stack.push(t.interpreter.getBlockDifficulty())}],[69,function(t){t.stack.push(t.interpreter.getBlockGasLimit())}],[70,function(t){t.stack.push(t.interpreter.getChainId())}],[71,function(t){t.stack.push(t.interpreter.getSelfBalance())}],[72,function(t){t.stack.push(t.interpreter.getBlockBaseFee())}],[73,function(t){const e=t.stack.pop();t.env.blobVersionedHashes.length>Number(e)?t.stack.push(BigInt(t.env.blobVersionedHashes[Number(e)])):t.stack.push(g)}],[74,function(t){t.stack.push(t.interpreter.getBlobBaseFee())}],[80,function(t){t.stack.pop()}],[81,function(t){const e=t.stack.pop(),s=t.memory.read(Number(e),32,!0);t.stack.push(z(s))}],[82,function(t){const[e,s]=t.stack.popN(2),n=se(oe(s),32),r=Number(e);t.memory.write(r,32,n)}],[83,function(t){const[e,s]=t.stack.popN(2),n=oe(s&ln),r=Number(e);t.memory.write(r,1,n)}],[84,async function(t){const e=t.stack.pop(),s=se(oe(e),32),n=await t.interpreter.storageLoad(s),r=n.length?z(n):g;t.stack.push(r)}],[85,async function(t){const[e,s]=t.stack.popN(2),n=se(oe(e),32);let r;s===g?r=Uint8Array.from([]):r=oe(s),await t.interpreter.storageStore(n,r)}],[86,function(t){const e=t.stack.pop();e>t.interpreter.getCodeSize()&&S(p.errorMessages.INVALID_JUMP+" at "+_s(t));const s=Number(e);kr(t,s)||S(p.errorMessages.INVALID_JUMP+" at "+_s(t)),t.programCounter=s}],[87,function(t){const[e,s]=t.stack.popN(2);if(s!==g){e>t.interpreter.getCodeSize()&&S(p.errorMessages.INVALID_JUMP+" at "+_s(t));const n=Number(e);kr(t,n)||S(p.errorMessages.INVALID_JUMP+" at "+_s(t)),t.programCounter=n}}],[88,function(t){t.stack.push(BigInt(t.programCounter-1))}],[89,function(t){t.stack.push(t.memoryWordCount*be)}],[90,function(t){t.stack.push(t.interpreter.getGasLeft())}],[91,function(){}],[92,function(t){const e=t.stack.pop(),s=se(oe(e),32),n=t.interpreter.transientStorageLoad(s),r=n.length?z(n):g;t.stack.push(r)}],[93,function(t){t.interpreter.isStatic()&&S(p.errorMessages.STATIC_STATE_CHANGE);const[e,s]=t.stack.popN(2),n=se(oe(e),32);let r;s===g?r=Uint8Array.from([]):r=oe(s),t.interpreter.transientStorageStore(n,r)}],[94,function(t){const[e,s,n]=t.stack.popN(3),r=t.memory.read(Number(s),Number(n),!0);t.memory.write(Number(e),Number(n),r)}],[95,function(t){t.stack.push(g)}],[96,function(t,e){const s=t.opCode-95;if((e.isActivatedEIP(6800)||e.isActivatedEIP(7864))&&t.env.chargeCodeAccesses===!0){const n=t.interpreter.getAddress(),r=Math.min(t.code.length,t.programCounter+1),i=Math.min(t.code.length,r+s-1),a=t.env.accessWitness.readAccountCodeChunks(n,r,i);t.interpreter.useGas(a,"PUSH")}if(!t.shouldDoJumpAnalysis)t.stack.push(t.cachedPushes[t.programCounter]),t.programCounter+=s;else{let n=t.code.subarray(t.programCounter,t.programCounter+s);n.length<s&&(n=Ze(n,s)),t.programCounter+=s,t.stack.push(z(n))}}],[128,function(t){const e=t.opCode-127;t.stack.dup(e)}],[144,function(t){const e=t.opCode-143;t.stack.swap(e)}],[160,function(t){const[e,s]=t.stack.popN(2),n=t.opCode-160,i=t.stack.popN(n).map(function(o){return se(oe(o),32)});let a=new Uint8Array(0);s!==g&&(a=t.memory.read(Number(e),Number(s))),t.interpreter.log(a,n,i)}],[208,function(t){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const e=t.stack.pop();if(e>t.env.eof.container.body.dataSection.length){t.stack.push(g);return}const s=Number(e);let n=t.env.eof.container.body.dataSection.subarray(s,s+32);n=n.length?n:Uint8Array.from([0]);let r=z(n);n.length<32&&(r=r<<ht*BigInt(32-n.length)),t.stack.push(r)}],[209,function(t){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const e=Number(z(t.code.subarray(t.programCounter,t.programCounter+2))),s=z(t.env.eof.container.body.dataSection.subarray(e,e+32));t.stack.push(s),t.programCounter+=2}],[210,function(t){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE),t.stack.push(BigInt(t.env.eof.container.body.dataSection.length))}],[211,function(t){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const[e,s,n]=t.stack.popN(3);if(n!==g){const r=Gt(t.env.eof.container.body.dataSection,s,n),i=Number(e),a=Number(n);t.memory.write(i,a,r)}}],[224,function(t){if(t.env.eof===void 0)S(p.errorMessages.INVALID_OPCODE);else{const e=t.env.code,s=new DataView(e.buffer).getInt16(t.programCounter);t.programCounter+=2+s}}],[225,function(t){if(t.env.eof===void 0)S(p.errorMessages.INVALID_OPCODE);else{if(t.stack.pop()>0){const s=t.env.code,n=new DataView(s.buffer).getInt16(t.programCounter);t.programCounter+=n}t.programCounter+=2}}],[226,function(t){if(t.env.eof===void 0)S(p.errorMessages.INVALID_OPCODE);else{const e=t.env.code,s=e[t.programCounter],n=(s+1)*2;t.programCounter+=1;const r=t.stack.pop();if(r<=s){const i=new DataView(e.buffer).getInt16(t.programCounter+Number(r)*2);t.programCounter+=n+i}else t.programCounter+=n}}],[227,function(t){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const e=dr(t.code.slice(t.programCounter,t.programCounter+2)),s=t.stack.length,n=t.env.eof.container.body.typeSections[e];s>1024-n.maxStackHeight+n.inputs&&S(E.STACK_OVERFLOW),t.env.eof.eofRunState.returnStack.length>=1024&&S(E.RETURN_STACK_OVERFLOW),t.env.eof?.eofRunState.returnStack.push(t.programCounter+2),t.programCounter=t.env.eof.container.header.getCodePosition(e)}],[228,function(t){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const e=t.env.eof.eofRunState.returnStack.pop();e===void 0&&S(E.RETF_NO_RETURN),t.programCounter=e}],[229,function(t){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const e=dr(t.code.slice(t.programCounter,t.programCounter+2)),s=t.stack.length,n=t.env.eof.container.body.typeSections[e];s>1024-n.maxStackHeight+n.inputs&&S(E.STACK_OVERFLOW),t.programCounter=t.env.eof.container.header.getCodePosition(e)}],[230,function(t){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const e=Number(z(t.code.subarray(t.programCounter,t.programCounter+1)))+1;t.stack.dup(e),t.programCounter++}],[231,function(t){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const e=Number(z(t.code.subarray(t.programCounter,t.programCounter+1)))+1;t.stack.swap(e),t.programCounter++}],[232,function(t){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const e=Number(z(t.code.subarray(t.programCounter,t.programCounter+1))),s=(e>>4)+1,n=(e&15)+1;t.stack.exchange(s,s+n),t.programCounter++}],[236,async function(t){if(t.env.eof===void 0)S(p.errorMessages.INVALID_OPCODE);else{t.interpreter.isStatic()&&S(p.errorMessages.STATIC_STATE_CHANGE);const e=t.env.code[t.programCounter],s=t.env.eof.container.body.containerSections[e],[n,r,i,a]=t.stack.popN(4),o=t.messageGasLimit;t.messageGasLimit=void 0;let c=new Uint8Array(0);a!==g&&(c=t.memory.read(Number(i),Number(a),!0)),t.programCounter++;const d=await t.interpreter.eofcreate(o,n,s,se(oe(r),32),c);t.stack.push(d)}}],[238,async function(t){if(t.env.eof===void 0)S(p.errorMessages.INVALID_OPCODE);else{const e=t.env.code[t.programCounter],s=t.env.eof.container.body.containerSections[e],n=new Jn(s,Qe.Initmode),[r,i]=t.stack.popN(2);let a=new Uint8Array(0);i!==g&&(a=t.memory.read(Number(r),Number(i)));const o=n.header.dataSize,d=n.body.dataSection.length+Number(i);d<o&&S(E.INVALID_RETURN_CONTRACT_DATA_SIZE),d>65535&&S(p.errorMessages.OUT_OF_GAS);const f=se(oe(BigInt(d)),2),u=n.header.dataSizePtr;s[u]=f[0],s[u+1]=f[1];const l=De(s,a);t.interpreter.finish(l)}}],[240,async function(t,e){const[s,n,r]=t.stack.popN(3);e.isActivatedEIP(3860)&&r>Number(e.param("maxInitCodeSize"))&&!t.interpreter._evm.allowUnlimitedInitCodeSize&&S(p.errorMessages.INITCODE_SIZE_VIOLATION);const i=t.messageGasLimit;t.messageGasLimit=void 0;let a=new Uint8Array(0);if(r!==g&&(a=t.memory.read(Number(n),Number(r),!0)),_t(a)){t.stack.push(g);return}const o=await t.interpreter.create(i,s,a);t.stack.push(o)}],[245,async function(t,e){t.interpreter.isStatic()&&S(p.errorMessages.STATIC_STATE_CHANGE);const[s,n,r,i]=t.stack.popN(4);e.isActivatedEIP(3860)&&r>Number(e.param("maxInitCodeSize"))&&!t.interpreter._evm.allowUnlimitedInitCodeSize&&S(p.errorMessages.INITCODE_SIZE_VIOLATION);const a=t.messageGasLimit;t.messageGasLimit=void 0;let o=new Uint8Array(0);if(r!==g&&(o=t.memory.read(Number(n),Number(r),!0)),_t(o)){t.stack.push(g);return}const c=await t.interpreter.create2(a,s,o,se(oe(i),32));t.stack.push(c)}],[241,async function(t,e){const[s,n,r,i,a,o,c]=t.stack.popN(7),d=ne(n);let f=new Uint8Array(0);a!==g&&(f=t.memory.read(Number(i),Number(a),!0));let u=t.messageGasLimit;if(r!==g){const h=e.param("callStipendGas");t.interpreter.addStipend(h),u+=h}t.messageGasLimit=void 0;const l=await t.interpreter.call(u,d,r,f);xs(t,o,c),t.stack.push(l)}],[242,async function(t,e){const[s,n,r,i,a,o,c]=t.stack.popN(7),d=ne(n);let f=t.messageGasLimit;if(r!==g){const h=e.param("callStipendGas");t.interpreter.addStipend(h),f+=h}t.messageGasLimit=void 0;let u=new Uint8Array(0);a!==g&&(u=t.memory.read(Number(i),Number(a),!0));const l=await t.interpreter.callCode(f,d,r,u);xs(t,o,c),t.stack.push(l)}],[244,async function(t){const e=t.interpreter.getCallValue(),[s,n,r,i,a,o]=t.stack.popN(6),c=ne(n);let d=new Uint8Array(0);i!==g&&(d=t.memory.read(Number(r),Number(i),!0));const f=t.messageGasLimit;t.messageGasLimit=void 0;const u=await t.interpreter.callDelegate(f,c,e,d);xs(t,a,o),t.stack.push(u)}],[247,function(t){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const e=t.stack.pop();if(e>t.interpreter.getReturnDataSize()){t.stack.push(g);return}const s=Number(e);let n=t.interpreter.getReturnData().subarray(s,s+32);n=n.length?n:Uint8Array.from([0]);let r=z(n);n.length<32&&(r=r<<ht*BigInt(32-n.length)),t.stack.push(r)}],[248,async function(t){if(t.env.eof===void 0)S(p.errorMessages.INVALID_OPCODE);else{const[e,s,n,r]=t.stack.popN(4),i=t.messageGasLimit;if(t.messageGasLimit=void 0,i===-Y){t.stack.push(Y),t.returnBytes=new Uint8Array(0);return}const a=ne(e);let o=new Uint8Array(0);n!==g&&(o=t.memory.read(Number(s),Number(n),!0));const c=await t.interpreter.call(i,a,r,o);t.stack.push(c)}}],[249,async function(t){if(t.env.eof===void 0)S(p.errorMessages.INVALID_OPCODE);else{const e=t.interpreter.getCallValue(),[s,n,r]=t.stack.popN(3),i=t.messageGasLimit;if(t.messageGasLimit=void 0,i===-Y){t.stack.push(Y),t.returnBytes=new Uint8Array(0);return}const a=ne(s),o=await t.stateManager.getCode(a);if(!_t(o)){t.stack.push(Y),t.returnBytes=new Uint8Array(0);return}let c=new Uint8Array(0);r!==g&&(c=t.memory.read(Number(n),Number(r),!0));const d=await t.interpreter.callDelegate(i,a,e,c);t.stack.push(d)}}],[250,async function(t){const e=g,[s,n,r,i,a,o]=t.stack.popN(6),c=ne(n),d=t.messageGasLimit;t.messageGasLimit=void 0;let f=new Uint8Array(0);i!==g&&(f=t.memory.read(Number(r),Number(i),!0));const u=await t.interpreter.callStatic(d,c,e,f);xs(t,a,o),t.stack.push(u)}],[251,async function(t){if(t.env.eof===void 0)S(p.errorMessages.INVALID_OPCODE);else{const e=g,[s,n,r]=t.stack.popN(3),i=t.messageGasLimit;if(t.messageGasLimit=void 0,i===-Y){t.stack.push(Y),t.returnBytes=new Uint8Array(0);return}const a=ne(s);let o=new Uint8Array(0);r!==g&&(o=t.memory.read(Number(n),Number(r),!0));const c=await t.interpreter.callStatic(i,a,e,o);t.stack.push(c)}}],[243,function(t){const[e,s]=t.stack.popN(2);let n=new Uint8Array(0);s!==g&&(n=t.memory.read(Number(e),Number(s))),t.interpreter.finish(n)}],[253,function(t){const[e,s]=t.stack.popN(2);let n=new Uint8Array(0);s!==g&&(n=t.memory.read(Number(e),Number(s))),t.interpreter.revert(n)}],[255,async function(t){const e=t.stack.pop(),s=ne(e);return t.interpreter.selfDestruct(s)}]]),Mc=it.get(96);for(let t=97;t<=127;t++)it.set(t,Mc);const Hc=it.get(128);for(let t=129;t<=143;t++)it.set(t,Hc);const Fc=it.get(144);for(let t=145;t<=159;t++)it.set(t,Fc);const Vc=it.get(160);for(let t=161;t<=164;t++)it.set(t,Vc);function $c(t){return"opcode"in t&&"opcodeName"in t&&"baseFee"in t&&"logicFunction"in t}class qc{async getBlock(){return{hash(){return new Uint8Array(32)}}}async putBlock(){}shallowCopy(){return this}}const ji=new Uint8Array([239,1,0]);function zc(t,e,s,n,r){return pe(e,n)?r.param("netSstoreNoopGas"):pe(s,e)?s.length===0?r.param("netSstoreInitGas"):(n.length===0&&t.interpreter.refundGas(r.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund"),r.param("netSstoreCleanGas")):(s.length!==0&&(e.length===0?t.interpreter.subRefund(r.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund"):n.length===0&&t.interpreter.refundGas(r.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund")),pe(s,n)&&(s.length===0?t.interpreter.refundGas(r.param("netSstoreResetClearRefundGas"),"EIP-1283 -> netSstoreResetClearRefund"):t.interpreter.refundGas(r.param("netSstoreResetRefundGas"),"EIP-1283 -> netSstoreResetRefund")),r.param("netSstoreDirtyGas"))}function Oe(t,e,s,n=!0,r=!1){if(!s.isActivatedEIP(2929))return g;if(t.interpreter.journal.isWarmedAddress(e)){if(n&&!r)return s.param("warmstoragereadGas")}else{if(t.interpreter.journal.addWarmedAddress(e),n&&!s.isActivatedEIP(7864))return s.param("coldaccountaccessGas");if(n&&s.isActivatedEIP(7864))return s.param("warmstoragereadGas")}return g}function Lr(t,e,s,n,r=!0){if(!n.isActivatedEIP(2929))return g;const i=t.interpreter.getAddress().bytes;if(!t.interpreter.journal.isWarmedStorage(i,e)){if(t.interpreter.journal.addWarmedStorage(i,e),r&&!(n.isActivatedEIP(6800)||n.isActivatedEIP(7864)))return n.param("coldsloadGas")}else if(r&&(!s||n.isActivatedEIP(6800)||n.isActivatedEIP(7864)))return n.param("warmstoragereadGas");return g}function xn(t,e,s,n,r){if(!r.isActivatedEIP(2929))return s;const i=t.interpreter.getAddress().bytes,a=r.param("warmstoragereadGas"),o=r.param("coldsloadGas");if(t.interpreter.journal.isWarmedStorage(i,e))switch(n){case"noop":return a;case"initRefund":return r.param("sstoreInitEIP2200Gas")-a;case"cleanRefund":return r.param("sstoreResetGas")-o-a}return s}function Wc(t,e,s,n,r,i){if(t.interpreter.getGasLeft()<=i.param("sstoreSentryEIP2200Gas")&&S(p.errorMessages.OUT_OF_GAS),pe(e,n)){const a=i.param("sstoreNoopEIP2200Gas");return xn(t,r,a,"noop",i)}if(pe(s,e))return s.length===0?i.param("sstoreInitEIP2200Gas"):(n.length===0&&t.interpreter.refundGas(i.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200"),i.param("sstoreCleanEIP2200Gas"));if(s.length>0&&(e.length===0?t.interpreter.subRefund(i.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200"):n.length===0&&t.interpreter.refundGas(i.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200")),pe(s,n))if(s.length===0){const a=i.param("sstoreInitRefundEIP2200Gas");t.interpreter.refundGas(xn(t,r,a,"initRefund",i),"EIP-2200 -> initRefund")}else{const a=i.param("sstoreCleanRefundEIP2200Gas");t.interpreter.refundGas(BigInt(xn(t,r,a,"cleanRefund",i)),"EIP-2200 -> cleanRefund")}return i.param("sstoreDirtyEIP2200Gas")}const En=BigInt(2)**BigInt(160)-BigInt(1);async function Es(t,e,s,n){const r=await t.stateManager.getCode(s);return pe(r.slice(0,3),ji)?Oe(t,r.slice(3,24),e,n):g}const Qn=new Map([[10,async function(t,e,s){const[n,r]=t.stack.peek(2);if(r===g)return e;let i=r.toString(2).length/8;i>Math.trunc(i)&&(i=Math.trunc(i)+1),(i<1||i>32)&&S(p.errorMessages.OUT_OF_RANGE);const a=s.param("expByteGas");return e+=BigInt(i)*a,e}],[32,async function(t,e,s){const[n,r]=t.stack.peek(2);return e+=ae(t,n,r,s),e+=s.param("keccak256WordGas")*tt(r,be),e}],[49,async function(t,e,s){const n=ne(t.stack.peek()[0]);let r=!0;if(s.isActivatedEIP(6800)||s.isActivatedEIP(7864)){const i=t.env.accessWitness.readAccountBasicData(n);e+=i,r=i===g}return s.isActivatedEIP(2929)&&(e+=Oe(t,n.bytes,s,r)),e}],[55,async function(t,e,s){const[n,r,i]=t.stack.peek(3);return e+=ae(t,n,i,s),i!==g&&(e+=s.param("copyGas")*tt(i,be)),e}],[57,async function(t,e,s){const[n,r,i]=t.stack.peek(3);if(e+=ae(t,n,i,s),i!==g&&(e+=s.param("copyGas")*tt(i,be),(s.isActivatedEIP(6800)||s.isActivatedEIP(7864))&&t.env.chargeCodeAccesses===!0)){const a=t.interpreter.getAddress();let o=r+i;const c=t.interpreter.getCodeSize();o>c&&(o=c),e+=t.env.accessWitness.readAccountCodeChunks(a,Number(r),Number(o))}return e}],[59,async function(t,e,s){const n=ne(t.stack.peek()[0]);let r=!0;if((s.isActivatedEIP(6800)||s.isActivatedEIP(7864))&&t.interpreter._evm.getPrecompile(n)===void 0&&!n.equals(ne(s.param("systemAddress")))){let i=g;i+=t.env.accessWitness.readAccountBasicData(n),e+=i,r=i===g}return s.isActivatedEIP(2929)&&(e+=Oe(t,n.bytes,s,r)),e}],[60,async function(t,e,s){const[n,r,i,a]=t.stack.peek(4),o=ne(n);e+=ae(t,r,a,s);let c=!0;if((s.isActivatedEIP(6800)||s.isActivatedEIP(7864))&&t.interpreter._evm.getPrecompile(o)===void 0&&!o.equals(ne(s.param("systemAddress")))){let d=g;d+=t.env.accessWitness.readAccountBasicData(o),e+=d,c=d===g}if(s.isActivatedEIP(2929)&&(e+=Oe(t,o.bytes,s,c)),a!==g&&(e+=s.param("copyGas")*tt(a,be),s.isActivatedEIP(6800)||s.isActivatedEIP(7864))){let d=i+a;const f=BigInt((await t.stateManager.getCode(o)).length);d>f&&(d=f),e+=t.env.accessWitness.readAccountCodeChunks(o,Number(i),Number(d))}return e}],[62,async function(t,e,s){const[n,r,i]=t.stack.peek(3);return r+i>t.interpreter.getReturnDataSize()&&t.env.eof===void 0&&S(p.errorMessages.OUT_OF_GAS),e+=ae(t,n,i,s),i!==g&&(e+=s.param("copyGas")*tt(i,be)),e}],[63,async function(t,e,s){const n=ne(t.stack.peek()[0]);let r=!0;if((s.isActivatedEIP(6800)||s.isActivatedEIP(7864))&&t.interpreter._evm.getPrecompile(n)===void 0&&!n.equals(ne(s.param("systemAddress")))){let i=g;i+=t.env.accessWitness.readAccountCodeHash(n),e+=i,r=i===g}return s.isActivatedEIP(2929)&&(e+=Oe(t,n.bytes,s,r)),e}],[81,async function(t,e,s){const n=t.stack.peek()[0];return e+=ae(t,n,be,s),e}],[82,async function(t,e,s){const n=t.stack.peek()[0];return e+=ae(t,n,be,s),e}],[83,async function(t,e,s){const n=t.stack.peek()[0];return e+=ae(t,n,Y,s),e}],[84,async function(t,e,s){const n=t.stack.peek()[0],r=se(oe(n),32);let i=!0;if(s.isActivatedEIP(6800)||s.isActivatedEIP(7864)){const a=t.interpreter.getAddress(),o=t.env.accessWitness.readAccountStorage(a,n);e+=o,i=o===g}return s.isActivatedEIP(2929)&&(e+=Lr(t,r,!1,s,i)),e}],[85,async function(t,e,s){t.interpreter.isStatic()&&S(p.errorMessages.STATIC_STATE_CHANGE);const[n,r]=t.stack.peek(2),i=se(oe(n),32);let a;r===g?a=Uint8Array.from([]):a=oe(r);const o=zt(await t.interpreter.storageLoad(i)),c=zt(await t.interpreter.storageLoad(i,!0));s.hardfork()===y.Constantinople?e+=zc(t,o,c,zt(a),s):s.gteHardfork(y.Istanbul)?!s.isActivatedEIP(6800)&&!s.isActivatedEIP(7864)&&(e+=Wc(t,o,c,zt(a),i,s)):e+=Dc(t,o,zt(a),s);let d=!0;if(s.isActivatedEIP(6800)||s.isActivatedEIP(7864)){const f=t.interpreter.getAddress(),u=t.env.accessWitness.writeAccountStorage(f,n);e+=u,d=u===g}return s.isActivatedEIP(2929)&&(e+=Lr(t,i,!0,s,d)),e}],[94,async function(t,e,s){const[n,r,i]=t.stack.peek(3),a=(i+Qt)/be;return e+=Co*a,e+=ae(t,r,i,s),e+=ae(t,n,i,s),e}],[160,async function(t,e,s){t.interpreter.isStatic()&&S(p.errorMessages.STATIC_STATE_CHANGE);const[n,r]=t.stack.peek(2),i=t.opCode-160;return(i<0||i>4)&&S(p.errorMessages.OUT_OF_RANGE),e+=ae(t,n,r,s),e+=s.param("logTopicGas")*BigInt(i)+r*s.param("logDataGas"),e}],[211,async function(t,e,s){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const[n,r,i]=t.stack.peek(3);return e+=ae(t,n,i,s),i!==g&&(e+=s.param("copyGas")*tt(i,be)),e}],[236,async function(t,e,s){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const n=t.env.code[t.programCounter+1],[r,i,a,o]=t.stack.peek(4);e+=ae(t,a,o,s);const c=t.env.eof.container.body.containerSections[n];e+=s.param("keccak256WordGas")*tt(BigInt(c.length),be);const d=t.interpreter.getGasLeft()-e;return t.messageGasLimit=bt(d,d,t,s),e}],[238,async function(t,e,s){const[n,r]=t.stack.peek(2);return e+=ae(t,n,r,s),e}],[240,async function(t,e,s){t.interpreter.isStatic()&&S(p.errorMessages.STATIC_STATE_CHANGE);const[n,r,i]=t.stack.peek(3);s.isActivatedEIP(2929)&&(e+=Oe(t,t.interpreter.getAddress().bytes,s,!1)),s.isActivatedEIP(3860)&&(e+=(i+Qt)/be*s.param("initCodeWordGas")),e+=ae(t,r,i,s);let a=BigInt(t.interpreter.getGasLeft())-e;return a=bt(a,a,t,s),t.messageGasLimit=a,e}],[241,async function(t,e,s){const[n,r,i,a,o,c,d]=t.stack.peek(7),f=ne(r);t.interpreter.isStatic()&&i!==g&&S(p.errorMessages.STATIC_STATE_CHANGE),e+=ae(t,a,o,s),e+=ae(t,c,d,s);let u=!0;if((s.isActivatedEIP(6800)||s.isActivatedEIP(7864))&&t.interpreter._evm.getPrecompile(f)===void 0){const h=t.env.accessWitness.readAccountBasicData(f);if(i!==g){const m=t.interpreter.getAddress();e+=t.env.accessWitness.writeAccountBasicData(m),e+=t.env.accessWitness.writeAccountBasicData(f)}e+=h,u=h===g}if(s.isActivatedEIP(2929)&&(e+=Oe(t,f.bytes,s,u)),s.isActivatedEIP(7702)&&(e+=await Es(t,s,f,u)),i!==g&&!s.isActivatedEIP(6800)&&!s.isActivatedEIP(7864)&&(e+=s.param("callValueTransferGas")),s.gteHardfork(y.SpuriousDragon)){const h=await t.stateManager.getAccount(f);let m=!1;(h===void 0||h.isEmpty())&&(m=!0),m&&i!==g&&(e+=s.param("callNewAccountGas"))}else await t.stateManager.getAccount(f)===void 0&&(e+=s.param("callNewAccountGas"));const l=bt(n,t.interpreter.getGasLeft()-e,t,s);return l>t.interpreter.getGasLeft()-e&&S(p.errorMessages.OUT_OF_GAS),e>t.interpreter.getGasLeft()&&S(p.errorMessages.OUT_OF_GAS),t.messageGasLimit=l,e}],[242,async function(t,e,s){const[n,r,i,a,o,c,d]=t.stack.peek(7),f=ne(r);e+=ae(t,a,o,s),e+=ae(t,c,d,s);let u=!0;if((s.isActivatedEIP(6800)||s.isActivatedEIP(7864))&&t.interpreter._evm.getPrecompile(f)===void 0){const h=t.env.accessWitness.readAccountBasicData(f);e+=h,u=h===g}s.isActivatedEIP(2929)&&(e+=Oe(t,ne(r).bytes,s,u)),s.isActivatedEIP(7702)&&(e+=await Es(t,s,f,u)),i!==g&&(e+=s.param("callValueTransferGas"));const l=bt(n,t.interpreter.getGasLeft()-e,t,s);return l>t.interpreter.getGasLeft()-e&&S(p.errorMessages.OUT_OF_GAS),t.messageGasLimit=l,e}],[243,async function(t,e,s){const[n,r]=t.stack.peek(2);return e+=ae(t,n,r,s),e}],[244,async function(t,e,s){const[n,r,i,a,o,c]=t.stack.peek(6),d=ne(r);e+=ae(t,i,a,s),e+=ae(t,o,c,s);let f=!0;if((s.isActivatedEIP(6800)||s.isActivatedEIP(7864))&&t.interpreter._evm.getPrecompile(d)===void 0){const l=t.env.accessWitness.readAccountBasicData(d);e+=l,f=l===g}s.isActivatedEIP(2929)&&(e+=Oe(t,ne(r).bytes,s,f)),s.isActivatedEIP(7702)&&(e+=await Es(t,s,d,f));const u=bt(n,t.interpreter.getGasLeft()-e,t,s);return u>t.interpreter.getGasLeft()-e&&S(p.errorMessages.OUT_OF_GAS),t.messageGasLimit=u,e}],[245,async function(t,e,s){t.interpreter.isStatic()&&S(p.errorMessages.STATIC_STATE_CHANGE);const[n,r,i,a]=t.stack.peek(4);e+=ae(t,r,i,s),s.isActivatedEIP(2929)&&(e+=Oe(t,t.interpreter.getAddress().bytes,s,!1)),s.isActivatedEIP(3860)&&(e+=(i+Qt)/be*s.param("initCodeWordGas")),e+=s.param("keccak256WordGas")*tt(i,be);let o=t.interpreter.getGasLeft()-e;return o=bt(o,o,t,s),t.messageGasLimit=o,e}],[248,async function(t,e,s){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const[n,r,i,a]=t.stack.peek(4);t.interpreter.isStatic()&&a!==g&&S(p.errorMessages.STATIC_STATE_CHANGE),a>g&&(e+=s.param("callValueTransferGas")),n>En&&S(E.INVALID_EXTCALL_TARGET),e+=ae(t,r,i,s);const o=ne(n);if(e+=Oe(t,o.bytes,s),a>g){const h=await t.stateManager.getAccount(o);(h===void 0||h.isEmpty())&&(e+=s.param("callNewAccountGas"))}const c=s.param("minRetainedGas"),d=s.param("minCalleeGas"),f=t.interpreter.getGasLeft()-e,u=f/es;let l;return u<c?l=f-c:l=f-u,(t.env.depth>=Number(s.param("stackLimit"))||t.env.contract.balance<a||l<d)&&(l=-Y),t.messageGasLimit=l,e}],[249,async function(t,e,s){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const[n,r,i]=t.stack.peek(3);n>En&&S(E.INVALID_EXTCALL_TARGET),e+=ae(t,r,i,s);const a=ne(n);e+=Oe(t,a.bytes,s);const o=s.param("minRetainedGas"),c=s.param("minCalleeGas"),d=t.interpreter.getGasLeft()-e,f=d/es;let u;return f<o?u=d-o:u=d-f,(t.env.depth>=Number(s.param("stackLimit"))||u<c)&&(u=-Y),t.messageGasLimit=u,e}],[250,async function(t,e,s){const[n,r,i,a,o,c]=t.stack.peek(6);e+=ae(t,i,a,s),e+=ae(t,o,c,s);let d=!0;const f=ne(r);if((s.isActivatedEIP(6800)||s.isActivatedEIP(7864))&&t.interpreter._evm.getPrecompile(f)===void 0){const l=t.env.accessWitness.readAccountBasicData(f);e+=l,d=l===g}s.isActivatedEIP(2929)&&(e+=Oe(t,ne(r).bytes,s,d)),s.isActivatedEIP(7702)&&(e+=await Es(t,s,ne(r),d));const u=bt(n,t.interpreter.getGasLeft()-e,t,s);return t.messageGasLimit=u,e}],[251,async function(t,e,s){t.env.eof===void 0&&S(p.errorMessages.INVALID_OPCODE);const[n,r,i]=t.stack.peek(3);n>En&&S(E.INVALID_EXTCALL_TARGET),e+=ae(t,r,i,s);const a=ne(n);e+=Oe(t,a.bytes,s);const o=s.param("minRetainedGas"),c=s.param("minCalleeGas"),d=t.interpreter.getGasLeft()-e,f=d/es;let u;return f<o?u=d-o:u=d-f,(t.env.depth>=Number(s.param("stackLimit"))||u<c)&&(u=-Y),t.messageGasLimit=u,e}],[253,async function(t,e,s){const[n,r]=t.stack.peek(2);return e+=ae(t,n,r,s),e}],[255,async function(t,e,s){t.interpreter.isStatic()&&S(p.errorMessages.STATIC_STATE_CHANGE);const n=t.stack.peek()[0],r=ne(n),i=t.interpreter.getAddress();let a=!1;const o=await t.interpreter.getExternalBalance(i);if(s.gteHardfork(y.SpuriousDragon)){if(o>g){const d=await t.stateManager.getAccount(r);(d===void 0||d.isEmpty())&&(a=!0)}}else s.gteHardfork(y.TangerineWhistle)&&(await t.stateManager.getAccount(r)!==void 0||(a=!0));a&&(e+=s.param("callNewAccountGas"));let c=!0;if((s.isActivatedEIP(6800)||s.isActivatedEIP(7864))&&t.env.chargeCodeAccesses===!0){e+=t.env.accessWitness.readAccountBasicData(i),o>g&&(e+=t.env.accessWitness.writeAccountBasicData(i));let d=t.env.accessWitness.readAccountBasicData(r);o>g&&(d+=t.env.accessWitness.writeAccountBasicData(r)),e+=d,c=d===g}return s.isActivatedEIP(2929)&&(e+=Oe(t,r.bytes,s,c,!0)),e}]]),Zc=Qn.get(160);for(let t=161;t<=164;t++)Qn.set(t,Zc);class jc{constructor({code:e,name:s,fullName:n,fee:r,isAsync:i,dynamicGas:a}){this.code=e,this.name=s,this.fullName=n,this.fee=r,this.feeBigInt=BigInt(r),this.isAsync=i,this.dynamicGas=a,this.isInvalid=this.name==="INVALID",Object.freeze(this)}}const x=t=>({name:t,isAsync:!1,dynamicGas:!1}),ve=t=>({name:t,isAsync:!1,dynamicGas:!0}),Se=t=>({name:t,isAsync:!0,dynamicGas:!1}),ce=t=>({name:t,isAsync:!0,dynamicGas:!0}),Yc={0:x("STOP"),1:x("ADD"),2:x("MUL"),3:x("SUB"),4:x("DIV"),5:x("SDIV"),6:x("MOD"),7:x("SMOD"),8:x("ADDMOD"),9:x("MULMOD"),10:ve("EXP"),11:x("SIGNEXTEND"),16:x("LT"),17:x("GT"),18:x("SLT"),19:x("SGT"),20:x("EQ"),21:x("ISZERO"),22:x("AND"),23:x("OR"),24:x("XOR"),25:x("NOT"),26:x("BYTE"),32:ve("KECCAK256"),48:Se("ADDRESS"),49:ce("BALANCE"),50:Se("ORIGIN"),51:Se("CALLER"),52:Se("CALLVALUE"),53:Se("CALLDATALOAD"),54:Se("CALLDATASIZE"),55:ce("CALLDATACOPY"),56:x("CODESIZE"),57:ve("CODECOPY"),58:x("GASPRICE"),59:ce("EXTCODESIZE"),60:ce("EXTCODECOPY"),64:Se("BLOCKHASH"),65:Se("COINBASE"),66:Se("TIMESTAMP"),67:Se("NUMBER"),68:Se("DIFFICULTY"),69:Se("GASLIMIT"),80:x("POP"),81:ve("MLOAD"),82:ve("MSTORE"),83:ve("MSTORE8"),84:ce("SLOAD"),85:ce("SSTORE"),86:x("JUMP"),87:x("JUMPI"),88:x("PC"),89:x("MSIZE"),90:x("GAS"),91:x("JUMPDEST"),96:x("PUSH"),97:x("PUSH"),98:x("PUSH"),99:x("PUSH"),100:x("PUSH"),101:x("PUSH"),102:x("PUSH"),103:x("PUSH"),104:x("PUSH"),105:x("PUSH"),106:x("PUSH"),107:x("PUSH"),108:x("PUSH"),109:x("PUSH"),110:x("PUSH"),111:x("PUSH"),112:x("PUSH"),113:x("PUSH"),114:x("PUSH"),115:x("PUSH"),116:x("PUSH"),117:x("PUSH"),118:x("PUSH"),119:x("PUSH"),120:x("PUSH"),121:x("PUSH"),122:x("PUSH"),123:x("PUSH"),124:x("PUSH"),125:x("PUSH"),126:x("PUSH"),127:x("PUSH"),128:x("DUP"),129:x("DUP"),130:x("DUP"),131:x("DUP"),132:x("DUP"),133:x("DUP"),134:x("DUP"),135:x("DUP"),136:x("DUP"),137:x("DUP"),138:x("DUP"),139:x("DUP"),140:x("DUP"),141:x("DUP"),142:x("DUP"),143:x("DUP"),144:x("SWAP"),145:x("SWAP"),146:x("SWAP"),147:x("SWAP"),148:x("SWAP"),149:x("SWAP"),150:x("SWAP"),151:x("SWAP"),152:x("SWAP"),153:x("SWAP"),154:x("SWAP"),155:x("SWAP"),156:x("SWAP"),157:x("SWAP"),158:x("SWAP"),159:x("SWAP"),160:ve("LOG"),161:ve("LOG"),162:ve("LOG"),163:ve("LOG"),164:ve("LOG"),240:ce("CREATE"),241:ce("CALL"),242:ce("CALLCODE"),243:ve("RETURN"),254:x("INVALID"),255:ce("SELFDESTRUCT")},yn=[{hardfork:y.Homestead,opcodes:{244:ce("DELEGATECALL")}},{hardfork:y.TangerineWhistle,opcodes:{84:ce("SLOAD"),241:ce("CALL"),242:ce("CALLCODE"),59:ce("EXTCODESIZE"),60:ce("EXTCODECOPY"),244:ce("DELEGATECALL"),255:ce("SELFDESTRUCT"),49:ce("BALANCE")}},{hardfork:y.Byzantium,opcodes:{253:ve("REVERT"),250:ce("STATICCALL"),61:Se("RETURNDATASIZE"),62:ce("RETURNDATACOPY")}},{hardfork:y.Constantinople,opcodes:{27:x("SHL"),28:x("SHR"),29:x("SAR"),63:ce("EXTCODEHASH"),245:ce("CREATE2")}},{hardfork:y.Istanbul,opcodes:{70:x("CHAINID"),71:x("SELFBALANCE")}},{hardfork:y.Paris,opcodes:{68:Se("PREVRANDAO")}}],Kc=[{eip:663,opcodes:{230:x("DUPN"),231:x("SWAPN"),232:x("EXCHANGE")}},{eip:1153,opcodes:{92:x("TLOAD"),93:x("TSTORE")}},{eip:3198,opcodes:{72:x("BASEFEE")}},{eip:3855,opcodes:{95:x("PUSH0")}},{eip:4200,opcodes:{224:x("RJUMP"),225:x("RJUMPI"),226:x("RJUMPV")}},{eip:4750,opcodes:{227:x("CALLF"),228:x("RETF")}},{eip:4844,opcodes:{73:x("BLOBHASH")}},{eip:5656,opcodes:{94:ve("MCOPY")}},{eip:6206,opcodes:{229:x("JUMPF")}},{eip:7069,opcodes:{247:x("RETURNDATALOAD"),248:ce("EXTCALL"),249:ce("EXTDELEGATECALL"),251:ce("EXTSTATICCALL")}},{eip:7480,opcodes:{208:x("DATALOAD"),209:x("DATALOADN"),210:x("DATASIZE"),211:ve("DATACOPY")}},{eip:7516,opcodes:{74:x("BLOBBASEFEE")}},{eip:7620,opcodes:{236:ce("EOFCREATE"),238:ce("RETURNCONTRACT")}},{eip:7939,opcodes:{30:x("CLZ")}}];function Xc(t){const e=new Map;for(const[s,n]of Object.entries(t)){const r=parseInt(s,10);isNaN(n.fee)&&(n.fee=0),e.set(r,new jc({code:r,fullName:Uc(r,n.name),...n}))}return e}function Jc(t,e){let s={...Yc};const n=new Map(it),r=new Map(Qn);for(let c=0;c<yn.length;c++)t.gteHardfork(yn[c].hardfork)&&(s={...s,...yn[c].opcodes});for(const c of Kc)t.isActivatedEIP(c.eip)&&(s={...s,...c.opcodes});for(const c in s){const d=Number(t.param(`${s[c].name.toLowerCase()}Gas`));if(d===void 0)throw N(`base fee not defined for: ${s[c].name}`);s[c].fee=d}if(e)for(const c of e){const d=c;if(!$c(d)){delete s[d.opcode];continue}const f={[d.opcode]:{name:d.opcodeName,isAsync:!0,dynamicGas:d.gasFunction!==void 0,fee:d.baseFee,feeBigInt:BigInt(d.baseFee)}};s={...s,...f},d.gasFunction!==void 0&&r.set(d.opcode,d.gasFunction),n.set(d.opcode,d.logicFunction)}const i=Xc(s),a=[];for(const[c,d]of i){const f=r.get(c),u=n.get(c);a[c]={opcodeInfo:d,opHandler:u,gasHandler:f}}const o=a[254];for(let c=0;c<=255;c++)a[c]===void 0&&(a[c]=o);return{dynamicGasHandlers:r,handlers:n,opcodes:i,opcodeMap:a}}class Qc{constructor(e){this._len=0,this._store=[],this._maxHeight=e??1024}get length(){return this._len}push(e){if(this._len>=this._maxHeight)throw new p(p.errorMessages.STACK_OVERFLOW);this._store[this._len++]=e}pop(){if(this._len<1)throw new p(p.errorMessages.STACK_UNDERFLOW);return this._store[--this._len]}popN(e=1){if(this._len<e)throw new p(p.errorMessages.STACK_UNDERFLOW);if(e===0)return[];const s=Array(e),n=this._store;for(let r=0;r<e;r++)s[r]=n[--this._len];return s}peek(e=1){const s=Array(e);let n=this._len;for(let r=0;r<e;r++){const i=--n;if(i<0)throw new p(p.errorMessages.STACK_UNDERFLOW);s[r]=this._store[i]}return s}swap(e){if(this._len<=e)throw new p(p.errorMessages.STACK_UNDERFLOW);const s=this._len-1,n=s-e,r=this._store,i=r[s];r[s]=r[n],r[n]=i}dup(e){const s=this._len;if(s<e)throw new p(p.errorMessages.STACK_UNDERFLOW);if(s>=this._maxHeight)throw new p(p.errorMessages.STACK_OVERFLOW);const n=s-e;this._store[this._len++]=this._store[n]}exchange(e,s){const n=this._len-1,r=n-e,i=n-s;if(r<0||i<0)throw new p(p.errorMessages.STACK_UNDERFLOW);const a=this._store[i];this._store[i]=this._store[r],this._store[r]=a}getStack(){return this._store.slice(0,this._len)}}const Wt=Nt("evm:gas");class ed{constructor(e,s,n,r,i,a,o,c){if(this.opDebuggers={},this._evm=e,this._stateManager=s,this.common=this._evm.common,this.common.consensusType()==="poa"&&this._evm._optsCached.cliqueSigner===void 0)throw N("Must include cliqueSigner function if clique/poa is being used for consensus type");this._runState={programCounter:0,opCode:254,memory:new Sc,memoryWordCount:g,highestMemCost:g,stack:new Qc,code:new Uint8Array(0),validJumps:Uint8Array.from([]),cachedPushes:{},stateManager:this._stateManager,blockchain:n,env:r,shouldDoJumpAnalysis:!0,interpreter:this,gasRefund:r.gasRefund,gasLeft:i,returnBytes:new Uint8Array(0)},this.journal=a,this._env=r,this._result={logs:[],returnValue:void 0,selfdestruct:new Set},this.profilerOpts=c,this.performanceLogger=o}async run(e,s={}){if(!this.common.isActivatedEIP(3540)||e[0]!==js)this._runState.code=e;else if(this.common.isActivatedEIP(3540)){if(e[1]!==Xn)return{runState:this._runState,exceptionError:new p(p.errorMessages.INVALID_BYTECODE_RESULT)};if(e[2]!==qi)return{runState:this._runState,exceptionError:new p(p.errorMessages.INVALID_EOF_FORMAT)};this._runState.code=e;const d=this._env.isCreate&&this._env.depth===0,f=d?Qe.TxInitmode:Qe.Default;try{Nc(this._runState,f)}catch{return{runState:this._runState,exceptionError:new p(p.errorMessages.INVALID_EOF_FORMAT)}}if(d)try{Wi(this._runState.code,this._evm,ze.InitCode,Qe.TxInitmode)}catch{return{runState:this._runState,exceptionError:new p(p.errorMessages.INVALID_EOF_FORMAT)}}}this._runState.programCounter=s.pc??this._runState.programCounter;const n=this._runState.programCounter;if(n!==0&&(n<0||n>=this._runState.code.length))throw N("Internal error: program counter not in range");let r,i,a=!0,o,c;for(this.profilerOpts?.enabled===!0&&this.performanceLogger.hasTimer()&&(o=this.performanceLogger.pauseTimer(),c=this.performanceLogger.startTimer("Overhead"));this._runState.programCounter<this._runState.code.length;){const d=this._runState.programCounter;let f,u;if(a){if(f=this._runState.code[d],f===86||f===87||f===94){const{jumps:l,pushes:h,opcodesCached:m}=this._getValidJumpDestinations(this._runState.code);this._runState.validJumps=l,this._runState.cachedPushes=h,this._runState.shouldDoJumpAnalysis=!1,i=m,a=!1}}else u=i[d],f=u.opcodeInfo.code;if(f===254&&this.common.isActivatedEIP(7864)&&this._runState.env.chargeCodeAccesses===!0){const l=this._runState.interpreter.getAddress();if(!await this._runState.stateManager.checkChunkWitnessPresent(l,d))throw Error(`Invalid witness with missing codeChunk for pc=${d}`)}this._runState.opCode=f;try{c!==void 0&&this.performanceLogger.pauseTimer(),await this.runStep(u),c!==void 0&&this.performanceLogger.unpauseTimer(c)}catch(l){if(this._runState.env.accessWitness?.revert(),c!==void 0&&this.performanceLogger.unpauseTimer(c),!("errorType"in l&&l.errorType===Zi))throw l;l.error!==p.errorMessages.STOP&&(r=l);break}}return o!==void 0&&(this.performanceLogger.stopTimer(c,0),this.performanceLogger.unpauseTimer(o)),{runState:this._runState,exceptionError:r}}async runStep(e){const s=e??this.lookupOpInfo(this._runState.opCode),n=s.opcodeInfo;let r;this.profilerOpts?.enabled===!0&&(r=this.performanceLogger.startTimer(n.name));let i=n.feeBigInt;const a=this._runState.memoryWordCount;try{if(n.dynamicGas&&(i=await s.gasHandler(this._runState,i,this.common)),(this._evm.events.listenerCount("step")>0||this._evm.DEBUG)&&await this._runStepHook(i,this.getGasLeft(),a),(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864))&&this._env.chargeCodeAccesses===!0){const c=this._runState.interpreter.getAddress(),d=this._runState.env.accessWitness.readAccountCodeChunks(c,this._runState.programCounter,this._runState.programCounter);i+=d,Wt(`codechunk accessed statelessGas=${d} (-> ${i})`)}if(n.isInvalid)throw new p(p.errorMessages.INVALID_OPCODE);this.useGas(i,n),this._runState.programCounter++;const o=s.opHandler;n.isAsync?await o.apply(null,[this._runState,this.common]):o.apply(null,[this._runState,this.common]),this._runState.env.accessWitness?.commit()}finally{this.profilerOpts?.enabled===!0&&this.performanceLogger.stopTimer(r,Number(i),"opcodes",n.fee,Number(i)-n.fee)}}lookupOpInfo(e){return this._evm._opcodeMap[e]}async _runStepHook(e,s,n){const r=this.lookupOpInfo(this._runState.opCode).opcodeInfo,i=this._env.eof?.container.header.getSectionFromProgramCounter(this._runState.programCounter);let a,o;if(r.code===253){const[d,f]=this._runState.stack.peek(2);a=new Uint8Array(0),f!==g&&(a=this._runState.memory.read(Number(d),Number(f)))}At[r.code]!==void 0&&At[r.code].intermediates>0&&(o=this._runState.code.slice(this._runState.programCounter+1,this._runState.programCounter+1+At[r.code].intermediates));const c={pc:this._runState.programCounter,gasLeft:s,gasRefund:this._runState.gasRefund,opcode:{name:r.fullName,fee:r.fee,dynamicFee:e,isAsync:r.isAsync,code:r.code},stack:this._runState.stack.getStack(),depth:this._env.depth,address:this._env.address,account:this._env.contract,memory:this._runState.memory._store.subarray(0,Number(n)*32),memoryWordCount:n,codeAddress:this._env.codeAddress,stateManager:this._runState.stateManager,eofSection:i,immediate:o,error:a,eofFunctionDepth:this._env.eof!==void 0?this._env.eof?.eofRunState.returnStack.length+1:void 0};if(this._evm.DEBUG){let d=[];d=c.stack.map(l=>Gs(BigInt(l)));const f=c.opcode.name,u={pc:c.pc,op:f,gas:Gs(c.gasLeft),gasCost:Gs(e),stack:d,depth:c.depth};f in this.opDebuggers||(this.opDebuggers[f]=Nt(`evm:ops:${f}`)),this.opDebuggers[f](JSON.stringify(u))}await this._evm._emit("step",c)}_getValidJumpDestinations(e){const s=new Uint8Array(e.length),n={},r=Array(e.length);for(let i=0;i<e.length;i++){const a=e[i];if(r[i]=this.lookupOpInfo(a),a<=127)if(a>=96){const o=a-95;let c=e.subarray(i+1,i+a-94);c.length<o&&(c=Ze(c,o));const d=z(c);n[i+1]=d,i+=o}else a===91&&(s[i]=1)}return{jumps:s,pushes:n,opcodesCached:r}}useGas(e,s){if(this._runState.gasLeft-=e,this._evm.DEBUG){let n="";typeof s=="string"?n=s+": ":s!==void 0&&(n=`${s.name} fee: `),Wt(`${n}used ${e} gas (-> ${this._runState.gasLeft})`)}this._runState.gasLeft<g&&(this._runState.gasLeft=g,S(p.errorMessages.OUT_OF_GAS))}refundGas(e,s){this._evm.DEBUG&&Wt(`${typeof s=="string"?s+": ":""}refund ${e} gas (-> ${this._runState.gasRefund})`),this._runState.gasRefund+=e}subRefund(e,s){this._evm.DEBUG&&Wt(`${typeof s=="string"?s+": ":""}sub gas refund ${e} (-> ${this._runState.gasRefund})`),this._runState.gasRefund-=e,this._runState.gasRefund<g&&(this._runState.gasRefund=g,S(p.errorMessages.REFUND_EXHAUSTED))}addStipend(e){this._evm.DEBUG&&Wt(`add stipend ${e} (-> ${this._runState.gasLeft})`),this._runState.gasLeft+=e}async getExternalBalance(e){if(e.equals(this._env.address))return this._env.contract.balance;let s=await this._stateManager.getAccount(e);return s||(s=new Re),s.balance}async storageStore(e,s){await this._stateManager.putStorage(this._env.address,e,s);const n=await this._stateManager.getAccount(this._env.address);if(!n)throw N("could not read account while persisting memory");this._env.contract=n}async storageLoad(e,s=!1){return s?this._stateManager.originalStorageCache.get(this._env.address,e):this._stateManager.getStorage(this._env.address,e)}transientStorageStore(e,s){return this._evm.transientStorage.put(this._env.address,e,s)}transientStorageLoad(e){return this._evm.transientStorage.get(this._env.address,e)}finish(e){this._result.returnValue=e,S(p.errorMessages.STOP)}revert(e){this._result.returnValue=e,S(p.errorMessages.REVERT)}getAddress(){return this._env.address}getSelfBalance(){return this._env.contract.balance}getCallValue(){return this._env.callValue}getCallData(){return this._env.callData}getCallDataSize(){return BigInt(this._env.callData.length)}getCaller(){return z(this._env.caller.bytes)}getCodeSize(){return BigInt(this._env.code.length)}getCode(){return this._env.code}getGasLeft(){return this._runState.gasLeft}getReturnDataSize(){return BigInt(this._runState.returnBytes.length)}getReturnData(){return this._runState.returnBytes}isStatic(){return this._env.isStatic}getTxGasPrice(){return this._env.gasPrice}getTxOrigin(){return z(this._env.origin.bytes)}getBlockNumber(){return this._env.block.header.number}getBlockCoinbase(){let e;return this.common.consensusAlgorithm()===Qo.Clique?e=this._evm._optsCached.cliqueSigner(this._env.block.header):e=this._env.block.header.coinbase,z(e.toBytes())}getBlockTimestamp(){return this._env.block.header.timestamp}getBlockDifficulty(){return this._env.block.header.difficulty}getBlockPrevRandao(){return z(this._env.block.header.prevRandao)}getBlockGasLimit(){return this._env.block.header.gasLimit}getBlockBaseFee(){const e=this._env.block.header.baseFeePerGas;if(e===void 0)throw N("Block has no Base Fee");return e}getBlobBaseFee(){const e=this._env.block.header.getBlobGasPrice();if(e===void 0)throw N("Block has no Blob Base Fee");return e}getChainId(){return this.common.chainId()}async call(e,s,n,r){const i=new xt({caller:this._env.address,gasLimit:e,to:s,value:n,data:r,isStatic:this._env.isStatic,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(i)}async callCode(e,s,n,r){const i=new xt({caller:this._env.address,gasLimit:e,to:this._env.address,codeAddress:s,value:n,data:r,isStatic:this._env.isStatic,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(i)}async callStatic(e,s,n,r){const i=new xt({caller:this._env.address,gasLimit:e,to:s,value:n,data:r,isStatic:!0,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(i)}async callDelegate(e,s,n,r){const i=new xt({caller:this._env.caller,gasLimit:e,to:this._env.address,codeAddress:s,value:n,data:r,isStatic:this._env.isStatic,delegatecall:!0,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(i)}async _baseCall(e){const s=new Set(this._result.selfdestruct);e.selfdestruct=s,e.gasRefund=this._runState.gasRefund,this._runState.returnBytes=new Uint8Array(0);let n;if(this.common.isActivatedEIP(6780)&&(n=new Set(this._result.createdAddresses),e.createdAddresses=n),this._runState.returnBytes=new Uint8Array(0),this._env.depth>=Number(this.common.param("stackLimit"))||e.delegatecall!==!0&&this._env.contract.balance<e.value)return g;const r=await this._evm.runCall({message:e});if(r.execResult.logs&&(this._result.logs=this._result.logs.concat(r.execResult.logs)),this.useGas(r.execResult.executionGasUsed,"CALL, STATICCALL, DELEGATECALL, CALLCODE"),r.execResult.returnValue!==void 0&&(!r.execResult.exceptionError||r.execResult.exceptionError.error===p.errorMessages.REVERT)&&(this._runState.returnBytes=r.execResult.returnValue),!r.execResult.exceptionError){for(const a of s)this._result.selfdestruct.add(a);if(this.common.isActivatedEIP(6780))for(const a of n)this._result.createdAddresses.add(a);const i=await this._stateManager.getAccount(this._env.address);if(!i)throw N("could not read contract account");this._env.contract=i,this._runState.gasRefund=r.execResult.gasRefund??g}return this._getReturnCode(r)}async create(e,s,n,r,i){const a=new Set(this._result.selfdestruct),o=this._env.address,c=this._env.depth+1;if(this._runState.returnBytes=new Uint8Array(0),this._env.depth>=Number(this.common.param("stackLimit"))||this._env.contract.balance<s||this._env.contract.nonce>=xo||(this._env.contract.nonce+=Y,await this.journal.putAccount(this._env.address,this._env.contract),this.common.isActivatedEIP(3860)&&n.length>Number(this.common.param("maxInitCodeSize"))&&this._evm.allowUnlimitedInitCodeSize===!1))return g;const d=new xt({caller:o,gasLimit:e,value:s,data:n,eofCallData:i,salt:r,depth:c,selfdestruct:a,gasRefund:this._runState.gasRefund,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});let f;this.common.isActivatedEIP(6780)&&(f=new Set(this._result.createdAddresses),d.createdAddresses=f);const u=await this._evm.runCall({message:d});if(u.execResult.logs&&(this._result.logs=this._result.logs.concat(u.execResult.logs)),this.useGas(u.execResult.executionGasUsed,"CREATE"),u.execResult.exceptionError&&u.execResult.exceptionError.error===p.errorMessages.REVERT&&(this._runState.returnBytes=u.execResult.returnValue),!u.execResult.exceptionError||u.execResult.exceptionError.error===p.errorMessages.CODESTORE_OUT_OF_GAS){for(const h of a)this._result.selfdestruct.add(h);if(this.common.isActivatedEIP(6780))for(const h of f)this._result.createdAddresses.add(h);const l=await this._stateManager.getAccount(this._env.address);if(!l)throw N("could not read contract account");if(this._env.contract=l,this._runState.gasRefund=u.execResult.gasRefund??g,u.createdAddress)return z(u.createdAddress.bytes)}return this._getReturnCode(u,!0)}async create2(e,s,n,r){return this.create(e,s,n,r)}async eofcreate(e,s,n,r,i){return this.create(e,s,n,r,i)}async selfDestruct(e){return this._selfDestruct(e)}async _selfDestruct(e){this._result.selfdestruct.has(j(this._env.address.bytes))||this.refundGas(this.common.param("selfdestructRefundGas")),this._result.selfdestruct.add(j(this._env.address.bytes));const s=pe(e.bytes,this._env.address.bytes);if(!s){let r=await this._stateManager.getAccount(e);r||(r=new Re),r.balance+=this._env.contract.balance,await this.journal.putAccount(e,r)}let n=!this.common.isActivatedEIP(6780);n||(n=this._env.createdAddresses.has(this._env.address.toString()),n||(n=!s)),n&&await this._stateManager.modifyAccountFields(this._env.address,{balance:g}),S(p.errorMessages.STOP)}log(e,s,n){(s<0||s>4)&&S(p.errorMessages.OUT_OF_RANGE),n.length!==s&&S(p.errorMessages.INTERNAL_ERROR);const r=[this._env.address.bytes,n,e];this._result.logs.push(r)}_getReturnCode(e,s=!1){return this._runState.env.eof===void 0||s?e.execResult.exceptionError?g:Y:e.execResult.exceptionError!==void 0?e.execResult.exceptionError.error===p.errorMessages.REVERT?Y:nt:g}}var td={};class sd{constructor(e,s){this.DEBUG=typeof window>"u"?td?.DEBUG?.includes("ethjs")??!1:!1,this._debug=Nt("evm:journal"),this.cleanJournal(),this.journalHeight=0,this.stateManager=e,this.common=s}startReportingAccessList(){this.accessList=new Map}startReportingPreimages(){this.preimages=new Map}async putAccount(e,s){return this.touchAddress(e),this.stateManager.putAccount(e,s)}async deleteAccount(e){this.touchAddress(e),await this.stateManager.deleteAccount(e)}touchAddress(e){const s=e.toString().slice(2);this.touchAccount(s)}touchAccount(e){if(this.preimages!==void 0){const s=Aa(e);if(this.stateManager.getAppliedKey===void 0)throw N("touchAccount: stateManager.getAppliedKey can not be undefined if preimage storing is enabled");const n=this.stateManager.getAppliedKey(s);this.preimages.set(j(n),s)}this.touched.has(e)||(this.touched.add(e),this.journalDiff[this.journalDiff.length-1][1][2].add(e))}async commit(){this.journalHeight--,this.journalDiff.push([this.journalHeight,[new Set,new Map,new Set]]),await this.stateManager.commit()}async checkpoint(){this.journalHeight++,this.journalDiff.push([this.journalHeight,[new Set,new Map,new Set]]),await this.stateManager.checkpoint()}async revert(){let e;for(let s=this.journalDiff.length-1;s>=0;s--){e=s;const[n,r]=this.journalDiff[s];if(n<this.journalHeight)break;const i=r[0],a=r[1],o=r[2];for(const c of i)this.journal.has(c)&&this.journal.delete(c);for(const[c,d]of a)if(this.journal.has(c)){const f=this.journal.get(c);for(const u of d)f.delete(u)}for(const c of o)c!==Bo&&this.touched.delete(c)}this.journalDiff=this.journalDiff.slice(0,e+1),this.journalHeight--,await this.stateManager.revert()}cleanJournal(){this.journalHeight=0,this.journal=new Map,this.alwaysWarmJournal=new Map,this.touched=new Set,this.journalDiff=[[0,[new Set,new Map,new Set]]]}async cleanup(){if(this.common.gteHardfork(y.SpuriousDragon))for(const e of this.touched){const s=new gt(ke(`0x${e}`)),n=await this.stateManager.getAccount(s);(n===void 0||n.isEmpty())&&(await this.deleteAccount(s),this.DEBUG&&this._debug(`Cleanup touched account address=${s} (>= SpuriousDragon)`))}this.cleanJournal(),delete this.accessList,delete this.preimages}addAlwaysWarmAddress(e,s=!1){const n=rn(e);this.alwaysWarmJournal.has(n)||this.alwaysWarmJournal.set(n,new Set),s&&this.accessList!==void 0&&(this.accessList.has(n)||this.accessList.set(n,new Set))}addAlwaysWarmSlot(e,s,n=!1){const r=rn(e);this.addAlwaysWarmAddress(r,n);const i=this.alwaysWarmJournal.get(r),a=rn(s);i.add(a),n&&this.accessList!==void 0&&this.accessList.get(r).add(a)}isWarmedAddress(e){const s=Te(e);return this.journal.has(s)||this.alwaysWarmJournal.has(s)}addWarmedAddress(e){const s=Te(e);this.journal.has(s)||(this.journal.set(s,new Set),this.journalDiff[this.journalDiff.length-1][1][0].add(s)),this.accessList!==void 0&&(this.accessList.has(s)||this.accessList.set(s,new Set))}isWarmedStorage(e,s){const n=Te(e),r=this.journal.get(n);return r===void 0?this.alwaysWarmJournal.has(n)?this.alwaysWarmJournal.get(n).has(Te(s)):!1:r.has(Te(s))?!0:this.alwaysWarmJournal.has(n)?this.alwaysWarmJournal.get(n).has(Te(s)):!1}addWarmedStorage(e,s){const n=Te(e);let r=this.journal.get(n);r===void 0&&(this.addWarmedAddress(e),r=this.journal.get(n));const i=Te(s);if(!r.has(i)){r.add(i);const o=this.journalDiff[this.journalDiff.length-1][1][1];o.has(n)||o.set(n,new Set),o.get(n).add(i)}this.accessList!==void 0&&this.accessList.get(n).add(i)}}const nd={1:{maxRefundQuotient:2,basefeeGas:2,expGas:10,expByteGas:10,keccak256Gas:30,keccak256WordGas:6,sloadGas:50,sstoreSetGas:2e4,sstoreResetGas:5e3,sstoreRefundGas:15e3,jumpdestGas:1,logGas:375,logDataGas:8,logTopicGas:375,createGas:32e3,callGas:40,callStipendGas:2300,callValueTransferGas:9e3,callNewAccountGas:25e3,selfdestructRefundGas:24e3,memoryGas:3,quadCoefficientDivGas:512,createDataGas:200,copyGas:3,ecRecoverGas:3e3,sha256Gas:60,sha256WordGas:12,ripemd160Gas:600,ripemd160WordGas:120,identityGas:15,identityWordGas:3,stopGas:0,addGas:3,mulGas:5,subGas:3,divGas:5,sdivGas:5,modGas:5,smodGas:5,addmodGas:8,mulmodGas:8,signextendGas:5,ltGas:3,gtGas:3,sltGas:3,sgtGas:3,eqGas:3,iszeroGas:3,andGas:3,orGas:3,xorGas:3,notGas:3,byteGas:3,addressGas:2,balanceGas:20,originGas:2,callerGas:2,callvalueGas:2,calldataloadGas:3,calldatasizeGas:2,calldatacopyGas:3,codesizeGas:2,codecopyGas:3,gaspriceGas:2,extcodesizeGas:20,extcodecopyGas:20,blockhashGas:20,coinbaseGas:2,timestampGas:2,numberGas:2,difficultyGas:2,gaslimitGas:2,popGas:2,mloadGas:3,mstoreGas:3,mstore8Gas:3,sstoreGas:0,jumpGas:8,jumpiGas:10,pcGas:2,msizeGas:2,gasGas:2,pushGas:3,dupGas:3,swapGas:3,callcodeGas:40,returnGas:0,invalidGas:0,selfdestructGas:0,prevrandaoGas:0,stackLimit:1024},606:{delegatecallGas:40},608:{sloadGas:200,callGas:700,extcodesizeGas:700,extcodecopyGas:700,balanceGas:400,delegatecallGas:700,callcodeGas:700,selfdestructGas:5e3},607:{expByteGas:50,maxCodeSize:24576},609:{modexpGquaddivisorGas:20,bn254AddGas:500,bn254MulGas:4e4,bn254PairingGas:1e5,bn254PairingWordGas:8e4,revertGas:0,staticcallGas:700,returndatasizeGas:2,returndatacopyGas:3},1013:{netSstoreNoopGas:200,netSstoreInitGas:2e4,netSstoreCleanGas:5e3,netSstoreDirtyGas:200,netSstoreClearRefundGas:15e3,netSstoreResetRefundGas:4800,netSstoreResetClearRefundGas:19800,shlGas:3,shrGas:3,sarGas:3,extcodehashGas:400,create2Gas:32e3},1716:{netSstoreNoopGas:null,netSstoreInitGas:null,netSstoreCleanGas:null,netSstoreDirtyGas:null,netSstoreClearRefundGas:null,netSstoreResetRefundGas:null,netSstoreResetClearRefundGas:null},1679:{blake2RoundGas:1,bn254AddGas:150,bn254MulGas:6e3,bn254PairingGas:45e3,bn254PairingWordGas:34e3,sstoreSentryEIP2200Gas:2300,sstoreNoopEIP2200Gas:800,sstoreDirtyEIP2200Gas:800,sstoreInitEIP2200Gas:2e4,sstoreInitRefundEIP2200Gas:19200,sstoreCleanEIP2200Gas:5e3,sstoreCleanRefundEIP2200Gas:4200,sstoreClearRefundEIP2200Gas:15e3,balanceGas:700,extcodehashGas:700,chainidGas:2,selfbalanceGas:5,sloadGas:800},663:{dupnGas:3,swapnGas:3,exchangeGas:3},1153:{tstoreGas:100,tloadGas:100},1559:{elasticityMultiplier:2},2565:{modexpGquaddivisorGas:3},2537:{bls12381G1AddGas:375,bls12381G1MulGas:12e3,bls12381G2AddGas:600,bls12381G2MulGas:22500,bls12381PairingBaseGas:37700,bls12381PairingPerPairGas:32600,bls12381MapG1Gas:5500,bls12381MapG2Gas:23800},2929:{coldsloadGas:2100,coldaccountaccessGas:2600,warmstoragereadGas:100,sstoreCleanEIP2200Gas:2900,sstoreNoopEIP2200Gas:100,sstoreDirtyEIP2200Gas:100,sstoreInitRefundEIP2200Gas:19900,sstoreCleanRefundEIP2200Gas:4900,callGas:0,callcodeGas:0,delegatecallGas:0,staticcallGas:0,balanceGas:0,extcodesizeGas:0,extcodecopyGas:0,extcodehashGas:0,sloadGas:0,sstoreGas:0},2935:{historyStorageAddress:"0x0000F90827F1C53A10CB7A02335B175320002935",historyServeWindow:8192,systemAddress:"0xfffffffffffffffffffffffffffffffffffffffe"},3198:{basefeeGas:2},3529:{maxRefundQuotient:5,selfdestructRefundGas:0,sstoreClearRefundEIP2200Gas:4800},3855:{push0Gas:2},3860:{initCodeWordGas:2,maxInitCodeSize:49152},4200:{rjumpGas:2,rjumpiGas:4,rjumpvGas:4},4399:{prevrandaoGas:2},4750:{callfGas:5,retfGas:3},4844:{kzgPointEvaluationPrecompileGas:5e4,blobhashGas:3,blobCommitmentVersionKzg:1,fieldElementsPerBlob:4096},5656:{mcopyGas:3},6206:{jumpfGas:5},7069:{extcallGas:0,extdelegatecallGas:0,extstaticcallGas:0,returndataloadGas:3,minRetainedGas:5e3,minCalleeGas:2300},7480:{dataloadGas:4,dataloadnGas:3,datasizeGas:2,datacopyGas:3},7516:{blobbasefeeGas:2},7620:{eofcreateGas:32e3,returncontractGas:0},7939:{clzGas:5}},Ee=(t,e,s)=>(t._debug!==void 0&&t._debug(`Run ${s} precompile data=${$n(t.data)} length=${t.data.length} gasLimit=${t.gasLimit} gasUsed=${e}`),t.gasLimit<e?(t._debug!==void 0&&t._debug(`${s} failed: OOG`),!1):!0),Ys=(t,e,s)=>t.data.length!==e?(t._debug!==void 0&&t._debug(`${s} failed: Invalid input length length=${t.data.length} (expected: ${e})`),!1):!0,Ks=(t,e,s)=>t.data.length%e!==0?(t._debug!==void 0&&t._debug(`${s} failed: Invalid input length length=${t.data.length} (expected: ${e}*k bytes)`),!1):!0,rd=BigInt("52435875175126190479447740508185965837690552500527637822603658699938581184513"),Sr=se(oe(rd),32);async function id(t){const e=xe("0a");if(t.common.customCrypto?.kzg===void 0)throw N("kzg not initialized");const s=t.common.param("kzgPointEvaluationPrecompileGas");if(!Ee(t,s,e))return re(t.gasLimit);if(t.data.length!==192)return Q(new p(p.errorMessages.INVALID_INPUT_LENGTH),t.gasLimit);const n=Number(t.common.param("blobCommitmentVersionKzg")),r=t.common.param("fieldElementsPerBlob"),i=j(t.data.subarray(0,32)),a=j(t.data.subarray(32,64)),o=j(t.data.subarray(64,96)),c=j(t.data.subarray(96,144)),d=j(t.data.subarray(144,192));if(wa(c,n)!==i)return t._debug!==void 0&&t._debug(`${e} failed: INVALID_COMMITMENT`),Q(new p(p.errorMessages.INVALID_COMMITMENT),t.gasLimit);t._debug!==void 0&&t._debug(`${e}: proof verification with commitment=${c} z=${a} y=${o} kzgProof=${d}`);try{if(t.common.customCrypto?.kzg?.verifyProof(c,a,o,d)===!1)return Q(new p(p.errorMessages.INVALID_PROOF),t.gasLimit)}catch(u){return u.message.includes("C_KZG_BADARGS")===!0?(t._debug!==void 0&&t._debug(`${e} failed: INVALID_INPUTS`),Q(new p(p.errorMessages.INVALID_INPUTS),t.gasLimit)):(t._debug!==void 0&&t._debug(`${e} failed: Unknown error - ${u.message}`),Q(new p(p.errorMessages.REVERT),t.gasLimit))}const f=se(oe(r),32);return t._debug!==void 0&&t._debug(`${e} return fieldElements=${j(f)} modulus=${j(Sr)}`),{executionGasUsed:s,returnValue:De(f,Sr)}}const Mn=BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),He=128,qe=256,Yi=new Uint8Array(He),Ki=new Uint8Array(qe),ad=new Uint8Array(32),od=De(new Uint8Array(31),ke("0x01")),cd=[[1,1e3],[2,949],[3,848],[4,797],[5,764],[6,750],[7,738],[8,728],[9,719],[10,712],[11,705],[12,698],[13,692],[14,687],[15,682],[16,677],[17,673],[18,669],[19,665],[20,661],[21,658],[22,654],[23,651],[24,648],[25,645],[26,642],[27,640],[28,637],[29,635],[30,632],[31,630],[32,627],[33,625],[34,623],[35,621],[36,619],[37,617],[38,615],[39,613],[40,611],[41,609],[42,608],[43,606],[44,604],[45,603],[46,601],[47,599],[48,598],[49,596],[50,595],[51,593],[52,592],[53,591],[54,589],[55,588],[56,586],[57,585],[58,584],[59,582],[60,581],[61,580],[62,579],[63,577],[64,576],[65,575],[66,574],[67,573],[68,572],[69,570],[70,569],[71,568],[72,567],[73,566],[74,565],[75,564],[76,563],[77,562],[78,561],[79,560],[80,559],[81,558],[82,557],[83,556],[84,555],[85,554],[86,553],[87,552],[88,551],[89,550],[90,549],[91,548],[92,547],[93,547],[94,546],[95,545],[96,544],[97,543],[98,542],[99,541],[100,540],[101,540],[102,539],[103,538],[104,537],[105,536],[106,536],[107,535],[108,534],[109,533],[110,532],[111,532],[112,531],[113,530],[114,529],[115,528],[116,528],[117,527],[118,526],[119,525],[120,525],[121,524],[122,523],[123,522],[124,522],[125,521],[126,520],[127,520],[128,519]],dd=[[1,1e3],[2,1e3],[3,923],[4,884],[5,855],[6,832],[7,812],[8,796],[9,782],[10,770],[11,759],[12,749],[13,740],[14,732],[15,724],[16,717],[17,711],[18,704],[19,699],[20,693],[21,688],[22,683],[23,679],[24,674],[25,670],[26,666],[27,663],[28,659],[29,655],[30,652],[31,649],[32,646],[33,643],[34,640],[35,637],[36,634],[37,632],[38,629],[39,627],[40,624],[41,622],[42,620],[43,618],[44,615],[45,613],[46,611],[47,609],[48,607],[49,606],[50,604],[51,602],[52,600],[53,598],[54,597],[55,595],[56,593],[57,592],[58,590],[59,589],[60,587],[61,586],[62,584],[63,583],[64,582],[65,580],[66,579],[67,578],[68,576],[69,575],[70,574],[71,573],[72,571],[73,570],[74,569],[75,568],[76,567],[77,566],[78,565],[79,563],[80,562],[81,561],[82,560],[83,559],[84,558],[85,557],[86,556],[87,555],[88,554],[89,553],[90,552],[91,552],[92,551],[93,550],[94,549],[95,548],[96,547],[97,546],[98,545],[99,545],[100,544],[101,543],[102,542],[103,541],[104,541],[105,540],[106,539],[107,538],[108,537],[109,537],[110,536],[111,535],[112,535],[113,534],[114,533],[115,532],[116,532],[117,531],[118,530],[119,530],[120,529],[121,528],[122,528],[123,527],[124,526],[125,526],[126,525],[127,524],[128,524]];/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fd=BigInt(0),ys=BigInt(1),Rr=BigInt(2),Lt=BigInt(3);function ud(t){const e=[];for(;t>ys;t>>=ys)(t&ys)===fd?e.unshift(0):(t&Lt)===Lt?(e.unshift(-1),t+=ys):e.unshift(1);return e}function In(t){if(!Array.isArray(t)||t.length===0)throw new Error("expected non-empty array")}function ld(t,e,s,n){const{Fr:r,Fp2:i,Fp12:a}=t,{twistType:o,ateLoopSize:c,xNegative:d,postPrecompute:f}=n;let u;if(o==="multiplicative")u=(H,W,v,$,M,F)=>a.mul014($,H,i.mul(W,M),i.mul(v,F));else if(o==="divisive")u=(H,W,v,$,M,F)=>a.mul034($,i.mul(v,F),i.mul(W,M),H);else throw new Error("bls: unknown twist type");const l=i.div(i.ONE,i.mul(i.ONE,Rr));function h(H,W,v,$){const M=i.sqr(v),F=i.sqr($),C=i.mulByB(i.mul(F,Lt)),B=i.mul(C,Lt),A=i.sub(i.sub(i.sqr(i.add(v,$)),F),M),T=i.sub(C,M),L=i.mul(i.sqr(W),Lt),R=i.neg(A);return H.push([T,L,R]),W=i.mul(i.mul(i.mul(i.sub(M,B),W),v),l),v=i.sub(i.sqr(i.mul(i.add(M,B),l)),i.mul(i.sqr(C),Lt)),$=i.mul(M,A),{Rx:W,Ry:v,Rz:$}}function m(H,W,v,$,M,F){const C=i.sub(v,i.mul(F,$)),B=i.sub(W,i.mul(M,$)),A=i.sub(i.mul(C,M),i.mul(B,F)),T=i.neg(C),L=B;H.push([A,T,L]);const R=i.sqr(B),D=i.mul(R,B),I=i.mul(R,W),U=i.add(i.sub(D,i.mul(I,Rr)),i.mul(i.sqr(C),$));return W=i.mul(B,U),v=i.sub(i.mul(i.sub(I,U),C),i.mul(D,v)),$=i.mul($,D),{Rx:W,Ry:v,Rz:$}}const _=ud(c),b=On(H=>{const W=H,{x:v,y:$}=W.toAffine(),M=v,F=$,C=i.neg($);let B=M,A=F,T=i.ONE;const L=[];for(const R of _){const D=[];({Rx:B,Ry:A,Rz:T}=h(D,B,A,T)),R&&({Rx:B,Ry:A,Rz:T}=m(D,B,A,T,M,R===-1?C:F)),L.push(D)}if(f){const R=L[L.length-1];f(B,A,T,M,F,m.bind(null,R))}return L});function w(H,W=!1){let v=a.ONE;if(H.length){const $=H[0][0].length;for(let M=0;M<$;M++){v=a.sqr(v);for(const[F,C,B]of H)for(const[A,T,L]of F[M])v=u(A,T,L,v,C,B)}}return d&&(v=a.conjugate(v)),W?a.finalExponentiate(v):v}function G(H,W=!0){const v=[];Hs(e,H.map(({g1:$})=>$)),Hs(s,H.map(({g2:$})=>$));for(const{g1:$,g2:M}of H){if($.is0()||M.is0())throw new Error("pairing is not available for ZERO point");$.assertValidity(),M.assertValidity();const F=$.toAffine();v.push([b(M),F.x,F.y])}return w(v,W)}function k(H,W,v=!0){return G([{g1:H,g2:W}],v)}const O={seed:Wn(r.ORDER)},Z=n.randomBytes||qs;return{lengths:O,Fr:r,Fp12:a,millerLoopBatch:w,pairing:k,pairingBatch:G,calcPairingPrecomputes:b,randomSecretKey:(H=Z(O.seed))=>(de(H,O.seed,"seed"),yi(H,r.ORDER))}}function Pr(t,e,s,n,r,i){const{Fr:a,Fp12:o,pairingBatch:c,randomSecretKey:d,lengths:f}=t;i||(i={fromBytes:mt,fromHex:mt,toBytes:mt,toHex:mt});function u(_){return _ instanceof e?_:e.fromBytes(_)}function l(_){return _ instanceof s?_:s.fromBytes(_)}function h(_){if(!(_ instanceof s))throw new Error(`expected valid message hashed to ${n?"G1":"G2"} curve`);return _}const m=n?(_,b)=>({g1:b,g2:_}):(_,b)=>({g1:_,g2:b});return Object.freeze({lengths:{...f,secretKey:a.BYTES},keygen(_){const b=d(_),w=this.getPublicKey(b);return{secretKey:b,publicKey:w}},getPublicKey(_){let b;try{b=e.Fn.fromBytes(_)}catch(w){throw new Error("invalid private key: "+typeof _,{cause:w})}return e.BASE.multiply(b)},sign(_,b,w){if(w!=null)throw new Error("sign() expects 2 arguments");const G=e.Fn.fromBytes(b);return h(_).assertValidity(),_.multiply(G)},verify(_,b,w,G){if(G!=null)throw new Error("verify() expects 3 arguments");_=l(_),w=u(w);const k=w.negate(),O=e.BASE,Z=h(b),X=_;try{const H=c([m(k,Z),m(O,X)]);return o.eql(H,o.ONE)}catch{return!1}},verifyBatch(_,b){In(b);const w=l(_),G=b.map(H=>H.message),k=b.map(H=>u(H.publicKey)),O=new Map;for(let H=0;H<k.length;H++){const W=k[H],v=G[H];let $=O.get(v);$===void 0&&($=[],O.set(v,$)),$.push(W)}const Z=[],X=e.BASE;try{for(const[H,W]of O){const v=W.reduce(($,M)=>$.add(M));Z.push(m(v,H))}return Z.push(m(X.negate(),w)),o.eql(c(Z),o.ONE)}catch{return!1}},aggregatePublicKeys(_){In(_),_=_.map(w=>u(w));const b=_.reduce((w,G)=>w.add(G),e.ZERO);return b.assertValidity(),b},aggregateSignatures(_){In(_),_=_.map(w=>l(w));const b=_.reduce((w,G)=>w.add(G),s.ZERO);return b.assertValidity(),b},hash(_,b){return de(_),r(_,b?{DST:b}:void 0)},Signature:i})}function Xi(t,e,s,n){const{Fp:r,Fr:i,Fp2:a,Fp6:o,Fp12:c}=t,d={Point:e},f={Point:s},u=ld(t,e,s,n),{millerLoopBatch:l,pairing:h,pairingBatch:m,calcPairingPrecomputes:_,randomSecretKey:b,lengths:w}=u;return d.Point.BASE.precompute(4),Object.freeze({lengths:w,millerLoopBatch:l,pairing:h,pairingBatch:m,G1:d,G2:f,fields:{Fr:i,Fp:r,Fp2:a,Fp6:o,Fp12:c},params:{ateLoopSize:n.ateLoopSize,twistType:n.twistType},utils:{randomSecretKey:b,calcPairingPrecomputes:_}})}function hd(t,e,s,n,r){const i=Xi(t,e,s,n),a=pr(e,r.mapToG1||mt,{...r.hasherOpts,...r.hasherOptsG1}),o=pr(s,r.mapToG2||mt,{...r.hasherOpts,...r.hasherOptsG2});return Object.freeze({...i,G1:a,G2:o})}function md(t,e,s,n,r,i){const a=hd(t,e,s,n,r),o={...a,Fr:a.fields.Fr,Fp12:a.fields.Fp12,calcPairingPrecomputes:a.utils.calcPairingPrecomputes,randomSecretKey:a.utils.randomSecretKey},c=Pr(o,e,s,!1,a.G2.hashToCurve,i?.LongSignature),d=Pr(o,s,e,!0,a.G1.hashToCurve,i?.ShortSignature);return Object.freeze({...a,longSignatures:c,shortSignatures:d})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ur=BigInt(0),St=BigInt(1),Ge=BigInt(2),Dr=BigInt(3);function er(t,e,s,n,r=1,i){const a=BigInt(i===void 0?n:i),o=s**BigInt(n),c=[];for(let d=0;d<r;d++){const f=BigInt(d+1),u=[];for(let l=0,h=St;l<n;l++){const m=(f*h-f)/a%o;u.push(t.pow(e,m)),h*=s}c.push(u)}return c}function Ji(t,e,s){const n=e.pow(s,(t.ORDER-St)/Dr),r=e.pow(s,(t.ORDER-St)/Ge);function i(l,h){const m=e.mul(e.frobeniusMap(l,1),n),_=e.mul(e.frobeniusMap(h,1),r);return[m,_]}const a=e.pow(s,(t.ORDER**Ge-St)/Dr),o=e.pow(s,(t.ORDER**Ge-St)/Ge);if(!e.eql(o,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function c(l,h){return[e.mul(l,a),e.neg(h)]}const d=l=>(h,m)=>{const _=m.toAffine(),b=l(_.x,_.y);return h.fromAffine({x:b[0],y:b[1]})},f=d(i),u=d(c);return{psi:i,psi2:c,G2psi:f,G2psi2:u,PSI_X:n,PSI_Y:r,PSI2_X:a,PSI2_Y:o}}const Mr=(t,e)=>{if(e.length!==2)throw new Error("invalid tuple");const s=e.map(n=>t.create(n));return{c0:s[0],c1:s[1]}};class pd{ORDER;BITS;BYTES;isLE;ZERO;ONE;Fp;NONRESIDUE;mulByB;Fp_NONRESIDUE;Fp_div2;FROBENIUS_COEFFICIENTS;constructor(e,s={}){const n=e.ORDER,r=n*n;this.Fp=e,this.ORDER=r,this.BITS=ss(r),this.BYTES=Math.ceil(ss(r)/8),this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO},this.Fp_NONRESIDUE=e.create(s.NONRESIDUE||BigInt(-1)),this.Fp_div2=e.div(e.ONE,Ge),this.NONRESIDUE=Mr(e,s.FP2_NONRESIDUE),this.FROBENIUS_COEFFICIENTS=er(e,this.Fp_NONRESIDUE,e.ORDER,2)[0],this.mulByB=s.Fp2mulByB,Object.seal(this)}fromBigTuple(e){return Mr(this.Fp,e)}create(e){return e}isValid({c0:e,c1:s}){function n(r,i){return typeof r=="bigint"&&Ur<=r&&r<i}return n(e,this.ORDER)&&n(s,this.ORDER)}is0({c0:e,c1:s}){return this.Fp.is0(e)&&this.Fp.is0(s)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}eql({c0:e,c1:s},{c0:n,c1:r}){return this.Fp.eql(e,n)&&this.Fp.eql(s,r)}neg({c0:e,c1:s}){return{c0:this.Fp.neg(e),c1:this.Fp.neg(s)}}pow(e,s){return Zs(this,e,s)}invertBatch(e){return Bt(this,e)}add(e,s){const{c0:n,c1:r}=e,{c0:i,c1:a}=s;return{c0:this.Fp.add(n,i),c1:this.Fp.add(r,a)}}sub({c0:e,c1:s},{c0:n,c1:r}){return{c0:this.Fp.sub(e,n),c1:this.Fp.sub(s,r)}}mul({c0:e,c1:s},n){const{Fp:r}=this;if(typeof n=="bigint")return{c0:r.mul(e,n),c1:r.mul(s,n)};const{c0:i,c1:a}=n;let o=r.mul(e,i),c=r.mul(s,a);const d=r.sub(o,c),f=r.sub(r.mul(r.add(e,s),r.add(i,a)),r.add(o,c));return{c0:d,c1:f}}sqr({c0:e,c1:s}){const{Fp:n}=this,r=n.add(e,s),i=n.sub(e,s),a=n.add(e,e);return{c0:n.mul(r,i),c1:n.mul(a,s)}}addN(e,s){return this.add(e,s)}subN(e,s){return this.sub(e,s)}mulN(e,s){return this.mul(e,s)}sqrN(e){return this.sqr(e)}div(e,s){const{Fp:n}=this;return this.mul(e,typeof s=="bigint"?n.inv(n.create(s)):this.inv(s))}inv({c0:e,c1:s}){const{Fp:n}=this,r=n.inv(n.create(e*e+s*s));return{c0:n.mul(r,n.create(e)),c1:n.mul(r,n.create(-s))}}sqrt(e){const{Fp:s}=this,n=this,{c0:r,c1:i}=e;if(s.is0(i))return Ds(s,r)===1?n.create({c0:s.sqrt(r),c1:s.ZERO}):n.create({c0:s.ZERO,c1:s.sqrt(s.div(r,this.Fp_NONRESIDUE))});const a=s.sqrt(s.sub(s.sqr(r),s.mul(s.sqr(i),this.Fp_NONRESIDUE)));let o=s.mul(s.add(a,r),this.Fp_div2);Ds(s,o)===-1&&(o=s.sub(o,a));const d=s.sqrt(o),f=n.create({c0:d,c1:s.div(s.mul(i,this.Fp_div2),d)});if(!n.eql(n.sqr(f),e))throw new Error("Cannot find square root");const u=f,l=n.neg(u),{re:h,im:m}=n.reim(u),{re:_,im:b}=n.reim(l);return m>b||m===b&&h>_?u:l}isOdd(e){const{re:s,im:n}=this.reim(e),r=s%Ge,i=s===Ur,a=n%Ge;return BigInt(r||i&&a)==St}fromBytes(e){const{Fp:s}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);return{c0:s.fromBytes(e.subarray(0,s.BYTES)),c1:s.fromBytes(e.subarray(s.BYTES))}}toBytes({c0:e,c1:s}){return le(this.Fp.toBytes(e),this.Fp.toBytes(s))}cmov({c0:e,c1:s},{c0:n,c1:r},i){return{c0:this.Fp.cmov(e,n,i),c1:this.Fp.cmov(s,r,i)}}reim({c0:e,c1:s}){return{re:e,im:s}}Fp4Square(e,s){const n=this,r=n.sqr(e),i=n.sqr(s);return{first:n.add(n.mulByNonresidue(i),r),second:n.sub(n.sub(n.sqr(n.add(e,s)),r),i)}}mulByNonresidue({c0:e,c1:s}){return this.mul({c0:e,c1:s},this.NONRESIDUE)}frobeniusMap({c0:e,c1:s},n){return{c0:e,c1:this.Fp.mul(s,this.FROBENIUS_COEFFICIENTS[n%2])}}}class gd{ORDER;BITS;BYTES;isLE;ZERO;ONE;Fp2;FROBENIUS_COEFFICIENTS_1;FROBENIUS_COEFFICIENTS_2;constructor(e){this.Fp2=e,this.ORDER=e.ORDER,this.BITS=3*e.BITS,this.BYTES=3*e.BYTES,this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO,c2:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO,c2:e.ZERO};const{Fp:s}=e,n=er(e,e.NONRESIDUE,s.ORDER,6,2,3);this.FROBENIUS_COEFFICIENTS_1=n[0],this.FROBENIUS_COEFFICIENTS_2=n[1],Object.seal(this)}add({c0:e,c1:s,c2:n},{c0:r,c1:i,c2:a}){const{Fp2:o}=this;return{c0:o.add(e,r),c1:o.add(s,i),c2:o.add(n,a)}}sub({c0:e,c1:s,c2:n},{c0:r,c1:i,c2:a}){const{Fp2:o}=this;return{c0:o.sub(e,r),c1:o.sub(s,i),c2:o.sub(n,a)}}mul({c0:e,c1:s,c2:n},r){const{Fp2:i}=this;if(typeof r=="bigint")return{c0:i.mul(e,r),c1:i.mul(s,r),c2:i.mul(n,r)};const{c0:a,c1:o,c2:c}=r,d=i.mul(e,a),f=i.mul(s,o),u=i.mul(n,c);return{c0:i.add(d,i.mulByNonresidue(i.sub(i.mul(i.add(s,n),i.add(o,c)),i.add(f,u)))),c1:i.add(i.sub(i.mul(i.add(e,s),i.add(a,o)),i.add(d,f)),i.mulByNonresidue(u)),c2:i.sub(i.add(f,i.mul(i.add(e,n),i.add(a,c))),i.add(d,u))}}sqr({c0:e,c1:s,c2:n}){const{Fp2:r}=this;let i=r.sqr(e),a=r.mul(r.mul(e,s),Ge),o=r.mul(r.mul(s,n),Ge),c=r.sqr(n);return{c0:r.add(r.mulByNonresidue(o),i),c1:r.add(r.mulByNonresidue(c),a),c2:r.sub(r.sub(r.add(r.add(a,r.sqr(r.add(r.sub(e,s),n))),o),i),c)}}addN(e,s){return this.add(e,s)}subN(e,s){return this.sub(e,s)}mulN(e,s){return this.mul(e,s)}sqrN(e){return this.sqr(e)}create(e){return e}isValid({c0:e,c1:s,c2:n}){const{Fp2:r}=this;return r.isValid(e)&&r.isValid(s)&&r.isValid(n)}is0({c0:e,c1:s,c2:n}){const{Fp2:r}=this;return r.is0(e)&&r.is0(s)&&r.is0(n)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}neg({c0:e,c1:s,c2:n}){const{Fp2:r}=this;return{c0:r.neg(e),c1:r.neg(s),c2:r.neg(n)}}eql({c0:e,c1:s,c2:n},{c0:r,c1:i,c2:a}){const{Fp2:o}=this;return o.eql(e,r)&&o.eql(s,i)&&o.eql(n,a)}sqrt(e){return mt()}div(e,s){const{Fp2:n}=this,{Fp:r}=n;return this.mul(e,typeof s=="bigint"?r.inv(r.create(s)):this.inv(s))}pow(e,s){return Zs(this,e,s)}invertBatch(e){return Bt(this,e)}inv({c0:e,c1:s,c2:n}){const{Fp2:r}=this;let i=r.sub(r.sqr(e),r.mulByNonresidue(r.mul(n,s))),a=r.sub(r.mulByNonresidue(r.sqr(n)),r.mul(e,s)),o=r.sub(r.sqr(s),r.mul(e,n)),c=r.inv(r.add(r.mulByNonresidue(r.add(r.mul(n,a),r.mul(s,o))),r.mul(e,i)));return{c0:r.mul(c,i),c1:r.mul(c,a),c2:r.mul(c,o)}}fromBytes(e){const{Fp2:s}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);const n=s.BYTES;return{c0:s.fromBytes(e.subarray(0,n)),c1:s.fromBytes(e.subarray(n,n*2)),c2:s.fromBytes(e.subarray(2*n))}}toBytes({c0:e,c1:s,c2:n}){const{Fp2:r}=this;return le(r.toBytes(e),r.toBytes(s),r.toBytes(n))}cmov({c0:e,c1:s,c2:n},{c0:r,c1:i,c2:a},o){const{Fp2:c}=this;return{c0:c.cmov(e,r,o),c1:c.cmov(s,i,o),c2:c.cmov(n,a,o)}}fromBigSix(e){const{Fp2:s}=this;if(!Array.isArray(e)||e.length!==6)throw new Error("invalid Fp6 usage");return{c0:s.fromBigTuple(e.slice(0,2)),c1:s.fromBigTuple(e.slice(2,4)),c2:s.fromBigTuple(e.slice(4,6))}}frobeniusMap({c0:e,c1:s,c2:n},r){const{Fp2:i}=this;return{c0:i.frobeniusMap(e,r),c1:i.mul(i.frobeniusMap(s,r),this.FROBENIUS_COEFFICIENTS_1[r%6]),c2:i.mul(i.frobeniusMap(n,r),this.FROBENIUS_COEFFICIENTS_2[r%6])}}mulByFp2({c0:e,c1:s,c2:n},r){const{Fp2:i}=this;return{c0:i.mul(e,r),c1:i.mul(s,r),c2:i.mul(n,r)}}mulByNonresidue({c0:e,c1:s,c2:n}){const{Fp2:r}=this;return{c0:r.mulByNonresidue(n),c1:e,c2:s}}mul1({c0:e,c1:s,c2:n},r){const{Fp2:i}=this;return{c0:i.mulByNonresidue(i.mul(n,r)),c1:i.mul(e,r),c2:i.mul(s,r)}}mul01({c0:e,c1:s,c2:n},r,i){const{Fp2:a}=this;let o=a.mul(e,r),c=a.mul(s,i);return{c0:a.add(a.mulByNonresidue(a.sub(a.mul(a.add(s,n),i),c)),o),c1:a.sub(a.sub(a.mul(a.add(r,i),a.add(e,s)),o),c),c2:a.add(a.sub(a.mul(a.add(e,n),r),o),c)}}}class bd{ORDER;BITS;BYTES;isLE;ZERO;ONE;Fp6;FROBENIUS_COEFFICIENTS;X_LEN;finalExponentiate;constructor(e,s){const{Fp2:n}=e,{Fp:r}=n;this.Fp6=e,this.ORDER=n.ORDER,this.BITS=2*e.BITS,this.BYTES=2*e.BYTES,this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO},this.FROBENIUS_COEFFICIENTS=er(n,n.NONRESIDUE,r.ORDER,12,1,6)[0],this.X_LEN=s.X_LEN,this.finalExponentiate=s.Fp12finalExponentiate}create(e){return e}isValid({c0:e,c1:s}){const{Fp6:n}=this;return n.isValid(e)&&n.isValid(s)}is0({c0:e,c1:s}){const{Fp6:n}=this;return n.is0(e)&&n.is0(s)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}neg({c0:e,c1:s}){const{Fp6:n}=this;return{c0:n.neg(e),c1:n.neg(s)}}eql({c0:e,c1:s},{c0:n,c1:r}){const{Fp6:i}=this;return i.eql(e,n)&&i.eql(s,r)}sqrt(e){mt()}inv({c0:e,c1:s}){const{Fp6:n}=this;let r=n.inv(n.sub(n.sqr(e),n.mulByNonresidue(n.sqr(s))));return{c0:n.mul(e,r),c1:n.neg(n.mul(s,r))}}div(e,s){const{Fp6:n}=this,{Fp2:r}=n,{Fp:i}=r;return this.mul(e,typeof s=="bigint"?i.inv(i.create(s)):this.inv(s))}pow(e,s){return Zs(this,e,s)}invertBatch(e){return Bt(this,e)}add({c0:e,c1:s},{c0:n,c1:r}){const{Fp6:i}=this;return{c0:i.add(e,n),c1:i.add(s,r)}}sub({c0:e,c1:s},{c0:n,c1:r}){const{Fp6:i}=this;return{c0:i.sub(e,n),c1:i.sub(s,r)}}mul({c0:e,c1:s},n){const{Fp6:r}=this;if(typeof n=="bigint")return{c0:r.mul(e,n),c1:r.mul(s,n)};let{c0:i,c1:a}=n,o=r.mul(e,i),c=r.mul(s,a);return{c0:r.add(o,r.mulByNonresidue(c)),c1:r.sub(r.mul(r.add(e,s),r.add(i,a)),r.add(o,c))}}sqr({c0:e,c1:s}){const{Fp6:n}=this;let r=n.mul(e,s);return{c0:n.sub(n.sub(n.mul(n.add(n.mulByNonresidue(s),e),n.add(e,s)),r),n.mulByNonresidue(r)),c1:n.add(r,r)}}addN(e,s){return this.add(e,s)}subN(e,s){return this.sub(e,s)}mulN(e,s){return this.mul(e,s)}sqrN(e){return this.sqr(e)}fromBytes(e){const{Fp6:s}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);return{c0:s.fromBytes(e.subarray(0,s.BYTES)),c1:s.fromBytes(e.subarray(s.BYTES))}}toBytes({c0:e,c1:s}){const{Fp6:n}=this;return le(n.toBytes(e),n.toBytes(s))}cmov({c0:e,c1:s},{c0:n,c1:r},i){const{Fp6:a}=this;return{c0:a.cmov(e,n,i),c1:a.cmov(s,r,i)}}fromBigTwelve(e){const{Fp6:s}=this;return{c0:s.fromBigSix(e.slice(0,6)),c1:s.fromBigSix(e.slice(6,12))}}frobeniusMap(e,s){const{Fp6:n}=this,{Fp2:r}=n,{c0:i,c1:a,c2:o}=n.frobeniusMap(e.c1,s),c=this.FROBENIUS_COEFFICIENTS[s%12];return{c0:n.frobeniusMap(e.c0,s),c1:n.create({c0:r.mul(i,c),c1:r.mul(a,c),c2:r.mul(o,c)})}}mulByFp2({c0:e,c1:s},n){const{Fp6:r}=this;return{c0:r.mulByFp2(e,n),c1:r.mulByFp2(s,n)}}conjugate({c0:e,c1:s}){return{c0:e,c1:this.Fp6.neg(s)}}mul014({c0:e,c1:s},n,r,i){const{Fp6:a}=this,{Fp2:o}=a;let c=a.mul01(e,n,r),d=a.mul1(s,i);return{c0:a.add(a.mulByNonresidue(d),c),c1:a.sub(a.sub(a.mul01(a.add(s,e),n,o.add(r,i)),c),d)}}mul034({c0:e,c1:s},n,r,i){const{Fp6:a}=this,{Fp2:o}=a,c=a.create({c0:o.mul(e.c0,n),c1:o.mul(e.c1,n),c2:o.mul(e.c2,n)}),d=a.mul01(s,r,i),f=a.mul01(a.add(e,s),o.add(n,r),i);return{c0:a.add(a.mulByNonresidue(d),c),c1:a.sub(f,a.add(c,d))}}_cyclotomicSquare({c0:e,c1:s}){const{Fp6:n}=this,{Fp2:r}=n,{c0:i,c1:a,c2:o}=e,{c0:c,c1:d,c2:f}=s,{first:u,second:l}=r.Fp4Square(i,d),{first:h,second:m}=r.Fp4Square(c,o),{first:_,second:b}=r.Fp4Square(a,f),w=r.mulByNonresidue(b);return{c0:n.create({c0:r.add(r.mul(r.sub(u,i),Ge),u),c1:r.add(r.mul(r.sub(h,a),Ge),h),c2:r.add(r.mul(r.sub(_,o),Ge),_)}),c1:n.create({c0:r.add(r.mul(r.add(w,c),Ge),w),c1:r.add(r.mul(r.add(l,d),Ge),l),c2:r.add(r.mul(r.add(m,f),Ge),m)})}}_cyclotomicExp(e,s){let n=this.ONE;for(let r=this.X_LEN-1;r>=0;r--)n=this._cyclotomicSquare(n),Ma(s,r)&&(n=this.mul(n,e));return n}}function Qi(t){const e=Ct(t.ORDER),s=new pd(e,t),n=new gd(s),r=new bd(n,t);return{Fp:e,Fp2:s,Fp6:n,Fp12:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ne=BigInt(0),Vs=BigInt(1),$e=BigInt(2),Xs=BigInt(3),rs=BigInt(4),pt=BigInt("0xd201000000010000"),_d=ss(pt),Vt={p:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),n:BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001"),h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),a:Ne,b:rs,Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1")},tr=Ct(Vt.n,{modFromBytes:!0}),{Fp:q,Fp2:K,Fp6:xd,Fp12:te}=Qi({ORDER:Vt.p,X_LEN:_d,FP2_NONRESIDUE:[Vs,Vs],Fp2mulByB:({c0:t,c1:e})=>{const s=q.mul(t,rs),n=q.mul(e,rs);return{c0:q.sub(s,n),c1:q.add(s,n)}},Fp12finalExponentiate:t=>{const e=pt,s=te.div(te.frobeniusMap(t,6),t),n=te.mul(te.frobeniusMap(s,2),s),r=te.conjugate(te._cyclotomicExp(n,e)),i=te.mul(te.conjugate(te._cyclotomicSquare(n)),r),a=te.conjugate(te._cyclotomicExp(i,e)),o=te.conjugate(te._cyclotomicExp(a,e)),c=te.mul(te.conjugate(te._cyclotomicExp(o,e)),te._cyclotomicSquare(r)),d=te.conjugate(te._cyclotomicExp(c,e)),f=te.frobeniusMap(te.mul(r,o),2),u=te.frobeniusMap(te.mul(a,n),3),l=te.frobeniusMap(te.mul(c,te.conjugate(n)),1),h=te.mul(te.mul(d,te.conjugate(i)),n);return te.mul(te.mul(te.mul(f,u),l),h)}}),{G2psi:Hr,G2psi2:Ed}=Ji(q,K,K.div(K.ONE,K.NONRESIDUE)),An=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:q.ORDER,m:2,k:128,expand:"xmd",hash:as}),sr={p:K.ORDER,n:Vt.n,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),a:K.ZERO,b:K.fromBigTuple([rs,rs]),Gx:K.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:K.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")])},Js=os(q.toBytes(Ne),{infinity:!0,compressed:!0});function Qs(t){t=ui(t);const e=t[0]&224,s=!!(e>>7&1),n=!!(e>>6&1),r=!!(e>>5&1);return t[0]&=31,{compressed:s,infinity:n,sort:r,value:t}}function os(t,e){if(t[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(t[0]|=128),e.infinity&&(t[0]|=64),e.sort&&(t[0]|=32),t}function yd(t,e,s){const{BYTES:n,ORDER:r}=q,i=e.is0(),{x:a,y:o}=e.toAffine();if(s){if(i)return Js.slice();const c=!!(o*$e/r);return os(Ae(a,n),{compressed:!0,sort:c})}else return i?le(Uint8Array.of(64),new Uint8Array(2*n-1)):le(Ae(a,n),Ae(o,n))}function wn(t){t.assertValidity();const{BYTES:e,ORDER:s}=q,{x:n,y:r}=t.toAffine();if(t.is0())return Js.slice();const i=!!(r*$e/s);return os(Ae(n,e),{compressed:!0,sort:i})}function Id(t){const{compressed:e,infinity:s,sort:n,value:r}=Qs(t),{BYTES:i,ORDER:a}=q;if(r.length===48&&e){const o=Ve(r),c=q.create(o&Ht(q.BITS));if(s){if(c!==Ne)throw new Error("invalid G1 point: non-empty, at infinity, with compression");return{x:Ne,y:Ne}}const d=q.add(q.pow(c,Xs),q.create(Vt.b));let f=q.sqrt(d);if(!f)throw new Error("invalid G1 point: compressed point");return f*$e/a!==BigInt(n)&&(f=q.neg(f)),{x:q.create(c),y:q.create(f)}}else if(r.length===96&&!e){const o=Ve(r.subarray(0,i)),c=Ve(r.subarray(i));if(s){if(o!==Ne||c!==Ne)throw new Error("G1: non-empty point at infinity");return _e.G1.Point.ZERO.toAffine()}return{x:q.create(o),y:q.create(c)}}else throw new Error("invalid G1 point: expected 48/96 bytes")}function Fr(t){const{infinity:e,sort:s,value:n}=Qs(de(t,48,"signature")),r=q.ORDER,i=_e.G1.Point,a=Ve(n);if(e)return i.ZERO;const o=q.create(a&Ht(q.BITS)),c=q.add(q.pow(o,Xs),q.create(Vt.b));let d=q.sqrt(c);if(!d)throw new Error("invalid G1 point: compressed");const f=BigInt(s);d*$e/r!==f&&(d=q.neg(d));const u=i.fromAffine({x:o,y:d});return u.assertValidity(),u}function Ad(t,e,s){const{BYTES:n,ORDER:r}=q,i=e.is0(),{x:a,y:o}=e.toAffine();if(s){if(i)return le(Js,Ae(Ne,n));const c=!!(o.c1===Ne?o.c0*$e/r:o.c1*$e/r);return le(os(Ae(a.c1,n),{compressed:!0,sort:c}),Ae(a.c0,n))}else{if(i)return le(Uint8Array.of(64),new Uint8Array(4*n-1));const{re:c,im:d}=K.reim(a),{re:f,im:u}=K.reim(o);return le(Ae(d,n),Ae(c,n),Ae(u,n),Ae(f,n))}}function Bn(t){t.assertValidity();const{BYTES:e}=q;if(t.is0())return le(Js,Ae(Ne,e));const{x:s,y:n}=t.toAffine(),{re:r,im:i}=K.reim(s),{re:a,im:o}=K.reim(n),d=!!((o>Ne?o*$e:a*$e)/q.ORDER&Vs),f=r;return le(os(Ae(i,e),{sort:d,compressed:!0}),Ae(f,e))}function wd(t){const{BYTES:e,ORDER:s}=q,{compressed:n,infinity:r,sort:i,value:a}=Qs(t);if(!n&&!r&&i||!n&&r&&i||i&&r&&n)throw new Error("invalid encoding flag: "+(t[0]&224));const o=(c,d,f)=>Ve(c.slice(d,f));if(a.length===96&&n){if(r){if(a.reduce((m,_)=>m!==0?_+1:_,0)>0)throw new Error("invalid G2 point: compressed");return{x:K.ZERO,y:K.ZERO}}const c=o(a,0,e),d=o(a,e,2*e),f=K.create({c0:q.create(d),c1:q.create(c)}),u=K.add(K.pow(f,Xs),sr.b);let l=K.sqrt(u);const h=l.c1===Ne?l.c0*$e/s:l.c1*$e/s?Vs:Ne;return l=i&&h>0?l:K.neg(l),{x:f,y:l}}else if(a.length===192&&!n){if(r){if(a.reduce((l,h)=>l!==0?h+1:h,0)>0)throw new Error("invalid G2 point: uncompressed");return{x:K.ZERO,y:K.ZERO}}const c=o(a,0*e,1*e),d=o(a,1*e,2*e),f=o(a,2*e,3*e),u=o(a,3*e,4*e);return{x:K.fromBigTuple([d,c]),y:K.fromBigTuple([u,f])}}else throw new Error("invalid G2 point: expected 96/192 bytes")}function Vr(t){const{ORDER:e}=q,{infinity:s,sort:n,value:r}=Qs(de(t)),i=_e.G2.Point,a=r.length/2;if(a!==48&&a!==96)throw new Error("invalid compressed signature length, expected 96/192 bytes");const o=Ve(r.slice(0,a)),c=Ve(r.slice(a));if(s)return i.ZERO;const d=q.create(o&Ht(q.BITS)),f=q.create(c),u=K.create({c0:f,c1:d}),l=K.add(K.pow(u,Xs),sr.b);let h=K.sqrt(l);if(!h)throw new Error("Failed to find a square root");const{re:m,im:_}=K.reim(h),b=BigInt(n),w=_>Ne&&_*$e/e!==b,G=_===Ne&&m*$e/e!==b;(w||G)&&(h=K.neg(h));const k=i.fromAffine({x:u,y:h});return k.assertValidity(),k}const Bd={ShortSignature:{fromBytes(t){return Fr(de(t))},fromHex(t){return Fr(Ut(t))},toBytes(t){return wn(t)},toRawBytes(t){return wn(t)},toHex(t){return Pt(wn(t))}},LongSignature:{fromBytes(t){return Vr(de(t))},fromHex(t){return Vr(Ut(t))},toBytes(t){return Bn(t)},toRawBytes(t){return Bn(t)},toHex(t){return Pt(Bn(t))}}},Cd={Fp:q,Fp2:K,Fp6:xd,Fp12:te,Fr:tr},Nd=Ft(Vt,{allowInfinityPoint:!0,Fn:tr,fromBytes:Id,toBytes:yd,isTorsionFree:(t,e)=>{const s=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new t(q.mul(e.X,s),e.Y,e.Z);return e.multiplyUnsafe(pt).negate().multiplyUnsafe(pt).equals(n)},clearCofactor:(t,e)=>e.multiplyUnsafe(pt).add(e)}),Od=Ft(sr,{Fp:K,allowInfinityPoint:!0,Fn:tr,fromBytes:wd,toBytes:Ad,isTorsionFree:(t,e)=>e.multiplyUnsafe(pt).negate().equals(Hr(t,e)),clearCofactor:(t,e)=>{const s=pt;let n=e.multiplyUnsafe(s).negate(),r=Hr(t,e),i=e.double();return i=Ed(t,i),i=i.subtract(r),r=n.add(r),r=r.multiplyUnsafe(s).negate(),i=i.add(r),i=i.subtract(n),i.subtract(e)}}),vd={mapToG1:Rd,mapToG2:Pd,hasherOpts:An,hasherOptsG1:{...An,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},hasherOptsG2:{...An}},Td={ateLoopSize:pt,xNegative:!0,twistType:"multiplicative",randomBytes:qs},_e=md(Cd,Nd,Od,Td,vd,Bd),Gd=Bi(K,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(t=>t.map(e=>K.fromBigTuple(e.map(BigInt))))),kd=Bi(q,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),Ld=vi(q,{A:q.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:q.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:q.create(BigInt(11))}),Sd=vi(K,{A:K.create({c0:q.create(Ne),c1:q.create(BigInt(240))}),B:K.create({c0:q.create(BigInt(1012)),c1:q.create(BigInt(1012))}),Z:K.create({c0:q.create(BigInt(-2)),c1:q.create(BigInt(-1))})});function Rd(t){const{x:e,y:s}=Ld(q.create(t[0]));return kd(e,s)}function Pd(t){const{x:e,y:s}=Sd(K.fromBigTuple(t));return Gd(e,s)}const Ls=_e.G1.Point.ZERO,Ss=_e.G2.Point.ZERO;function Hn(t,e){if(z(t)>=Mn)throw new p(p.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);if(z(e)>=Mn)throw new p(p.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);const s=De(t.subarray(16),e.subarray(16));return _e.fields.Fp2.fromBytes(s)}function Zt(t,e=!0){if(pe(t,Yi)===!0)return Ls;const s=z(t.subarray(16,He/2)),n=z(t.subarray(80,He)),r=_e.G1.Point.fromAffine({x:s,y:n});try{r.assertValidity()}catch(i){if(e||i.message!=="bad point: not in prime-order subgroup")throw new p(p.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE)}return r}function Is(t){const e=se(oe(t.x),64),s=se(oe(t.y),64);return De(e,s)}function jt(t,e=!0){if(pe(t,Ki)===!0)return Ss;const s=t.subarray(0,64),n=t.subarray(64,qe/2),r=t.subarray(128,192),i=t.subarray(192,qe),a=Hn(s,n),o=Hn(r,i),c=_e.G2.Point.fromAffine({x:a,y:o});try{c.assertValidity()}catch(d){if(e||d.message!=="bad point: not in prime-order subgroup")throw new p(p.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE)}return c}function As(t){const e=se(oe(t.x.c0),64),s=se(oe(t.x.c1),64),n=se(oe(t.y.c0),64),r=se(oe(t.y.c1),64);return De(e,s,n,r)}function ws(t){const e=_e.fields.Fr.fromBytes(t);return e>=_e.fields.Fr.ORDER?_e.fields.Fr.create(e%_e.fields.Fr.ORDER):_e.fields.Fr.create(e)}function Ud(t){if(z(t)>=Mn)throw new p(p.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);return _e.fields.Fp.fromBytes(t.slice(16))}class Dd{addG1(e){const s=Zt(e.subarray(0,He),!1),n=Zt(e.subarray(He,He*2),!1),r=s.add(n);return Is(r.toAffine())}mulG1(e){const s=Zt(e.subarray(0,He)),n=ws(e.subarray(He,160));if(n===g)return Yi;const r=s.multiplyUnsafe(n);return Is(r.toAffine())}addG2(e){const s=jt(e.subarray(0,qe),!1),n=jt(e.subarray(qe,qe*2),!1),r=s.add(n);return As(r.toAffine())}mulG2(e){const s=jt(e.subarray(0,qe)),n=ws(e.subarray(qe,288));if(n===g)return Ki;const r=s.multiplyUnsafe(n);return As(r.toAffine())}mapFPtoG1(e){const s=Ud(e.subarray(0,64)),n=_e.G1.mapToCurve(s).toAffine();return Is(n)}mapFP2toG2(e){const s=Hn(e.subarray(0,64),e.subarray(64,128)),n=_e.G2.mapToCurve([s.c0,s.c1]).toAffine();return As(n)}msmG1(e){const n=e.length/160;let r=Ls;for(let i=0;i<n;i++){const a=160*i,o=Zt(e.subarray(a,a+He)),c=ws(e.subarray(a+He,a+160));let d;c===g?d=Ls:d=o.multiplyUnsafe(c),r=r.add(d)}return Is(r.toAffine())}msmG2(e){const n=e.length/288;let r=Ss;for(let i=0;i<n;i++){const a=288*i,o=jt(e.subarray(a,a+qe)),c=ws(e.subarray(a+qe,a+288));let d;c===g?d=Ss:d=o.multiplyUnsafe(c),r=r.add(d)}return As(r.toAffine())}pairingCheck(e){const n=[];for(let a=0;a<e.length/384;a++){const o=384*a,c=Zt(e.subarray(o,o+He)),d=o+He,f=jt(e.subarray(d,d+qe));n.push({g1:c,g2:f})}const r=n.filter(a=>a.g1.equals(Ls)===!1&&a.g2.equals(Ss)===!1),i=_e.pairingBatch(r,!0);return _e.fields.Fp12.eql(i,_e.fields.Fp12.ONE)?od:ad}}const Md=new Uint8Array(16),ea=(t,e,s)=>{const n=s[s.length-1][1];let r;return t<=s.length?t===0?r=0:r=s[t-1][1]:r=n,BigInt(t)*e*BigInt(r)/BigInt(1e3)},Ot=(t,e,s,n=0)=>{for(const r in e){const i=t.data.subarray(e[r][0]+n,e[r][1]+n);if(pe(i,Md)!==!0)return t._debug!==void 0&&t._debug(`${s} failed: Point not on curve`),!1}return!0};async function Hd(t){const e=xe("0b"),s=t._EVM._bls,n=t.common.param("bls12381G1AddGas")??BigInt(0);if(!Ee(t,n,e))return re(t.gasLimit);if(!Ys(t,256,e))return Q(new p(p.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),t.gasLimit);if(!Ot(t,[[0,16],[64,80],[128,144],[192,208]],e))return Q(new p(p.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),t.gasLimit);let i;try{i=s.addG1(t.data)}catch(a){return t._debug!==void 0&&t._debug(`${e} failed: ${a.message}`),Q(a,t.gasLimit)}return t._debug!==void 0&&t._debug(`${e} return value=${j(i)}`),{executionGasUsed:n,returnValue:i}}async function Fd(t){const e=xe("0d"),s=t._EVM._bls,n=t.data;if(n.length===0)return t._debug!==void 0&&t._debug(`${e} failed: Empty input`),Q(new p(p.errorMessages.BLS_12_381_INPUT_EMPTY),t.gasLimit);const r=Math.floor(n.length/160),i=t.common.param("bls12381G1MulGas")??BigInt(0),a=ea(r,i,cd);if(!Ee(t,a,e))return re(t.gasLimit);if(n.length%160!==0)return t._debug!==void 0&&t._debug(`${e} failed: Invalid input length length=${n.length}`),Q(new p(p.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),t.gasLimit);if(!Ks(t,160,e))return Q(new p(p.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),t.gasLimit);const o=[[0,16],[64,80]];for(let d=0;d<r;d++){const f=160*d;if(!Ot(t,o,e,f))return Q(new p(p.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),t.gasLimit)}let c;try{c=s.msmG1(t.data)}catch(d){return t._debug!==void 0&&t._debug(`${e} failed: ${d.message}`),Q(d,t.gasLimit)}return t._debug!==void 0&&t._debug(`${e} return value=${j(c)}`),{executionGasUsed:a,returnValue:c}}async function Vd(t){const e=xe("0e"),s=t._EVM._bls,n=t.common.param("bls12381G2AddGas")??BigInt(0);if(!Ee(t,n,e))return re(t.gasLimit);if(!Ys(t,512,e))return Q(new p(p.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),t.gasLimit);if(!Ot(t,[[0,16],[64,80],[128,144],[192,208],[256,272],[320,336],[384,400],[448,464]],e))return Q(new p(p.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),t.gasLimit);let i;try{i=s.addG2(t.data)}catch(a){return Q(a,t.gasLimit)}return t._debug!==void 0&&t._debug(`${e} return value=${j(i)}`),{executionGasUsed:n,returnValue:i}}async function $d(t){const e=xe("10"),s=t._EVM._bls;if(t.data.length===0)return t._debug!==void 0&&t._debug(`${e} failed: Empty input`),Q(new p(p.errorMessages.BLS_12_381_INPUT_EMPTY),t.gasLimit);const n=Math.floor(t.data.length/288),r=t.common.param("bls12381G2MulGas")??BigInt(0),i=ea(n,r,dd);if(!Ee(t,i,e))return re(t.gasLimit);if(!Ks(t,288,e))return Q(new p(p.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),t.gasLimit);const a=[[0,16],[64,80],[128,144],[192,208]];for(let c=0;c<n;c++){const d=288*c;if(!Ot(t,a,e,d))return Q(new p(p.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),t.gasLimit)}let o;try{o=s.msmG2(t.data)}catch(c){return t._debug!==void 0&&t._debug(`${e} failed: ${c.message}`),Q(c,t.gasLimit)}return t._debug!==void 0&&t._debug(`${e} return value=${j(o)}`),{executionGasUsed:i,returnValue:o}}async function qd(t){const e=xe("11"),s=t._EVM._bls,n=t.common.param("bls12381PairingBaseGas")??BigInt(0);if(t.data.length===0)return t._debug!==void 0&&t._debug(`${e} failed: Empty input`),Q(new p(p.errorMessages.BLS_12_381_INPUT_EMPTY),t.gasLimit);const r=t.common.param("bls12381PairingPerPairGas")??BigInt(0);if(!Ks(t,384,e))return Q(new p(p.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),t.gasLimit);const i=n+r*BigInt(Math.floor(t.data.length/384));if(!Ee(t,i,e))return re(t.gasLimit);const a=[[0,16],[64,80],[128,144],[192,208],[256,272],[320,336]];for(let c=0;c<t.data.length/384;c++){const d=384*c;if(!Ot(t,a,e,d))return Q(new p(p.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),t.gasLimit)}let o;try{o=s.pairingCheck(t.data)}catch(c){return t._debug!==void 0&&t._debug(`${e} failed: ${c.message}`),Q(c,t.gasLimit)}return t._debug!==void 0&&t._debug(`${e} return value=${j(o)}`),{executionGasUsed:i,returnValue:o}}function zd(t){const e=xe("01"),s=t.common.customCrypto.ecrecover??jo,n=t.common.param("ecRecoverGas");if(!Ee(t,n,e))return re(t.gasLimit);const r=Ze(t.data,128),i=r.subarray(0,32),a=r.subarray(32,64),o=z(a);if(o!==Ui&&o!==No)return t._debug!==void 0&&t._debug(`${e} failed: v neither 27 nor 28`),{executionGasUsed:n,returnValue:new Uint8Array};const c=r.subarray(64,96),d=r.subarray(96,128);let f;try{t._debug!==void 0&&t._debug(`${e}: PK recovery with msgHash=${j(i)} v=${j(a)} r=${j(c)}s=${j(d)}}`),f=s(i,z(a),c,d)}catch{return t._debug!==void 0&&t._debug(`${e} failed: PK recovery failed`),{executionGasUsed:n,returnValue:new Uint8Array(0)}}const u=se(qo(f),32);return t._debug!==void 0&&t._debug(`${e} return address=${j(u)}`),{executionGasUsed:n,returnValue:u}}function Wd(t){const e=xe("02"),s=t.data,n=t.common.customCrypto.sha256??as;let r=t.common.param("sha256Gas");if(r+=t.common.param("sha256WordGas")*BigInt(Math.ceil(s.length/32)),!Ee(t,r,e))return re(t.gasLimit);const i=n(s);return t._debug!==void 0&&t._debug(`${e} return hash=${j(i)}`),{executionGasUsed:r,returnValue:i}}const Zd=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),ta=Uint8Array.from(new Array(16).fill(0).map((t,e)=>e)),jd=ta.map(t=>(9*t+5)%16),sa=(()=>{const s=[[ta],[jd]];for(let n=0;n<4;n++)for(let r of s)r.push(r[n].map(i=>Zd[i]));return s})(),na=sa[0],ra=sa[1],ia=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>Uint8Array.from(t)),Yd=na.map((t,e)=>t.map(s=>ia[e][s])),Kd=ra.map((t,e)=>t.map(s=>ia[e][s])),Xd=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),Jd=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function $r(t,e,s,n){return t===0?e^s^n:t===1?e&s|~e&n:t===2?(e|~s)^n:t===3?e&n|s&~n:e^(s|~n)}const Bs=new Uint32Array(16);class Qd extends Ba{h0=1732584193;h1=-271733879;h2=-1732584194;h3=271733878;h4=-1009589776;constructor(){super(64,20,8,!0)}get(){const{h0:e,h1:s,h2:n,h3:r,h4:i}=this;return[e,s,n,r,i]}set(e,s,n,r,i){this.h0=e|0,this.h1=s|0,this.h2=n|0,this.h3=r|0,this.h4=i|0}process(e,s){for(let h=0;h<16;h++,s+=4)Bs[h]=e.getUint32(s,!0);let n=this.h0|0,r=n,i=this.h1|0,a=i,o=this.h2|0,c=o,d=this.h3|0,f=d,u=this.h4|0,l=u;for(let h=0;h<5;h++){const m=4-h,_=Xd[h],b=Jd[h],w=na[h],G=ra[h],k=Yd[h],O=Kd[h];for(let Z=0;Z<16;Z++){const X=ls(n+$r(h,i,o,d)+Bs[w[Z]]+_,k[Z])+u|0;n=u,u=d,d=ls(o,10)|0,o=i,i=X}for(let Z=0;Z<16;Z++){const X=ls(r+$r(m,a,c,f)+Bs[G[Z]]+b,O[Z])+l|0;r=l,l=f,f=ls(c,10)|0,c=a,a=X}}this.set(this.h1+o+f|0,this.h2+d+l|0,this.h3+u+r|0,this.h4+n+a|0,this.h0+i+c|0)}roundClean(){ts(Bs)}destroy(){this.destroyed=!0,ts(this.buffer),this.set(0,0,0,0,0)}}const qr=ri(()=>new Qd);function ef(t){const e=xe("03"),s=t.data;let n=t.common.param("ripemd160Gas");if(n+=t.common.param("ripemd160WordGas")*BigInt(Math.ceil(s.length/32)),!Ee(t,n,e))return re(t.gasLimit);const r=se(qr(s),32);return t._debug!==void 0&&t._debug(`${e} return hash=${j(r)}`),{executionGasUsed:n,returnValue:se(qr(s),32)}}function tf(t){const e=xe("04"),s=t.data;let n=t.common.param("identityGas");return n+=t.common.param("identityWordGas")*BigInt(Math.ceil(s.length/32)),Ee(t,n,e)?(t._debug!==void 0&&t._debug(`${e} return data=${$n(t.data)}`),{executionGasUsed:n,returnValue:Uint8Array.from(s)}):re(t.gasLimit)}const sf=BigInt(4),nr=BigInt(16),nf=BigInt(480),zr=BigInt(200),Wr=BigInt(500),aa=BigInt(1024),rf=BigInt(3072),af=BigInt(199680),of=BigInt(2147483647),cf=BigInt(Number.MAX_SAFE_INTEGER);function df(t){let e,s;return t<=es?t**nt:t<=aa?(e=t**nt/sf,s=t*Yn,e+s-rf):(e=t**nt/nr,s=t*nf,e+s-af)}function ff(t,e){let s;try{const f=z(t.subarray(0,32));s=96+Number(f)}catch{s=Number.MAX_SAFE_INTEGER-32}const n=z(t.subarray(32,64));let r=t.subarray(s,s+32);r=Ze(r,32);let i=z(r),a=0;n<be&&(a=32-Number(n)),i=i>>ht*BigInt(Math.max(a,0));let o=-1;for(;i>g;)o=o+1,i=i>>Y;let c=n-be;c<g&&(c=g);let d=c*(e.common.isActivatedEIP(7883)===!0?nr:ht);return o>0&&(d+=BigInt(o)),d}function uf(t,e,s){if(e===g)return Y%s;let n=Y;for(;e>g;)e&Y&&(n=n*t%s),t=t*t%s,e>>=Y;return n}function lf(t){const e=xe("05"),s=t.data.length<96?Ze(t.data,96):t.data;let n=ff(s,t);n<Y&&(n=Y);const r=z(s.subarray(0,32)),i=z(s.subarray(32,64)),a=z(s.subarray(64,96));let o=r;o<a&&(o=a);const c=t.common.param("modexpGquaddivisorGas");let d;const f=Yn,u=f+r,l=u,h=l+i,m=h,_=m+a;if(t.common.isActivatedEIP(2565)){const X=(o+Pi)/ht;t.common.isActivatedEIP(7883)?(d=n*(o>be?nt*X*X:nr),d<Wr&&(d=Wr)):(d=n*X*X/c,d<zr&&(d=zr))}else d=n*df(o)/c;if(!Ee(t,d,e))return re(t.gasLimit);const b=t.common.isActivatedEIP(7823)?aa:of;if(t._debug!==void 0){const X=BigInt(96)+r+i+a,H=BigInt(t.data.length);let W=`${e} length values: maxSize(b/e/m)=${b} bLen=${r} eLen=${i} mLen=${a} 96+b+e+m=${X} `;W+=`data=${H} lengthMatch=${X===H}`,t._debug(W)}if(!t.common.isActivatedEIP(7823)&&r===g&&a===g)return{executionGasUsed:d,returnValue:new Uint8Array};if(r>b||i>b||a>b)return t._debug!==void 0&&t._debug(`${e} failed: one or more input values too large`),re(t.gasLimit);if(_>cf)return t._debug!==void 0&&t._debug(`${e} failed: total input too large`),re(t.gasLimit);const w=z(Ze(s.subarray(Number(f),Number(u)),Number(r))),G=z(Ze(s.subarray(Number(l),Number(h)),Number(i))),k=z(Ze(s.subarray(Number(m),Number(_)),Number(a)));t._debug!==void 0&&t._debug(`${e} input: B=${w} E=${G} M=${k}`);let O;k===g?O=new Uint8Array:(O=uf(w,G,k),O===g?O=new Uint8Array:O=oe(O));const Z=se(O,Number(a));return t._debug!==void 0&&t._debug(`${e} return value=${j(Z)}`),{executionGasUsed:d,returnValue:Z}}function hf(t){const e=xe("06"),s=t.common.param("bn254AddGas");if(!Ee(t,s,e))return re(t.gasLimit);const n=Ze(t.data.subarray(0,128),128);let r;try{r=t._EVM._bn254.add(n)}catch(i){return t._debug!==void 0&&t._debug(`${e} failed: ${i.message}`),Q(i,t.gasLimit)}return r.length!==64?(t._debug!==void 0&&t._debug(`${e} failed: OOG`),re(t.gasLimit)):(t._debug!==void 0&&t._debug(`${e} return value=${j(r)}`),{executionGasUsed:s,returnValue:r})}function mf(t){const e=xe("07"),s=t.common.param("bn254MulGas");if(!Ee(t,s,e))return re(t.gasLimit);const n=Ze(t.data.subarray(0,128),128);let r;try{r=t._EVM._bn254.mul(n)}catch(i){return t._debug!==void 0&&t._debug(`${e} failed: ${i.message}`),Q(i,t.gasLimit)}return r.length!==64?(t._debug!==void 0&&t._debug(`${e} failed: OOG`),re(t.gasLimit)):(t._debug!==void 0&&t._debug(`${e} return value=${j(r)}`),{executionGasUsed:s,returnValue:r})}function pf(t){const e=xe("08");if(!Ks(t,192,e))return Q(new p(p.errorMessages.INVALID_INPUT_LENGTH),t.gasLimit);const s=BigInt(Math.floor(t.data.length/192)),n=t.common.param("bn254PairingGas")+s*t.common.param("bn254PairingWordGas");if(!Ee(t,n,e))return re(t.gasLimit);let r;try{r=t._EVM._bn254.pairing(t.data)}catch(i){return t._debug!==void 0&&t._debug(`${e} failed: ${i.message}`),Q(i,t.gasLimit)}return r.length!==32?(t._debug!==void 0&&t._debug(`${e} failed: OOG`),re(t.gasLimit)):(t._debug!==void 0&&t._debug(`${e} return value=${j(r)}`),{executionGasUsed:n,returnValue:r})}function Cs(t,e,s){const n=t[e]+t[s];let r=t[e+1]+t[s+1];n>=4294967296&&r++,t[e]=n,t[e+1]=r}function Zr(t,e,s,n){let r=t[e]+s;s<0&&(r+=4294967296);let i=t[e+1]+n;r>=4294967296&&i++,t[e]=r,t[e+1]=i}function ct(t,e,s,n,r,i,a,o){const c=e[a],d=e[a+1],f=e[o],u=e[o+1];Cs(t,s,n),Zr(t,s,c,d);let l=t[i]^t[s],h=t[i+1]^t[s+1];t[i]=h,t[i+1]=l,Cs(t,r,i),l=t[n]^t[r],h=t[n+1]^t[r+1],t[n]=l>>>24^h<<8,t[n+1]=h>>>24^l<<8,Cs(t,s,n),Zr(t,s,f,u),l=t[i]^t[s],h=t[i+1]^t[s+1],t[i]=l>>>16^h<<16,t[i+1]=h>>>16^l<<16,Cs(t,r,i),l=t[n]^t[r],h=t[n+1]^t[r+1],t[n]=h>>>31^l<<1,t[n+1]=l>>>31^h<<1}const gf=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),bf=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Be=new Uint8Array(bf.map(function(t){return t*2}));function _f(t,e,s,n,r){const i=new Uint32Array(32);let a=0;for(a=0;a<16;a++)i[a]=t[a],i[a+16]=gf[a];for(i[24]=i[24]^s[0],i[25]=i[25]^s[1],i[26]=i[26]^s[2],i[27]=i[27]^s[3],n&&(i[28]=~i[28],i[29]=~i[29]),a=0;a<r;a++){const o=a%10*16;ct(i,e,0,8,16,24,Be[o+0],Be[o+1]),ct(i,e,2,10,18,26,Be[o+2],Be[o+3]),ct(i,e,4,12,20,28,Be[o+4],Be[o+5]),ct(i,e,6,14,22,30,Be[o+6],Be[o+7]),ct(i,e,0,10,20,30,Be[o+8],Be[o+9]),ct(i,e,2,12,22,24,Be[o+10],Be[o+11]),ct(i,e,4,14,16,26,Be[o+12],Be[o+13]),ct(i,e,6,8,18,28,Be[o+14],Be[o+15])}for(a=0;a<16;a++)t[a]=t[a]^i[a]^i[a+16]}function xf(t){const e=xe("09"),s=t.data;if(s.length!==213)return t._debug!==void 0&&t._debug(`${e} failed: OUT_OF_RANGE dataLength=${s.length}`),{returnValue:new Uint8Array(0),executionGasUsed:t.gasLimit,exceptionError:new p(p.errorMessages.OUT_OF_RANGE)};const n=s.subarray(212,213)[0];if(n!==1&&n!==0)return t._debug!==void 0&&t._debug(`${e} failed: OUT_OF_RANGE lastByte=${n}`),{returnValue:new Uint8Array(0),executionGasUsed:t.gasLimit,exceptionError:new p(p.errorMessages.OUT_OF_RANGE)};const r=new DataView(s.buffer,s.byteOffset).getUint32(0),i=new DataView(s.buffer,s.byteOffset+4,64),a=new DataView(s.buffer,s.byteOffset+68,128),o=new DataView(s.buffer,s.byteOffset+196,16),c=n===1;let d=t.common.param("blake2RoundGas");if(d*=BigInt(r),!Ee(t,d,e))return re(t.gasLimit);const f=new Uint32Array(16);for(let _=0;_<16;_++)f[_]=i.getUint32(_*4,!0);const u=new Uint32Array(32);for(let _=0;_<32;_++)u[_]=a.getUint32(_*4,!0);const l=new Uint32Array(4);for(let _=0;_<4;_++)l[_]=o.getUint32(_*4,!0);_f(f,u,l,c,r);const h=new Uint8Array(64),m=new DataView(h.buffer);for(let _=0;_<16;_++)m.setUint32(_*4,f[_],!0);return t._debug!==void 0&&t._debug(`${e} return hash=${j(h)}`),{executionGasUsed:d,returnValue:h}}async function Ef(t){const e=xe("12"),s=t._EVM._bls,n=t.common.param("bls12381MapG1Gas")??BigInt(0);if(!Ee(t,n,e))return re(t.gasLimit);if(!Ys(t,64,e))return Q(new p(p.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),t.gasLimit);if(!Ot(t,[[0,16]],e))return Q(new p(p.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),t.gasLimit);let i;try{i=s.mapFPtoG1(t.data)}catch(a){return t._debug!==void 0&&t._debug(`${e} failed: ${a.message}`),Q(a,t.gasLimit)}return t._debug!==void 0&&t._debug(`${e} return value=${j(i)}`),{executionGasUsed:n,returnValue:i}}async function yf(t){const e=xe("13"),s=t._EVM._bls,n=t.common.param("bls12381MapG2Gas")??BigInt(0);if(!Ee(t,n,e))return re(t.gasLimit);if(!Ys(t,128,e))return Q(new p(p.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),t.gasLimit);if(!Ot(t,[[0,16],[64,80]],e))return Q(new p(p.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),t.gasLimit);let i;try{i=s.mapFP2toG2(t.data)}catch(a){return t._debug!==void 0&&t._debug(`${e} failed: ${a.message}`),Q(a,t.gasLimit)}return t._debug!==void 0&&t._debug(`${e} return value=${j(i)}`),{executionGasUsed:n,returnValue:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const If={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Af=Ft(If),Cn=Gi(Af,as),wf=BigInt(6900),Bf=new Uint8Array(32).fill(0).map((t,e)=>e===31?1:0),jr=BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Ns=BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),Cf=BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),Nf=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b");function Of(t){const e=xe("100"),s=wf;if(!Ee(t,s,e))return re(t.gasLimit);const n=t.data;if(n.length!==160)return t._debug!==void 0&&t._debug(`${e} failed: invalid input length ${n.length}, expected 160`),{executionGasUsed:s,returnValue:new Uint8Array};const r=n.subarray(0,32),i=n.subarray(32,64),a=n.subarray(64,96),o=n.subarray(96,128),c=n.subarray(128,160),d=z(i),f=z(a),u=z(o),l=z(c);if(!(d>BigInt(0)&&d<jr&&f>BigInt(0)&&f<jr))return t._debug!==void 0&&t._debug(`${e} failed: signature component out of bounds: r=${j(i)}, s=${j(a)}`),{executionGasUsed:s,returnValue:new Uint8Array};if(!(u>=BigInt(0)&&u<Ns&&l>=BigInt(0)&&l<Ns))return t._debug!==void 0&&t._debug(`${e} failed: public key component out of bounds: qx=${j(o)}, qy=${j(c)}`),{executionGasUsed:s,returnValue:new Uint8Array};const h=l*l%Ns,m=(u*u*u+Cf*u+Nf)%Ns;if(h!==m)return t._debug!==void 0&&t._debug(`${e} failed: point not on curve`),{executionGasUsed:s,returnValue:new Uint8Array};if(u===BigInt(0)&&l===BigInt(0))return t._debug!==void 0&&t._debug(`${e} failed: public key is point at infinity`),{executionGasUsed:s,returnValue:new Uint8Array};try{const _=Cn.Point.fromAffine({x:u,y:l}),b=se(i,32),w=se(a,32),G=new Uint8Array(64);G.set(b,0),G.set(w,32);const k=Cn.Signature.fromBytes(G).toBytes();return Cn.verify(k,r,_.toBytes(!1),{lowS:!1,prehash:!1})?(t._debug!==void 0&&t._debug(`${e} succeeded: signature verification passed`),{executionGasUsed:s,returnValue:Bf}):(t._debug!==void 0&&t._debug(`${e} failed: signature verification failed`),{executionGasUsed:s,returnValue:new Uint8Array})}catch(_){return t._debug!==void 0&&t._debug(`${e} failed: verification error: ${_}`),{executionGasUsed:s,returnValue:new Uint8Array}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vf=BigInt(0),Fn=BigInt(1),oa=BigInt(2),Tf=BigInt(3),ca=BigInt(6),en=BigInt("4965661367192848881"),Gf=ss(en),kf=ca*en**oa,tn={p:BigInt("0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47"),n:BigInt("0x30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001"),h:Fn,a:vf,b:Tf,Gx:Fn,Gy:BigInt(2)},sn=Ct(tn.n),da={c0:BigInt("19485874751759354771024239261021720505790618469301721065564631296452457478373"),c1:BigInt("266929791119991161246907387137283842545076965332900288569378510910307636690")},{Fp:rr,Fp2:Je,Fp6:Lf,Fp12:ue}=Qi({ORDER:tn.p,X_LEN:Gf,FP2_NONRESIDUE:[BigInt(9),Fn],Fp2mulByB:t=>Je.mul(t,da),Fp12finalExponentiate:t=>{const e=f=>ue.conjugate(ue._cyclotomicExp(f,en)),s=ue.mul(ue.conjugate(t),ue.inv(t)),n=ue.mul(ue.frobeniusMap(s,2),s),r=ue._cyclotomicSquare(e(n)),i=ue.mul(ue._cyclotomicSquare(r),r),a=e(i),o=e(ue._cyclotomicSquare(a)),c=ue.mul(ue.mul(ue.conjugate(o),a),ue.conjugate(i)),d=ue.mul(c,r);return ue.mul(ue.frobeniusMap(ue.mul(ue.conjugate(n),d),3),ue.mul(ue.frobeniusMap(c,2),ue.mul(ue.frobeniusMap(d,1),ue.mul(ue.mul(c,a),n))))}}),{G2psi:Sf,psi:Yr}=Ji(rr,Je,Je.NONRESIDUE),Rf=(t,e,s,n,r,i)=>{const a=Yr(n,r);({Rx:t,Ry:e,Rz:s}=i(t,e,s,a[0],a[1]));const o=Yr(a[0],a[1]);i(t,e,s,o[0],Je.neg(o[1]))},Pf={p:Je.ORDER,n:tn.n,h:BigInt("0x30644e72e131a029b85045b68181585e06ceecda572a2489345f2299c0f9fa8d"),a:Je.ZERO,b:da,Gx:Je.fromBigTuple([BigInt("10857046999023057135944570762232829481370756359578518086990519993285655852781"),BigInt("11559732032986387107991004021392285783925812861821192530917403151452391805634")]),Gy:Je.fromBigTuple([BigInt("8495653923123431417604973247489272438418190587263600148770280649306958101930"),BigInt("4082367875863433681332203403145435568316851327593401208105741076214120093531")])},Uf={Fp:rr,Fp2:Je,Fp6:Lf,Fp12:ue,Fr:sn},Df=Ft(tn,{Fp:rr,Fn:sn,allowInfinityPoint:!0}),Mf=Ft(Pf,{Fp:Je,Fn:sn,allowInfinityPoint:!0,isTorsionFree:(t,e)=>e.multiplyUnsafe(kf).equals(Sf(t,e))}),Hf={ateLoopSize:en*ca+oa,r:sn.ORDER,xNegative:!1,twistType:"divisive",postPrecompute:Rf},Pe=Xi(Uf,Df,Mf,Hf),fa=new Uint8Array(64),Ff=new Uint8Array(128),ft=64,We=32,Vf=128,$f=new Uint8Array(32),qf=De(new Uint8Array(31),ke("0x01"));function Os(t){if(pe(t,fa)===!0)return Pe.G1.Point.ZERO;const e=z(t.subarray(0,We)),s=z(t.subarray(We,ft)),n=Pe.G1.Point.fromAffine({x:e,y:s});return n.assertValidity(),n}function Kr(t){const e=se(oe(t.x),We),s=se(oe(t.y),We);return De(e,s)}function Xr(t,e){if(z(t)>=Pe.fields.Fp2.ORDER)throw new p(p.errorMessages.BN254_FP_NOT_IN_FIELD);if(z(e)>=Pe.fields.Fp2.ORDER)throw new p(p.errorMessages.BN254_FP_NOT_IN_FIELD);const s=De(t,e);return Pe.fields.Fp2.fromBytes(s)}function zf(t){if(pe(t,Ff)===!0)return Pe.G2.Point.ZERO;const e=t.subarray(0,We),s=t.subarray(We,We*2),n=We*2,r=t.subarray(n,n+We),i=t.subarray(n+We,n+We*2);for(const d of[s,e,i,r]){const f=z(d);if(Pe.fields.Fp.create(f)!==f)throw new p(p.errorMessages.BN254_FP_NOT_IN_FIELD)}const a=Xr(s,e),o=Xr(i,r),c=Pe.G2.Point.fromAffine({x:a,y:o});return c.assertValidity(),c}class Wf{add(e){const s=Os(e.slice(0,ft)),n=Os(e.slice(ft,ft*2));return Kr(s.add(n).toAffine())}mul(e){const s=Os(e.slice(0,ft)),n=Pe.fields.Fr.create(z(e.slice(ft,96)));return n===g?fa:Kr(s.multiply(n).toAffine())}pairing(e){const n=[];for(let i=0;i<e.length/192;i++){const a=192*i,o=Os(e.subarray(a,a+ft)),c=a+ft,d=zf(e.subarray(c,c+Vf));o===Pe.G1.Point.ZERO||d===Pe.G2.Point.ZERO||n.push({g1:o,g2:d})}const r=Pe.pairingBatch(n);return Pe.fields.Fp12.eql(r,Pe.fields.Fp12.ONE)===!0?qf:$f}}const ge={EIP:"eip",Hardfork:"hardfork"},Ie="00000000000000000000000000000000000000",ua=[{address:Ie+"01",check:{type:ge.Hardfork,param:y.Chainstart},precompile:zd,name:"ECRECOVER (0x01)"},{address:Ie+"02",check:{type:ge.Hardfork,param:y.Chainstart},precompile:Wd,name:"SHA256 (0x02)"},{address:Ie+"03",check:{type:ge.Hardfork,param:y.Chainstart},precompile:ef,name:"RIPEMD160 (0x03)"},{address:Ie+"04",check:{type:ge.Hardfork,param:y.Chainstart},precompile:tf,name:"IDENTITY (0x04)"},{address:Ie+"05",check:{type:ge.Hardfork,param:y.Byzantium},precompile:lf,name:"MODEXP (0x05)"},{address:Ie+"06",check:{type:ge.Hardfork,param:y.Byzantium},precompile:hf,name:"BN254_ADD (0x06)"},{address:Ie+"07",check:{type:ge.Hardfork,param:y.Byzantium},precompile:mf,name:"BN254_MUL (0x07)"},{address:Ie+"08",check:{type:ge.Hardfork,param:y.Byzantium},precompile:pf,name:"BN254_PAIRING (0x08)"},{address:Ie+"09",check:{type:ge.Hardfork,param:y.Istanbul},precompile:xf,name:"BLAKE2f (0x09)"},{address:Ie+"0a",check:{type:ge.EIP,param:4844},precompile:id,name:"KZG_POINT_EVALUATION (0x0a)"},{address:Ie+"0b",check:{type:ge.EIP,param:2537},precompile:Hd,name:"BLS12_G1ADD (0x0b)"},{address:Ie+"0c",check:{type:ge.EIP,param:2537},precompile:Fd,name:"BLS12_G1MSM (0x0c)"},{address:Ie+"0d",check:{type:ge.EIP,param:2537},precompile:Vd,name:"BLS12_G2ADD (0x0d)"},{address:Ie+"0e",check:{type:ge.EIP,param:2537},precompile:$d,name:"BLS12_G2MSM (0x0e)"},{address:Ie+"0f",check:{type:ge.EIP,param:2537},precompile:qd,name:"BLS12_PAIRING (0x0f)"},{address:Ie+"10",check:{type:ge.EIP,param:2537},precompile:Ef,name:"BLS12_MAP_FP_TO_G1 (0x10)"},{address:Ie+"11",check:{type:ge.EIP,param:2537},precompile:yf,name:"BLS12_MAP_FP_TO_G2 (0x11)"},{address:"0000000000000000000000000000000000000100",check:{type:ge.EIP,param:7951},precompile:Of,name:"P256VERIFY (0x100)"}];function $s(t,e){const s=new Map;if(e)for(const n of e)s.set(Te(n.address.bytes),"function"in n?n.function:void 0);for(const n of ua){if(s.has(n.address))continue;(n.check.type===ge.Hardfork&&t.gteHardfork(n.check.param)||n.check.type===ge.EIP&&t.isActivatedEIP(n.check.param))&&s.set(n.address,n.precompile)}return s}function xe(t){t.length<40&&(t=t.padStart(40,"0"));for(const e of ua)if(e.address===t)return e.name;return""}class Zf{constructor(){this._storage=new Map,this._changeJournal=[],this._indices=[0]}get(e,s){const n=this._storage.get(e.toString());if(!n)return new Uint8Array(32);const r=n.get(j(s));return r||new Uint8Array(32)}put(e,s,n){if(s.length!==32)throw N("Transient storage key must be 32 bytes long");if(n.length>32)throw N("Transient storage value cannot be longer than 32 bytes");const r=e.toString();this._storage.has(r)||this._storage.set(r,new Map);const i=this._storage.get(r),a=j(s),o=i.get(a)??new Uint8Array(32);this._changeJournal.push({addr:r,key:a,prevValue:o}),i.set(a,n)}commit(){if(this._indices.length===0)throw N("Nothing to commit");this._indices.pop()}checkpoint(){this._indices.push(this._changeJournal.length)}revert(){const e=this._indices.pop();if(typeof e>"u")throw N("Nothing to revert");for(let s=this._changeJournal.length-1;s>=e;s--){const{key:n,prevValue:r,addr:i}=this._changeJournal[s];this._storage.get(i).set(n,r)}this._changeJournal.splice(e,this._changeJournal.length-e)}toJSON(){const e={};for(const[s,n]of this._storage.entries()){e[s]={};for(const[r,i]of n.entries())e[s][r]=j(i)}return e}clear(){this._storage=new Map,this._changeJournal=[]}}var jf={};const ie=Nt("evm:evm"),Ke=Nt("evm:gas"),Yf=Nt("evm:precompiles");function re(t){return{returnValue:new Uint8Array(0),executionGasUsed:t,exceptionError:new p(p.errorMessages.OUT_OF_GAS)}}function Kf(t){return{returnValue:new Uint8Array(0),executionGasUsed:t,exceptionError:new p(p.errorMessages.CODESTORE_OUT_OF_GAS)}}function Jr(t){return{returnValue:new Uint8Array(0),executionGasUsed:t,exceptionError:new p(p.errorMessages.INVALID_BYTECODE_RESULT)}}function Xf(t){return{returnValue:new Uint8Array(0),executionGasUsed:t,exceptionError:new p(p.errorMessages.CODESIZE_EXCEEDS_MAXIMUM)}}function Q(t,e){return{returnValue:new Uint8Array(0),executionGasUsed:e,exceptionError:t}}function Nn(){return{header:{number:g,coinbase:st(),timestamp:g,difficulty:g,prevRandao:new Uint8Array(32),gasLimit:g,baseFeePerGas:void 0,getBlobGasPrice:()=>{}}}}class is{get precompiles(){return this._precompiles}get opcodes(){return this._opcodes}constructor(e){if(this.DEBUG=!1,this.common=e.common,this.blockchain=e.blockchain,this.stateManager=e.stateManager,this.common.isActivatedEIP(7864)){const n=["checkChunkWitnessPresent"];for(const r of n)if(!(r in this.stateManager))throw N(`State manager used must implement ${r} if Binary Trees (EIP-7864) is activated`)}this.events=new Pn,this._optsCached=e;const s=[663,1153,1559,2537,2565,2718,2929,2930,2935,3198,3529,3540,3541,3607,3651,3670,3855,3860,4200,4399,4750,4788,4844,4895,5133,5450,5656,6110,6206,6780,7002,7069,7251,7480,7516,7594,7620,7685,7691,7692,7698,7702,7709,7823,7825,7934,7939,7951];for(const n of this.common.eips())if(!s.includes(n))throw N(`EIP-${n} is not supported by the EVM`);if(!is.supportedHardforks.includes(this.common.hardfork()))throw N(`Hardfork ${this.common.hardfork()} not set as supported in supportedHardforks`);this.common.updateParams(e.params??nd),this.allowUnlimitedContractSize=e.allowUnlimitedContractSize??!1,this.allowUnlimitedInitCodeSize=e.allowUnlimitedInitCodeSize??!1,this._customOpcodes=e.customOpcodes,this._customPrecompiles=e.customPrecompiles,this.journal=new sd(this.stateManager,this.common),this.transientStorage=new Zf,this.common.events.on("hardforkChanged",()=>{this.getActiveOpcodes(),this._precompiles=$s(this.common,this._customPrecompiles)}),this.getActiveOpcodes(),this._precompiles=$s(this.common,this._customPrecompiles),this.common.isActivatedEIP(2537)&&(this._bls=e.bls??new Dd,this._bls.init?.()),this._bn254=e.bn254,this._emit=async(n,r)=>{const i=this.events.listeners(n);for(const a of i)a.length===2?await new Promise(o=>{a(r,o)}):a(r)},this.performanceLogger=new kc,this.DEBUG=typeof window>"u"?jf?.DEBUG?.includes("ethjs")??!1:!1}getActiveOpcodes(){const e=Jc(this.common,this._customOpcodes);return this._opcodes=e.opcodes,this._dynamicGasHandlers=e.dynamicGasHandlers,this._handlers=e.handlers,this._opcodeMap=e.opcodeMap,e.opcodes}async _executeCall(e){let s=e.gasLimit;const n=e.caller;if(this.common.isActivatedEIP(7864)){if(e.accessWitness===void 0)throw N("accessWitness is required for EIP-7864");const d=e.value!==g;if(e.depth===0){const u=e.accessWitness.readAccountHeader(n);Ke(`originAccessGas=${u} waived off for origin at depth=0`);let l=e.accessWitness.readAccountCodeHash(e.to);d?l+=e.accessWitness.writeAccountBasicData(e.to):l+=e.accessWitness.readAccountBasicData(e.to),Ke(`destAccessGas=${l} waived off for target at depth=0`)}let f=e.accessWitness.readAccountBasicData(e.to);if(d&&(f+=e.accessWitness.writeAccountBasicData(e.to)),s-=f,s<g)return this.DEBUG&&Ke(`callAccessGas charged(${f}) caused OOG (-> ${s})`),e.accessWitness.revert(),{execResult:re(e.gasLimit)};this.DEBUG&&Ke(`callAccessGas used (${f} gas (-> ${s}))`),e.accessWitness.commit()}let r=await this.stateManager.getAccount(n);r||(r=new Re);let i;if(!e.delegatecall)try{await this._reduceSenderBalance(r,e)}catch(d){i=d}let a=await this.stateManager.getAccount(e.to);if(!a){if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){const d=e.accessWitness.readAccountHeader(e.to);if(s-=d,s<g)return this.DEBUG&&Ke(`Proof of absence access charged(${d}) caused OOG (-> ${s})`),e.accessWitness?.revert(),{execResult:re(e.gasLimit)};this.DEBUG&&Ke(`Proof of absence access used (${d} gas (-> ${s}))`),e.accessWitness?.commit()}a=new Re}if(!e.delegatecall)try{await this._addToBalance(a,e)}catch(d){i=d}await this._loadCode(e);let o=!1;if((!e.code||typeof e.code!="function"&&e.code.length===0)&&(o=!0,this.DEBUG&&ie("Exit early on no code (CALL)")),i!==void 0&&(o=!0,this.DEBUG&&ie("Exit early on value transfer overflowed (CALL)")),o)return{execResult:{gasRefund:e.gasRefund,executionGasUsed:e.gasLimit-s,exceptionError:i,returnValue:new Uint8Array(0)}};let c;if(e.isCompiled){let d,f,u;this._optsCached.profiler?.enabled===!0&&(u=Te(e.codeAddress.bytes),u=xe(u)??u.slice(20),this.performanceLogger.hasTimer()&&(f=this.performanceLogger.pauseTimer()),d=this.performanceLogger.startTimer(u)),c=await this.runPrecompile(e.code,e.data,s),this._optsCached.profiler?.enabled===!0&&(this.performanceLogger.stopTimer(d,Number(c.executionGasUsed),"precompiles"),f!==void 0&&this.performanceLogger.unpauseTimer(f)),c.gasRefund=e.gasRefund}else this.DEBUG&&ie("Start bytecode processing..."),c=await this.runInterpreter({codeAddress:e.codeAddress,...e,gasLimit:s});return e.depth===0&&this.postMessageCleanup(),c.executionGasUsed+=e.gasLimit-s,{execResult:c}}async _executeCreate(e){let s=e.gasLimit;const n=e.caller;if((this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864))&&e.depth===0){const m=e.accessWitness.readAccountHeader(n);Ke(`originAccessGas=${m} waived off for origin at depth=0`)}let r=await this.stateManager.getAccount(e.caller);if(r||(r=new Re),await this._reduceSenderBalance(r,e),this.common.isActivatedEIP(3860)&&e.data.length>Number(this.common.param("maxInitCodeSize"))&&!this.allowUnlimitedInitCodeSize)return{createdAddress:e.to,execResult:{returnValue:new Uint8Array(0),exceptionError:new p(p.errorMessages.INITCODE_SIZE_VIOLATION),executionGasUsed:e.gasLimit}};e.code=e.data,e.data=e.eofCallData??new Uint8Array,e.to=await this._generateAddress(e),this.common.isActivatedEIP(6780)&&e.createdAddresses.add(e.to.toString()),this.DEBUG&&ie(`Generated CREATE contract address ${e.to}`);let i=await this.stateManager.getAccount(e.to);if(i||(i=new Re),this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){const m=e.accessWitness.writeAccountBasicData(e.to)+e.accessWitness.readAccountCodeHash(e.to);if(s-=m,s<g)return this.DEBUG&&(Ke(`ContractCreateInit charge(${m}) caused OOG (-> ${s})`),e.accessWitness?.revert()),{execResult:re(e.gasLimit)};this.DEBUG&&Ke(`ContractCreateInit charged (${m} gas (-> ${s}))`),e.accessWitness?.commit()}if(i.nonce&&i.nonce>g||pe(i.codeHash,Kt)!==!0||pe(i.storageRoot,Ri)!==!0)return this.DEBUG&&ie("Returning on address collision"),{createdAddress:e.to,execResult:{returnValue:new Uint8Array(0),exceptionError:new p(p.errorMessages.CREATE_COLLISION),executionGasUsed:e.gasLimit}};await this.journal.putAccount(e.to,i),await this.stateManager.clearStorage(e.to);const a={address:e.to,code:e.code};await this._emit("newContract",a),i=await this.stateManager.getAccount(e.to),i||(i=new Re),this.common.gteHardfork(y.SpuriousDragon)&&(i.nonce+=Y);let o;try{await this._addToBalance(i,e)}catch(m){o=m}let c=!1;if((e.code===void 0||typeof e.code!="function"&&e.code.length===0)&&(c=!0,this.DEBUG&&ie("Exit early on no code (CREATE)")),o!==void 0&&(c=!0,this.DEBUG&&ie("Exit early on value transfer overflowed (CREATE)")),c){if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){const m=e.accessWitness.writeAccountHeader(e.to);if(s-=m,s<g)return this.DEBUG&&ie(`ContractCreateComplete access gas (${m}) caused OOG (-> ${s})`),e.accessWitness?.revert(),{execResult:re(e.gasLimit)};this.DEBUG&&ie(`ContractCreateComplete access used (${m}) gas (-> ${s})`),e.accessWitness?.commit()}return{createdAddress:e.to,execResult:{executionGasUsed:e.gasLimit-s,gasRefund:e.gasRefund,exceptionError:o,returnValue:new Uint8Array(0)}}}this.DEBUG&&ie("Start bytecode processing...");let d=await this.runInterpreter({...e,gasLimit:s,isCreate:!0});d.executionGasUsed+=e.gasLimit-s;let f=d.executionGasUsed,u=g;!d.exceptionError&&!this.common.isActivatedEIP(6800)&&(u=BigInt(d.returnValue.length)*BigInt(this.common.param("createDataGas")),f=f+u,this.DEBUG&&Ke(`Add return value size fee (${u} to gas used (-> ${f}))`));let l=!0;!d.exceptionError&&this.common.gteHardfork(y.SpuriousDragon)&&d.returnValue.length>Number(this.common.param("maxCodeSize"))&&(l=!1);let h=!1;if(f<=e.gasLimit&&(this.allowUnlimitedContractSize||l)?this.common.isActivatedEIP(3541)&&d.returnValue[0]===js?this.common.isActivatedEIP(3540)?_t(e.code)?d.executionGasUsed=f:d={...d,...Jr(e.gasLimit)}:d={...d,...Jr(e.gasLimit)}:d.executionGasUsed=f:this.common.gteHardfork(y.Homestead)?l?(this.DEBUG&&ie("Contract creation: out of gas"),e.accessWitness?.revert(),d={...d,...re(e.gasLimit)}):(this.DEBUG&&ie("Code size exceeds maximum code size (>= SpuriousDragon)"),d={...d,...Xf(e.gasLimit)}):f-u<=e.gasLimit?(this.DEBUG&&ie("Not enough gas to pay the code deposit fee (Frontier)"),e.accessWitness?.revert(),d={...d,...Kf(f-u)},h=!0):(this.DEBUG&&ie("Contract creation: out of gas"),e.accessWitness?.revert(),d={...d,...re(e.gasLimit)}),s=e.gasLimit-d.executionGasUsed,!d.exceptionError&&(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864))){const m=e.accessWitness.writeAccountHeader(e.to);s-=m,s<g?(this.DEBUG&&ie(`ContractCreateComplete access gas (${m}) caused OOG (-> ${s})`),e.accessWitness?.revert(),d={...d,...re(e.gasLimit)}):(ie(`ContractCreateComplete access used (${m}) gas (-> ${s})`),d.executionGasUsed+=m)}if(!d.exceptionError&&d.returnValue!==void 0&&d.returnValue.length!==0){if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){const m=e.accessWitness.writeAccountCodeChunks(e.to,0,d.returnValue.length-1);s-=m,s<g?(this.DEBUG&&ie(`byteCodeWrite access gas (${m}) caused OOG (-> ${s})`),e.accessWitness?.revert(),d={...d,...re(e.gasLimit)}):(ie(`byteCodeWrite access used (${m}) gas (-> ${s})`),e.accessWitness?.commit(),d.executionGasUsed+=m)}await this.stateManager.putCode(e.to,d.returnValue),this.DEBUG&&ie("Code saved on new contract creation")}else if(h&&!this.common.gteHardfork(y.Homestead)){const m=await this.stateManager.getAccount(e.to);await this.journal.putAccount(e.to,m??new Re)}return e.depth===0&&this.postMessageCleanup(),{createdAddress:e.to,execResult:d}}async runInterpreter(e,s={}){let n=await this.stateManager.getAccount(e.to??st());n||(n=new Re);const r={address:e.to??st(),caller:e.caller??st(),callData:e.data??Uint8Array.from([0]),callValue:e.value??g,code:e.code,isStatic:e.isStatic??!1,isCreate:e.isCreate??!1,depth:e.depth??0,gasPrice:this._tx.gasPrice,origin:this._tx.origin??e.caller??st(),block:this._block??Nn(),contract:n,codeAddress:e.codeAddress,gasRefund:e.gasRefund,chargeCodeAccesses:e.chargeCodeAccesses,blobVersionedHashes:e.blobVersionedHashes??[],accessWitness:e.accessWitness,createdAddresses:e.createdAddresses},i=new ed(this,this.stateManager,this.blockchain,r,e.gasLimit,this.journal,this.performanceLogger,this._optsCached.profiler);e.selfdestruct&&(i._result.selfdestruct=e.selfdestruct),e.createdAddresses&&(i._result.createdAddresses=e.createdAddresses);const a=await i.run(e.code,s);let o=i._result,c=e.gasLimit-a.runState.gasLeft;return a.exceptionError&&(a.exceptionError.error!==p.errorMessages.REVERT&&a.exceptionError.error!==p.errorMessages.INVALID_EOF_FORMAT&&(c=e.gasLimit),o={...o,logs:[],selfdestruct:new Set,createdAddresses:new Set}),e.accessWitness?.commit(),{...o,runState:{...a.runState,...o,...i._env},exceptionError:a.exceptionError,gas:a.runState?.gasLeft,executionGasUsed:c,gasRefund:a.runState.gasRefund,returnValue:o.returnValue??new Uint8Array(0)}}async runCall(e){let s;(e.depth===0||e.message===void 0)&&this._optsCached.profiler?.enabled===!0&&(s=this.performanceLogger.startTimer("Initialization"));let n=e.message,r;if(!n){this._block=e.block??Nn();const o=e.caller??st();this._tx={gasPrice:e.gasPrice??g,origin:e.origin??o};const c=e.value??g;e.skipBalance===!0&&(r=await this.stateManager.getAccount(o),r||(r=new Re),r.balance<c&&(r.balance=c,await this.journal.putAccount(o,r))),n=new xt({caller:o,gasLimit:e.gasLimit??BigInt(16777215),to:e.to,value:c,data:e.data,code:e.code,depth:e.depth,isCompiled:e.isCompiled,isStatic:e.isStatic,salt:e.salt,selfdestruct:e.selfdestruct??new Set,createdAddresses:e.createdAddresses??new Set,delegatecall:e.delegatecall,blobVersionedHashes:e.blobVersionedHashes})}n.depth===0&&(r||(r=await this.stateManager.getAccount(n.caller)),r||(r=new Re),r.nonce++,await this.journal.putAccount(n.caller,r),this.DEBUG&&ie(`Update fromAccount (caller) nonce (-> ${r.nonce}))`)),await this._emit("beforeMessage",n),!n.to&&this.common.isActivatedEIP(2929)&&(n.code=n.data,this.journal.addWarmedAddress((await this._generateAddress(n)).bytes)),await this.journal.checkpoint(),this.common.isActivatedEIP(1153)&&this.transientStorage.checkpoint(),this.DEBUG&&(ie("-".repeat(100)),ie("message checkpoint"));let i;if(this.DEBUG){const{caller:o,gasLimit:c,to:d,value:f,delegatecall:u}=n;ie(`New message caller=${o} gasLimit=${c} to=${d?.toString()??"none"} value=${f} delegatecall=${u?"yes":"no"}`)}if(n.to?(this.DEBUG&&ie(`Message CALL execution (to: ${n.to})`),i=await this._executeCall(n)):(this.DEBUG&&ie("Message CREATE execution (to: undefined)"),i=await this._executeCreate(n)),this.DEBUG){const{executionGasUsed:o,exceptionError:c,returnValue:d}=i.execResult;ie(`Received message execResult: [ gasUsed=${o} exceptionError=${c?`'${c.error}'`:"none"} returnValue=${$n(d)} gasRefund=${i.execResult.gasRefund??0} ]`)}const a=i.execResult.exceptionError;return a&&a.error!==p.errorMessages.CODESTORE_OUT_OF_GAS&&(i.execResult.selfdestruct=new Set,i.execResult.createdAddresses=new Set,i.execResult.gasRefund=g),a&&!(this.common.hardfork()===y.Chainstart&&a.error===p.errorMessages.CODESTORE_OUT_OF_GAS)?(i.execResult.logs=[],await this.journal.revert(),this.common.isActivatedEIP(1153)&&this.transientStorage.revert(),this.DEBUG&&ie("message checkpoint reverted")):(await this.journal.commit(),this.common.isActivatedEIP(1153)&&this.transientStorage.commit(),this.DEBUG&&ie("message checkpoint committed")),await this._emit("afterMessage",i),n.depth===0&&this._optsCached.profiler?.enabled===!0&&this.performanceLogger.stopTimer(s,0),n.accessWitness?.commit(),i}async runCode(e){this._block=e.block??Nn(),this._tx={gasPrice:e.gasPrice??g,origin:e.origin??e.caller??st()};const s=new xt({code:e.code,data:e.data,gasLimit:e.gasLimit??BigInt(16777215),to:e.to??st(),caller:e.caller,value:e.value,depth:e.depth,selfdestruct:e.selfdestruct??new Set,isStatic:e.isStatic,blobVersionedHashes:e.blobVersionedHashes});return this.runInterpreter(s,{pc:e.pc})}getPrecompile(e){return this.precompiles.get(Te(e.bytes))}runPrecompile(e,s,n){if(typeof e!="function")throw N("Invalid precompile");const r={data:s,gasLimit:n,common:this.common,_EVM:this,_debug:this.DEBUG?Yf:void 0,stateManager:this.stateManager};return e(r)}async _loadCode(e){if(!e.code){const s=this.getPrecompile(e.codeAddress);if(s)e.code=s,e.isCompiled=!0;else{if(e.code=await this.stateManager.getCode(e.codeAddress),this.common.isActivatedEIP(7702)&&pe(e.code.slice(0,3),ji)){const n=new gt(e.code.slice(3,24));e.code=await this.stateManager.getCode(n),e.depth===0&&this.journal.addAlwaysWarmAddress(n.toString())}e.isCompiled=!1,e.chargeCodeAccesses=!0}}}async _generateAddress(e){let s;if(e.salt)s=Vo(e.caller.bytes,e.salt,e.code);else{let n=await this.stateManager.getAccount(e.caller);n||(n=new Re);const r=n.nonce-Y;s=Fo(e.caller.bytes,oe(r))}return new gt(s)}async _reduceSenderBalance(e,s){if(e.balance-=s.value,e.balance<g)throw new p(p.errorMessages.INSUFFICIENT_BALANCE);const n=this.journal.putAccount(s.caller,e);return this.DEBUG&&ie(`Reduced sender (${s.caller}) balance (-> ${e.balance})`),n}async _addToBalance(e,s){const n=e.balance+s.value;if(n>Eo)throw new p(p.errorMessages.VALUE_OVERFLOW);e.balance=n,await this.journal.putAccount(s.to,e),this.DEBUG&&ie(`Added toAccount (${s.to}) balance (-> ${e.balance})`)}postMessageCleanup(){this.common.isActivatedEIP(1153)&&this.transientStorage.clear()}shallowCopy(){const e=this.common.copy();e.setHardfork(this.common.hardfork());const s={...this._optsCached,common:e,stateManager:this.stateManager.shallowCopy()};return s.stateManager.common=e,new is(s)}getPerformanceLogs(){return this.performanceLogger.getLogs()}clearPerformanceLogs(){this.performanceLogger.clear()}}is.supportedHardforks=[y.Chainstart,y.Homestead,y.Dao,y.TangerineWhistle,y.SpuriousDragon,y.Byzantium,y.Constantinople,y.Petersburg,y.Istanbul,y.MuirGlacier,y.Berlin,y.London,y.ArrowGlacier,y.GrayGlacier,y.MergeNetsplitBlock,y.Paris,y.Shanghai,y.Cancun,y.Prague,y.Osaka,y.Bpo1,y.Bpo2,y.Bpo3,y.Bpo4,y.Bpo5];Nt("evm:binaryTree:aw");BigInt(1900);BigInt(200);BigInt(3e3);BigInt(500);BigInt(6200);class Jf{constructor(e){this.map=new Map,this.getStorage=e}async get(e,s){const n=Te(e.bytes),r=this.map.get(n);if(r!==void 0){const a=Te(s),o=r.get(a);if(o!==void 0)return o}const i=await this.getStorage(e,s);return this.put(e,s,i),i}put(e,s,n){const r=Te(e.bytes);let i=this.map.get(r);i===void 0&&(i=new Map,this.map.set(r,i));const a=Te(s);i.has(a)===!1&&i.set(a,n)}clear(){this.map=new Map}}async function Qf(t,e,s){const n=await t.getAccount(e)??new Re;if(n.nonce=s.nonce??n.nonce,n.balance=s.balance??n.balance,n.storageRoot=s.storageRoot??n.storageRoot,n.codeHash=s.codeHash??n.codeHash,n.codeSize=s.codeSize??n.codeSize,t._debug!==void 0)for(const[r,i]of Object.entries(s))t._debug(`modifyAccountFields address=${e.toString()} ${r}=${i instanceof Uint8Array?j(i):i} `);await t.putAccount(e,n)}class ir{constructor(e={}){this.accountStack=[],this.codeStack=[],this.storageStack=[],this.checkpointSync(),this.originalStorageCache=new Jf(this.getStorage.bind(this)),this.common=e.common}topAccountStack(){return this.accountStack[this.accountStack.length-1]}topCodeStack(){return this.codeStack[this.codeStack.length-1]}topStorageStack(){return this.storageStack[this.storageStack.length-1]}checkpointSync(){const e=new Map(this.topAccountStack());for(const[s,n]of e){const r=n!==void 0?Object.assign(Object.create(Object.getPrototypeOf(n)),n):void 0;e.set(s,r)}this.accountStack.push(e),this.codeStack.push(new Map(this.topCodeStack())),this.storageStack.push(new Map(this.topStorageStack()))}async getAccount(e){return this.topAccountStack().get(e.toString())}async putAccount(e,s){this.topAccountStack().set(e.toString(),s)}async deleteAccount(e){this.topAccountStack().set(e.toString(),void 0)}async modifyAccountFields(e,s){await Qf(this,e,s)}async getCode(e){return this.topCodeStack().get(e.toString())??new Uint8Array(0)}async putCode(e,s){this.topCodeStack().set(e.toString(),s),await this.getAccount(e)===void 0&&await this.putAccount(e,new Re),await this.modifyAccountFields(e,{codeHash:(this.common?.customCrypto.keccak256??rt)(s)})}async getCodeSize(e){return(await this.getCode(e)).length}async getStorage(e,s){return this.topStorageStack().get(`${e.toString()}_${j(s)}`)??new Uint8Array(0)}async putStorage(e,s,n){this.topStorageStack().set(`${e.toString()}_${j(s)}`,n)}async clearStorage(){}async checkpoint(){this.checkpointSync()}async commit(){this.accountStack.splice(-2,1),this.codeStack.splice(-2,1),this.storageStack.splice(-2,1)}async revert(){this.accountStack.pop(),this.codeStack.pop(),this.storageStack.pop()}async flush(){}clearCaches(){}shallowCopy(){const e=new ir({common:this.common});for(let s=0;s<this.accountStack.length;s++)e.accountStack.push(new Map(this.accountStack[s])),e.codeStack.push(new Map(this.codeStack[s])),e.storageStack.push(new Map(this.storageStack[s]));return e}getStateRoot(){throw N("Method not implemented.")}setStateRoot(){throw N("Method not implemented.")}hasStateRoot(){throw N("Method not implemented.")}}async function Qr(t){const e=t??{};return e.bn254=new Wf,e.common===void 0&&(e.common=new Dn({chain:Rn})),e.blockchain===void 0&&(e.blockchain=new qc),e.stateManager===void 0&&(e.stateManager=new ir),new is(e)}const eu=(t,e)=>{const s=[];return t.substring(0,2)==="0x"&&s.push("Enter without 0x-prefix"),e!==void 0&&t.length!==Number(e)*2&&s.push(`${Number(e)} bytes expected (${t.length/2} bytes provided)`),ii(`0x${t}`)||s.push("Hex value invalid"),s},tu=(t,e,s)=>ai(`0x${t.value.substring(e,s)}`),uu=(t,e)=>Gs(t).substring(2).padStart(e,"0"),lu=t=>t.length%2===0?t:`0${t}`,hu=(t,e,s,n)=>{let r=0;for(let i=0;i<e.value.length;i++){const a=r+Number(n.value[i])*2;e.value[i]=t.value.substring(r,a),s.value[i]!==void 0&&(s.value[i]=tu(t,r,a)),r=a}},mu=(t,e,s,n)=>{for(let r=0;r<t.value.length;r++)s.value[r]===void 0?n.value[r]=BigInt(ke(`0x${t.value[r]}`).byteLength):n.value[r]=s.value[r],e.value[r]!==void 0&&(e.value[r]=ai(`0x${t.value[r]}`))},pu=t=>{let e="";for(let s=1;s<=t;s++)e+=s.toString().substring(0,2).padStart(2,"0");return e},su={class:"value-input-{{ num }} border-blue-900 border-t-1 bg-clip-border pt-1.5 pb-0.5 pl-0.5 pr-0.5 mb-0.5"},nu={class:"grid grid-cols-6 items-center"},ru={class:"font-bold text-xl col-span-1 text-blue-900"},iu={class:"group relative col-span-5"},au={class:"col-span-1 text-xs"},ou={class:"text-right font-mono col-span-5 text-xs mt-0.5 break-words w-full overflow-hidden"},gu=ei({__name:"PrecompileValueInput",props:ti({title:{},input:{type:Function},len:{},expectedLen:{},bigIntVal:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=si(t,"modelValue"),s=t,n=nn(()=>eu(e?.value??"",s.expectedLen)),r=nn(()=>n.value.length>0?"text-red-400":"text-slate-600"),i=nn(()=>n.value.length>0?n.value.join(" | "):"");return(a,o)=>(Yt(),vs("div",su,[vt("div",nu,[vt("p",ru,Jt(a.title),1),vt("span",iu,[la(vt("input",{onInput:o[0]||(o[0]=(...c)=>a.input&&a.input(...c)),"onUpdate:modelValue":o[1]||(o[1]=c=>e.value=c),class:Ts([r.value,"text-right font-mono text-xs bg-blue-50 rounded-xs p-0.5 w-full"])},null,34),[[ma,e.value]]),ha(Ta,{tooltip:i.value},null,8,["tooltip"])]),vt("p",au,Jt(a.len)+" Bytes",1),vt("p",ou,Jt(a.bigIntVal),1)])]))}}),bu=ei({__name:"PrecompileResultC",props:ti(["title","left"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=si(t,"modelValue");return(s,n)=>(Yt(),pa(Ca,{title:t.title,left:t.left},{default:ga(()=>[e.value?(Yt(),vs("p",{key:0,class:Ts(ds(Na))},Jt(e.value?.executionGasUsed)+" Gas",3)):ba("",!0),e.value?(Yt(),vs("p",{key:1,class:Ts(ds(Oa))}," Result: "+Jt(e.value?ds(j)(e.value.returnValue):""),3)):(Yt(),vs("p",{key:2,class:Ts([ds(va),"mt-5"])},"Not available",2))]),_:1},8,["title","left"]))}});async function _u(t,e,s,n,r,i){const a=BigInt(5e6),o=new Dn({chain:Rn,hardfork:e}),c=await Qr({common:o}),d=$s(o).get(n.padStart(40,"0")),f=new Dn({chain:Rn,hardfork:s}),u=await Qr({common:f}),l=$s(f).get(n.padStart(40,"0"));if(d){const m={data:ke(`0x${t}`),gasLimit:a,common:o,_EVM:c};r.value=await d(m)}const h={data:ke(`0x${t}`),gasLimit:a,common:f,_EVM:u};i.value=await l(h)}export{y as H,gu as _,bu as a,tu as b,pu as c,hu as d,eu as i,lu as p,_u as r,uu as t,mu as v};
